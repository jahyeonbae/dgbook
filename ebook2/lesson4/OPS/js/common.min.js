/*! guide - v1.0.0 - 2017-11-21 */
function layerAclose(){$(".summarize_pop")&&$(".summarize_pop").hide(),$(".ref .title")&&$(".ref .title").removeClass("active").parent().children(".text").hide(),$(".learning_goal .learning_goal_img")&&$(".learning_goal .learning_goal_img").removeClass("active").parent().children(".learning_goal_text").hide(),$(".a_ps")&&$(".a_ps").hide(),$(".b_ps")&&$(".b_ps").hide(),$(".s_p_answer")&&$(".s_p_answer").hide()}function QSAll(e){return document.querySelectorAll(e)}function createElement(e,t,n,i,s){var o=document.createElement(e);return n!==undefined&&(o.className=n),i!==undefined&&(o.style.width=i+"px"),s!==undefined&&(o.style.height=s+"px"),t.appendChild(o),o}function QS(e){return document.querySelector(e)}function eventSelector(e,t){var n;if("eventDown"===e)switch(GameManager.event.eventSelector("eventDown")){case"mousedown":n=t;break;case"touchstart":t.preventDefault(),n=t.touches.item(0)}else if("eventMove"===e)switch(GameManager.event.eventSelector("eventMove")){case"mousemove":n=t;break;case"touchmove":n=t.touches.item(0)}else if("eventUp"===e)switch(GameManager.event.eventSelector("eventUp")){case"mouseup":n=t;break;case"touchend":n=t.changedTouches[0]}else if("eventOut"===e)switch(GameManager.event.eventSelector("eventOut")){case"mouseout":n=t;break;case"touchleave":n=t.touches.item(0)}return n}function addEvent(e,t,n){var i;switch(t){case"mousedown":i=GameManager.event.eventSelector("eventDown");break;case"mousemove":i=GameManager.event.eventSelector("eventMove");break;case"mouseup":i=GameManager.event.eventSelector("eventUp");break;case"mouseout":i=GameManager.event.eventSelector("eventOut")}return e.addEventListener(i,n,!1)}function removeEvent(e,t,n){var i;switch(t){case"mousedown":i=GameManager.event.eventSelector("eventDown");break;case"mousemove":i=GameManager.event.eventSelector("eventMove");break;case"mouseup":i=GameManager.event.eventSelector("eventUp");break;case"mouseout":i=GameManager.event.eventSelector("eventOut")}return e.removeEventListener(i,n,!1)}function soundEvent(e,t){e.addEventListener(GameManager.event.eventSelector("eventDown"),function(){efSound(t)},!1)}function initScale(e){var t=document.getElementById(e);GameManager.event.clientWidth=document.body.clientWidth,GameManager.event.clientHeight=document.body.clientHeight,GameManager.event.wrapWidth=t.clientWidth,GameManager.event.wrapHeight=t.clientHeight,GameManager.event.zoomVertical=GameManager.event.clientHeight/GameManager.event.wrapHeight*1,GameManager.event.zoomHorizontal=GameManager.event.clientWidth/GameManager.event.wrapWidth*1,parent.ZOOMVALUE==undefined&&(parent.ZOOMVALUE=1),GameManager.event.clientHeight<GameManager.event.clientWidth?GameManager.event.zoomRate=parent.ZOOMVALUE:GameManager.event.zoomRate=GameManager.event.zoomHorizontal}function AllOff(){$("video, audio").each(function(){$(this).get(0).pause(),$(this).parent().find(".play_pause_button").removeClass("pause"),$(this).parent().find(".play_pause_button").addClass("play"),$(this).parent().find(".play_pause_button").html("재생")})}function play_sound_click(){if($("audio#player-audio-click").length<1){var e="";e+='<audio id="player-audio-click">',e+='<source type="video/mp4">',e+="</audio>",$("body").append(e)}var t=$("audio#player-audio-click")[0];t.src="media/click.mp3",t.load(),t.play()}function play_sound_o(){if($("audio#player-audio-o").length<1){var e="";e+='<audio id="player-audio-o">',e+='<source type="video/mp4">',e+="</audio>",$("body").append(e)}var t=$("audio#player-audio-o")[0];t.src="media/eff_ok.mp3",t.load(),t.play()}function play_sound_x(){if($("audio#player-audio-x").length<1){var e="";e+='<audio id="player-audio-x">',e+='<source type="video/mp4">',e+="</audio>",$("body").append(e)}var t=$("audio#player-audio-x")[0];t.src="media/eff_fail.mp3",t.load(),t.play()}function chkAndroid(){for(var e=navigator.userAgent.toLowerCase(),t=new Array("android 4.0","android 4.1"),n=!1,i=0;i<t.length;i++)if(e.indexOf(t[i])>-1){n=!0;break}return n}function blind(){$(".blind").fadeIn()}function addEntry(e,t,n){"show"==e?$(t).show():"hide"==e?$(t).hide():"toggle"==e&&$(t).toggle();$(n).hide().next().show()}function reshow(e){$(e).prev().show()}function tooltip(e,t,n){t=t||"top",n=n||0,"block"==$(e).parent().find(".msg").css("display")?tolltip_out(e):$(e).parent().find(".msg").show().css({position:"absolute",left:function(){switch(t){case"top":i=$(e).outerWidth(!0)/2;return-((s=$(this).outerWidth(!0)/2)-i)+"px";case"bottom":var i=$(e).outerWidth(!0)/2,s=$(this).outerWidth(!0)/2;return-(s-i)+n+"px"}},top:function(){switch(t){case"top":return"auto";case"bottom":return $(e).outerHeight()+5+"px"}},bottom:function(){switch(t){case"top":return $(e).outerHeight()+5;case"bottom":return"auto"}}}).children("span").addClass(t).parent(".msg").addClass("animated rubberBand")}function tolltip_out(e){$(e).parent().find(".msg").hide()}function hintpopup(e,t,n,i,s,o){"table"==i?(n=$(e).parents("assessmentItem").find("modalFeedback").html(),$(".popup_ex").find(".contents span").hide(),$(".popup_ex").find(".contents div").removeClass().addClass("tables"),$(".popup_ex").find(".contents div").html(n).show()):"custom"==i?(n=$(e).parents("assessmentItem").find("modalFeedback").html(),$(".popup_ex").find(".contents span").hide(),$(".popup_ex").find(".contents div").removeClass().addClass("custom"),$(".popup_ex").find(".contents div").html(n).show()):(n=$(e).parents("assessmentItem").find("modalFeedback").html(),console.log(n),$(".popup_ex").find(".contents div").removeClass(),$(".popup_ex").find(".contents div").html(n).show()),$(".popup_ex").find(".title span").text(t),s?s&&$(".popup_ex").css("top",s):$(".popup_ex").css("top",$(e).offset().top),o&&$(".popup_ex .contents").height(o),$(".popup_ex").fadeIn()}function popclose(){$(".popup_ex").fadeOut(),$(".blaind").fadeOut()}function showContent(e,t){$(e).children("i").toggle(),$(t).toggle()}function radio_reset(e){$(e).find(".radio_chk , .radio_chk.circle").prop("checked",!1)}function CLineDrawing(e,t){function n(){var n=this;$(e).find(".question li").each(function(e,t){$(t).children("span").attr("data-role-idx",e),n.expandTouchArea(t),n.qSpotArea.push($(t).children("span").offset())}),$(e).find(".answer li").each(function(t,i){$(i).children("span").attr("data-role-idx",t),n.expandTouchArea(i),n.aSpotArea.push($(i).children("span").offset());var s=$(document.createElementNS("http://www.w3.org/2000/svg","line"));$(e).find(".answerView svg, .questionView svg").append(s)}),$(e).on(t.eventSelector("eventDown"),function(e){n.onTouchStart.call(n,e)}),$(e).on(t.eventSelector("eventMove"),function(e){n.onTouchMove.call(n,e)}),$(e).on(t.eventSelector("eventUp"),function(e){n.onTouchEnd.call(n,e)})}i=this;if(window.lineCheck=new Array,window.lineAnswerView=function(e,t){i.externalApi.call(i,e,t)},this.el=e,this.gm=t,this.qSpotArea=new Array,this.aSpotArea=new Array,this.potin_area=parseInt($(e).attr("data-rol-dotsize"))||40,this.lineGame={answer_num:[],start_idx:[],acceptList:[]},"undefined"!=typeof $(e).parents(".fpop_wrap")[0])var i=this,s=setInterval(function(){"block"==$(e).parents(".fpop_wrap").css("display")&&(n.call(i),clearInterval(s))},500);else n.call(this)}function term_dic(e,t,n){t=t||0,n=n||0;$(".wraps").width(),$(e).find(".word").width(),$(e).find(".descript").outerWidth(!0);if($(e).find(".descript").addClass("animated bounce").css({marginLeft:function(){return-$(this).innerWidth()/2+t}}),0!=t&&($(e).find(".descript").addClass("x"),$(".dicstyle").remove(),$('<style class="dicstyle" type="text/css">span.descript:after{margin-left:'+-1*t+"px;}</style>").appendTo("head")),"bottom"==n){var i=$(e).find(".descript").height();$(e).find(".descript").css({top:i/3,height:"144px"}),$(".dicstyle").remove(),$('<style class="dicstyle" type="text/css">strong.dic span.descript:after{margin-left:'+-1*t+"px; bottom:none; top:-7px; border-left:2px solid #00A75E;border-top:2px solid #00A75E; border-right:0 none; border-bottom:0 none;}</style>").appendTo("head")}var s=$(e).children(".descript").css("display");$(".dic").children(".descript").hide(),setTimeout(function(){"none"==s?$(e).children(".descript").show():"block"==s&&$(e).children(".descript").hide()},100)}function mediaInit(e){var t=document.querySelector("#vwrap").getElementsByClassName("videoWrap");AllOff(),t.length>0&&mediaType(mediaInfo[e].folder[0]),idxr=e}function mediaType(e){console.log("@ mediaControl ...");var t=document.querySelector("#vwrap"),n=t.getElementsByClassName("ani"),i=t.getElementsByClassName("videoWrap"),s=(n[0],i[0]);document.querySelector(".videoContainer")&&(document.querySelector("#playBar").value=0,document.querySelector("#vdo").currentTime=0,document.querySelector(".videoContainer").parentNode.removeChild(document.querySelector(".videoContainer")));var o=createElement("div",s,"videoContainer"),a=document.querySelector(".videoContainer");console.log(e);var r=e.split("/","3");console.log(r),a='<video style="background-color:#fff;" id="vdo" class="vdos" poster="./media/'+r[2]+'.jpg" controls="" webkit-playsinline="" playsinline="">',a+='<source src="'+e+'.mp4" type="video/mp4"></source>',a+="</video>",a+='<img class="thumImg" src="./media/'+r[2]+'.jpg" />',a+='<div class="captionBox">',a+='<div class="captionbg"></div>',a+='<div class="captionTxt"></div>',a+="</div>",a+='<div class="controlsbg">',a+='<div class="videoControls">',a+='<div id="play" class="controls"></div>',a+='<div id="stop" class="controls"></div>',a+='<div class="bar"><input id="playBar" type="range" min="0" max="100" value="0" step="1" oninput="onSeek(this.value)" onchange="onSeekRelease(this.value)"/></div>',a+='<div class="time"><span id="curtime">00:00</span> | <span id="durtime">00:00</span></div>',a+='<div id="mute" class="controls"></div>',a+='<div class="volbar"><input id="playVolume" type="range" min="0" max="100" step="1" oninput="panVolume(this.value)" onchange="panVolume(this.value)"/></div>',a+='<div class="vcaption">자막 감추기</div>',a+='<div class="fullsize">전체 화면</div>',a+="</div>",a+="</div>",o.innerHTML=a,document.querySelector(".captionBox").style.visibility="hidden",s.appendChild(o);document.querySelector("#vdo"),document.querySelector("#play");setTimeout(function(){var e=document.querySelector("#vdo"),t=document.querySelector("#play"),n=document.querySelector("#stop"),i=document.querySelector("#mute"),s=document.querySelector("#playBar"),o=document.querySelector("#playVolume"),a=document.querySelector(".fullsize"),r=document.querySelector(".vcaption");document.querySelector(".videoContainer");t.innerHTML='<img alt="" src="./img/common/vdo/btn_play.png"/>',n.innerHTML='<img alt="" src="./img/common/vdo/btn_stop.png"/>',i.innerHTML='<img alt="" src="./img/common/vdo/btn_mute.png"/>',r.innerHTML='<img alt="" src="./img/common/vdo/btn_cap.png"/>',a.innerHTML='<img alt="" src="./img/common/vdo/btn_zoom.png"/>',e.load(),e.controls=!1,e.play(),e.addEventListener("play",function(){document.querySelector(".thumImg").style.display="none",t.innerHTML='<img alt="" src="./img/common/vdo/btn_pause.png"/>'}),e.addEventListener("pause",function(){t.innerHTML='<img alt="" src="./img/common/vdo/btn_play.png"/>',blockSeek=!1}),e.addEventListener("mute",function(){i.innerHTML='<img alt="" src="./img/common/vdo/btn_mute.png"/>',blockSeek=!1}),r.addEventListener("mousedown",function(e){var t=document.querySelector(".captionBox");"visible"==t.style.visibility?(t.style.visibility="hidden",document.querySelector(".vcaption").innerHTML='<img alt="" src="./img/common/vdo/btn_cap.png"/>'):(t.style.visibility="visible",document.querySelector(".vcaption").innerHTML='<img alt="" src="./img/common/vdo/btn_cap_on.png"/>')},!1),t.addEventListener("click",function(n){e.paused?(document.querySelector(".thumImg").style.display="none",t.childNodes[0].src="./img/common/vdo/btn_pause.png",e.play(),fullFlag=!1,screenFlag=!0,blockSeek=!1,e.controls=!1,null!=QS(".fullPlay_videoWrap")&&QS(".fullPlay_videoWrap").parentNode.removeChild(QS(".fullPlay_videoWrap"))):(t.childNodes[0].src="./img/common/vdo/btn_play.png",e.pause(),blockSeek=!1)},!1),n.addEventListener("click",function(){t.childNodes[0].src="./img/common/vdo/btn_play.png",s.value=0,e.currentTime=0,e.pause(),document.querySelector(".thumImg").style.display="block",screenFlag=!1,e.controls=!1,blockSeek=!1},!1),i.addEventListener("click",function(t){o=document.querySelector("#playVolume"),0==e.muted?(e.muted=!0,i.childNodes[0].src="./img/common/vdo/btn_mute_on.png",e.volume=0,o.value="0"):(e.muted=!1,i.childNodes[0].src="./img/common/vdo/btn_mute.png",e.volume=.5,o.value="50%")},!1),a.addEventListener("click",function(t){document.querySelector(".page_1"),document.querySelector(".pageContainer"),document.querySelector(".videoWrap");e.requestFullscreen?e.fullScreenElement?(e.cancelFullScreen(),e.controls=!1):(e.requestFullscreen(),e.controls=!0):e.msRequestFullscreen?e.msFullscreenElement?(e.msExitFullscreen(),e.controls=!1):(e.msRequestFullscreen(),e.controls=!0):e.mozRequestFullScreen?e.mozFullScreenElement?(e.mozCancelFullScreen(),e.controls=!1):(e.mozRequestFullScreen(),e.controls=!0):e.webkitRequestFullscreen&&(e.webkitFullscreenElement?(e.webkitCancelFullScreen(),e.controls=!1):(e.webkitRequestFullscreen(),e.controls=!0)),setTimeout(function(){var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?"FullscreenOn":"FullscreenOff";"FullscreenOn"==t?e.controls=!0:"FullscreenOff"==t&&(e.controls=!1)},200)},!1),controlBar(),controlSliders(),document.body.addEventListener("mousedown",function(t){setTimeout(function(){var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?"FullscreenOn":"FullscreenOff";"FullscreenOn"==t?e.controls=!0:"FullscreenOff"==t&&(e.controls=!1)},200)}),document.addEventListener("webkitfullscreenchange",function(t){var n=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?"FullscreenOn":"FullscreenOff";"FullscreenOn"==n?e.controls=!0:"FullscreenOff"==n&&(e.controls=!1)}),document.addEventListener("mozfullscreenchange",function(t){var n=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?"FullscreenOn":"FullscreenOff";"FullscreenOn"==n?e.controls=!0:"FullscreenOff"==n&&(e.controls=!1)}),document.addEventListener("fullscreenchange",function(t){var n=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?"FullscreenOn":"FullscreenOff";"FullscreenOn"==n?e.controls=!0:"FullscreenOff"==n&&(e.controls=!1)})},20)}function controlBar(){var e=document.querySelector("#vdo"),t=document.querySelector("#playBar");document.querySelector("#play"),document.querySelector("#stop"),document.querySelector("#curtime");mute=document.querySelector("#mute"),caption=document.querySelector("#vcatopn"),playVolume=document.querySelector("#playVolume"),e.addEventListener("emptied",enableDisableplayBar,!1),e.addEventListener("loadeddata",enableDisableplayBar,!1),e.addEventListener("timeupdate",onTimeupdate,!1),e.addEventListener("durationchange",enableDisableplayBar,!1),e.addEventListener("durationchange",onTimeupdate,!1),t.addEventListener("mousedown",onSeek,!1),t.addEventListener("change",onSeekRelease,!1)}function enableDisableplayBar(){var e=document.querySelector("#vdo"),t=document.querySelector("#playBar");document.querySelector("#play"),document.querySelector("#stop");curtime=document.querySelector("#curtime"),durtime=document.querySelector("#durtime"),(duration=Math.round(e.duration))&&!isNaN(duration)&&(t.max=duration);var n=Math.floor(Math.round(e.currentTime)/60),i=Math.floor(Math.round(e.currentTime)-60*n),s=Math.floor(Math.round(e.duration)/60),o=Math.floor(Math.round(e.duration)-60*s);i<10&&(i="0"+i),o<10&&(o="0"+o),n<10&&(n="0"+n),s<10&&(s="0"+s),curtime.innerHTML=n+":"+i,durtime.innerHTML=s+":"+o,setTimeout(function(){var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?"FullscreenOn":"FullscreenOff";"FullscreenOn"==t?e.controls=!0:"FullscreenOff"==t&&(e.controls=!1)},200)}function onSeek(){var e=document.querySelector("#vdo"),t=document.querySelector("#playBar");document.querySelector("#play"),document.querySelector("#stop");window.requestAnimationFrame(function(){e.currentTime=t.value}),blockSeek||(blockSeek=!0,vdoWasPaused=e.paused,e.pause()),setTimeout(function(){var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?"FullscreenOn":"FullscreenOff";"FullscreenOn"==t?e.controls=!0:"FullscreenOff"==t&&(e.controls=!1)},200)}function onSeekRelease(){var e=document.querySelector("#vdo"),t=document.querySelector("#playBar"),n=document.querySelector("#play");document.querySelector("#stop");window.requestAnimationFrame(function(){e.currentTime=t.value}),vdoWasPaused||(t.max==Math.round(e.currentTime)?(n.childNodes[0].src="./img/common/vdo/btn_play.png",e.pause()):(n.childNodes[0].src="./img/common/vdo/btn_pause.png",e.oncanplaythrough=function(){e.play()})),blockSeek=!1}function onTimeupdate(){var e=document.querySelector("#vdo"),t=document.querySelector("#playBar");document.querySelector("#play"),document.querySelector("#stop");blockSeek||(t.value=e.currentTime);document.querySelectorAll(".sndTxt");for(var n=document.querySelector(".captionTxt"),i=e.currentTime,s=0;s<mediaInfo[idxr].sync.length;s++)i>=mediaInfo[idxr].sync[s][0]&&i<=mediaInfo[idxr].sync[s][1]?n.innerHTML=mediaInfo[idxr].syncText[s]:i>=mediaInfo[idxr].sync[s][1]&&(n.innerHTML="");setTimeout(function(){var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?"FullscreenOn":"FullscreenOff";"FullscreenOn"==t?e.controls=!0:"FullscreenOff"==t&&(e.controls=!1)},200)}function controlSliders(){for(var e=document.querySelector("#vdo"),t=(document.querySelector("#playBar"),document.querySelectorAll("input[type=range]")),n=document.querySelector("#play"),i=(document.querySelector(".bar"),0);i<t.length;i++){var s=document.createElement("style");s.id="s"+t[i].id,document.head.appendChild(s),t[0].addEventListener("input",function(){handleSlider(this)},!1),t[0].addEventListener("change",function(){handleSlider(this)},!1)}e.addEventListener("timeupdate",function(){handleSlider(this)},!1),e.addEventListener("ended",function(){n.childNodes[0].src="./img/common/vdo/btn_play.png",e.pause();var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?"FullscreenOn":"FullscreenOff";"FullscreenOn"==t?e.controls=!0:"FullscreenOff"==t&&(e.controls=!1)},!1)}function handleSlider(){for(var e=document.querySelector("#vdo"),t=["-webkit-slider-runnable-track"],n=document.querySelector("#playBar"),i=Math.round(n.value/n.getAttribute("max")*.99*100),s="linear-gradient(90deg,#FDD303 "+i+"%,#999 "+(i+.99)+"%)",o=(n.id,""),a=(n.values?n.values[n.value]:n.value,0);a<t.length;a++)o+="input[id=playBar]::"+t[a]+" { background: "+s+"; }";0==i&&(o=""),document.getElementById("s"+n.id).textContent=o;var r=Math.floor(Math.round(e.currentTime)/60),c=Math.floor(Math.round(e.currentTime)-60*r),l=Math.floor(Math.round(e.duration)/60),d=Math.floor(Math.round(e.duration)-60*l);c<10&&(c="0"+c),d<10&&(d="0"+d),r<10&&(r="0"+r),l<10&&(l="0"+l),curtime.innerHTML=r+":"+c,durtime.innerHTML=l+":"+d}function panVolume(e){var t=document.querySelector("#vdo");t.volume=e/100,t.volume>0?(t.muted=!1,mute.childNodes[0].src="./img/common/vdo/btn_mute.png"):(t.muted=!0,mute.childNodes[0].src="./img/common/vdo/btn_mute_on.png"),console.log("After: "+t.volume)}function zoomView(e,t,n){switch($(e).children("i").is(".fa-search-plus")?$(e).children("i").removeClass("fa-search-plus").addClass("fa-search-minus"):$(e).children("button").is(".fa-search-plus")||$(e).children("i").removeClass("fa-search-minus").addClass("fa-search-plus"),t){case"left":$(e).parent().children("img").css("left","0");break;case"right":$(e).parent().children("img").css("right","0")}switch(n){case"top":$(e).parent().children("img").css("top","0");break;case"bottom":$(e).parent().children("img").css("bottom","0")}$(e).parent().children("img").css({positison:"absolute",zindex:1e3,boxShadow:"3px 3px 10px #666",borderRadius:"10px"}).toggle(300)}function mediaPop(){layerAclose(),$(".zoom_img_wrap.a").delay(500).show(0),mediaInit(0)}function pop_vclose(){AllOff(),$(".zoom_img_wrap").hide()}function openpop(e){console.log(e),$(e).show()}function redataPop(e,t){if($(".zoom_img_wrap:not(.a)").length>0)$(".zoom_img_wrap:not(.a)").show();else{$(t).parents(".wrap").append('<div class="zoom_img_wrap" style="display:block;"></div>')}$(t).show().delay(1e3),$(t).find(".text span>span").text(e)}function audiorRead(e){var t=$(e).get(0);t.paused?t.play():t.paused||(t.pause(),t.currentTime=0)}function whSelector(e){var t=e.split("-");crossAnswerObj.target=[],$(".crossquiz td[class*="+t[0]+"]").each(function(e,t){crossAnswerObj.target.push(t)})}function crossCheck(){$(".crossquiz").parents("assessmentitem").children("modalfeedback").children("ul").each(function(e,t){if(0==$(t).index()){n=$(t).children("li").text();crossAnswer.quiz.width=n.split("")}else if(1==$(t).index()){var n=$(t).children("li").text();crossAnswer.quiz.height=n.split("")}}),$(".cross").hide().next(".btn_undo").show(),crossAnswer.user.width=[],crossAnswer.user.height=[],$(".crossquiz").find('td[class*="w"]').each(function(e,t){var n;n=$(t).attr("class"),n=qzTypeCheck(n),$.each(n[1],function(e,t){0==t.indexOf("w")&&crossAnswer.user.width.push("."+t)})}),$(".crossquiz").find('td[class*="h"]').each(function(e,t){var n;n=$(t).attr("class"),n=qzTypeCheck(n),$.each(n[1],function(e,t){0==t.indexOf("h")&&crossAnswer.user.height.push("."+t)})}),crossAnswer.user.width=crossAnswer.user.width.sort(),crossAnswer.user.height=crossAnswer.user.height.sort(),$.each(crossAnswer.quiz.width,function(e,t){$(crossAnswer.user.width[e]).children("input").val()!=t?$(crossAnswer.user.width[e]).children("input").css("color","red").val(t):$(crossAnswer.user.width[e]).children("input").css("color","blue").val(t)}),$.each(crossAnswer.quiz.height,function(e,t){var n=$(crossAnswer.user.height[e]).attr("class");"wh"!=qzTypeCheck(n)[0]&&($(crossAnswer.user.height[e]).children("input").val()!=t?$(crossAnswer.user.height[e]).children("input").css("color","red").val(t):$(crossAnswer.user.height[e]).children("input").css("color","blue").val(t))})}function crossreset(){$(".crossquiz").find("input").css("color","#000").val("")}var ipadOS=!1;-1!=navigator.appVersion.indexOf("iPad")&&(ipadOS=!0);var AndroidOS=!1;-1!=navigator.userAgent.toLowerCase().indexOf("android")&&(AndroidOS=!0);var isPc=!(0!=AndroidOS||!ipadOS),WindowsTenOS=!1;-1!=navigator.userAgent.toLowerCase().indexOf("webview")&&(WindowsTenOS=!0),$(document).ready(function(){function e(e){var t=e.offset().top,n=e.offset().left,i=e.width();parent.ZOOMVALUE==undefined&&(parent.ZOOMVALUE=1);var s=parent.ZOOMVALUE;t/=s,n/=s,posY=t>400&&t<900?"b":"t",posX=n>400?"r":"l",posArrow=posY+posX,termId=e.attr("data-term"),$.ajax({type:"GET",url:"term_list.xml",dataType:"xml",success:function(e){$(e).find("term_list").each(function(){$("term",$(this)).each(function(){term=$(this).attr("sid"),termId==term&&(tit=$(this).attr("title"),des="<div style='padding-right:9px; line-height:22px;text-align:justify;'>"+$(this).attr("des")+"</div>",asrc=$(this).attr("src"),""!=asrc?src_str="<div style='padding:5px'><img id='eee' width='280' /></div>":src_str="",$termLayer=$("<div class='term_layer' style='width:300px;'><div style='position:absolute;top:0px;left:0px;width:100%;height:30px;background-color:rgb(248, 216, 56);border-radius:3px 3px 0px 0px;'><div style='position:absolute;top:4px;left:0px;font-size:16px;height:20px;padding:3px 10px; color:#fff;'>"+tit+"</div><div style='position:absolute;top:-2px;right:5px;'><img class='termclose' src='images/common/close.png'/></div></div><span class='"+posArrow+"'></span>"+des+src_str+"</div>").appendTo("body"),$("#eee").attr("src",asrc),setTimeout(function(){termLayerHeight=$termLayer.height(),"b"==posY?termLayerTop=t-termLayerHeight-50-17:termLayerTop=t+29,"r"==posX?termLayerLeft=n+i-345+37:termLayerLeft=n-6,$termLayer.css({top:termLayerTop,left:termLayerLeft}),$(".term_layer").each(function(){$(this).on("click",function(){$(this).remove()})})},100))})})}})}$(".ibtn.study").click(function(){$(this).parent().next(".popup-type2").toggle()}),$(".popup-type1-close").click(function(){$(".popup-type2").hide()}),$(".answer_check").click(function(){$(this).index();$(this).hasClass("active")?($(this).removeClass("active"),$(this).children().next().css("display","none"),$(this).parent().find("input, textarea").each(function(){$(this).val(""),parent.API_ANNOTATION_INPUT_DELETE&&parent.API_ANNOTATION_INPUT_DELETE($(this).attr("id"))})):($(".answer_check").each(function(e){$(this).removeClass("active"),$(this).children().next().css("display","none")}),$(this).addClass("active"),$(this).children().next().css("display","block"))}),$(".term").each(function(){$(this).on("click",function(){$this=$(this),$(".term_layer").each(function(){$(this).remove()}),e($this)})}),$(".pop_wrap .pop_close").on("click",function(){window.close()}),$(".layer_wrap .layer_close").on("click",function(){$(".layer_wrap").hide()});$(".tabs.note span").on("click",function(){var e=$(this).index(),t=$(this).closest(".layer_wrap");$(this).parent().find(".tabs.note span").removeClass("active").eq(e).addClass("active"),t.find("ul.tab_layer> li").hide().eq(e).css("display","block"),t.find(".ex_anwser")&&(t.find(".ex_anwser").each(function(){$(this).removeClass("active")}),t.find(".answer_check").each(function(){(t.hasClass("s_t")||t.hasClass("m_t")||t.hasClass("s_p")||t.hasClass("dr_f"))&&$(this).html("예시답안")}))}),$(".summarize_wrap .summarize_btn").on("click",function(){layerAclose(),$(this).hasClass("active")?($(this).removeClass("active"),$(".summarize_pop").hide()):($(this).addClass("active"),$(".summarize_pop").show())}),$(".summarize_wrap .summarize_pop").on("click",function(){$(".summarize_wrap .summarize_btn").removeClass("active"),$(".summarize_pop").hide()}),$(".ref .title").on("click",function(){$(".learning_goal .learning_goal_title")&&$(".learning_goal .learning_goal_title").removeClass("active").parent().children(".learning_goal_text").hide();var e=$(this).parent().index();$(".ref .title").each(function(){$(this).parent().index()!==e&&($(this).removeClass("active"),$(this).parent().children(".text").hide())}),$(this).hasClass("active")?($(this).removeClass("active"),$(this).parent().children(".text").hide()):($(this).addClass("active"),$(this).parent().children(".text").show())}),$(".ref .text").on("click",function(){$(this).prev().removeClass("active"),$(this).hide()}),$(".learning_goal .learning_goal_title").on("click",function(){$(".ref .title")&&$(".ref .title").removeClass("active").parent().children(".text").hide(),$(this).hasClass("active")?($(this).removeClass("active"),$(this).parent().children(".learning_goal_text").hide()):($(this).addClass("active"),$(this).parent().children(".learning_goal_text").show())}),$(".learning_goal .learning_goal_text").on("click",function(){$(".learning_goal .learning_goal_img").removeClass("active"),$(".learning_goal .learning_goal_text").hide()})});var imageSlide={init:function(){for(var e=document.getElementsByClassName("slider_content"),t=0,n=e.length;t<n;t++){var i=e[t].getElementsByClassName("slider_image")[0],s=i.children,o=e[t].getElementsByClassName("slider_thumbnail")[0],a=e[t].getElementsByClassName("slide_prev_button")[0],r=e[t].getElementsByClassName("slide_next_button")[0],c=o.children;i.firstElementChild.classList.add("on");for(var l=0,d=c.length;l<d;l++)0===l&&c[l].classList.add("on"),c[l].addEventListener("mousedown",imageSlide.showImg,!1),s[l].addEventListener("touchstart",imageSlide.swipe.swiper,!1),s[l].addEventListener("touchmove",imageSlide.swipe.swiper,!1),s[l].addEventListener("touchend",imageSlide.swipe.swiper,!1);a.style.opacity="0.3",a.style.pointerEvents="none",a.addEventListener("mousedown",function(){imageSlide.buttonAction.prevImageShow.call(this.parentNode)}),r.addEventListener("mousedown",function(){imageSlide.buttonAction.nextImageShow.call(this.parentNode)})}},showImg:function(){var e=this.parentNode.parentNode.parentNode,t=parseInt(this.getAttribute("data-num")),n=e.getElementsByClassName("slider_image")[0],i=e.getElementsByClassName("slide_prev_button")[0],s=e.getElementsByClassName("slide_next_button")[0];this.parentNode.getElementsByClassName("on")[0].classList.remove("on"),this.classList.add("on"),n.getElementsByClassName("on")[0].classList.remove("on"),n.children[t-1].classList.add("on"),t===n.children.length?(s.style.opacity="0.3",s.style.pointerEvents="none",i.style.opacity="1",i.style.pointerEvents="auto"):1===t?(i.style.opacity="0.3",i.style.pointerEvents="none",s.style.opacity="1",s.style.pointerEvents="auto"):(s.style.opacity="1",s.style.pointerEvents="auto",i.style.opacity="1",i.style.pointerEvents="auto")},buttonAction:{prevImageShow:function(){console.log(this);var e=this.getElementsByClassName("slider_image")[0],t=this.getElementsByClassName("slider_thumbnail")[0],n=parseInt(t.getElementsByClassName("on")[0].getAttribute("data-num")),i=this.getElementsByClassName("slide_prev_button")[0],s=this.getElementsByClassName("slide_next_button")[0];if(1===n)return!1;e.getElementsByClassName("on")[0].classList.remove("on"),e.children[n-2].classList.add("on"),t.getElementsByClassName("on")[0].classList.remove("on"),t.children[n-2].classList.add("on"),2===n&&(i.style.opacity="0.3",i.style.pointerEvents="none",s.style.opacity="1",s.style.pointerEvents="auto")},nextImageShow:function(){var e=this.getElementsByClassName("slider_image")[0],t=this.getElementsByClassName("slider_thumbnail")[0],n=parseInt(t.getElementsByClassName("on")[0].getAttribute("data-num")),i=this.getElementsByClassName("slide_prev_button")[0],s=this.getElementsByClassName("slide_next_button")[0];if(n===e.children.length)return!1;e.getElementsByClassName("on")[0].classList.remove("on"),e.children[n].classList.add("on"),t.getElementsByClassName("on")[0].classList.remove("on"),t.children[n].classList.add("on"),n===e.children.length-1?(s.style.opacity="0.3",s.style.pointerEvents="none",i.style.opacity="1",i.style.pointerEvents="auto"):(s.style.opacity="1",s.style.pointerEvents="auto",i.style.opacity="1",i.style.pointerEvents="auto")}},swipe:{touch:null,start_x:null,start_y:null,end_x:null,end_y:null,move:!1,swiper:function(e){void 0!==e&&"undefined"!=typeof e.touches&&(imageSlide.swipe.touch=e.touches[0],"touchstart"===e.type?(imageSlide.swipe.start_x=Math.floor(imageSlide.swipe.touch.pageX),imageSlide.swipe.start_y=Math.floor(imageSlide.swipe.touch.pageY),imageSlide.swipe.move=!1):"touchmove"===e.type?(imageSlide.swipe.move=!0,imageSlide.swipe.end_x=Math.floor(imageSlide.swipe.touch.pageX),imageSlide.swipe.end_y=Math.floor(imageSlide.swipe.touch.pageY)):"touchend"===e.type&&imageSlide.swipe.move&&(imageSlide.swipe.start_x-imageSlide.swipe.end_x>0?imageSlide.buttonAction.prevImageShow.call(this.parentNode.parentNode.parentNode.parentNode):imageSlide.buttonAction.nextImageShow.call(this.parentNode.parentNode.parentNode.parentNode)))}}},GameManager={event:{isTouchDevice:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,eventSelector:function(e){var t;switch(e){case"eventDown":t=this.isTouchDevice?"touchstart":"mousedown";break;case"eventMove":t=this.isTouchDevice?"touchmove":"mousemove";break;case"eventUp":t=this.isTouchDevice?"touchend":"mouseup";break;case"eventOut":t=this.isTouchDevice?"touchleave":"mouseout"}return t}}},GameManager={event:{isTouchDevice:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,eventSelector:function(e){var t;switch(e){case"eventDown":t=this.isTouchDevice?"touchstart":"mousedown";break;case"eventMove":t=this.isTouchDevice?"touchmove":"mousemove";break;case"eventUp":t=this.isTouchDevice?"touchend":"mouseup";break;case"eventOut":t=this.isTouchDevice?"touchleave":"mouseout"}return t}}},browser_obj={borwoer_Type:["ipad","android"],browser_Check:function(){return $.each(this.os_Type,function(e,t){-1!=navigator.userAgent.toLowerCase().indexOf(t)&&(this.browser_user=t)}),this.browser_user==undefined&&(this.browser_user="webview"),this.browser_user}};$(function(){$(".input_answer").on("keyup",function(){$(this).val().length>0?($(this).parents("assessmentItem").find(".btn_undo").hide(),$(this).parents("assessmentItem").find(".btn_ex").show()):$(this).parents("assessmentItem").find(".btn_ex, .btn_undo").hide()}),$(".btn_chk").on("click",function(){$(this).next(".btn_undo").show(),$(this).hide()}),$(".btn_undo.chk").on("click",function(){$(this).hide(),$(this).prev(".btn_chk").show()}),$(".btn_ex").on("click",function(){$(this).is(".answer")?$(".popup_ex").addClass("answer"):$(this).is(".answer")||$(".popup_ex").removeClass("answer");var e=$(this).parents("assessmentItem").find("modalFeedback").text();$(".popup_ex").show().find(".contents span").text(e),$(this).hide().siblings(".btn_undo").show()}),$(".checkin input").on("click",function(){$(this).is(":checked")&&$(this).parents("itemBody").find(".btn_ex").show()}),$(".btn_undo").on("click",function(){$(this).parents("assessmentItem").find(".input_answer").val("").focus(),$(".popup_ex").show()&&$(".popup_ex").hide(),$(this).hide()}),$(".popup_close").on("click",function(){$(this).parents(".popup-text-wrap").hide(),$(".zoom_img_wrap").hide()})});var c_color="background: #222; color: #bada55",w_color="color:#bada55",e_color="color:#F00";CLineDrawing.prototype.expandTouchArea=function(e){function t(e,t){var n,i,s;switch(n=parseInt(t.children("i").css(e)),e){case"left":i=.5*t.innerWidth(),s=t.children("i").width()/2;break;case"top":i=.5*t.innerHeight(),s=t.children("i").height()/2}return n-i+s}$(e).children("span").css({backgroundColor:"rgba(0,0,0,.3)",display:"block",position:"absolute",width:this.potin_area,height:this.potin_area,left:function(){return t("left",$(this))},top:function(){return t("top",$(this))}}),$(e).find("i").css({left:"50%",top:"50%",marginLeft:function(){return Math.floor(-1*$(this).width()/2)},marginTop:function(){return Math.floor(-1*$(this).height()/2)}})},CLineDrawing.prototype.spotAreaSearch=function(e,t){var n=this,i=t.pageX||t.originalEvent.changedTouches[0].clientX,s=t.pageY||t.originalEvent.changedTouches[0].clientY;$.each(this.qSpotArea,function(t,o){var a=$(n.el).find(".question li:eq("+t+")").children("span").width();a*=zoomViews;var r="zoomViews : "+zoomViews;if(r+="<br /> x : "+i,r+="<br /> e.left : "+o.left,r+="<br /> widthScope : "+a,i>o.left&&i<o.left+a&&s>o.top&&s<o.top+a&&"down"==e){for(var c=0;c<n.lineGame.acceptList.length;c++)n.lineGame.acceptList[c].q==t&&n.lineGame.acceptList.splice(c,1);n.idx=t,n.part=".question",n.lineGame.start_idx.push(t)}}),$.each(this.aSpotArea,function(t,o){var a=$(n.el).find(".answer li:eq("+t+")").children("span").width();if(a*=zoomViews,i>o.left&&i<o.left+a&&s>o.top&&s<o.top+a){for(var r=0;r<n.lineGame.acceptList.length;r++)if(n.lineGame.acceptList[r].a==t)return;n.idx=t,n.part=".answer","up"==e&&(n.lineGame.start_idx.push(t),n.lineGame.acceptList.push({q:n.lineGame.start_idx[0],a:n.lineGame.start_idx[1]}))}}),this.doLineDraw(i,s,e)},CLineDrawing.prototype.doLineDraw=function(e,t,n){e-=$(this.el).offset().left,t-=$(this.el).offset().top;var i,s,o,a;switch(n){case"down":i=e=this.centerfix(e,"x")/zoomViews,s=t=this.centerfix(t,"y")/zoomViews,o=o||e,a=a||t;break;case"move":o=e/zoomViews,a=t/zoomViews;break;case"up":o=this.centerfix(e,"x")/zoomViews,a=this.centerfix(t,"y")/zoomViews}$(this.el).find(".questionView > svg").children("line").eq(this.lineGame.start_idx[0]).attr({x1:i,y1:s,x2:o,y2:a})},CLineDrawing.prototype.centerfix=function(e,t){var n=this.qSpotArea[this.idx],i=this.aSpotArea[this.idx],s=this.potin_area*zoomViews;if(".question"==this.part){if((e>n.left||e>n.left&&e<n.left+s||e<n.left+s)&&"x"==t){o=n.left+s-s/2||n.left+s-s/2;o-=$(this.el).offset().left}if((e>n.top||e>n.top&&e<n.top+s||e<n.top+s)&&"y"==t){o=n.top+s-s/2||n.top+s-s/2;o-=$(this.el).offset().top}}else if(".answer"==this.part){if((e>i.left||e>i.left&&e<i.left+s||e<i.left+s)&&"x"==t){o=i.left+s-s/2||i.left+s-s/2;o-=$(this.el).offset().left}if((e>i.top||e>i.top&&e<i.top+s||e<i.top+s)&&"y"==t){var o=i.top+s-s/2||i.top+s-s/2;o-=$(this.el).offset().top}}return o},CLineDrawing.prototype.lineReset=function(e){"number"==typeof e?$(this.el).find(".questionView > svg").children("line").eq(e).attr({x1:0,y1:0,x2:0,y2:0}):"reset"==e&&$(this.el).find(".questionView > svg").children("line").attr({x1:0,x2:0,y1:0,y2:0})},CLineDrawing.prototype.externalApi=function(e,t){void 0===t&&(t=0);var n=this;switch(e){case"reset":this.lineGame.acceptList=[],this.lineReset(e),this.lineGame.answer_num=[],window.lineCheck=[],$(this).find(".answer li").each(function(e,t){n.lineGame.answer_num[e]=null}),console.log(" lineAnswerView ("+e+"):정답 값 비움->"+this.lineGame.answer_num,c_color);break;default:var i=$($(".line_check")[t]);i.hide(),i.parent().children(".btn_undo").show(),window.lineCheck=[],$(this.el).find(".question li").each(function(e,t){console.log(n.lineGame.answer_num[e]),console.log($(t).find("i").attr("data-role-value")),$(t).find("i").attr("data-role-value")==n.lineGame.answer_num[e]&&(console.log("정답:"+$(t).find("i").attr("data-role-value")),console.log("사용자정답:"+n.lineGame.answer_num[e]),lineCheck.push(n.lineGame.answer_num[e]))}),console.log("lineCheck : "+window.lineCheck),window.lineCheck=window.lineCheck.length==$(this.el).find(".answer li").length,console.log("%c선긋기의 오지는 정답:"+window.lineCheck,e_color)}},CLineDrawing.prototype.onTouchStart=function(e){var t=this,n=$(this.el).attr("data-rol-etrytype")||"question";$(e.target).parents("ul").is("."+n)&&function(e){t.spotAreaSearch("down",e),t.isDrawing=!0}(e),e.preventDefault(),e.stopPropagation()},CLineDrawing.prototype.onTouchEnd=function(e){if($(e.target).parents(".question").is(".question")||$(e.target).parents(".answer").is(".answer")){switch(this.spotAreaSearch("up",e),this.part){case".question":this.lineGame.answer_num[this.lineGame.start_idx[1]]=this.lineGame.start_idx[0];break;case".answer":this.lineGame.answer_num[this.lineGame.start_idx[0]]=this.lineGame.start_idx[1]}this.lineGame.start_idx=[]}else this.lineGame.answer_num[this.lineGame.start_idx[0]]=null,this.lineReset(this.lineGame.start_idx[0]),this.lineGame.start_idx=[];-1==this.lineGame.answer_num.indexOf(null)&&$(".line_check").show(),this.isDrawing=!1,e.preventDefault(),e.stopPropagation()},CLineDrawing.prototype.onTouchMove=function(e){this.isDrawing&&(this.spotAreaSearch("move",e),e.preventDefault(),e.stopPropagation())},function(e){function t(){parent.ZOOMVALUE==undefined&&(parent.ZOOMVALUE=1),i=parent.ZOOMVALUE,window.zoomViews=i}function n(){t();for(var n=e(".drag_quiz"),i=0;i<n.length;i++)o.push(new CLineDrawing(n[i],s))}var i,s={isTouchDevice:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,eventSelector:function(e){var t=null;switch(e){case"eventDown":t=this.isTouchDevice?"touchstart":"mousedown";break;case"eventMove":t=this.isTouchDevice?"touchmove":"mousemove";break;case"eventUp":t=this.isTouchDevice?"touchend":"mouseup";break;case"eventOut":t=this.isTouchDevice?"touchleave":"mouseout"}return t}};window.GameManager=s,e(window).resize(function(){t()});var o=[];e(function(){setTimeout(function(){n()},500)})}(jQuery);var slide_view={slide:Array(),idx:Array(),init:function(){this.slide=$(".slide");for(var e=0;e<this.slide.length;e++){this.idx[e]=0;var t=$(this.slide[e]);t.find(".next").addClass("on"),t.find(".list > div").eq(0).addClass("on")}},slidemovemuent:function(e,t,n,i){e.find(".list").children("div").children("div").eq(t).css({display:"block",left:n}).stop().animate({left:i}).parent().addClass("on").siblings().removeClass("on")},nexts:function(e){e.preventDefault();var t=$(this).parents(".slide"),n=$(".slide").index(t),i=t.find(".list>div");console.log(t),slide_view.idx[n]!=i.length-1&&(slide_view.slidemovemuent(t,slide_view.idx[n],"0","-100%"),slide_view.idx[n]++,slide_view.slidemovemuent(t,slide_view.idx[n],"100%","0"),slide_view.idx[n]==i.length-1?(t.find(".next").removeClass("on"),t.find(".prev").addClass("on")):slide_view.idx[n]!=i.length-1&&0!=slide_view.idx[n]&&(t.find(".next").addClass("on"),t.find(".prev").addClass("on")))},prevs:function(e){e.preventDefault();var t=$(this).parents(".slide"),n=$(".slide").index(t),i=t.find(".list>div");slide_view.idx[n]<=0||(slide_view.slidemovemuent(t,slide_view.idx[n],"0","100%"),slide_view.idx[n]--,slide_view.slidemovemuent(t,slide_view.idx[n],"-100%","0"),slide_view.idx[n]<=0?(t.find(".next").addClass("on"),t.find(".prev").removeClass("on")):slide_view.idx[n]!=i.length-1&&0!=slide_view.idx[n]&&(t.find(".next").addClass("on"),t.find(".prev").addClass("on")))},quickEvent:function(e){e.preventDefault();var t=$(this).parents(".slide"),n=$(".slide").index(t),i=t.find(".list>div");slide_view.idx[n]=$(this).parent().index();var s=t.find(".list>div.on").index();if(slide_view.idx[n]>s)slide_view.slidemovemuent(t,s,"0","-100%"),slide_view.slidemovemuent(t,slide_view.idx[n],"100%","0"),slide_view.idx[n]==i.length-1?(t.find(".next").removeClass("on"),t.find(".prev").addClass("on")):slide_view.idx[n]!=i.length-1&&0!=slide_view.idx[0]&&(t.find(".next").addClass("on"),t.find(".prev").addClass("on"));else{if(!(slide_view.idx[n]<s))return;slide_view.slidemovemuent(t,s,"0","100%"),slide_view.slidemovemuent(t,slide_view.idx[n],"-100%","0"),slide_view.idx[n]<=0?(t.find(".next").addClass("on"),t.find(".prev").removeClass("on")):slide_view.idx[n]!=i.length-1&&0!=slide_view.idx[n]&&(t.find(".next").addClass("on"),t.find(".prev").addClass("on"))}}};$(window).load(function(){slide_view.init(),$(".slide .next").on("click",slide_view.nexts),$(".slide .prev").on("click",slide_view.prevs),$(".slide a").on("click",slide_view.quickEvent)}),setTimeout(function(){$(".input_answer").trigger("keyup")},1e3),$(function(){$(".jq_input").on("focus",function(){$(this).css("background","#fff")}),$(".jq_input").on("blur",function(){$(this).val()||$(this).css("background","transparent")}),$(".jaum_quiz .btn_ex").on("click",function(){$(".jq_input").each(function(){var e=$(this).val().replace(/\s/g,"");e!=$(this).next('input[type="hidden"]').val().replace(/\s/g,"")&&""!=e&&$(this).css("color","red")}).attr("disabled",!0)}),$(".jaum_quiz .btn_undo").on("click",function(){$(".jq_input").val("").css({background:"transparent",color:"#000"}),$(".jq_input").removeAttr("disabled"),$(".jaum_quiz .btn_ex").show()})}),$(function(){var e=$(".tab_list li div"),t=$(".tab_list li:first-child");e.hide(),t.addClass("on").find("div").show(),$(".tab_list li > button").on("click",function(){var t=$(this);e.hide().parent("li").removeClass("on"),t.parent("li").addClass("on").end().next().show()})}),$(function(){$(".btn_fpop").on("click",function(){$(".fpop_wrap").show()}),$(".fpop_close").on("click",function(){$(this).parents(".fpop_wrap").hide()});$(".fpop_wrap.confirm .btn_result_check").on("click",function(){$(this).hide().siblings(".btn_undo").show(),$(".fpop_wrap.confirm assessmentItem").each(function(){var e=$(this).find("correctResponse").text(),t=e.split("|"),n=[];if("fillInTheBlank"==$(this).data("response-type"))if($(this).find(".text_group").length>0){var i=[];$(this).find('.text_group input[type="text"]').each(function(){i.push($(this).val())}),i.sort(),t.sort();for(var s=0;t.length>s;s++)""!=i[s]&&i[s]==t[s]?n.push(!0):n.push(!1)}else if($(this).find(".input_radio_mix").length>0){$(this).find('.input_radio_mix input[type="text"]').each(function(e){n[e]=!1,an_str=$(this).val(),an_str==t[e]&&(n[e]=!0)});a=0;if((o=$(this).find('.input_radio_mix input[type="radio"]')).length>0){r=t[1];$(this).find('.input_radio_mix input[type="radio"]:checked').each(function(){$(this).val()==r&&(n.push(!0),a++)}),a||n.push(!1)}}else if($(this).find(".radio_input_mix").length>0){var o=$(this).find('.radio_input_mix input[type="radio"]'),a=0;if(o.length>0){var r=t[0];$(this).find('.radio_input_mix input[type="radio"]:checked').each(function(){$(this).val()==r&&(n.push(!0),a++)}),a||n.push(!1)}$(this).find('.radio_input_mix input[type="text"]').each(function(){an_str=$(this).val(),an_str==t[1]?n.push(!0):n.push(!1)})}else $(this).find('input[type="text"]').each(function(e){n[e]=!1,an_str=$(this).val(),an_str==t[e]&&(n[e]=!0)});else if("singleChoice"==$(this).data("response-type"))t.length>1?$(this).find(".radio_group").each(function(e){n[e]=!1,$(this).children("input:checked").each(function(){$(this).val()==t[e]&&(n[e]=!0)})}):$(this).find("input:checked").each(function(e){$(this).val()==t[e]?n[e]=!0:n[e]=!1});else if("multipleChoice"==$(this).data("response-type"))if(t.length>1)$(this).find(".check_group").each(function(e){chk_sp=t[e].split(",");for(var i=0,s=0;chk_sp.length>s;s++)$(this).children("input:checked").each(function(){$(this).val()==chk_sp[s]&&(i+=1)});chk_sp.length==i?n[e]=!0:n[e]=!1});else{chk_sp=e.split(",");for(var c=0,l=0;chk_sp.length>l;l++)$(this).find("input:checked").each(function(e){$(this).val()==chk_sp[l]&&(c+=1)});chk_sp.length==c?n.push(!0):n.push(!1)}else if("True/False"==$(this).data("response-type"))t.length>1?$(this).find(".chk_ox").each(function(e){n[e]=!1,$(this).children("input:checked").each(function(){$(this).val()==t[e]&&(n[e]=!0)})}):$(this).find("input:checked").each(function(e){$(this).val()==t[e]?n[e]=!0:n[e]=!1});else if("essay"==$(this).data("response-type"))var d=!0;else"etc"==$(this).data("response-type")&&(lineAnswerView(),n.push(lineCheck));var u=null;if(1==(-1==$.inArray(!1,n)&&0!=n.length)||1==d){p=e;u=!0,d?$(this).find("modalFeedback").show():$(this).addClass("co").find("modalFeedback").show()}else{u=!1;var p=e;$(this).addClass("cx").find("modalFeedback").show(),DTCaliperSensor.fire({correct:u,itemObject:this,value:p})}d=""})}),$(".fpop_wrap.confirm .btn_undo").on("click",function(){$(".fpop_wrap.confirm assessmentItem").each(function(){"etc"==$(this).data("response-type")&&lineAnswerView("reset")}),$(".fpop_wrap.confirm").find("modalFeedback").hide(),$(this).hide().siblings(".btn_result_check").show(),$(".fpop_wrap.confirm assessmentItem").each(function(){$(this).find('input[type="text"]').val(""),$(this).removeClass("cx co"),$(this).find('input[type="radio"]').prop("checked",!1),$(this).find('input[type="checkbox"]').prop("checked",!1),$(this).find("i.ok").remove()})})}),$(function(){$(".btn_fpop").on("click",function(){$(".fpop_wrap").show()}),$(".fpop_close").on("click",function(){$(this).parents(".fpop_wrap").hide()});$(".fpop_wrap.unit .btn_result_check").on("click",function(){var e=$(".fpop_wrap.unit"),t=e.find("assessmentItem").not('[data-response-type="essay"]').length,n=e.find('assessmentItem[data-response-type="essay"]').length,i=0;$(".fpop_wrap.unit assessmentItem").each(function(){var e=$(this).find("correctResponse").text().replace(/\s/g,""),t=e.replace(/\[/g,"").replace(/\]/g,"");if(cr_arr=t.split(","),chkArr=[],"fillInTheBlank"==$(this).data("response-type")){$(this).find('input[type="text"]').each(function(){chkArr.push($(this).val().replace(/\s/g,""))});var n=[];$.each(cr_arr,function(e,t){$.each(chkArr,function(e,i){t==i&&n.push(t)})}),s=n.length==cr_arr.length}else if("singleChoice"==$(this).data("response-type"))o=$(this).find('input[type="radio"]:checked').val();else if("multipleChoice"==$(this).data("response-type")){$(this).find('input[type="checkbox"]:checked').each(function(){chkArr.push($(this).val())}),cr_str=cr_arr.toString(),chk_str=chkArr.toString();var s;s=cr_str==chk_str}else if("True/False"==$(this).data("response-type"))var o=$(this).find('input[type="radio"]:checked').val();else if("essay"==$(this).data("response-type"))var a=!0;else $(this).data("response-type");if(e==o||1==a||1==s){var r=null,c=e;r=!0,a?$(this).find("modalFeedback").show():($(this).addClass("co").find("modalFeedback").show(),i+=1)}else{r=!1;c=e;console.log(e);var l='<i class="ok"></i>';$(this).addClass("cx").find("modalFeedback").show(),$(this).find('input[type="radio"]').each(function(){$(this).val()==e&&$(this).next("label").append(l)}),$(this).find('input[type="checkbox"]').each(function(){-1!=$.inArray($(this).val(),cr_arr)&&$(this).next("label").append(l)})}DTCaliperSensor.fire({correct:r,itemObject:this,value:c}),a=""}),$(".scoring").show().find(".btn_undo").show(),result_text="서술형 <i>"+n+"</i>문제를 제외한 <em>총 <span><i>"+t+"</i>개의 문제</span> 중 <span><i>"+i+"</i>문제</span>를 맞혔습니다.</em>",$(".result_score").empty().append(result_text),$(".scroll_wrap").scrollTop(1e6)}),$(".fpop_wrap.unit .btn_undo").on("click",function(){$(".scoring").hide(),$(".fpop_wrap.unit").find("modalFeedback").hide(),$(".fpop_wrap.unit assessmentItem").each(function(){$(this).find('input[type="text"]').val(""),$(this).removeClass("cx co"),$(this).find('input[type="radio"]').prop("checked",!1),$(this).find('input[type="checkbox"]').prop("checked",!1),$(this).find("i.ok").remove()})})});var idxr=0,videoArray=[],soundFlag=!1,vdoFlag=!1,fullFlag=!1,screenFlag=!1,duration,vdoWasPaused,blockSeek=!1;$(function(){$(".cbtn-play").on("click",function(){$("#embed_vdo").get(0).play(),$(this).hide()}),$("#embed_vdo").on("click",function(){$("#embed_vdo").get(0).pause(),$(".cbtn-play").show()})}),$(function(){$(".stars span").on("click",function(e){var t=$(this).index();$(this).prevAll().addBack().children("input").prop("checked",!0),$(this).nextAll().children("input").removeAttr("checked"),t<=1?$(this).parent().next("button").css("visibility","visible"):$(this).parent().next("button").css("visibility","hidden")})}),$(function(){$(".fpop_close").on("click",function(){$(this).parents(".fpop_wrap").hide()})});var crossAnswerObj={target:[]},crossAnswer={user:{width:[],height:[]},quiz:{width:[],height:[]}},qzTypeCheck;$(function(){function e(e){var t=e[1][0].split("-");crossAnswerObj.target=[],$(".crossquiz td[class*="+t[0]+"]").each(function(e,t){crossAnswerObj.target.push(t)})}var t=function(){var t="";classCheck=$(this).parent().attr("class"),t+="<div class='textbox'>",t+="<button class='tb-close'>닫기</button>",t+="<div>","wh"==qzTypeCheck(classCheck)[0]||"hw"==qzTypeCheck(classCheck)?(t+='<img src="./img/common/m_width.png" /><input type="radio" class="width" name="dir" id="in_w" onclick="whSelector(\''+qzTypeCheck(classCheck)[1][0]+'\')" /><label for="in_w">가로</label>',t+='<img src="./img/common/m_height.png" /><input type="radio" class="height" name="dir" id="in_h" onclick="whSelector(\''+qzTypeCheck(classCheck)[1][1]+'\')" /><label for="in_h">세로</label>'):"w"==qzTypeCheck(classCheck)[0]?e(qzTypeCheck(classCheck)):"h"==qzTypeCheck(classCheck)[0]&&e(qzTypeCheck(classCheck)),t+="<input type='text' class='inputAnswer'/>",t+="<button class='confirm'>확인 <i class='fa fa-check'></i></button>",t+="</div></div>",$(this).parents(".crossquiz").append(t),$(".inputAnswer").focus(),$(".crossquiz td input").off("click")},n=function(){$(".crossquiz").children(".textbox").remove(),$(".crossquiz td input").click(t),$(".crossquiz input").each(function(){""!=$(this).val()&&$(".btn_cross_check").show()})};qzTypeCheck=function(e){var t=e.split(" "),n=t.splice(t.indexOf("qz")+1,t.length),i=[],s="";for(var o=0 in n)i[o]=n[o].replace(/[(0-9),-]/g,""),s+=i[o];return i[0]=s,i[1]=n,i},$(".crossquiz td input").click(t),$(".crossquiz").on("click",".tb-close",n),$(".crossquiz").on("click",".confirm",function(){var e=$(this).parent().children(".inputAnswer").val();$.each(crossAnswerObj.target,function(t,n){$(n).children("input").val(e.substring(t,t+1))}),$(".cross").show(),n()})}),function(e){e.fn.drag=function(t){function n(){parent.ZOOMVALUE==undefined&&(parent.ZOOMVALUE=1),a=parent.ZOOMVALUE,console.log(a)}function i(t,n,i,s){return t=e(t.target),i>n.left&&i<n.left+t.width()&&s>n.top&&s<n.top+t.height()}function s(n,i){t.itembox[0]=e(n).position().left/a,t.itembox[1]=e(n).position().top/a}function o(t,n,i,s){switch(s){case"ani":e(t).stop().animate({left:(n-e(t).width()/2)/a,top:(i-e(t).height()/2)/a},100);break;default:e(t).stop().css({left:(n-e(t).width()/2)/a,top:(i-e(t).height()/2)/a},500)}}var a,r=e(this)[0];(t={magnetic:!0}).orgItem=new Array,t.curItem=new Array,t.itembox=new Array,t.contain=new Array,e(this).find(">div").css({position:"absolute",zIndex:"10"}),e(this).off("click"),e(this).find(">div.dr_item").css("zIndex","20"),e(this).find(".dr_item").each(function(n,i){t.orgItem.push(e(i).position()),t.curItem.push(e(i).position())}),e(this).find(".dr_container").each(function(n,i){t.contain.push(e(i).position())}),e(window).resize(function(){n()});var c=function(t){l("move",t,e(this)),t.preventDefault(),t.stopPropagation()},l=function(n,l,d){var u=l.pageX||l.changedTouches[0].pageX,p=l.pageY||l.changedTouches[0].pageY;switch(u-=d.offset().left,p-=d.offset().top,n){case"start":e(l.target).hasClass("dr_container")&&(t.idx=-1),r.addEventListener(GameManager.eventSelector("eventMove"),c,!1),e.each(t.curItem,function(n,s){e(l.target).is(".dr_item")||!e(l.target).is(".dr_item")?t.target=l.target:t.target=undefined,i(l,s,u,p)&&(t.idx=n)}),e(t.target).is(".dr_item")&&(o(t.target,u,p,"ani"),s(t.target));break;case"move":e(t.target).is(".dr_item")&&(o(t.target,u,p),s(t.target));break;case"end":if(-1==t.idx)return;for(var h=!1,m=d.find(".dr_container"),f=0;f<m.length;f++){var v=!1,g=!1,$=m[f],w=e($).position().left/a,_=e($).position().top/a,y="zoomViews : "+a;if(y+="<br /> cLeft : "+w,y+="<br /> cTop : "+_,y+="<br /> mouseX : "+u,y+="<br /> mouseY : "+p,t.itembox[0]>w&&t.itembox[0]<w+e($).width()&&(v=!0),t.itembox[0]+e(t.target).width()>w&&t.itembox[0]+e(t.target).width()<w+e($).width()&&(v=!0),t.itembox[1]>_&&t.itembox[1]<_+e($).height()&&(g=!0),t.itembox[1]+e(t.target).height()>_&&t.itembox[1]+e(t.target).height()<_+e($).height()&&(g=!0),v&&g){for(var b=0;b<t.curItem.length&&(w!=t.curItem[b].left||_!=t.curItem[b].top);b++);if(b==t.curItem.length){t.curItem[t.idx].left=w,t.curItem[t.idx].top=_,e(t.target).animate({left:w,top:_}),h=!0;break}}}h||(t.curItem[t.idx].left=t.orgItem[t.idx].left/a,t.curItem[t.idx].top=t.orgItem[t.idx].top/a,e(t.target).animate({left:t.orgItem[t.idx].left/a,top:t.orgItem[t.idx].top/a})),console.log(t.idx),v=!1,g=!1,e(".drganswer").show()}};e(window).trigger("resize"),r.addEventListener(GameManager.eventSelector("eventDown"),function(t){l("start",t,e(this)),t.preventDefault(),t.stopPropagation()},!1),r.addEventListener(GameManager.eventSelector("eventUp"),function(t){r.removeEventListener(GameManager.eventSelector("eventMove"),c,!1),l("end",t,e(this)),t.preventDefault(),t.stopPropagation()},!1),e(".drgrest").hide(),e(".drgrest").on("click",function(){e(this).hide(),e(".drganswer").show(),e.each(t.orgItem,function(n,i){t.curItem[n].left=t.orgItem[n].left,t.curItem[n].top=t.orgItem[n].top,e(r).find(".dr_item").eq(n).css({left:t.orgItem[n].left,top:t.orgItem[n].top})})}),e(".drganswer").on("click",function(){e(".drgrest").show(),e(this).hide(),e(r).find(".dr_container").each(function(n,i){var s=e(this).attr("data-role-val");e(r).find(".dr_item:eq("+n+")").animate({left:t.contain[s].left,top:t.contain[s].top})})})}}(jQuery),function(e){e.fn.gameDice=function(){function t(){return Math.floor(Math.random()*c)+1}function n(e){l+=e}function i(t,i){var s=e(t).css("background-image").split("/"),o=s[s.length-1],r=i,c=(s=s[s.length-1].substring(0,o.length-7))+r+".png";return n(r),a+c}function s(){var n=1,s=setInterval(function(){n++,o.find(".dice").eq(0).css("background-image","url("+i(o.find(".dice").eq(0),n)+")"),o.find(".dice").eq(1).css("background-image","url("+i(o.find(".dice").eq(1),n-1)+")"),n==c&&(n=1)},30);l=0,setTimeout(function(){clearInterval(s),o.find(".dice").each(function(n,s){e(s).css("background-image","url("+i(s,t())+")")})},r)}var o=e(this),a="img/object/",r=1500,c=6,l=0;o.find(".dice_close").click(function(){o.find(".dice_pop").fadeOut(500,function(){e(this).find(".dice").css("backgroundImage","url("+a+"dice_01_01.png)")})}),o.find(".icon-imgC-key").click(function(){o.find(".dice_pop").fadeIn(500),s()})}}(jQuery);