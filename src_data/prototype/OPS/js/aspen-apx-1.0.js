window.apn=window.apn||{},apn.P={},apn.P.INHERIT="Default",apn.P.LINEDASH=1e4,apn.P.ITR_EFFECT_W2P=11010,apn.P.ITR_EFFECT_P2P=11011,apn.P.ITR_EFFECT_SWP=11012,apn.P.ITR_OP_WGT=11020,apn.P.ITR_OP_PAGE_DRAG=11021,apn.P.ITR_OP_INFLOW=11023,apn.P.ITR_TIMING=11030,apn.P.ITR_LTP_TYPE=11040,apn.P.eventTitle={click:"Tap",doubleTap:"Double Tap",longHold:"Long Tap",tapStart:"Tap Start",flickLeft:"Flick Left",flickRight:"Flick Right",flickUp:"Flick Up",flickDown:"Flick Down",drawLeft:"Draw Left",drawRight:"Draw Right",drawUp:"Draw Up",drawDown:"Draw Down",pinchIn:"Pinch In",pinchOut:"Pinch Out",pageLoad:"Slide Create",pageRun:"Slide Run",pagePause:"Slide Pause",spt_EvtBubble:"Event Bubble",spt_Custom:"Custom Event",spt_WgtStart:"Widget Start",dragStart:"Drag Start",drag:"Drag",dragEnd:"Drag End",dragDrop:"Drop",dragDropResult:"Drop Result",pointerOver:"Mouse Over",pointerOut:"Mouse Out",stateChange:"State Change",wgtEvent:"Widget Event",inputChange:"Input Change",inputFocus:"Input Focus",inputBlur:"Input Blur",inputSet:"Input Set",media:"Media",animation:"Animation",timer:"Timer",musicNote:"Music Note",musicBeat:"Music Beat",musicLine:"Music LineSet",musicVerse:"Music Verse"},apn.P.effectTitle={move:"Slide",moveLeft:"Slide Left",moveRight:"Slide Right",moveTop:"Slide Up",moveBottom:"Slide Down",slideUp:"Slide In",slideUpLeft:"Slide In Left",slideUpRight:"Slide In Right",slideUpTop:"Slide In Up",slideUpBottom:"Slide In Down",dissolve:"Dissolve",zoomIn:"Zoom In",zoomOut:"Zoom Out",cardUp:"Card Out",cardUpLeft:"Card Out Left",cardUpRight:"Card Out Right",cardUpTop:"Card Out Up",cardUpBottom:"Card Out Down",fall:"Fall",glue:"Glue",glueLeft:"Glue Left",glueRight:"Glue Right",glueTop:"Glue Up",glueBottom:"Glue Down",timeLag:"Time-lag",timeLagLeft:"Time-lag Left",timeLagRight:"Time-lag Right",timeLagTop:"Time-lag Up",timeLagBottom:"Time-lag Down",cube:"Cube In",cubeLeft:"Cube In Left",cubeRight:"Cube In Right",cubeTop:"Cube In Up",cubeBottom:"Cube In Down",cube0:"Cube",cube0Left:"Cube Left",cube0Right:"Cube Right",cube0Top:"Cube Up",cube0Bottom:"Cube Down",newspaper:"Newspaper",flip:"Flip",flipLeft:"Flip Left",flipRight:"Flip Right",flipTop:"Flip Up",flipBottom:"Flip Down",flip:"Flip",flipLeft:"Flip Left",flipRight:"Flip Right",flipTop:"Flip Up",flipBottom:"Flip Down",bookFlip1:"Book Flip"},apn.P.effectFromTitle={Slide:"move","Slide Left":"moveLeft","Slide Right":"moveRight","Slide Up":"moveTop","Slide Down":"moveBottom","Slide In":"slideUp","Slide In Left":"slideUpLeft","Slide In Right":"slideUpRight","Slide In Up":"slideUpTop","Slide In Down":"slideUpBottom",Dissolve:"dissolve","Zoom In":"zoomIn","Zoom Out":"zoomOut","Card Out":"cardUp","Card Out Left":"cardUpLeft","Card Out Right":"cardUpRight","Card Out Up":"cardUpTop","Card Out Down":"cardUpBottom",Fall:"fall",Glue:"glue","Glue Left":"glueLeft","Glue Right":"glueRight","Glue Up":"glueTop","Glue Down":"glueBottom","Time-lag":"timeLag","Time-lag Left":"timeLagLeft","Time-lag Right":"timeLagRight","Time-lag Up":"timeLagTop","Time-lag Down":"timeLagBottom","Cube In":"cube","Cube In Left":"cubeLeft","Cube In Right":"cubeRight","Cube In Up":"cubeTop","Cube In Down":"cubeBottom",Cube:"cube0","Cube Left":"cube0Left","Cube Right":"cube0Right","Cube Up":"cube0Top","Cube Down":"cube0Bottom",Newspaper:"newspaper",Flip:"flip","Flip Left":"flipLeft","Flip Right":"flipRight","Flip Up":"flipTop","Flip Down":"flipBottom","Book Flip":"bookFlip1"},apn.P.timingTitle={linear:"Linear",ease:"Ease Out-in","ease-in":"Ease In","ease-out":"Ease Out","ease-in-out":"Ease In-out"},apn.P.traceTitle={none:"None",arcCW:"Arc(CW)",arcCCW:"Arc(CCW)"},apn.P.exeScreenSetupTitle={fix:"Fixed",zoom:"Zoom to fit screen size"},apn.P.getStatic=function(e,t){var a;return e==apn.P.LINEDASH?a=[{value:null,title:"solid"},{value:[2,2],title:"dotted"},{value:[4,3],title:"dashed"}]:e==apn.P.ITR_OP_WGT?(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.flwModeHide?(a=[{value:"CWP",title:"Change Property"},{value:"CWS",title:"Change State"}],apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.flwModeHideUseLTP&&a.push({value:"LTP",title:"Link to "+(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.page?apn.dbUI.system.page:"Page")})):a=[{value:"CWP",title:"Change Property"},{value:"CWS",title:"Change State"},{value:"LTP",title:"Link to "+(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.page?apn.dbUI.system.page:"Page")},{value:"LTB",title:"Link Back"},{value:"LTH",title:"Link Back to Home"}],apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.exeItrURL&&"click"==t&&a.push({value:"URL",title:"Link to URL"}),a.push({value:"WAT",title:"Wait"}),"dragDrop"==t&&a.push({value:"FDR",title:"Send Drop Result"}),a.push({value:"CMT",title:"Comment"})):e==apn.P.ITR_OP_PAGE_DRAG?a=[{value:"LTP",title:"Link to "+(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.page?apn.dbUI.system.page:"Page")},{value:"LTB",title:"Link Back"},{value:"LTH",title:"Link Back to Home"}]:e==apn.P.ITR_OP_INFLOW?a=[{value:"LTP",title:"Link to "+(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.page?apn.dbUI.system.page:"Page")},{value:"LTB",title:"Link Back"},{value:"LTH",title:"Link Back to Home"}]:e==apn.P.ITR_EFFECT_W2P?a=[{value:void 0,title:apn.P.INHERIT},{value:"none",title:"None"},{value:"dissolve",title:apn.P.effectTitle.dissolve},{value:"zoomIn",title:apn.P.effectTitle.zoomIn},{value:"zoomOut",title:apn.P.effectTitle.zoomOut},{value:"fall",title:apn.P.effectTitle.fall},{value:"newspaper",title:apn.P.effectTitle.newspaper},{value:{left:"moveLeft",right:"moveRight",up:"moveTop",down:"moveBottom"},title:apn.P.effectTitle.move},{value:{left:"slideUpLeft",right:"slideUpRight",up:"slideUpTop",down:"slideUpBottom"},title:apn.P.effectTitle.slideUp},{value:{left:"cardUpLeft",right:"cardUpRight",up:"cardUpTop",down:"cardUpBottom"},title:apn.P.effectTitle.cardUp},{value:{left:"glueLeft",right:"glueRight",up:"glueTop",down:"glueBottom"},title:apn.P.effectTitle.glue},{value:{left:"timeLagLeft",right:"timeLagRight",up:"timeLagTop",down:"timeLagBottom"},title:apn.P.effectTitle.timeLag},{value:{left:"cubeLeft",right:"cubeRight",up:"cubeTop",down:"cubeBottom"},title:apn.P.effectTitle.cube},{value:{left:"flipLeft",right:"flipRight",up:"flipTop",down:"flipBottom"},title:apn.P.effectTitle.flip}]:e==apn.P.ITR_EFFECT_P2P?a=apn.P.getStatic(apn.P.ITR_EFFECT_W2P):e==apn.P.ITR_EFFECT_SWP?a=[{value:"none",title:"None"},{value:"zoomIn",title:apn.P.effectTitle.zoomIn},{value:"newspaper",title:apn.P.effectTitle.newspaper}]:e==apn.P.ITR_LTP_TYPE?a=[{value:1,title:"Link"},{value:3,title:"Link as Popup"}]:e==apn.P.ITR_TIMING&&(a=[{value:"linear",title:apn.P.timingTitle.linear},{value:"ease",title:apn.P.timingTitle.ease},{value:"ease-in",title:apn.P.timingTitle["ease-in"]},{value:"ease-out",title:apn.P.timingTitle["ease-out"]},{value:"ease-in-out",title:apn.P.timingTitle["ease-in-out"]}]),a},apn.P.getSetOfCWP=function(e,t,a){var i,n=e.pages[t].objects[a],r=apn.Project.getWidgetModule(n.create.data),o={zIndex:{title:"Z-Index",type:1}};if(r&&r.exeItrNoMove||(o.position={title:"Position to",type:2,trace:!0},o.positionBy={title:"Position by",type:2,trace:!0}),n.init.shape.type==bx.CCanvasWnd.SHAPE_LINE?o.line={title:"Line",type:2}:(n.layout&&n.layout.children||r&&r.exeItrNoResize||(o.size={title:"Size to",type:2},o.sizeBy={title:"Size by",type:2}),r&&r.exeItrNoZoom||(o.zoom={title:"Zoom to",type:2},i=!0)),r){r.styleMap&&(r.styleMap.angle&&(o.angle={title:"Angle to",type:2},i=!0),r.styleMap.visibility&&(o.visibility={title:"Visibility",type:1}),r.styleMap.alpha&&(o.alpha={title:"Opacity",type:2}),r.styleMap.text&&(o.text={title:"Text",type:1},o.textColor={title:"Text color",type:1}),(r.styleMap.dragX||r.styleMap.dragY)&&(o.drag={title:"Drag",type:1})),r.exeInputSet&&(o.value={title:"Value",type:1}),i&&(o.trOrg={title:"Zoom/Angle center",type:1});var s;if(r.edtOnBuildRuntimeProperty)try{s=r.edtOnBuildRuntimeProperty(e,a,t)}catch(e){console.error("Program error in edtOnBuildRuntimeProperty() of "+n.create.data.wgtID+"\n\n"+e)}else if(r.editor&&r.editor.runtimeProperties)for(var p in r.editor.runtimeProperties)s=s||{},s[p]=bx.$cloneObject({},r.editor.runtimeProperties[p]);s&&(o.extended={title:"Extended property",type:1,extended:s})}return o},apn.P.getCurrentValueOfCWP=function(e,t,a){var i={},n=e.pages[t].objects[a];i.position={x:n.init.position.x,y:n.init.position.y},n.init.shape.type==bx.CCanvasWnd.SHAPE_RECT?(i.size={w:n.init.shape.w,h:n.init.shape.h},i.zoom={w:1,h:1},i.trOrg={orgX:(n.init.cx+n.init.shape.w/2)/n.init.shape.w,orgY:(n.init.cy+n.init.shape.h/2)/n.init.shape.h}):n.init.shape.type==bx.CCanvasWnd.SHAPE_LINE&&(i.line={x1:n.init.position.x+n.init.shape.x[0],y1:n.init.position.y+n.init.shape.y[0],x2:n.init.position.x+n.init.shape.x[1],y2:n.init.position.y+n.init.shape.y[1]});if(n.create.data&&(wgtModule=apn.Project.getWidgetModule(n.create.data))&&(n.create.data.styles&&(wgtModule.styleMap.visibility&&(apn.Project.resolveStyle(e,"visibility",n.create.data.styles.visibility)===!0?i.visibility="Show":1===apn.Project.resolveStyle(e,"visibility",n.create.data.styles.visibility)?i.visibility="Pass":2===apn.Project.resolveStyle(e,"visibility",n.create.data.styles.visibility)?i.visibility="Block":i.visibility="Hide"),wgtModule.styleMap.alpha&&(i.alpha=parseFloat(apn.Project.resolveStyle(e,"alpha",n.create.data.styles.alpha))),wgtModule.styleMap.angle&&(i.angle=parseFloat(apn.Project.resolveStyle(e,"angle",n.create.data.styles.angle))),wgtModule.styleMap.text&&!wgtModule.exeItrNoText&&(i.text=apn.Project.resolveStyle(e,"text",n.create.data.styles.text),i.textColor=apn.Project.resolveStyle(e,"fontStyle",n.create.data.styles.fontStyle)),(wgtModule.styleMap.dragX||wgtModule.styleMap.dragY)&&(i.drag={dragX:"No",dragY:"No"},n.create.data.styles&&n.create.data.styles.dragX&&(i.drag.dragX="Yes"),n.create.data.styles&&n.create.data.styles.dragY&&(i.drag.dragY="Yes"),(wgtModule.styleMap.dragInParent||wgtModule.styleMap.dragContainParent)&&(i.drag.dragInParent="None",n.create.data.styles&&n.create.data.styles.dragInParent?i.drag.dragInParent="In":n.create.data.styles&&n.create.data.styles.dragContainParent&&(i.drag.dragInParent="Contain")))),wgtModule.editor&&wgtModule.editor.runtimeProperties)){var r;for(var o in wgtModule.editor.runtimeProperties)r=r||{},n.create.data.properties&&n.create.data.properties.attrs&&void 0!==n.create.data.properties.attrs[o]&&(r[o]=n.create.data.properties.attrs[o]);r&&(i.extended=r)}return i},apn.P.isObjectCompositeSysEV=function(e){return"dragDrop"==e||0==e.indexOf("dragDrop:")},apn.P.resolveCompositeSysEV=function(e){if(e.indexOf(":")!=-1){var t=e.split(":");if(t[0]&&t[1])return{ev:t[0],param:t[1]}}return null},apn.P.$O7u=function(e){var t=null;if(e){var a=apn.Project.getExeModule(e);a.IStub_getPageEvent&&(t=a.IStub_getPageEvent())}if(apn.dbUI&&apn.dbUI.event)return t?bx.$copyObject(t,apn.dbUI.event):apn.dbUI.event;if(e){var i=apn.Project.getLayout(e).CTXT.deviceID;if(apn.widgetDevice[i]&&apn.widgetDevice[i].event)return t?bx.$copyObject(t,apn.widgetDevice[i].event):apn.widgetDevice[i].event}return t},apn.P.$Obu=function(e){if(apn.dbUI&&apn.dbUI.system&&(apn.dbUI.system.exeNativePlayer||apn.dbUI.system.flwModeHide))return!1;var t=apn.Project.getExeModule(e);if(t&&t.IStub_getConfiguration){var a=t.IStub_getConfiguration();if(a&&a.flowModeHide)return!1}return!0},apn.P._usePagePause=function(e){var t=apn.Project.getExeModule(e);return!(t&&apn.CExeBookCore&&bx.$classOf(t,apn.CExeBookCore))},apn.P.getEvent=function(e,t,a,i,n,r){function o(e,t){return m.objects[e].create.data&&m.objects[e].create.data.styles&&m.objects[e].create.data.styles.title?m.objects[t].create.data&&m.objects[t].create.data.styles&&m.objects[t].create.data.styles.title?m.objects[e].create.data.styles.title>m.objects[t].create.data.styles.title?1:m.objects[e].create.data.styles.title<m.objects[t].create.data.styles.title?-1:0:-1:1}function s(e,t,a){var i=apn.P.resolveCompositeSysEV(t);if(i)e[i.ev]?(l[i.ev]||(l[i.ev]=bx.$cloneObject({},e[i.ev]),a&&(l[i.ev].removed=!0)),l[i.ev].$O3O=l[i.ev].$O3O||{},l[i.ev].$O3O[i.param]=!0):a||bx.Trace.log("APN","warning","Unknown custom event="+t,"P.getEvent");else if(e[t]){if(l[t]||(l[t]=bx.$cloneObject({},e[t]),a&&(l[t].removed=!0)),e[t].param){l[t].$O3O=l[t].$O3O||{};for(var n in e[t].param)l[t].$O3O[n]=!0}}else a||bx.Trace.log("APN","warning","Unknown custom event="+t,"P.getEvent")}var p=e.pages[t].UI.apnCExe;apn.P.eventTitle.pageLoad=(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.page?apn.dbUI.system.page:"Page")+" Create",apn.P.eventTitle.pageRun=(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.page?apn.dbUI.system.page:"Page")+" Run",apn.P.eventTitle.pagePause=(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.page?apn.dbUI.system.page:"Page")+" Pause";var l,d,c=[];if(a){if(!e.pages[t].objects[a])return c;d=apn.Project.getWidgetModule(e.pages[t].objects[a].create.data)}if(l={},r)var g=!0,u=!0,h=!0;else var g=apn.P.$Obu(e),u=apn.P.$Obu(e),h=apn.P._usePagePause(e);if(void 0===a)i?(g&&(l.flickLeft={},l.flickRight={},l.flickUp={},l.flickDown={}),l.click={},u&&(l.pageLoad={}),l.pageRun={},h&&(l.pagePause={})):(u&&(l.pageLoad={}),l.pageRun={},h&&(l.pagePause={}),g&&(l.flickLeft={},l.flickRight={},l.flickUp={},l.flickDown={}),l.click={}),apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.exeScripting&&(l.spt_EvtBubble={},l.spt_Custom={});else if(d){d.APX_NO_POINTER_EV||(l.click={},(r||apn.dbUI&&apn.dbUI.system&&1==apn.dbUI.system.exeEventStart)&&(l.tapStart={}),g&&(l.flickLeft={},l.flickRight={},l.flickUp={},l.flickDown={}),(r||apn.dbUI&&apn.dbUI.system&&1==apn.dbUI.system.exeEventHover)&&(l.pointerOver={},l.pointerOut={}),(r||window.asui&&asui.CFG&&asui.CFG.getAccessInfo&&asui.CFG.getAccessInfo()&&asui.CFG.getAccessInfo().exeEventDrag===!0)&&((d.styleMap.dragX||d.styleMap.dragY)&&(l.dragStart={},l.drag={},l.dragEnd={},l.dragDropResult={value:"dragDropResult",title:apn.P.eventTitle.dragDropResult,param:{Accepted:"Accepted",Rejected:"Rejected"}}),l.dragDrop={}),(r||p&&"Y"==p.evPch)&&(l.pinchIn={},l.pinchOut={}));var x=e.pages[t].objects[a].create.data;if(x&&x.properties&&x.properties.attrs&&x.properties.attrs.apxMediaControl&&(!r&&apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.exeNativePlayer?l.media={value:"media",title:apn.P.eventTitle.media,param:{Start:"Start",End:"End"}}:l.media={value:"media",title:apn.P.eventTitle.media,param:{Start:"Start",Resume:"Resume",Pause:"Pause",End:"End",trackStart:"TrackStart",trackEnd:"TrackEnd",trackEndN:"TrackEndNormal"}}),x&&x.properties&&x.properties.attrs&&x.properties.attrs.apxAnimate&&(l.animation={value:"animation",title:apn.P.eventTitle.animation,param:{Start:"Start",End:"End"}}),d.edtOnBuildEvent)try{d.edtOnBuildEvent(e,a,t,l,r)}catch(e){console.error("Program error in edtOnBuildEvent() of "+x.wgtID+"\n\n"+e)}apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.exeScripting&&(l.spt_WgtStart={},l.spt_Custom={})}var f,y;if(d){var b,v=!0;if(d.editor&&d.editor.statesFire){var C=[];for(f in d.editor.statesFire)C.push({stateID:"$APX"+f,title:d.editor.statesFire[f]})}else{var C=apn.Project.getExeStateByObjectID(e,t,a);d&&d.exeFireStateEvent||(v=!1)}if(r||apn.Project.getSPT(e,t,a,"stateChange")&&(b=!0),C&&C.length&&(C.length>1||b)&&v)for(l.stateChange={value:"stateChange",title:apn.P.eventTitle.stateChange,param:{}},f=0;f<C.length;f++)l.stateChange.param[C[f].stateID]=C[f].title}if(l.dragDrop){var m=e.pages[t],I=apn.Project.findParentOf(m,a),S=[],_={};for(f in m.objects)if(m.objects[f].layout&&m.objects[f].layout.children&&"bx.CEditorWnd.CGroup"!=m.objects[f].module)for(y=0;y<m.objects[f].layout.children.length;y++)_[m.objects[f].layout.children[y]]=f;for(f in m.objects)f!=a&&I==_[f]&&S.push(f);if(S.length){l.dragDrop.value="dragDrop",l.dragDrop.title=apn.P.eventTitle.dragDrop,l.dragDrop.param={},S.sort(o);var T;for(l.dragDrop.param.$ELSE="[Else]",f=0;f<S.length;f++)T="",apn.Project.getWidgetModule(m.objects[S[f]].create.data)&&(m.objects[S[f]].create.data.styles&&m.objects[S[f]].create.data.styles.title&&(T=m.objects[S[f]].create.data.styles.title),T||(T+="("+m.objects[S[f]].create.data.wgtTitle+")"),l.dragDrop.param[S[f]]=T)}}if(void 0===a){var w=apn.P.$O7u(e);if(w&&e.pages[t]){for(f in e.pages[t].objects)if((d=apn.Project.getWidgetModule(e.pages[t].objects[f].create.data))&&d.events&&d.events.length)for(y=0;y<d.events.length;y++)d.events[y]&&s(w,d.events[y]);var P=apn.Project.findITRs(e,t,a);if(P&&P.length)for(f=0;f<P.length;f++)s(w,P[f].event,!0);for(f in w)if(w[f].fromPage)if(w[f].param)for(y in w[f].param)s(w,f+":"+y);else s(w,f)}}for(f in l){if(l[f].param&&l[f].$O3O)for(y in l[f].param)l[f].$O3O[y]||delete l[f].param[y];l[f].$O3O&&delete l[f].$O3O,l[f].value=f,l[f].title||(l[f].title=apn.P.eventTitle[f]),c.push(l[f])}return n?l:c},apn.P.isDrawTypeEvent=function(e){return"drawLeft"==e||"drawRight"==e||"drawUp"==e||"drawDown"==e},apn.P.isTransitionOP=function(e,t,a,i){return!!apn.P.isLinkOP(e)||"CWS"==e&&2==apn.Project.checkStateTypeByObjectID(t,a,i)},apn.P.isLinkOP=function(e){if("LTP"==e||"LTH"==e||"LTB"==e)return!0},apn.P.isTimingOP=function(e,t,a,i){return"CWS"==e&&1==apn.Project.checkStateTypeByObjectID(t,a,i)},apn.P.isBackwardOP=function(e){return"LTB"==e||"LTH"==e},apn.P.isTimingEffect=function(e){return"moveLeft"==e||"moveRight"==e||"moveTop"==e||"moveBottom"==e||("slideUpLeft"==e||"slideUpRight"==e||"slideUpTop"==e||"slideUpBottom"==e||("cardUpLeft"==e||"cardUpRight"==e||"cardUpTop"==e||"cardUpBottom"==e||("cardUpInLeft"==e||"cardUpInRight"==e||"cardUpInTop"==e||"cardUpInBottom"==e||("stackInLeft"==e||"stackInRight"==e||"stackInTop"==e||"stackInBottom"==e||("stackOutLeft"==e||"stackOutRight"==e||"stackOutTop"==e||"stackOutBottom"==e)))))},apn.P.getThumbIcon=function(e,t,a){if(a){var i=apn.Project.getWidgetModule(e.pages[t].objects[a].create.data);if(i&&i.editor&&i.editor.iconThumb)return i.editor.iconThumb}return"imgs/wgts/thumbs/page.png"},apn.P.getLtpTarget=function(e,t,a){for(var i in e.pages)"apn.CFlowPage"==e.pages[i].module&&(t&&t!=i||apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.exeItrSelfReset)&&(a[i]=e.pages[i])},apn.P.getPropTextFit=function(){return[{title:apn.CExe.GL({ko:"안함",en:"No"}),value:0},{title:apn.CExe.GL({ko:"자간 조정",en:"BySpacing"}),value:2},{title:apn.CExe.GL({ko:"자간 축소",en:"ShrinkBySpacing"}),value:4},{title:apn.CExe.GL({ko:"글자 압축",en:"ShrinkByScaling"}),value:1},{title:apn.CExe.GL({ko:"자간&압축 축소",en:"ShrinkByBoth"}),value:5}]},window.apn=window.apn||{},apn.Project=apn.Project||{},apn.Project.ID_START_POINT="$SP",apn.Project.ID_END_POINT="$EP",apn.Project.ID_OUT_POINT=apn.Project.ID_END_POINT,apn.Project.ID_IN_POINT="$IP",apn.Project.ID_2NDARY_POINT="$2P",apn.Project.FILLSTYLE_PAGE="#ffffff",apn.Project.$O18=function(e){var t={CTXT:{layoutID:null},property:{ver:"1.0"},pages:{S:{UI:{title:"START",noEditable:!0},objects:{},module:"apn.CFlowStartPage"},E:{UI:{title:"OUT",noEditable:!0},objects:{},module:"apn.CFlowEndPage"},I:{UI:{title:"IN",noEditable:!0},objects:{},module:"apn.CFlowInPage"},C:{UI:{title:"CLIENT",noEditable:!0},objects:{},module:"apn.CFlow2ndStartPage"}},layouts:{},flow:{pages:{}},rsc:{},index:{pageID:1,layoutID:1,rscID:Math.ceil(1e9*Math.random())}};return e&&(void 0!==e.id&&(t.property.id=e.id),void 0!==e.corpID&&(t.property.corpID=e.corpID),void 0!==e.accountID&&(t.property.accountID=e.accountID)),t},apn.Project.$O19=function(e,t){function a(t,i,n){if(!e.pages[t].objects[i])return void(window.console&&console.error("[AspenCHK] Dangling object",t,i,e.pages[t].objects[i]));var r=e.pages[t].objects[i].layout;if(r&&r.children){for(var o=0;o<r.children.length;o++)if(r.children[o]==n&&(r.children.splice(o,1),o--,s=-1,r.layers))for(var p in r.layers)r.layers[p].id==n&&delete r.layers[p];for(o=0;o<r.children.length;o++)a(t,r.children[o],n)}}function i(e,t){var a;for(var i in e.objects)if("bx.CEditorWnd.CGroup"!=e.objects[i].module&&e.objects[i].layout&&e.objects[i].layout.children)for(a=0;a<e.objects[i].layout.children.length;a++)if(e.objects[i].layout.children[a]==t)return i}function n(t,a){var n,r=e.pages[t].objects[a].layout;if(r&&r.layers&&(!r.children||!r.children.length))return window.console&&console.error("[AspenCHK] Broken layer container",t,a,e.pages[t].objects[a]),delete e.pages[t].objects[a],!0;if(r&&r.children)for(var o=0;o<r.children.length;o++)if(!e.pages[t].objects[r.children[o]]){if(r.layers)for(var s in r.layers)r.layers[s].id==r.children[o]&&delete r.layers[s];window.console&&console.error("[Aspen] Dangled child="+r.children[o],t,a,e.pages[t].objects[a]),r.children.splice(o,1),o--,n=!0}return"apn.CLayer"!=e.pages[t].objects[a].module||i(e.pages[t],a)?n:(window.console&&console.error("[AspenCHK] Dangled layer",t,a,e.pages[t].objects[a]),delete e.pages[t].objects[a],!0)}if(!(e&&e.property&&e.pages&&e.layouts&&e.rsc&&e.index))return!1;var r=!1;for(var o in e.pages){if(!e.pages[o].UI)return!1;if(!e.pages[o].UI.noEditable){r=!0;break}}if(!r)return!1;var s=1;for(o in e.pages)for(var p in e.pages[o].objects)a(o,p,p);for(var s=1,l=!0;l;){l=!1;for(o in e.pages)for(var p in e.pages[o].objects)n(o,p)&&(l=!0)}if(apn.Project.docDcmpr(e),t){var d;for(o in e.pages)for(var p in e.pages[o].objects)if((d=apn.Project.getWidgetModule(e.pages[o].objects[p].create.data))&&d.srcOnPreParse)try{d.srcOnPreParse(e.pages[o].objects[p])}catch(t){window.console&&console.error("[AspenCHK] Program error in srcOnPreParse() of "+e.pages[o].objects[p].create.data.wgtID+"\n\n"+t)}}return s},apn.Project.$O10=function(e,t){e.layouts[e.index.layoutID]={CTXT:{},property:{screenSize:{w:parseInt(t.w),h:parseInt(t.h)},styles:{normal:{}},properties:{}},pages:{}},t.deviceID||apn.dbUI&&apn.dbUI.device&&(t.deviceID=apn.dbUI.device),e.CTXT.layoutID=e.index.layoutID,t.deviceID&&apn.widgetDevice[t.deviceID]?(e.layouts[e.index.layoutID].CTXT.deviceID=t.deviceID,apn.widgetDevice[t.deviceID].skinID&&(e.layouts[e.index.layoutID].property.skinID=apn.widgetDevice[t.deviceID].skinID),apn.widgetDevice[t.deviceID].themeID&&(e.layouts[e.index.layoutID].property.themeID=apn.widgetDevice[t.deviceID].themeID),apn.widgetDevice[t.deviceID].wgtLibID&&(e.layouts[e.index.layoutID].CTXT.wgtLibID=apn.widgetDevice[t.deviceID].wgtLibID),e.layouts[e.index.layoutID].property.skinShow=1):bx.Trace.log("APN","error","Unknown deviceID: "+t.deviceID,"Project.AL"),e.index.layoutID++},apn.Project.$O11=function(e,t){var a;return a=e.index.pageID+"",e.pages[a]={UI:{},objects:{}},t&&t.module&&(e.pages[a].module=t.module),t&&t.title?e.pages[a].UI.title=t.title:e.pages[a].UI.title=(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.page?apn.dbUI.system.page:"Page")+" "+a,t&&t.color&&(e.pages[a].UI.color=t.color),apn.Project.FILLSTYLE_PAGE&&(e.pages[a].BG={fillStyle:apn.Project.FILLSTYLE_PAGE}),e.index.pageID++,a},apn.Project.$O12=function(e,t){e.pages[t]&&(delete e.pages[t],e.flow.pages[t]&&delete e.flow.pages[t])},apn.Project.getPages=function(e,t,a){function i(t,a){return void 0===e.pages[t].UI.order&&void 0===e.pages[a].UI.order?0:void 0===e.pages[t].UI.order?1:void 0===e.pages[a].UI.order?-1:e.pages[t].UI.order-e.pages[a].UI.order}var n,r=[];if(a=a||"apn.CFlowPage",t)for(n in e.flow.pages)e.pages[n].module==a&&r.push(n);else for(n in e.pages)e.pages[n].module==a&&r.push(n);return r.sort(i),r},apn.Project.getPageTitles=function(e,t,a){for(var i=apn.Project.getPages(e,t,a),n=0;n<i.length;n++)e.pages[i[n]]&&e.pages[i[n]].UI.title?i[n]=e.pages[i[n]].UI.title:i[n]="";return i},apn.Project.$O3P=function(e){e.tmp=e.tmp||{},e.tmp.rscMap=e.tmp.rscMap||{}},apn.Project.$O13=function(e,t,a,i,n,r,o){return apn.Project.$O3P(e),e.rsc[e.index.rscID+""]={type:t,originFileName:i,width:n,height:r,data:"data:"+t+";base64,"+a},void 0!==o&&(e.rsc[e.index.rscID+""].UI=o),e.index.rscID++,e.index.rscID-1},apn.Project.$O5V=function(e,t){return apn.Project.$O3P(e),e.rsc[e.index.rscID+""]=t,e.index.rscID++,e.index.rscID-1},apn.Project.$O14=function(e,t,a,i,n,r,o,s){e.rsc[t].type=a,e.rsc[t].originFileName=n,e.rsc[t].width=r,e.rsc[t].height=o,e.rsc[t].data="data:"+a+";base64,"+i,void 0!==s?e.rsc[t].UI=s:void 0!==e.rsc[t].UI&&delete e.rsc[t].UI,apn.Project.$O3P(e),e.tmp.rscMap[t]&&(e.tmp.rscMap[t].src=e.rsc[t].data)},apn.Project.$O1a=function(e,t,a,i){function n(e,t){for(var a in e)if("mediaID"==a)if("object"==typeof e[a])for(var i in e[a])e[a][i]==t&&(e[a][i]=void 0,d=!0);else e[a]==t&&(e[a]=void 0,d=!0);else"object"==typeof e[a]&&n(e[a],t)}var r,o,s,p,l,d=!1;for(var c in e.pages)for(r in e.pages[c].objects){if(p=e.pages[c].objects[r],(l=apn.Project.getWidgetModule(p.create.data))&&l.edtOnRemoveAsset)try{l.edtOnRemoveAsset(e,p,t)&&(d=!0)}catch(e){i&&i.IEditable&&i.onSystemError("Program error in edtOnRemoveAsset() of "+p.create.data.wgtID+"\n\n"+e)}if(p.create.data&&p.create.data.styles&&n(p.create.data.styles,t),p.layout&&p.layout.states)for(o in p.layout.states)if(p.layout.states[o].objects)for(s in p.layout.states[o].objects)p.layout.states[o].objects[s].create.data&&p.layout.states[o].objects[s].create.data.styles&&n(p.layout.states[o].objects[s].create.data.styles,t)}n(apn.Project.getLayout(e).property,t);for(c in e.pages)e.pages[c].BG&&n(e.pages[c].BG,t),e.pages[c].UI&&n(e.pages[c].UI,t);return a&&(delete e.rsc[t],apn.Project.$O3P(e),e.tmp.rscMap[t]&&(e.tmp.rscMap[t].src="data:image/gif;base64,R0lGODlhAQABAIAAANvf7wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==")),d},apn.Project.$O5W=function(e){var t=0;for(var a in e.rsc)t+=e.rsc[a].data.length;return Math.round(.75*t)},apn.Project.$O16=function(e){return!e.states&&(e.states={0:{objects:{}}},e.state="0",e.stateIndex=0,!0)},apn.Project.$O17=function(e,t,a){e.states||apn.Project.$O16(e);var i,n=[];for(i in e.states)n.push(e.states[i]);apn.UTIL.sort(n,"order",1,!0);var r=n[n.length-1],o=++e.stateIndex+"";return e.states[o]={objects:{}},bx.$cloneObject(e.states[o],r),e.states[o].title=t,e.states[o].order=a,o},apn.Project.$O1b=function(e,t,a,i,n){if(void 0===a)var r=e.pages[t];else var r=e.pages[t].objects[a].layout;return apn.Project.$O17(r,i,n)},apn.Project.$O1c=function(e,t,a,i){if(!apn.Project.checkStateByObjectID(e,t,a,i))return bx.Trace.log("APN","warning","Invalid scene="+i,"Project.removeSceneByObjectID"),!1;if("0"==i)return!1;if(void 0===a)var n=e.pages[t];else var n=e.pages[t].objects[a].layout;return delete n.states[i],n.state==i&&(n.state="0"),!0},apn.Project.checkStateType=function(e){return e&&e.states?1:e&&e.layers?2:0},apn.Project.checkStateTypeByObjectID=function(e,t,a){if(void 0===a)var i=e.pages[t];else var i=e.pages[t].objects[a].layout;return apn.Project.checkStateType(i)},apn.Project.checkState=function(e,t){if(e.states&&void 0!==e.states[t])return!0;if(e.layout){if(e.layout.states&&void 0!==e.layout.states[t])return!0;if(e.layout.layers&&void 0!==e.layout.layers[t])return!0}return!1},apn.Project.checkStateByObjectID=function(e,t,a,i){if(void 0===a)var n=e.pages[t];else var n=e.pages[t].objects[a].layout;return apn.Project.checkState(n,i)},apn.Project.getStateByObjectID=function(e,t,a){var i=null;if(void 0===a)var n=e.pages[t];else var n=e.pages[t].objects[a].layout;if(n&&n.states){i=[];for(var r in n.states)i.push({stateID:r,order:n.states[r].order,duration:n.states[r].duration,title:apn.Project.getStateTitleByObjectID(e,t,a,r)})}else if(n&&n.layers){i=[];for(var r in n.layers)i.push({stateID:r,order:n.layers[r].order,duration:n.layers[r].duration,title:apn.Project.getStateTitleByObjectID(e,t,a,r)})}return i},apn.Project.getExeStateByObjectID=function(e,t,a){if(apn.Project.getApxState(e,t,a)){var i=apn.Project.getApxState(e,t,a),n=[];for(var r in i)n.push({stateID:"$APX"+r,title:i[r]});return n}return apn.Project.getStateByObjectID(e,t,a)},apn.Project.getStateTitleByObjectID=function(e,t,a,i){if(void 0===a)var n=e.pages[t];else var n=e.pages[t].objects[a].layout;return n&&n.states&&n.states[i]?n.states[i].title||("0"==i?"Base":"Scene"+i):n&&n.layers&&n.layers[i]?n.layers[i].title||"":""},apn.Project.getExeStateTitleByObjectID=function(e,t,a,i){if(apn.Project.getApxState(e,t,a)){var n=apn.Project.getApxState(e,t,a);return void 0!==n[i.substring(4)]?n[i.substring(4)]:""}return apn.Project.getStateTitleByObjectID(e,t,a,i)},apn.Project.getStateLayerObjectID=function(e,t,a,i){var n=null,r=e.pages[t].objects[a].layout;return r&&r.layers&&(n=r.layers[i].id),n},apn.Project.getApxState=function(e,t,a){if(a){var i=apn.Project.getWidgetModule(e.pages[t].objects[a].create.data);if(i&&i.edtOnBuildState){var n={};try{i.edtOnBuildState(e,a,t,n)}catch(i){console.error("Program error in edtOnBuildState() of "+e.pages[t].objects[a].create.data.wgtID+"\n\n"+i)}return n}if(i&&i.editor&&i.editor.states)return i.editor.states}return null},apn.Project.$O5j=function(e){return!(!e||"$"!=e.charAt(0))},apn.Project.$O1d=function(e,t){var a=apn.Project.findITRs(e,t.from.pageID,t.from.objectID);if(a){for(var i=0;i<a.length;i++)if(a[i]==t)return a.splice(i,1),void console.error("Remove ITR",t)}else bx.Trace.log("APN","warning","Invalid itr link","Project.$O1d")},apn.Project.findITRs=function(e,t,a,i){if(t)return e.pages[t]?a&&!apn.Project.$O5j(a)?e.pages[t].objects[a]?(i&&(e.pages[t].objects[a].ITRs=e.pages[t].objects[a].ITRs||[]),e.pages[t].objects[a].ITRs):void console.error("Missing",t,a):(i&&(e.pages[t].ITRs=e.pages[t].ITRs||[]),e.pages[t].ITRs):void console.error("Missing",t,a)},apn.Project.createITR=function(e,t,a,i){var n={};if(n.event=i||"click",n.action=t,"LTP"==t)bx.$copyObject(n,a),n.to=n.to||{},n.to.type=n.to.type||"1",apn.Project.$O5j(n.from.objectID)&&(n.event="none"),n.transit={};else if("LTB"==t||"LTH"==t)n.transit={},void 0===a.objectID&&(n.transit.effect="moveRight");else if("CWS"==t){n.target=a||{};var r;r=void 0===a.objectID?e.pages[a.pageID]:e.pages[a.pageID].objects[a.objectID].layout,apn.Project.getApxState(e,a.pageID,a.objectID)||(1==apn.Project.checkStateType(r)?n.timing={}:2==apn.Project.checkStateType(r)&&(n.transit={}))}else if("CWP"==t){if(n.target={objectID:a.objectID},a.set){var o=apn.P.getSetOfCWP(e,a.pageID,a.objectID);for(var s in a.set)if(o[s]){n.set={},n.set[s]=a.set[s],2==o[s].type&&(n.timing={roundUp:!1}),o[s].trace&&(n.trace={type:"none"});break}}}else"WAT"==t?n.timing={timing:"linear",duration:0}:"FDR"==t?n.result=!0:"URL"==t?n.url="http://":"CMT"==t&&(n.comment="");return n},apn.Project.$O3Q=function(e){if("LTP"==e||"LTH"==e||"LTB"==e)return!0},apn.Project.verifyITR=function(e,t,a,i){function n(){if(apn.Project.$O3Q(t.action)){var n=apn.Project.findITRs(e,a,i);if(n&&n.length)for(var r=0;r<n.length;r++)if(n[r]!=t&&n[r].event==t.event&&apn.Project.$O3Q(n[r].action))return!0}return!1}if(!t.event||!t.action)return!1;if("LTP"==t.action){if(!t.from.pageID||!t.to.pageID)return!1;if(!t.to.type)return!1;if(n())return!1}else if("LTH"==t.action||"LTB"==t.action){if(n())return!1}else if("CWS"==t.action){if(!t.target.stateID)return!1}else if("CWP"==t.action){if(!t.target.objectID)return!1;if(!t.set)return!1}else if("WAT"==t.action){if(!t.timing||!t.timing.duration)return!1}else if("URL"==t.action){if(!t.url)return!1;if(!t.target||!t.target.objectID)return!1}else"CMT"==t.action;return!0},apn.Project.dictateITR=function(e,t,a,i,n){function r(e){return Math.round(bx.$checkNaN(parseFloat(e)))}function o(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function s(e){var t="";return"none"!=e.effect&&(t+="with "+h+apn.P.effectTitle[e.effect]+x+" effect ",t+=p(e)),t}function p(e){var t="";return e.duration?t+="for "+h+r(e.duration)+"ms"+x+" in "+(e.roundUp?" round-trip of ":"")+h+apn.P.timingTitle[e.timing]+x+(r(e.wait)?" after waiting "+r(e.wait)+"%":"")+" ":e.roundUp&&(t+="in round-trip "),t}function l(e){var t="";return e.type&&"none"!=e.type&&(t+="in trace of "+h+apn.P.traceTitle[e.type]+"["+e.ratio+"]"+x+" "),t}function d(e,t,a){var n="";return t&&(void 0===e.target.objectID?n="[This page]":e.target.objectID===i?n="[Self]":a&&(a.create.data.styles.title&&(n=a.create.data.styles.title),
n+="("+a.create.data.wgtTitle+")")),o(n)}var c,g="",u=bx.$copyObject({},t),h=n?'<span style="'+n+'">':'"',x=n?"</span>":'"';if(u.transit?apn.Project.resolveTransit(e,u.transit,apn.P.isBackwardOP(u.action)):u.timing&&apn.Project.resolveTiming(e,u.timing),"LTP"==u.action)u.to.pageID==a?g+="Reset "+h+"[This "+(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.page?apn.dbUI.system.page:"Page")+"]"+x:(g+="Link to "+h+o(apn.Project.getPageTitle(e,u.to.pageID))+x+" "+(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.page?apn.dbUI.system.page:"Page").toLowerCase()+" ",u.to.reset&&(g+="and reset "),u.transit&&(g+=s(u.transit)),2==u.to.type?g+="in replacing history":3==u.to.type&&(g+="as popup "+(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.page?apn.dbUI.system.page:"Page").toLowerCase()));else if("LTB"==u.action)g+="Link back to previous "+(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.page?apn.dbUI.system.page:"Page").toLowerCase()+" ",u.reset&&(g+="and reset "),u.transit&&(g+=s(u.transit));else if("LTH"==u.action)g+="Link back to home ",u.reset&&(g+="and reset "),u.transit&&(g+=s(u.transit));else if("WAT"==u.action)g+="Wait ",g+="for "+h+r(u.timing.duration)+x+"ms ";else if("CWS"==u.action){var f;if(!(f=e.pages[a].objects[u.target.objectID])&&apn.CClipboard&&apn.CClipboard.$O5Z){var y=apn.CClipboard.$O5Z();y&&y.opCut&&y.data&&y.data.objects&&y.pageID==a&&y.data.objects[u.target.objectID]&&(f=y.data.objects[u.target.objectID],c=!0)}var b=d(u,a,f);"$F"==u.target.stateID?g+="Set forward state of "+h+b+x+" ":"$B"==u.target.stateID?g+="Set backward state of "+h+b+x+" ":"$RF"==u.target.stateID?(g+="Set forward state of "+h+b+x+" ",g+="in round-robin "):"$RB"==u.target.stateID?(g+="Set forward state of "+h+b+x+" ",g+="in round-robin "):g+=c?"Set state of "+h+b+x+" to "+h+'<span style="color:#ff0000;">[Temp]</span>'+x+" ":"Set state of "+h+b+x+" to "+h+o(apn.Project.getExeStateTitleByObjectID(e,a,u.target.objectID,u.target.stateID))+x+" ",u.transit&&(g+=s(u.transit)),u.timing&&(g+=p(u.timing))}else if("CWP"==u.action){var v,C,f;for(var m in e.pages)for(v in e.pages[m].objects)if(v==u.target.objectID){C=m,f=e.pages[a].objects[u.target.objectID];break}if(!C){if(apn.CClipboard&&apn.CClipboard.$O5Z){var y=apn.CClipboard.$O5Z();y&&y.opCut&&y.data&&y.data.objects&&y.data.objects[u.target.objectID]&&(C=y.pageID,f=y.data.objects[u.target.objectID],c=!0)}if(!C)return{txt:""}}var b=d(u,C,f);if(u.set&&void 0!==u.set.text&&(g+="Set text of "+h+b+x+" to "+h+'"'+o(u.set.text)+'"'+x+" "),u.set&&void 0!==u.set.value&&(g+="Set value of "+h+b+x+" to "+h+'"'+o(u.set.value)+'"'+x+" "),u.set&&void 0!==u.set.textColor&&(g+="Set text color of "+h+b+x+" to "+h+'<span style="border:solid 1px #afafaf;background-color:'+u.set.textColor+';">&nbsp;&nbsp;&nbsp;</span>'+x+" "),u.set&&void 0!==u.set.alpha&&(g+="Set opacity of "+h+b+x+" to "+h+r(100*u.set.alpha)+"%"+x+" "),u.set&&void 0!==u.set.trOrg&&(g+="Set zoom/angle center of "+h+b+x+" to "+h+"X="+r(100*u.set.trOrg.orgX)+"% Y="+h+r(100*u.set.trOrg.orgY)+"%"+x+" "),u.set&&void 0!==u.set.angle&&(g+="Rotate "+h+b+x+" to "+h+new Number(bx.CCanvasWnd.radToDegree(u.set.angle)).toFixed(1)+x+"˚ "),u.set&&void 0!==u.set.media&&(g+=u.set.media+" media of "+h+b+x+" "),u.set&&void 0!==u.set.animation&&(g+=u.set.animation+" animation of "+h+b+x+" "),u.set&&u.set.size&&(g+="Resize "+h+b+x+" to "+h+"W="+r(u.set.size.w)+", H="+r(u.set.size.h)+x+" "),u.set&&u.set.sizeBy&&(g+="Resize "+h+b+x+" by "+h+"W="+r(u.set.sizeBy.w)+", H="+r(u.set.sizeBy.h)+x+(u.set.sizeBy.originCenter?" from center ":" ")),u.set&&u.set.position&&(g+="Move "+h+b+x+" to "+h+"X="+r(u.set.position.x)+", Y="+r(u.set.position.y)+x+" "),u.set&&u.set.positionBy&&(g+="Move "+h+b+x+" by "+h+"X="+r(u.set.positionBy.x)+", Y="+r(u.set.positionBy.y)+x+" "),u.set&&u.set.zoom&&(g+="Zoom "+h+b+x+" to "+h+(u.set.zoom.w?"W="+r(100*u.set.zoom.w)+"%":"")+(u.set.zoom.h?" H="+r(100*u.set.zoom.h)+"%":"")+x+" "),u.set&&u.set.line&&(g+="Line "+h+b+x+" from "+h+"("+r(u.set.line.x1)+","+r(u.set.line.y1)+")"+x+" to "+h+"("+r(u.set.line.x2)+","+r(u.set.line.y2)+") "),u.set&&void 0!==u.set.visibility){var I="Show",S=" ";"Hide"==u.set.visibility&&(I="Hide"),"Pass"==u.set.visibility&&(S=" in bypassing input events "),"Block"==u.set.visibility&&(S=" in disabling input events "),g+=I+" "+h+b+x+S}if(u.set&&void 0!==u.set.zIndex&&(g+="restore"==u.set.zIndex?"Restore z-index of "+h+b+x+" to original value ":"Set z-index of "+h+b+x+" to "+h+u.set.zIndex+x+" level "),u.set&&u.set.drag&&("No"==u.set.drag.dragX&&"No"==u.set.drag.dragY?g+="Disable dragging for "+h+b+x:(g+="Enable dragging for "+h+b+x+" by ","Yes"==u.set.drag.dragX&&"Yes"==u.set.drag.dragY?g+="X,Y ":"Yes"==u.set.drag.dragX?g+="X ":"Yes"==u.set.drag.dragY&&(g+="Y "),"Yes"==u.set.drag.dragInParent&&(g+="keeping in parent area "))),u.set&&u.set.extended){g+="Set property of "+h+b+x+" by";var _,T,w=apn.P.getSetOfCWP(e,a,u.target.objectID),P=0;for(var E in u.set.extended){if(T=u.set.extended[E],w.extended&&w.extended.extended[E]&&w.extended.extended[E].input instanceof Array)for(_=0;_<w.extended.extended[E].input.length;_++)if(w.extended.extended[E].input[_]instanceof Object&&w.extended.extended[E].input[_].title&&w.extended.extended[E].input[_].value==T){T=w.extended.extended[E].input[_].title;break}g+=(P?",":"")+" "+h+(w.extended&&w.extended.extended[E]&&w.extended.extended[E].title?w.extended.extended[E].title:E)+"="+T+h,P++}g+=" "}u.timing&&(g+=p(u.timing)),u.trace&&(g+=l(u.trace))}else if("FDR"==u.action)g+=u.result?"Notify that this drop is accepted":"Notify that this drop is rejected";else if("URL"==u.action)if(g+="Load "+h+o(u.url)+x+" ","$URL_CW"==u.target.objectID)g+="into current tab or browser ";else if("$URL_CF"==u.target.objectID)g+="into current frame ";else if("$URL_NW"==u.target.objectID)g+="into new tab or browser ";else{var v,C;for(var m in e.pages)for(v in e.pages[m].objects)if(v==u.target.objectID){C=m;break}if(!C)return{txt:""};g+="into "+h+d(u,C)+x+" "}else"CMT"==u.action&&(g+=h+"※ <em>"+o(u.comment)+"</em>"+x);if(g&&!c&&"CMT"!=u.action&&t.event&&t.event.indexOf(":")!=-1){a||t.from&&t.from.pageID&&(a=t.from.pageID);for(var _,V=apn.P.getEvent(e,a,i),j=apn.P.resolveCompositeSysEV(t.event),E=0;E<V.length;E++)if(V[E].value==j.ev&&V[E].param)for(_ in V[E].param)if(_==j.param){g="$ELSE"==j.param?"Else, "+g.substring(0,1).toLowerCase()+g.substring(1):"On "+h+V[E].param[_]+x+", "+g.substring(0,1).toLowerCase()+g.substring(1);break}}return{txt:g,disabled:c}},apn.Project.iterateAllITR=function(e,t){var a,i;for(var n in e.pages){if(e.pages[n].ITRs&&e.pages[n].ITRs.length)for(i=0;i<e.pages[n].ITRs.length;i++)t(n,e.pages[n].ITRs[i])&&(console.error("Remove ITR 2",e.pages[n].ITRs[i]),e.pages[n].ITRs.splice(i,1),i--);for(a in e.pages[n].objects)if(e.pages[n].objects[a].ITRs&&e.pages[n].objects[a].ITRs.length)for(i=0;i<e.pages[n].objects[a].ITRs.length;i++)t(n,e.pages[n].objects[a].ITRs[i])&&(console.error("Remove ITR 3",e.pages[n].objects[a].ITRs[i]),e.pages[n].objects[a].ITRs.splice(i,1),i--)}},apn.Project.findSPT=function(e,t,a,i){if(t){if(!e.pages[t])return void console.error("Missing",t,a);if(a&&!apn.Project.$O5j(a)){if(!e.pages[t].objects[a])return;return i&&(e.pages[t].objects[a].SPT=e.pages[t].objects[a].SPT||{}),e.pages[t].objects[a].SPT}return i&&(e.pages[t].SPT=e.pages[t].SPT||{}),e.pages[t].SPT}},apn.Project.findIJS=function(e,t,a){if(t&&e.pages[t]){var i=apn.Project.getLayout(e).property.CExe,n="";if(i&&i.js&&i.js.fs.length&&e.pages[t].IJS&&e.pages[t].IJS[a]&&e.pages[t].IJS[a].length)for(var r,o=e.pages[t].IJS[a],s=0;s<o.length;s++)if(o[s].name)for(r=0;r<i.js.fs.length;r++)i.js.fs[r].js.data&&i.js.fs[r].js.name==o[s].name&&(n+=i.js.fs[r].js.data+"\n\n");return n}},apn.Project.getSPT=function(e,t,a,i){var n=apn.Project.findSPT(e,t,a),r=apn.P.resolveCompositeSysEV(i);r&&r.ev&&(i=r.ev);var o="";return o+=apn.Project.findIJS(e,t,i),n&&n[i]&&(o+=n[i]),o},apn.Project.evtCmtForSPT=function(e,t,a,i){return"%%TODO"},apn.Project.setStyle=function(e,t,a){var i=apn.theme[e.layouts[e.CTXT.layoutID].property.themeID].styles.normal,n=e.layouts[e.CTXT.layoutID].property.styles.normal;void 0!==i[t]&&i[t]==a?delete n[t]:n[t]=a},apn.Project.setProperty=function(e,t,a){var i=apn.theme[e.layouts[e.CTXT.layoutID].property.themeID].properties,n=e.layouts[e.CTXT.layoutID].property.properties;void 0!==i[t]&&i[t]==a?delete n[t]:n[t]=a},apn.Project.resolveStyle=function(e,t,a,i){if(void 0===a){var n=apn.theme[e.layouts[e.CTXT.layoutID].property.themeID].styles.normal,r=e.layouts[e.CTXT.layoutID].property.styles.normal;if(void 0===r[t]&&void 0!==n[t]&&(r[t]=n[t]),void 0!==r[t])return r[t];if(void 0!==n[t])return n[t];if("fontStrokeStyle"==t)return"#000000";if("fontStrokeWidth"==t)return 0;if("ltrSp"==t)return 0;if("lnSp"==t)return 0;if("csr"==t)return"apn.auto";if("textFit"==t)return 0}return a},apn.Project.resolveProperty=function(e,t,a){if(void 0===a){var i=apn.theme[e.layouts[e.CTXT.layoutID].property.themeID].properties,n=e.layouts[e.CTXT.layoutID].property.properties;if(void 0!==n[t])return n[t];if(void 0!==i[t])return i[t];if("exeScreenSetup"==t)return;if("exeNetworkMode"==t)return;bx.Trace.log("APN","warning","Invalid style resolved key="+t,"Project.resolveProperty")}return a},apn.Project.resolveTiming=function(e,t){void 0===t.timing&&(t.timing=apn.Project.resolveProperty(e,"trTiming")),void 0===t.duration&&(t.duration=apn.Project.resolveProperty(e,"trDuration"))},apn.Project.resolveTransit=function(e,t,a){apn.Project.resolveTiming(e,t),void 0===t.effect&&(t.effect=apn.Project.resolveProperty(e,a?"trEffectBackward":"trEffectForward"))},apn.Project.getDefaultColors=function(e){var t=[];return apn.Project.resolveStyle(e,"fillStyle",void 0,!0)&&t.push(apn.Project.resolveStyle(e,"fillStyle",void 0,!0)),apn.Project.resolveStyle(e,"strokeStyle",void 0,!0)&&t.push(apn.Project.resolveStyle(e,"strokeStyle",void 0,!0)),apn.Project.resolveStyle(e,"fontStyle",void 0,!0)&&t.push(apn.Project.resolveStyle(e,"fontStyle",void 0,!0)),apn.Project.resolveStyle(e,"fontStrokeStyle",void 0,!0)&&t.push(apn.Project.resolveStyle(e,"fontStrokeStyle",void 0,!0)),t},apn.Project.getExeModule=function(prj,_noDefault){var id=apn.Project.getExeModuleID(prj),module=eval(id);return module?module:_noDefault?null:(bx.Trace.log("APN","warning","Unknown Exe module id="+apn.Project.getLayout(prj).CTXT.exeID,"Project.getExeModule"),apn.CExe)},apn.Project.getExeModuleID=function(e,t){if(apn.Project.getLayout(e).CTXT.exeID=apn.Project.getLayout(e).CTXT.exeID||apn.Project.getExe(e),apn.Project.getLayout(e).CTXT.exeID){if(apn.widgetDevice[apn.Project.getLayout(e).CTXT.deviceID].exeModule&&apn.widgetDevice[apn.Project.getLayout(e).CTXT.deviceID].exeModule[apn.Project.getLayout(e).CTXT.exeID])return apn.widgetDevice[apn.Project.getLayout(e).CTXT.deviceID].exeModule[apn.Project.getLayout(e).CTXT.exeID].module;t||bx.Trace.log("APN","warning","Unknown Exe module id="+apn.Project.getLayout(e).CTXT.exeID,"Project.getExeModuleID")}return t?null:"apn.CExe"},apn.Project.setExe=function(e,t){apn.Project.getLayout(e).CTXT.exeID=t},apn.Project.getExe=function(e){var t=apn.Project.getLayout(e).CTXT.exeID;if(!t){var a=apn.Project.getExeList(e);if(a.length){for(var i=0;i<a.length;i++)if(a[i].preset){t=a[i].id;break}t||(t=a[0].id)}else t="standard"}return t},apn.Project.getExeList=function(e){var t,a=[];if(t=apn.widgetDevice[apn.Project.getLayout(e).CTXT.deviceID].exeModule)for(var i in t)a.push({id:i,module:t[i].module,title:t[i].title,info:t[i].info||"",option:t[i].option,preset:t[i].preset});return a},apn.Project.getFontList=function(prj,exe){var fonts,devID;prj&&(devID=apn.Project.getLayout(prj).CTXT.deviceID),apn.dbUI&&apn.dbUI.font&&apn.dbUI.font.length?fonts=apn.dbUI.font:devID&&apn.widgetDevice[devID]&&apn.widgetDevice[devID].font&&apn.widgetDevice[devID].font.length&&(fonts=apn.widgetDevice[devID].font),fonts=fonts?fonts.concat():[];var clsExe;if(exe?clsExe=eval(exe):prj&&(clsExe=apn.Project.getExeModule(prj)),clsExe&&clsExe.IStub_getFonts){var exeFonts=clsExe.IStub_getFonts(void 0,prj);if(exeFonts.fonts)if("replace"==exeFonts.action)fonts=exeFonts.fonts;else if("add"==exeFonts.action){var i,j;for(j=0;j<fonts.length;j++)for(i=0;i<exeFonts.fonts.length;i++)if(exeFonts.fonts[i].face==fonts[j].face){fonts.splice(j,1),j--;break}fonts=fonts.concat(exeFonts.fonts)}}return fonts},apn.Project.getDevice=function(exe){var clsExe;return clsExe=eval(exe),clsExe&&clsExe.IStub_dbGetDevice?clsExe.IStub_dbGetDevice():null},apn.Project.getGetPubModule=function(exe){var clsExe;return clsExe=eval(exe),clsExe&&clsExe.IStub_dbGetPublishModule?clsExe.IStub_dbGetPublishModule():null},apn.Project.includeWidget=function(exe,wgtId,wgtLibItem){var clsExe;return clsExe=eval(exe),wgtLibItem.UI.check===!0?!!(clsExe&&clsExe.IStub_dbIncludeWidget&&clsExe.IStub_dbIncludeWidget(wgtId,wgtLibItem)):1===wgtLibItem.UI.check?!clsExe||!clsExe.IStub_dbIncludeWidget||clsExe.IStub_dbIncludeWidget(wgtId,wgtLibItem)!==!1:void 0},apn.Project.getCursorList=function(e,t,a){var i=[{title:"Aspen/auto",value:"apn.auto",css:"default"},{title:"CSS/auto",value:"auto",css:"auto"},{title:"CSS/default",value:"default",css:"default"},{title:"CSS/pointer",value:"pointer",css:"pointer"},{title:"CSS/crosshair",value:"crosshair",css:"crosshair"},{title:"CSS/progress",value:"progress",css:"progress"},{title:"CSS/wait",value:"wait",css:"wait"},{title:"CSS/not-allowed",value:"not-allowed",css:"not-allowed"},{title:"CSS/help",value:"help",css:"help"},{title:"CSS/move",value:"move",css:"move"},{title:"CSS/e-resize",value:"e-resize",css:"e-resize"},{title:"CSS/w-resize",value:"w-resize",css:"w-resize"},{title:"CSS/s-resize",value:"s-resize",css:"s-resize"},{title:"CSS/n-resize",value:"n-resize",css:"n-resize"},{title:"CSS/se-resize",value:"se-resize",css:"se-resize"},{title:"CSS/sw-resize",value:"sw-resize",css:"sw-resize"},{title:"CSS/ne-resize",value:"ne-resize",css:"ne-resize"},{title:"CSS/nw-resize",value:"nw-resize",css:"nw-resize"}];return i},apn.Project.publishListWidget=function(e){var t,a={};for(var i in e.pages)for(t in e.pages[i].objects)e.pages[i].objects[t].create.data&&e.pages[i].objects[t].create.data.wgtID&&(0==e.pages[i].objects[t].create.data.wgtID.indexOf("apn.")||apn.widgets[e.pages[i].objects[t].create.data.wgtID]&&apn.widgets[e.pages[i].objects[t].create.data.wgtID].APX_PUB_PRELOAD||(a[e.pages[i].objects[t].create.data.wgtID]=!0));return a},apn.Project.publishListFontFile=function(e,t,a,i,n){function r(e){if(!x[e])for(var a=0;a<o.length;a++)if(("file"==o[a].type||"dir"==o[a].type||"google"==o[a].type&&t)&&o[a].face==e&&(!i||!o[a].device)){x[e]=!0;break}}var o,s=apn.Project.getLayout(e).CTXT.deviceID;apn.dbUI&&apn.dbUI.font&&apn.dbUI.font.length?o=apn.dbUI.font:apn.widgetDevice[s]&&apn.widgetDevice[s].font&&apn.widgetDevice[s].font.length&&(o=apn.widgetDevice[s].font),o=o?o.concat():[];var p,l,d,c=apn.Project.getExeModule(e);if(c.IStub_getFonts&&(p=c.IStub_getFonts(void 0,e),p&&p.fonts)){for(d=0;d<o.length;d++)for(l=0;l<p.fonts.length;l++)if(p.fonts[l].face==o[d].face){o.splice(d,1),d--;break}o=o.concat(p.fonts)}if(!o.length)return o;var g,u,h=[],x={};a&&(g=apn.Project.resolveStyle(e,"font"),r(g),"Open Sans"!=g&&r("Open Sans"));for(l in e.pages)if(!n||n==l)for(d in e.pages[l].objects)e.pages[l].objects[d].create.data&&e.pages[l].objects[d].create.data.styles&&(g=apn.Project.resolveStyle(e,"font",e.pages[l].objects[d].create.data.styles.font),r(g));for(l in e.pages)if(!n||n==l)for(d in e.pages[l].objects)e.pages[l].objects[d].create.data&&e.pages[l].objects[d].create.data.properties&&e.pages[l].objects[d].create.data.properties.attrs&&e.pages[l].objects[d].create.data.properties.attrs.apxFont&&r(e.pages[l].objects[d].create.data.properties.attrs.apxFont);var f,y;for(l in e.pages)if(!n||n==l)for(d in e.pages[l].objects)if((f=apn.Project.getWidgetModule(e.pages[l].objects[d].create.data))&&f.pubOnGetFontList)try{if(y=f.pubOnGetFontList(e,l,d),y&&y.length)for(u=0;u<y.length;u++)r(y[u])}catch(t){console.error("Program error in pubOnGetFontList() of "+e.pages[l].objects[d].create.data.wgtID,t)}for(u=0;u<o.length;u++)("file"==o[u].type||"dir"==o[u].type||"google"==o[u].type&&t)&&x[o[u].face]&&h.push(bx.$cloneObject({},o[u]));return h},apn.Project.publishListAsset=function(e,t,a){function i(e){for(var t in e)if("mediaID"==t)if("object"==typeof e[t])for(var n in e[t])(e[t][n]&&e[t][n].charAt&&"R"==e[t][n].charAt(0)||a)&&(o[e[t][n]]=!0);else(e[t]&&e[t].charAt&&"R"==e[t].charAt(0)||a)&&(o[e[t]]=!0);else"object"==typeof e[t]&&i(e[t])}var n,r,o={};if(t)for(r in e.pages[t].objects)i(e.pages[t].objects[r].create.data);else for(n in e.pages)for(r in e.pages[n].objects)i(e.pages[n].objects[r].create.data);i(apn.Project.getLayout(e).property);for(n in e.pages)e.pages[n].BG&&i(e.pages[n].BG),e.pages[n].UI&&i(e.pages[n].UI);var s=[];for(var r in o)s.push(r);return s},apn.Project.publishMeta=function(e,t,a){function i(e,a,i){e[t]&&(a&&i?(o.pages=o.pages||{},o.pages[a]=o.pages[a]||{},o.pages[a][i]=e[t]):o.file=e[t])}var n,r,o={};for(n in e.pages)for(r in e.pages[n].objects)e.pages[n].objects[r].create.data&&e.pages[n].objects[r].create.data.properties&&e.pages[n].objects[r].create.data.properties.attrs&&i(e.pages[n].objects[r].create.data.properties.attrs,n,r);return a&&apn.Project.getLayout(e).property[a]&&i(apn.Project.getLayout(e).property[a]),o},apn.Project.publishAttachments=function(e){var t,a,i,n,r,o=null;for(var s in e.pages)for(t in e.pages[s].objects)if(i=e.pages[s].objects[t],(n=apn.Project.getWidgetModule(i.create.data))&&n.pubOnGetAttachment){r=null;try{if((r=n.pubOnGetAttachment(e,s,t))&&r&&r.length)for(a=0;a<r.length;a++)r[a].name&&(o=o||[],o.push({name:s+"_"+t+r[a].name,data:r[a].data}))}catch(e){console.error("Program error in pubOnGetAttachment() of "+i.create.data.wgtID,e)}}var p=apn.Project.getExeModule(e);if(p.IStub_getMetaFile){var l=p.IStub_getMetaFile(e);if(l&&l.length)for(a=0;a<l.length;a++)o=o||[],o.push(l[a])}return o},apn.Project.publishHEAD=function(e){var t=apn.Project.getExeModule(e);return t.IStub_pubGetHEAD?t.IStub_pubGetHEAD(e):null},apn.Project.publishHTML=function(e,t){var a=apn.Project.getExeModule(e);return a.IStub_pubGetHTML?a.IStub_pubGetHTML(e,t):null},apn.Project.publishSTYLE=function(e){var t=apn.Project.getExeModule(e);return t.IStub_pubGetSTYLE?t.IStub_pubGetSTYLE(e):null},apn.Project.publishAsyncStart=function(e,t,a){var i=apn.Project.getExeModule(e);return i.IStub_pubOnPrePublish?i.IStub_pubOnPrePublish(e,t,a):void t()},apn.Project.publishEpub3MANIFEST=function(e){var t=apn.Project.getExeModule(e);return t.IStub_pubGetEpub3MANIFEST?t.IStub_pubGetEpub3MANIFEST(e):null},apn.Project.publishEpub3SPINE=function(e){return null},apn.Project.isWidget=function(e){return!(!e||!e.wgtID)},apn.Project.getWidgetID=function(e){return apn.Project.isWidget(e)&&apn.widgets&&apn.widgets[e.wgtID]?e.wgtID:null},apn.Project.getWidgetTitleFromLibrary=function(e,t){if(e){var a=apn.Project.getLayout(e).CTXT.deviceID;if(apn.widgetLibrary[a]&&apn.widgetLibrary[a].groups){var i,n,r,o=0;for(i=0;i<apn.widgetLibrary[a].groups.length;i++)if(apn.widgetLibrary[a].groups[i].widgets)for(n=0;n<apn.widgetLibrary[a].groups[i].widgets.length;n++)r=apn.widgetLibrary[a].groups[i].widgets[n],r.UI&&r.UI.title&&r.widget&&r.widget.id==t&&o++;if(o>1)return;for(i=0;i<apn.widgetLibrary[a].groups.length;i++)if(apn.widgetLibrary[a].groups[i].widgets)for(n=0;n<apn.widgetLibrary[a].groups[i].widgets.length;n++)if(r=apn.widgetLibrary[a].groups[i].widgets[n],r.UI&&r.UI.title&&r.widget&&r.widget.id==t)return r.UI.title}}},apn.Project.getWidgetModule=function(e){return apn.Project.isWidget(e)&&apn.widgets&&apn.widgets[e.wgtID]?apn.widgets[e.wgtID]:null},apn.Project.verifyWidgetModule=function(e){return!!apn.widgets[e]&&(!!apn.widgets[e].styleMap&&!(!apn.widgets[e].createAsCanvasObject&&!apn.widgets[e].createByEditor))},apn.Project.getPageTitle=function(e,t){return e.pages[t]&&e.pages[t].UI.title?e.pages[t].UI.title:(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.page?apn.dbUI.system.page:"Page")+" "+t},apn.Project.getEditablePageList=function(e){var t=[];for(var a in e.pages)e.pages[a].UI.noEditable||t.push(a);return t.sort(function(t,a){return void 0===e.pages[t].UI.order&&void 0===e.pages[a].UI.order?0:void 0===e.pages[t].UI.order?1:void 0===e.pages[a].UI.order?-1:e.pages[t].UI.order-e.pages[a].UI.order}),t},apn.Project.getScreenSize=function(e){return bx.$cloneObject({},e.layouts[e.CTXT.layoutID].property.screenSize)},apn.Project.setScreenSize=function(e,t,a){e.layouts[e.CTXT.layoutID].property.screenSize.w=t,e.layouts[e.CTXT.layoutID].property.screenSize.h=a},apn.Project.getLayout=function(e){return e.layouts[e.CTXT.layoutID]},apn.Project.createNew=function(e){var t=apn.Project.$O18(e);return apn.Project.$O11(t,{module:"apn.CFlowPage"}),apn.Project.$O10(t,e),t},apn.Project.findParentOf=function(e,t,a,i){var n;for(var r in e.objects)if(e.objects[r].layout&&e.objects[r].layout.children)for(n=0;n<e.objects[r].layout.children.length;n++)if(e.objects[r].layout.children[n]==t){if(i&&"bx.CEditorWnd.CGroup"==e.objects[r].module)return apn.Project.findParentOf(e,r,a,i);if(!a||e.objects[r].module==a)return r}},apn.Project.fontHasBold=function(e,t){return!(!apn.fonts||!apn.fonts[t]||apn.fonts[t].noBold)},apn.Project.sptCanVer2=function(e){var t,a,i;for(t in e.pages){if(e.pages[t].SPT)for(i in e.pages[t].SPT)if(e.pages[t].SPT[i]&&(e.pages[t].SPT[i]||"").indexOf("cloneScriptOf")!=-1)return!1;for(a in e.pages[t].objects)if(e.pages[t].objects[a].SPT)for(i in e.pages[t].objects[a].SPT)if(e.pages[t].objects[a].SPT[i]&&(e.pages[t].objects[a].SPT[i]||"").indexOf("cloneScriptOf")!=-1)return!1}return!0},apn.Project.isInHTML=function(e,t,a){var i;return!!((i=apn.Project.findParentOf(e.pages[t],a,void 0,!0))&&(i=apn.Project.findParentOf(e.pages[t],i,void 0,!0))&&e.pages[t].objects[i]&&e.pages[t].objects[i].create.data&&"apn.wgt.htmlCntr"==e.pages[t].objects[i].create.data.wgtID)},apn.Project.$O8G=function(e,t){if(t&&t.charAt&&("R"==t.charAt(0)||"X"==t.charAt(0))){var a=t.charAt(1);if("A"==a)return"audio";if("I"==a||"G"==a)return"image";if("V"==a)return"video";if("P"==a||"Q"==a)return"pdf"}else if(e&&e.rsc[t]&&e.rsc[t].type&&e.rsc[t].type.split&&e.rsc[t].type.split("/").length>0)return e.rsc[t].type.split("/")[0]},apn.Project.getMediaType=apn.Project.$O8G,apn.Project.getMediaMimeType=function(e,t){if(e&&e.rsc[t])return e.rsc[t].type;if(t&&("P"==t[0]||"Q"==t[0]||"R"==t[0]||"X"==t[0])){var a=t.split("_"),i=apn.Project.$O8G(e,t);return"jpg"==a[1]?i+"/jpeg":"svg"==a[1]?"image/svg+xml":"pdf"==a[1]?"application/pdf":i+"/"+a[1]}if(t){var a=t.split("."),n=a[a.length-1];if(n=(n||"").toLowerCase(),"mp4"==n)return"video/mp4";if("webm"==n)return"video/webm";if("mp3"==n)return"audio/mp3";if("jpg"==n||"jpeg"==n)return"image/jpeg";if("png"==n)return"image/png";if("svg"==n)return"image/svg+xml"}},apn.Project.$O1e=function(e,t,a,i,n){function r(e,t){return!i&&e&&e.indexOf&&0!=e.indexOf("data:")&&(e+=e.indexOf("?")==-1?"?APXNCTM="+(t||(new Date).getTime()):"&APXNCTM="+(t||(new Date).getTime())),e}if(t&&t.charAt&&("P"==t.charAt(1)||"Q"==t.charAt(1))){var o,s,p;if(s=t.split("_"),e.property.id&&s[0]&&34==s[0].length)return p=s[0].substring(2),i?"asset/"+t.charAt(1)+"/"+p+"/":"/files/asset/"+(n&&n.fileID?n.fileID:e.property.id)+"/"+t.charAt(1)+"/"+p+"/"}else{if(t&&t.charAt&&"R"==t.charAt(0)){var l=apn.loadTempFile("apnProject_replaced"),d=t.charAt(1);if(a&&"A"==d)return bx.c.bx$nullImage;var o;if(i){if("S"===t[2])var c=t.substring(3,t.indexOf("_"));else var c=t.substring(2,t.indexOf("_"));var g=t.substring(t.indexOf("_")+1),u="/";return a&&(u+="S/",g="png"),o="asset/"+d+u+c+"."+g,l&&l[t]?r(o,l[t]):o}var h=t;return a&&(d="I",t="S"+t),o=(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.mediaResolvePrefix?apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.mediaResolvePrefix:"/aspen")+"/asset/"+d+"/"+t,l&&l[h]?r(o,l[h]):o}if(t&&t.charAt&&"X"==t.charAt(0)){if(apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.mediaExternal){var x=t.substring(4,8);if(x=apn.dbUI.system.mediaExternal[x]){var f;if((f=(x||"").indexOf("."))>0){if(window[x.substring(0,f)]&&window[x.substring(0,f)][x.substring(f+1)])return window[x.substring(0,f)][x.substring(f+1)](e,t,a,i)}else if(window[apn.dbUI.system.mediaExternal[x]])return window[apn.dbUI.system.mediaExternal[x]](e,t,a,i)}bx.Trace.log("APN","error","Unknown external media system:"+x,"mediaResolve")}}else{if(t&&t.indexOf&&0==t.indexOf("data:"))return t;if(e.rsc[t])return e.rsc[t].data}}return""},apn.Project.mediaResolve=apn.Project.$O1e,apn.Project.$O5k=function(e,t,a,i){window.asui&&asui.API&&asui.API.copyAssetFile&&asui.API.copyAssetFile(e,t,a,i)},apn.Project.mediaReplaced=function(e){var t=apn.loadTempFile("apnProject_replaced")||{},a=(new Date).getTime();for(var i in t)a-t[i]>864e5&&delete t[i];t[e]=a,apn.saveTempFile("apnProject_replaced",t)},apn.Project.$O5X=function(e,t,a,i,n,r,o){if("media"==a)if(i)if(0==i.indexOf("^L")){var s=i.split("^"),p="";"T"==s[2]?p="to bottom,":"B"==s[2]?p="to top,":"L"==s[2]?p="to right,":"R"==s[2]&&(p="to left,"),n.style.backgroundImage="linear-gradient("+p+s[3]+","+s[4]+" "+100*parseFloat(s[5])+"%)"}else if(0==i.indexOf("^I")){var s=i.split("^"),l=new Image;l.onload=function(){"XY"==s[2]&&(n.style.backgroundImage="url("+s[3]+")",n.style.backgroundSize=Math.round(r*this.width)+"px "+Math.round(o*this.height)+"px",n.style.backgroundRepeat="repeat")},l.src=s[3]}else{var d=apn.Project.$O1e(e,i,!1,t),l=new Image;l.onload=function(){n.style.backgroundImage="url("+d+")",n.style.backgroundSize=Math.round(r*this.width)+"px "+Math.round(o*this.height)+"px",n.style.backgroundRepeat="repeat"},l.src=d}else n.style.backgroundImage="none";else"color"==a&&(i?n.style.backgroundColor=i:n.style.backgroundColor="transparent")},apn.Project.$O4K=function(e,t){var a;if(t.children)for(a=0;a<t.children.length;a++)e[t.children[a]]&&(t.children[a]=e[t.children[a]]);if(t.layers)for(a in t.layers)e[t.layers[a].id]&&(t.layers[a].id=e[t.layers[a].id]);if(t.connect)for(a=0;a<t.connect.length;a++)t.connect[a].objectID&&e[t.connect[a].objectID]&&(t.connect[a].objectID=e[t.connect[a].objectID]);if(t.states){var i;for(a in t.states)for(i in t.states[a].objects)e[i]&&(t.states[a].objects[e[i]]=t.states[a].objects[i],delete t.states[a].objects[i])}},apn.Project.docMap={fillStyle:"A",strokeStyle:"B",lineWidth:"C",lineDash:"D",lineEnd:"E",borderRadiusTopLeft:"F",borderRadiusTopRight:"G",borderRadiusBottomLeft:"H",borderRadiusBottomRight:"I",font:"J",fontSize:"K",fontStyle:"L",fontItalic:"M",fontBold:"N",textMultiLine:"O",fontUnderlined:"P",text:"Q",textAlign:"R",textValign:"S",textPadding:"T",textWordWrap:"U",textFit:"V",fontStrokeStyle:"W",fontStrokeWidth:"X",alpha:"Y",angle:"Z",keepRatio:"a",title:"b",visibility:"c",dragX:"d",dragY:"e",dragInParent:"f",dragContainParent:"g",ltrSp:"h",lnSp:"i",csr:"j",title:"k"},apn.Project.docMapInv={A:"fillStyle",B:"strokeStyle",C:"lineWidth",D:"lineDash",E:"lineEnd",F:"borderRadiusTopLeft",G:"borderRadiusTopRight",H:"borderRadiusBottomLeft",I:"borderRadiusBottomRight",J:"font",K:"fontSize",L:"fontStyle",M:"fontItalic",N:"fontBold",O:"textMultiLine",P:"fontUnderlined",Q:"text",R:"textAlign",S:"textValign",T:"textPadding",U:"textWordWrap",V:"textFit",W:"fontStrokeStyle",X:"fontStrokeWidth",Y:"alpha",Z:"angle",a:"keepRatio",b:"title",c:"visibility",d:"dragX",e:"dragY",f:"dragInParent",g:"dragContainParent",h:"ltrSp",i:"lnSp",j:"csr",k:"title"},apn.Project.docCmpr=function(e){var t,a,i,n;for(t in e.pages)for(a in e.pages[t].objects)if(e.pages[t].objects[a].create.data&&(n=e.pages[t].objects[a].create.data.styles))for(i in n)apn.Project.docMap[i]&&(n[apn.Project.docMap[i]]=n[i],delete n[i])},apn.Project.docDcmpr=function(e){var t,a,i,n;for(t in e.pages)for(a in e.pages[t].objects)if(e.pages[t].objects[a].create.data&&(n=e.pages[t].objects[a].create.data.styles))for(i in n)apn.Project.docMapInv[i]&&(n[apn.Project.docMapInv[i]]=n[i],delete n[i])},window.apn=window.apn||{},apn.Button=function(tagId,opts){function onDragMove(e,t,a,i,n,r,o){maxOffsetX=Math.max(maxOffsetX,i),maxOffsetY=Math.max(maxOffsetY,n)}function onDragEnd(el,mouseStartX,mouseStartY,mouseOffsetX,mouseOffsetY,eleStartX,eleStartY,timeStart){if(opts&&opts.fn&&opts.fn(tag),maxOffsetX<10&&maxOffsetY<10&&opts&&opts.onclick)if("string"==typeof opts.onclick)try{eval(opts.onclick)}catch(e){}else opts.onclick(tag)}var tag;if("string"==typeof tagId&&!(tag=bx$(tagId)))return void bx.Trace.log("APN","errorNoElement",tagId,"Button()");"object"==typeof tagId&&(tag=tagId),tag.options=opts,opts&&!opts.onclick&&(opts.onclick=tag.$a("onclick"),tag.$A({onclick:null}));var maxOffsetX=maxOffsetY=0;opts&&opts.fn&&opts.fn(tag),bx.HCL.DV.hasTouchEvent()?tag.ontouchstart=function(e){maxOffsetX=maxOffsetY=0,bx.Event.mouseDrag(tag,e,onDragMove,onDragEnd,{noclip:!0,noPreventDefault:!bx.HCL.DV.isMobile()}),opts&&opts.fn_over&&opts.fn_over(tag)}:(tag.onmouseover=function(e){opts&&opts.fn_over&&opts.fn_over(tag)},tag.onmouseout=function(e){opts&&opts.fn&&opts.fn(tag)},tag.onmousedown=function(e){opts&&opts.fn_sel&&opts.fn_sel(tag)},opts&&opts.onclick&&("string"==typeof opts.onclick?tag.setAttribute("onclick",opts.onclick):tag.onclick=function(){opts.onclick(tag)}))},apn.CDropZone=function(e,t,a){function i(e){if(!document.activeElement||"true"!=document.activeElement.contentEditable)return bx.Event.preventDefault(e),!1}function n(e){if(!document.activeElement||"true"!=document.activeElement.contentEditable)return bx.Event.preventDefault(e),!1}function r(e){document.activeElement&&"true"==document.activeElement.contentEditable||e.dataTransfer&&(a&&e.dataTransfer.files&&e.dataTransfer.files.length?a(e.dataTransfer.files):t&&apn.CDropZone.decode(e.dataTransfer,t))}bx.inClassing||(apn.CDropZone.$O2s||(bx.Event.add(window,"drop",i,!1),bx.Event.add(window,"dragover",n,!1),apn.CDropZone.$O2s=!0),bx.Event.add(e,"drop",r,!1))},apn.CDropZone.decode=function(e,t){function a(e,a){if(window.FileReader){var i=e.getAsFile();if(i){var n=new FileReader;n.$O2t=e.type,n.onload=function(e){e.total&&e.total==e.loaded&&e.target.result&&t(e.target.$O2t,a?e.target.result.substring(e.target.result.indexOf(";base64,")+8):e.target.result,i)},a?n.readAsDataURL(i):n.readAsText(i)}}}for(var i=0;i<e.items.length;i++)if("text/html"==e.items[i].type){var n;if(n=e.getData(e.items[i].type)){var r=document.createElement("DIV");try{r.innerHTML=n}catch(e){}r.firstChild&&"IMG"==r.firstChild.tagName?r.firstChild.src&&t("URL",r.firstChild.src):r.firstChild&&"A"==r.firstChild.tagName&&r.firstChild.href&&t("URL",r.firstChild.href)}else a(e.items[i])}else 0==e.items[i].type.indexOf("text/")?e.getData(e.items[i].type)?t(e.items[i].type,(e.getData(e.items[i].type)||"").replace(/[\u00A0\u1680​\u180e\u2000-\u2009\u200a​\u200b​\u202f\u205f​\u3000]/g," ")):a(e.items[i]):a(e.items[i],!0)},apn.CClipboard=function(e,t,a,i){function n(e){e||(e=window.event),"ie"==s&&(e.clipboardData=window.clipboardData);var i=document.activeElement?document.activeElement:bx.Event.getElement(e);if(o.$O6j&&o.$O6j==i);else{if("INPUT"==i.tagName||"TEXTAREA"==i.tagName)return;if("true"==i.contentEditable)return}if(e.clipboardData)if(a&&e.clipboardData.files&&e.clipboardData.files.length)a(e.clipboardData.files);else if(t)if("ie"==s)t("text",e.clipboardData.getData("text"));else if("ff"==s||"msf"==s){if(e.clipboardData.types)for(var n=0;n<e.clipboardData.types.length;n++)t(e.clipboardData.types[n],e.clipboardData.getData(e.clipboardData.types[n]))}else apn.CDropZone.decode(e.clipboardData,t)}function r(t){t||(t=window.event),"ie"==s&&(t.clipboardData=window.clipboardData);var a=document.activeElement?document.activeElement:bx.Event.getElement(t);if(o.$O6j&&o.$O6j==a);else{if("INPUT"==a.tagName||"TEXTAREA"==a.tagName)return;if("true"==a.contentEditable)return}if(t.clipboardData){var i;"ie"==s?i="text":"ff"!=s&&"msf"!=s||(i="text/plain"),
bx.Event.preventDefault(t),e(t.clipboardData,"cut"==t.type,i)}}if(!bx.inClassing){var o=this,s="c";if(bx.HCL.DV.isIE())s="ie";else if(bx.HCL.DV.isFirefox())s="ff";else{var p=window.navigator.userAgent.toLowerCase();p.indexOf("macintosh")!=-1&&p.indexOf("safari")!=-1&&(s="msf")}bx.Event.add(window,"paste",n,!1),bx.Event.add(window,"copy",r,!1),bx.Event.add(window,"cut",r,!1)}},apn.CClipboard.isTrickInput=function(e){return!!e&&(!!e.id&&("INPUT"==e.tagName&&"__clipboard_trick_input__"==e.id))},apn.CClipboard.prototype.prepare=function(){this.$O6j&&(this.$O6j.value=" ",this.$O6j.focus(),this.$O6j.select())},apn.CClipboard.$O5Y=function(e){apn.CClipboard.$O6v=bx.$copyObject({},e)},apn.CClipboard.$O5Z=function(){return apn.CClipboard.$O6v?bx.$cloneObject({},apn.CClipboard.$O6v):null},apn.CRscLoader=function(){bx.inClassing},apn.CRscLoader.prototype.load=function(e,t,a){function i(){return t[this.apnImageLoaderId]?(t[this.apnImageLoaderId].local&&(e.tmp=e.tmp||{},e.tmp.rscMap=e.tmp.rscMap||{},e.tmp.rscMap[t[this.apnImageLoaderId].mediaID]=this),t[this.apnImageLoaderId].image=this,p++,void(p+l==d&&a(d,p,l))):(l++,void console.error("Missing resource ID: "+this.apnImageLoaderId))}function n(){l++,p+l==d&&a(d,p,l)}function r(e){var t=new Image;return t.apnImageLoaderId=e,t.onload=i,t.onerror=n,t.onabort=n,t}function o(e,t){return e}var s,p=0,l=0,d=0;for(s in t)d++;for(s in t)if(t[s].url){var c=r(s);c.src=o(t[s].url,t[s].noCache)}else if(t[s].mediaID)if(!t[s].mediaID.charAt||"R"!=t[s].mediaID.charAt(0)&&"X"!=t[s].mediaID.charAt(0))if(e.rsc[t[s].mediaID]){if(e.tmp&&e.tmp.rscMap&&e.tmp.rscMap[t[s].mediaID])t[s].image=e.tmp.rscMap[t[s].mediaID],p++,p+l==d&&a(d,p,l);else{var c=r(s);1==t[s].type&&e.rsc[t[s].mediaID].type&&e.rsc[t[s].mediaID].type.indexOf&&0==e.rsc[t[s].mediaID].type.indexOf("audio")?c.src=bx.c.bx$nullImage:c.src=e.rsc[t[s].mediaID].data}t[s].local=!0}else if(t[s].mediaID){var c=r(s);c.src=t[s].mediaID}else n();else if(t[s].src=o(apn.Project.$O1e(void 0,t[s].mediaID,1==t[s].type,t[s].standAlone),t[s].noCache),"image"==apn.Project.getMediaType(e,t[s].mediaID)||1==t[s].type){var c=r(s);c.src=t[s].src||bx.c.bx$nullImage}else p++,p+l==d&&a(d,p,l);else n()},apn.loadTempFile=function(id){var obj=null,storage;try{storage=window.localStorage}catch(e){}if(storage)try{obj=storage.getItem(id)}catch(e){return null}else bx.CCookie&&(obj=bx.CCookie.get(id));if(obj)try{obj=eval("("+obj+")")}catch(e){return null}return obj},apn.saveTempFile=function(e,t){var a;try{a=window.localStorage}catch(e){}if(a)try{a.setItem(e,JSON.stringify(t))}catch(e){bx.Trace.log("APN","error",e,"apn.saveFile")}else bx.CCookie&&bx.CCookie.set(e,JSON.stringify(t),31536e3)},apn.localStorage={error:{code:0,msg:""},$O2u:["","Cannot save a temporary file.","Cannot save a temporary file due to big file size."]},apn.localStorage.load=function(id){var obj=null,storage;try{storage=window.localStorage}catch(e){}if(storage)try{obj=storage.getItem(id)}catch(e){return null}if(obj)try{obj=eval("("+obj+")")}catch(e){return null}return obj},apn.localStorage.save=function(e,t){var a;try{a=window.localStorage}catch(e){}if(a){try{a.setItem(e,JSON.stringify(t))}catch(e){return apn.localStorage.error.code=2,apn.localStorage.error.msg=apn.localStorage.$O2u[apn.localStorage.error.code],!1}return!0}return apn.localStorage.error.code=1,apn.localStorage.error.msg=apn.localStorage.$O2u[apn.localStorage.error.code],!1},apn.localStorage.remove=function(e){var t;try{t=window.localStorage}catch(e){}t&&t.removeItem(e)},apn.localStorage.check=function(e){var t;try{t=window.localStorage}catch(e){}return!(!t||null===t.getItem(e))},apn.UTIL={isBoolean:function(e){return"boolean"==typeof e},isNumber:function(e){return!isNaN(e)},isString:function(e){return"string"==typeof e},isPrimitive:function(e){return this.isString(e)||this.isNumber(e)||this.isBoolean(e)},isArray:function(e){return"object"==typeof e&&(void 0!==e.length||(Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)))},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isEmpty:function(e){return void 0===e||null===e||"function"!=typeof e&&(this.isArray(e)?0==e.length:this.isObject(e)?0==Object.keys(e).length:(this.isPrimitive(e),!1))},sort:function(e,t,a,i,n){function r(e,i,n){return c="",g="",s=t[n],p=a[n]||1,void 0===s?0:(c=e[s]&&e[s].toUpperCase?e[s].toUpperCase():e[s],g=i[s]&&i[s].toUpperCase?i[s].toUpperCase():i[s],null===c&&g?1*d:c&&null===g?-1*d:void 0===c&&g?1*l:c&&void 0===g?-1*l:void 0===c&&null===g?1:null===c&&void 0===g?-1:c>g?1*p:c<g?-1*p:c==g?r(e,i,n+1)*p:void 0)}function o(e,t){return r(e,t,0)}var s,p,l,d,c,g;this.isEmpty(t)||this.isEmpty(a)||(t=this.isPrimitive(t)?[t]:t,a=this.isPrimitive(a)?[a]:a,d=n?1:-1,l=i?1:-1,e.sort(o))}},apn.UTIL.printURL=function(e,t){function a(){r.removeChild(n),t&&t(!0)}function i(){var e;try{e=this.contentWindow,e.onbeforeunload=a,e.onafterprint=a}catch(e){return void(t&&t(!1,e))}if(e.matchMedia){var i=e.matchMedia("print");i.addListener(function(e){e.matches||setTimeout(a,0)})}bx.HCL.DV.isIE()&&e.focus(),e.print()}var n;if(bx.HCL.DV.isIE())var r=document.body;else var r=bx.UX.domBuffer||document.body;n=document.createElement("iframe"),r.appendChild(n),bx.Event.add(n,"load",i,!1),n.style.position="fixed",n.style.top="-99999px",n.style.left="-99999px",n.src=e},apn.UTIL.printImgs=function(e,t){function a(){try{r.removeChild(n)}catch(e){}t&&t(!0)}function i(){var e;try{e=this.contentWindow||this,e.onbeforeunload=a,e.onafterprint=a}catch(e){return void(t&&t(!1,e))}if(e.matchMedia){var i=e.matchMedia("print");i.addListener(function(e){e.matches||setTimeout(a,0)})}bx.HCL.DV.isIE()&&e.focus(),e.print()}var n;if(bx.HCL.DV.isIE())var r=document.body;else var r=bx.UX.domBuffer||document.body;n=document.createElement("IFRAME"),bx.HCL.DV.isIE()&&n.addEventListener("load",i,!1),r.appendChild(n);var o=(n.contentWindow||n).document,s="";o.open();for(var p=0;p<e.length;p++)e[p]&&(s+='<div style="',s+="page-break-inside:avoid;overflow:hidden;position:relative;height:100%;background-color:#ffffff;",s+='"><img style="display:block;width:100%;" src="'+e[p]+'"/>',s+="</div>");var l='<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>';o.write(l+'<style>@page{margin:0 0 0 0;}</style></head><body style="padding:0;margin:0;">'+s+"</body></html>"),o.close(),bx.HCL.DV.isIE()||n.addEventListener("load",i,!1),n.style.position="fixed",n.style.top="-99999px",n.style.left="-99999px"},apn.UTIL.downloadURL=function(e,t,a){var i=bx.UX.domBuffer||document.body,n=document.createElement("A");n.href=e,n.setAttribute("target","_blank"),"download"in n&&n.setAttribute("download",t||"download"),n.style.display="none",i.appendChild(n),setTimeout(function(){n.click(),i.removeChild(n),a&&a(!0)},1)},apn.UTIL.toRGBA=function(e){var t={r:0,g:0,b:0,a:1};if(e&&7==e.length&&"#"==e[0])t.r=parseInt(e.substring(1,3),16),t.g=parseInt(e.substring(3,5),16),t.b=parseInt(e.substring(5,7),16);else if(e&&e.indexOf&&0==e.indexOf("rgba(")){var a=e.substring(5).split(",");a.length>=4&&(t.r=bx.$checkNaN(parseInt(a[0])),t.g=bx.$checkNaN(parseInt(a[1])),t.b=bx.$checkNaN(parseInt(a[2])),t.a=bx.$checkNaN(parseFloat(a[3])))}return t},window.apn=window.apn||{},apn.inheritWidget=function(e){var t=["createAsCanvasObject","createByEditor","exeCreateTag","exeRenderTag","edtOnConfig","onEdit","edtOnPostDraw","edtOnDraw","edtOnSetState","edtOnSetProperty","edtOnRemoveResource","edtOnRemoveAsset","edtOnReplaceAsset","edtOnBuildEvent","edtOnBuildState","edtOnExeDataChange","edtOnRemapObjectID","edtOnBuildRuntimeProperty","edtOnBuildProperty","edtOnPreloadAsset","edtOnFitToSize","edtOnInputGet","exeAssetLoad","exeAssetPreload","exeMediaPlay","exeMediaPause","exeMediaStop","exeMediaSeek","exeMediaControl","exeMediaInfo","exeSetState","exeInputGet","exeInputSet","exeOnStart","exeOnResume","exeOnPause","exeOnPagePreLoad","exeOnTick","exeOnLoad","exeOnPreLinkToPage","exeOnShow","exeOnVisibilityChange","exeOnDestroy","exeOnScale","exeOnScreenRefresh","exeOnScreenDrag","exeOnScreenVisibility","exeOnReceiveMessage","exeOnScreenFull","exeOnForceStyle","exeOnPageRun"],a=["exeItrNoText"],i={};e.styleMap&&(i.styleMap=bx.$copyObject({},e.styleMap)),e.properties&&(i.properties=bx.$copyObject({},e.properties)),e.styles&&(i.styles=bx.$copyObject({},e.styles)),e.editor&&(i.editor=bx.$copyObject({},e.editor)),e.scriptInfo&&(i.scriptInfo=bx.$copyObject({},e.scriptInfo)),e.events&&(i.events=bx.$copyObject([],e.events)),e.BLACKBOX_MODEL&&(i.BLACKBOX_MODEL=!0),e.CMedia&&(i.CMedia=bx.$copyObject({},e.CMedia));for(var n=0;n<t.length;n++)e[t[n]]&&(i[t[n]]=e[t[n]]);for(n=0;n<a.length;n++)void 0!==e[a[n]]&&(i[a[n]]=e[a[n]]);return i.parentClass=e,i},apn.IWidget={},apn.IWidget.getCanvasObjectStyle=function(e,t,a,i,n){var r=apn.theme[a.layouts[a.CTXT.layoutID].property.themeID].styles.normal,o=a.layouts[a.CTXT.layoutID].property.styles.normal;e=e||{};var s;for(s in r)void 0!==t.styleMap[s]&&(e[s]=r[s]);for(s in o)void 0!==t.styleMap[s]&&(e[s]=o[s]);if(i)for(s in i)void 0!==t.styleMap[s]&&void 0!==i[s]&&(e[s]=i[s]);return t.exeOnForceStyle&&t.exeOnForceStyle(a,e),e},apn.IWidget.createCanvasObject=function(e,t,a,i,n,r,o,s,p,l){var d={};return l=l||0,d.module=a,d.create={type:512|l|(i!=bx.CCanvasWnd.SHAPE_LINE||o&&o.keepRatio?0:256),style:apn.IWidget.getCanvasObjectStyle({},t,e,o)},d.init={position:n,shape:{type:i}},p&&(d.data={local:p}),i==bx.CCanvasWnd.SHAPE_LINE?(d.init.shape.x=[0,r.w],d.init.shape.y=[0,r.h]):(d.init.shape.w=r.w,d.init.shape.h=r.h),d},apn.IWidget.exeGetTrOrigin=function(e,t,a){return e?((t+e.shape.w/2)/e.shape.w*100).toFixed(1)+"% "+((a+e.shape.h/2)/e.shape.h*100).toFixed(1)+"%":"50% 50%"},apn.IWidget.exeSetAngle=function(e,t,a,i,n,r){if(t=bx.$checkNaN(parseFloat(t)),!r){var o=apn.IWidget.exeGetTrOrigin(a,i,n);if(void 0!==e.apnCur.angle&&t==e.apnCur.angle&&void 0!==e.apnCur.trOrigin&&o==e.apnCur.trOrigin)return}apn.CES.transformSet(e,"rotate",bx.CCanvasWnd.radToDegree(t)),r||apn.CES.transformSet(e,"origin",o),apn.CES.transformApply(e),e.apnCur.angle=t,r||(e.apnCur.trOrigin=o,e.apnCur.trCX=i,e.apnCur.trCY=n)},apn.IWidget.exeSetAlpha=function(e,t){0===t||t?e.$CSS("opacity",t):e.$CSS("opacity",1)},apn.IWidget.exeSetCursor=function(e,t){apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.exeNoSetCursor||(e.apnCur.orgCursor=t,"apn.auto"==t&&(t=e.apnTapCsr||e.apnDragCsr?"pointer":"inherit"),e.style.cursor=t,e.apnCur.cursor=t)},apn.IWidget.exeSetLine=function(e,t,a,i,n){var r=!0;if(e.apxRefreshOnStrokeChange){if(n&&n.screen&&e.apnOID&&n.screen.objects[e.apnOID]&&n.screen.objects[e.apnOID].create.data){var o=apn.Project.getWidgetModule(n.screen.objects[e.apnOID].create.data);o&&o.exeRenderTag&&o.exeRenderTag(n.viewer,n,e,n.screen.objects[e.apnOID],1/n.getZoomX(),1/n.getZoomY())}}else t&&a?e._apxLineHeight?(e.style.height=Math.max(1,Math.round(parseInt(t)*i))+"px",e.style.backgroundColor=apn.CES.$O6l(a)):e.apxLineBorderTop?(e.style.borderTopWidth=Math.max(1,Math.round(parseInt(t)*i))+"px",e.style.borderTopColor=apn.CES.$O6l(a)):(e.style.borderWidth=Math.max(1,Math.round(parseInt(t)*i))+"px",e.style.borderColor=apn.CES.$O6l(a)):e._apxLineHeight?e.style.height="0px":e.style.borderWidth="0px";return void 0!==e.apnCur.lineWidth&&t==e.apnCur.lineWidth&&void 0!==e.apnCur.strokeStyle&&a==e.apnCur.strokeStyle&&(r=!1),e.apnCur.lineWidth=t,e.apnCur.strokeStyle=a,r},apn.IWidget.exeSetLineDash=function(e,t,a){if(e.apxRefreshOnStrokeChange){if(a&&a.screen&&e.apnOID&&a.screen.objects[e.apnOID]&&a.screen.objects[e.apnOID].create.data){var i=apn.Project.getWidgetModule(a.screen.objects[e.apnOID].create.data);i&&i.exeRenderTag&&i.exeRenderTag(a.viewer,a,e,a.screen.objects[e.apnOID],1/a.getZoomX(),1/a.getZoomY())}}else{if(e._apxLineHeight)return;var n="solid";t&&(n=2==t.length&&t[0]==t[1]?"dotted":"dashed"),e.apxLineBorderTop?e.style.borderTopStyle=n:e.style.borderStyle=n}},apn.IWidget.exeSetFillStyle=function(e,t,a){if(e.apxRefreshOnStrokeChange){if(a&&a.screen&&e.apnOID&&a.screen.objects[e.apnOID]&&a.screen.objects[e.apnOID].create.data){var i=apn.Project.getWidgetModule(a.screen.objects[e.apnOID].create.data);i&&i.exeRenderTag&&i.exeRenderTag(a.viewer,a,e,a.screen.objects[e.apnOID],1/a.getZoomX(),1/a.getZoomY())}}else t&&apn.CES.$O6k(t)?e.$CSS("filter",bx.$applyMsFilter(e,"backgroundAlpha",apn.CES.$O6k(t))):e.style.backgroundColor=t?apn.CES.$O6l(t):"transparent"},apn.IWidget.exeSetText=function(e,t,a,i,n,r,o,s,p,l,d,c,g){(e.apnCur.forced||void 0===e.apnCur.text||t!=e.apnCur.text)&&(e.apnCur.forced=!1,void 0===e.textTag?e.apnSingleText?apn.widgets["apn.wgt.singleText"].exeSetText(e,t,a,i,n,r,o,s,p,l,d):e.apxInputTag?(e.apxInputTag.placeholder=t||"",e.apnOnSetText&&e.apnOnSetText(e,t,a,i,n,r,o,d,c,g)):"DIV"==e.tagName?bx.DOM.setText(e,apn.IWidget.exeFormatText(t||"")):"INPUT"==e.tagName&&(e.value=t||""):e.apnOnSetText?e.apnOnSetText(e,t,a,i,n,r,o,d,c,g):apn.widgets["apn.wgt.rect"].exeSetText(e,t,a,i,n,r,o,d,c,g),e.apnOnPostSetText&&e.apnOnPostSetText(e,t,a,i,n,r,o,d,c,g),e.apnCur.text=t)},apn.IWidget.exeSetFontStyle=function(e,t){void 0!==e.apnCur.fontStyle&&t==e.apnCur.fontStyle||(e.style.color=apn.CES.$O6l(t),e.apnCur.fontStyle=t)},apn.IWidget.$Obv=function(e,t,a){t&&(e.style.fontSize=Math.round(parseInt(t)*a)+"px")},apn.IWidget.$Obx=function(e,t){t?e.style.fontStyle="italic":e.style.fontStyle="normal"},apn.IWidget.$Obw=function(e,t,a){!t||a&&!apn.CExe.fontHasBold(a)?e.style.fontWeight="normal":e.style.fontWeight="bold"},apn.IWidget.$Oby=function(e,t){t?e.style.textDecoration="underline":(e.style.textDecoration="none",e.$ObB=!1)},apn.IWidget.exeSetZIndex=function(e,t){e.style.zIndex!=t&&(e.style.zIndex=t,e.apnCur.zIndex=t)},apn.IWidget.exeRenderSize=function(e,t,a,i,n,r,o,s,p){if(i.init.shape.type!=bx.CCanvasWnd.SHAPE_RECT)return void bx.Trace.log("APN","warning","Tried to resize non-rect type widget.","IWidget.exeRenderSize");if(a.REFRESH_ON_RESIZE&&!p)t.$O3x(a.apnOID);else{var l=(i.init.position.x*r-Math.round(i.init.position.x*r))/r,d=(i.init.position.y*o-Math.round(i.init.position.y*o))/o;if(bx.HCL.DV.isIE()&&bx.HCL.DV.isIE()<=7)var c=Math.max(0,apn.widgets.utils.$O2v(i.init.shape.w+l,r)+apn.IWidget.$O2z(1,n,i,r)-apn.CES.$O5w(a)),g=Math.max(0,apn.widgets.utils.$O2w(i.init.shape.h+d,o)+apn.IWidget.$O2z(1,n,i,o)-apn.CES.$O5y(a));else var c=Math.max(0,apn.widgets.utils.$O2v(i.init.shape.w+l,r)+apn.IWidget.$O2z(1,n,i,r)),g=Math.max(0,apn.widgets.utils.$O2w(i.init.shape.h+d,o)+apn.IWidget.$O2z(1,n,i,o));if(s&&c==parseInt(a.style.width)&&g==parseInt(a.style.height))return;a.style.width=c+"px",a.style.height=g+"px",a.apnLW=apn.IWidget.$O2z(1,n,i,r),a.REFRESH_ON_RESIZE||"CANVAS"!=a.tagName&&"IFRAME"!=a.tagName||a.width==c&&a.height==g||(a.width=c,a.height=g)}a.tagOnPostResize&&a.tagOnPostResize(t,a)},apn.IWidget.exeRenderPosition=function(e,t,a,i,n,r,o){t.style.left=apn.widgets.utils.$O2x(e,t,a.init.position.x,n)-apn.IWidget.$O2z(2,i,a,n)-(t.wgt_dx?t.wgt_dx:0)+"px",t.style.top=apn.widgets.utils.$O2y(e,t,a.init.position.y,r)-apn.IWidget.$O2z(2,i,a,r)-(t.wgt_dy?t.wgt_dy:0)+"px",o&&(t.REFRESH_ON_RESIZE||apn.IWidget.exeRenderSize(e.viewer,e,t,a,i,n,r,!0)),t.tagOnPostMove&&t.tagOnPostMove(e,t)},apn.IWidget.$O2z=function(e,t,a,i){var n;if((n=apn.Project.getWidgetModule(a.create.data))&&a.create.data.styles&&void 0!==n.styleMap.lineWidth&&void 0!==n.styleMap.strokeStyle){var r=apn.Project.resolveStyle(t,"lineWidth",a.create.data.styles.lineWidth,!0);if(r>1&&apn.Project.resolveStyle(t,"strokeStyle",a.create.data.styles.strokeStyle,!0))return Math.floor(Math.ceil(parseInt(r)*i)/e)}return 0},apn.IWidget.exeCalcLW=apn.IWidget.$O2z,apn.IWidget.$O3R=function(e,t,a){return t.lineWidth&&t.strokeStyle?Math.floor(Math.ceil(parseInt(t.lineWidth)*a)/e):0},apn.IWidget.exeApplyCSSpre=function(e,t,a,i,n,r,o,s,p){apn.IWidget.$O6w(t,a,r,o,s,p),apn.IWidget.exeSetFontStyle(a,t.fontStyle),apn.IWidget.exeSetAlpha(a,t.alpha)},apn.IWidget.exeApplyCSSpost=function(e,t,a,i,n,r,o,s,p,l){l&&l.setTextOnly||(apn.IWidget.$O6x(t,a,s,p),void 0!==t.angle&&apn.IWidget.exeSetAngle(a,t.angle,e.init,e.init.cx,e.init.cy)),apn.IWidget.exeSetText(a,t.text,t.textValign||"middle",t.textAlign,t.textMultiLine,t.textWordWrap,t.font,t.lineWidth,t.strokeStyle,t.fillStyle,t.ltrSp*p,t.lnSp*p,parseInt(t.fontSize)*p)},apn.IWidget.$O6w=function(e,t,a,i,n,r){if(apn.IWidget.exeSetLine(t,e.lineWidth,e.strokeStyle,n),e.textPadding){var o=Math.min(i/2,Math.min(a/2,e.textPadding));t.style.padding=Math.floor(o*n)+"px"}},apn.IWidget.$O6x=function(e,t,a,i){if(apn.IWidget.exeSetFillStyle(t,e.fillStyle),void 0===t.textTag&&(t.style.textAlign=e.textAlign||"center"),e.lineWidth&&e.strokeStyle&&apn.IWidget.exeSetLineDash(t,e.lineDash),e.borderRadiusTopLeft?t.$CSS("borderTopLeftRadius",Math.max(1,Math.round(parseInt(e.borderRadiusTopLeft)*a))+"px"):void 0!==e.borderRadiusTopLeft&&t.$CSS("borderTopLeftRadius","0"),e.borderRadiusTopRight?t.$CSS("borderTopRightRadius",Math.max(1,Math.round(parseInt(e.borderRadiusTopRight)*a))+"px"):void 0!==e.borderRadiusTopRight&&t.$CSS("borderTopRightRadius","0"),e.borderRadiusBottomLeft?t.$CSS("borderBottomLeftRadius",Math.max(1,Math.round(parseInt(e.borderRadiusBottomLeft)*a))+"px"):void 0!==e.borderRadiusBottomLeft&&t.$CSS("borderBottomLeftRadius","0"),e.borderRadiusBottomRight?t.$CSS("borderBottomRightRadius",Math.max(1,Math.round(parseInt(e.borderRadiusBottomRight)*a))+"px"):void 0!==e.borderRadiusBottomRight&&t.$CSS("borderBottomRightRadius","0"),e.font&&(t.style.fontFamily=e.font),e.fontSize&&apn.IWidget.$Obv(t,e.fontSize,i),apn.IWidget.exeSetCursor(t,e.csr||"inherit"),apn.IWidget.$Obx(t,e.fontItalic),apn.IWidget.$Obw(t,e.fontBold,e.font),apn.IWidget.$Oby(t,e.fontUnderlined),e.fontStrokeStyle&&e.fontStrokeWidth){var n=1;Math.round(e.fontStrokeWidth*a)>1&&(n=2),t.$CSS("textShadow","-1px -1px "+(n-1)+"px "+apn.CES.$O6l(e.fontStrokeStyle)+", 1px -1px "+(n-1)+"px "+apn.CES.$O6l(e.fontStrokeStyle)+", -1px 1px "+(n-1)+"px "+apn.CES.$O6l(e.fontStrokeStyle)+", 1px 1px "+(n-1)+"px "+apn.CES.$O6l(e.fontStrokeStyle)+", 0px -1px "+(n-1)+"px "+apn.CES.$O6l(e.fontStrokeStyle)+", 0px 1px "+(n-1)+"px "+apn.CES.$O6l(e.fontStrokeStyle)+", -1px 0px "+(n-1)+"px "+apn.CES.$O6l(e.fontStrokeStyle)+", 1px 0px "+(n-1)+"px "+apn.CES.$O6l(e.fontStrokeStyle))}else t.$CSS("textShadow","none")},apn.IWidget.exeFormatText=function(e,t){if(e+="",!e)return e;if("application/xhtml+xml"==document.contentType||document.xmlVersion||t&&t.xml){var a=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm;e=e.replace(a,"?")}else e=e.replace(/\u000b/g,"");return e=0==e.indexOf("[[HTML]]")?e.substring(8):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\'/g,"&apos;").replace(/\"/g,"&quot;").replace(/>/g,"&gt;").replace(/\n/g,"<br/>")},apn.IWidget.exeApplyLineDash=function(e,t,a){if(e.setLineDash)if(e.$O2B=e.$O2B||[],t&&t instanceof Array){e.$O2B.length=t.length;for(var i=0;i<t.length;i++)e.$O2B[i]=t[i]*a;e.setLineDash(e.$O2B)}else e.$O2B.length=0,e.setLineDash(e.$O2B)},apn.IWidget.hasMediaControl=function(e,t){var a;return!!((a=e.screen.objects[t.apnOID])&&a.create.data&&a.create.data.properties&&a.create.data.properties.attrs&&a.create.data.properties.attrs.apxMediaControl)},apn.IWidget.isInAnimation=function(e,t){for(var a,i=e.wgtTag(t),n=i.apnParentOID;n;){if(a=e.screen.objects[n].create.data){if("apn.wgt.sceneContainer"==a.wgtID)return!0;if(a.properties&&a.properties.attrs&&a.properties.attrs.apxAnimate)return!0;if(a.properties&&a.properties.attrs&&a.properties.attrs.apxAnimateHolder)return!0}n=e.wgtTag(n).apnParentOID}return!1},apn.IWidget.htmlCoord=function(e,t,a,i){var n,r=e.pages[t].objects[a];return n=apn.Project.findParentOf(e.pages[t],a,void 0,!0),Math.round(r.init.position[i]-apn.IWidget.$O2z(2,e,r,1)-(n?e.pages[t].objects[n].init.position[i]:0))},apn.IWidget.htmlW=function(e,t){return Math.max(0,Math.round(t.init.shape.w)+apn.IWidget.$O2z(1,e,t,1))},apn.IWidget.htmlH=function(e,t){return Math.max(0,Math.round(t.init.shape.h)+apn.IWidget.$O2z(1,e,t,1))},apn.IWidget.htmlRender=function(e,t,a,i,n){var r="",o=t.pages[a].objects[i];r+="left:"+apn.IWidget.htmlCoord(t,a,i,"x")+"px;top:"+apn.IWidget.htmlCoord(t,a,i,"y")+"px;",r+="width:"+apn.IWidget.htmlW(t,o)+"px;height:"+apn.IWidget.htmlH(t,o)+"px;",r+="z-index:"+o.create.zIndex+";";var s=apn.IWidget.getCanvasObjectStyle({},e,t,o.create.data.styles);if(s.angle){var p=apn.IWidget.exeGetTrOrigin(o.init,o.init.cx,o.init.cy);r+="transform:rotate("+bx.CCanvasWnd.radToDegree(s.angle)+"deg);transform-origin:"+p+";"}0!==s.alpha&&!s.alpha||1==s.alpha||(r+="opacity:"+s.alpha+";");var l=0;if(s.lineWidth&&s.strokeStyle){var d="solid";s.lineDash&&(d=2==s.lineDash.length&&s.lineDash[0]==s.lineDash[1]?"dotted":"dashed"),l=s.lineWidth,r+="border:"+d+" "+s.lineWidth+"px "+apn.CES.$O6l(s.strokeStyle)+";"}if(s.fillStyle&&"transparent"!=s.fillStyle&&(r+="background-color:"+s.fillStyle+";"),s.font&&(r+="font:"+(s.fontItalic?"italic ":"")+(s.fontBold?"bold ":"")+(s.fontSize?parseInt(s.fontSize)+"px ":"")+s.font+";"),n&&n.fontUnderlined||!s.fontUnderlined||(r+="text-decoration:underline;"),s.fontStyle&&(r+="color:"+s.fontStyle+";"),(s.borderRadiusTopLeft||s.borderRadiusTopRight||s.borderRadiusBottomLeft||s.borderRadiusBottomRight)&&(r+="border-radius:"+bx.$checkNaN(parseInt(s.borderRadiusTopLeft))+"px "+bx.$checkNaN(parseInt(s.borderRadiusTopRight))+"px "+bx.$checkNaN(parseInt(s.borderRadiusBottomRight))+"px "+bx.$checkNaN(parseInt(s.borderRadiusBottomLeft))+"px;"),n&&n.visibility||s.visibility!==!1||(r+="display:none;"),s.fontStrokeStyle&&s.fontStrokeWidth){var c=1;Math.round(s.fontStrokeWidth)>1&&(c=2),r+="text-shadow:-1px -1px "+(c-1)+"px "+apn.CES.$O6l(s.fontStrokeStyle)+", 1px -1px "+(c-1)+"px "+apn.CES.$O6l(s.fontStrokeStyle)+", -1px 1px "+(c-1)+"px "+apn.CES.$O6l(s.fontStrokeStyle)+", 1px 1px "+(c-1)+"px "+apn.CES.$O6l(s.fontStrokeStyle)+", 0px -1px "+(c-1)+"px "+apn.CES.$O6l(s.fontStrokeStyle)+", 0px 1px "+(c-1)+"px "+apn.CES.$O6l(s.fontStrokeStyle)+", -1px 0px "+(c-1)+"px "+apn.CES.$O6l(s.fontStrokeStyle)+", 1px 0px "+(c-1)+"px "+apn.CES.$O6l(s.fontStrokeStyle)+";"}return{css:r,style:s,w:apn.IWidget.htmlW(t,o),h:apn.IWidget.htmlH(t,o),lineWidth:l}},window.apn=window.apn||{},apn.widgets=apn.widgets||{utils:{}};var xa;xa={},xa.apxTextPlainMulti=!0,xa.styleMap={title:!0,visibility:!0,strokeStyle:!0,lineWidth:!0,lineDash:!0,fillStyle:!0,font:!0,fontSize:!0,fontStyle:!0,fontItalic:!0,fontBold:!0,textMultiLine:!0,fontUnderlined:!0,text:!0,textAlign:!0,textValign:!0,textPadding:!0,textWordWrap:!0,ltrSp:!0,lnSp:!0,fontStrokeStyle:!0,fontStrokeWidth:!0,alpha:!0,angle:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0,csr:!0},xa.editor={placeHolder:"Double click to edit"},xa.properties={tv:2},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,this,"apn.CRect",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n)},xa.exeCreateTag=function(e,t,a,i,n,r){var o;return e.o.standAlone&&r&&(o=apn.CExe.getElementByAttr("div","data-apx-id",r))?(o.innerHTML="",o.style.overflow="hidden",o.apnCur={},o.apnCur.apxCreatedFromTag=!0):(o=document.body.$TAG("div",{style:"position:absolute;overflow:hidden;box-sizing:border-box;"}),o.apnCur={}),o.textTag=null,e.o.noDynamicFontLoad2&&(o.apnCur._apnWgtRectTV=2),o},xa.exeRenderTag=function(e,t,a,i,n,r){var o=apn.IWidget.getCanvasObjectStyle({},this,e.project,i.create.data.styles);return apn.IWidget.exeApplyCSSpre(i,o,a,apn.widgets.utils.$O2x(t,a,i.init.position.x,n),apn.widgets.utils.$O2y(t,a,i.init.position.y,r),apn.widgets.utils.$O2v(i.init.shape.w,n),apn.widgets.utils.$O2w(i.init.shape.h,r),n,r),apn.IWidget.exeRenderSize(e,t,a,i,e.project,n,r),apn.IWidget.exeRenderPosition(t,a,i,e.project,n,r),apn.IWidget.exeApplyCSSpost(i,o,a,apn.widgets.utils.$O2x(t,a,i.init.position.x,n),apn.widgets.utils.$O2y(t,a,i.init.position.y,r),apn.widgets.utils.$O2v(i.init.shape.w,n),apn.widgets.utils.$O2w(i.init.shape.h,r),n,r),a.tagOnPostResize=function(e,a){if(2!=a.apnCur._apnWgtRectTV){var i=t.wgtGetProperty(a.apnOID,"apxText");i&&(a.apnCur.forced=!0,apn.IWidget.exeSetText(a,i))}},a},xa.exeOnStart=function(e,t){var a=e.wgtTag(t);this.apxTextPlainMulti&&(a.apnOnPostSetText=function(a,i){e.wgtSetProperty(t,"apxTextPlainMulti",{txt:i})},e.wgtGetProperty(t,"apxText")&&a.apnOnPostSetText(a,e.wgtGetProperty(t,"apxText")))},xa.exeOnScreenRefresh=function(e,t){var a=e.wgtTag(t);if(2!=a.apnCur._apnWgtRectTV){var i;(i=e.wgtGetProperty(t,"apxText"))&&e.wgtSetProperty(t,"apxTextForced",i)}},xa.exeGetSizeByContent=function(e,t,a,i){var n=e.wgtTag(t);if(!a&&!i||!n.textTag)return{w:e.screen.objects[t].init.shape.w,h:e.screen.objects[t].init.shape.h};var r=n.cloneNode(!0);e.tag.appendChild(r);var o=r.offsetWidth,s=r.offsetHeight;r.style.display="block",r.style.visibility="hidden",r.style.position="relative",r.style.overflow="visible",r.style.letterSpacing=n.textTag.style.letterSpacing,r.style.lineHeight=n.textTag.style.lineHeight,r.innerHTML=apn.IWidget.exeFormatText(e.wgtGetProperty(t,"apxText")),i?r.style.height="auto":(r.style.width="auto",r.style.display="inline-block");var p=r.offsetWidth-Math.min(0,bx.$checkNaN(parseInt(r.style.letterSpacing))),l=r.offsetHeight;r.parentNode.removeChild(r);var d=e.screen.objects[t].init.shape.w,c=e.screen.objects[t].init.shape.h;return i?c=Math.ceil(l/s*e.screen.objects[t].init.shape.h)+1:d=Math.ceil(p/o*e.screen.objects[t].init.shape.w)+1,{w:d-e.screen.objects[t].init.shape.w,h:c-e.screen.objects[t].init.shape.h}},xa.exeSetText=function(e,t,a,i,n,r,o,s,p,l){if(e.textTag||(a&&(e.$O5a=a),i&&(e.$O5b=i),void 0!==n&&(e.$O6m=n),void 0!==r&&(e.$O6n=r),void 0!==o&&(e.$O7D=o),l&&(e.$Obz=l),s&&(e.$ObA=s),p&&(e.$ObL=p)),o=o||e.$O7D,p=p||e.$ObL,e.textTag&&l){var d=1.2;apn.fonts&&apn.fonts[o]&&void 0!==apn.fonts[o].height&&(d=apn.fonts[o].height);var c=l*d;p&&(c+=p),e.textTag.style.lineHeight=c+"px"}if(l=l||e.$Obz,s=s||e.$ObA,t&&!e.textTag){if(e.$O6m){var d=1.2;apn.fonts&&apn.fonts[o]&&void 0!==apn.fonts[o].height&&(d=apn.fonts[o].height);var c=l*d;p&&(c+=p),e.textTag=e.$TAG("div",{style:"position:relative;cursor:inherit;width:100%;word-wrap:break-word;font-family:inherit;line-height:"+c+"px;"}),e.textTag.style.textAlign=i||e.$O5b||"center",parseInt(e.$css("padding"))||(e.style.overflow="visible")}else e.textTag=e.$TAG("div",{style:"position:relative;cursor:inherit;left:0px;top:0px;display:inline-block;font-family:inherit;"});s?e.textTag.style.letterSpacing=s+"px":e.textTag.style.letterSpacing="normal"}if(e.setAttribute("align","left"),a=a||e.$O5a,i=i||e.$O5b,n=n||e.$O6m,r=r||e.$O6n,e.textTag&&(n&&r?e.textTag.style.whiteSpace="pre-wrap":n||(e.textTag.style.whiteSpace="nowrap")),e.textTag){if(2==e.apnCur._apnWgtRectTV)e.textTag.style.height="100%",void 0===a||"top"==a?(e.textTag.innerHTML=apn.IWidget.exeFormatText(t),e.style.textAlign=i):(e.textTag.style.display="table",e.textTag.tv2=e.textTag.tv2||e.textTag.$TAG("div",{style:"cursor:inherit;display:table-cell;font:inherit;line-height:inherit;"}),e.textTag.tv2.style.verticalAlign=a,e.setAttribute("align",i),e.textTag.tv2.innerHTML=apn.IWidget.exeFormatText(t));else{e.textTag.innerHTML=apn.IWidget.exeFormatText(t);var g=!1;if(!bx.DOM.isVisible(e)){var u,h;g=!0,u=e.style.display,e.style.display="block",e.style.visibility="hidden",h=e.parentNode,document.body.appendChild(e)}var x=e.clientWidth-2*bx.$checkNaN(parseInt(e.style.padding)),f=e.clientHeight-2*bx.$checkNaN(parseInt(e.style.padding));if((e.textTag.scrollWidth&&e.textTag.scrollWidth>x||e.textTag.scrollHeight&&e.textTag.scrollHeight>f)&&(e.style.padding=Math.max(0,Math.floor(bx.$checkNaN(parseInt(e.style.padding))-Math.max(e.textTag.scrollWidth-x,e.textTag.scrollHeight-f)/2))+"px"),void 0!==a){var y=a;n?"top"==y?(e.textTag.style.top="0%",e.textTag.style.marginTop="0px"):"bottom"==y?(e.textTag.style.top="100%",e.textTag.style.marginTop=-e.textTag.offsetHeight+"px"):(e.textTag.style.top="50%",e.textTag.style.marginTop=-e.textTag.offsetHeight/2+"px"):"top"==y?e.textTag.style.top="0px":"bottom"==y?e.textTag.style.top=e.clientHeight-2*bx.$checkNaN(parseInt(e.style.padding))-e.textTag.offsetHeight+"px":e.textTag.style.top=(e.clientHeight-2*bx.$checkNaN(parseInt(e.style.padding))-e.textTag.offsetHeight)/2+"px"}void 0!==i&&(n||("left"==i?(e.textTag.style.left="0%",e.textTag.style.marginLeft="0px"):"right"==i?(e.textTag.style.left="100%",e.textTag.style.marginLeft=-e.textTag.offsetWidth+"px"):(e.textTag.style.left="50%",e.textTag.style.marginLeft=-e.textTag.offsetWidth/2+"px"))),g&&(e.style.visibility="visible",e.style.display=u,h.appendChild(e))}e.textTag.bxBackText=t,void 0!==a&&(e.textTag.bxBackTextValign=a)}},xa.pubOnGetHTML=function(e,t,a,i){return apn.widgets.utils.getHTML.call(this,void 0,e,t,a,void 0,i)},xa.onEdit=function(e,t,a,i){return apn.widgets.utils.setAsOpened(e,e.getObjectByID(t))&&e.save(),apn.widgets.utils.$O2C(e,e.getData(),this,t,a,i)},apn.widgets["apn.wgt.rect"]=xa,xa={},xa.styleMap={},xa.editor={iconThumb:"imgs/wgts/thumbs/error.png",color:"#ff0000",colorBG:"rgba(255,0,0,0.4)",placeHolder:"Widget module loading failed. It could be temporary network problem or this file might be created by another configuration of Aspen Editor."},xa.createAsCanvasObject=apn.widgets["apn.wgt.rect"].createAsCanvasObject,xa.exeRenderTag=apn.widgets["apn.wgt.rect"].exeRenderTag,xa.exeCreateTag=apn.widgets["apn.wgt.rect"].exeCreateTag,apn.widgets["apn.wgt.null"]=xa,xa=apn.inheritWidget(apn.widgets["apn.wgt.rect"]),xa.apxTextPlainMulti=!0,xa.styleMap={title:!0,visibility:!0,strokeStyle:!0,lineWidth:!0,lineDash:!0,fillStyle:!0,borderRadiusTopLeft:!0,borderRadiusTopRight:!0,borderRadiusBottomLeft:!0,borderRadiusBottomRight:!0,font:!0,fontSize:!0,fontStyle:!0,fontItalic:!0,fontBold:!0,textMultiLine:!0,fontUnderlined:!0,text:!0,textAlign:!0,textValign:!0,textPadding:!0,textWordWrap:!0,ltrSp:!0,lnSp:!0,fontStrokeStyle:!0,fontStrokeWidth:!0,alpha:!0,angle:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0,csr:!0},apn.widgets["apn.wgt.roundRect"]=xa,xa.exeRenderTag=function(e,t,a,i,n,r){return apn.widgets["apn.wgt.rect"].exeRenderTag.call(this,e,t,a,i,n,r),e.isStretch()&&apn.CExe.ACCEL(a),a},xa.exeGetSizeByContent=apn.widgets["apn.wgt.rect"].exeGetSizeByContent,xa=apn.inheritWidget(apn.widgets["apn.wgt.rect"]),xa.styleMap={title:!0,visibility:!0,strokeStyle:!0,lineWidth:!0,lineDash:!0,fillStyle:!0,font:!0,fontSize:!0,fontStyle:!0,fontItalic:!0,fontBold:!0,fontUnderlined:!0,text:!0,textAlign:!0,textPadding:!0,ltrSp:!0,textFit:!0,fontStrokeStyle:!0,fontStrokeWidth:!0,alpha:!0,angle:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0,csr:!0},xa.properties={attrs:{ofl:"",v:2}},xa.genLtrSp=function(e,t){var a,i="",n=t.textContent,r=0;if(e&&n&&!(n.length<=1)){for(var o=0;o<n.length;o++)a=!1,e>0&&o<n.length-1?(r+=e,Math.round(r)&&(i+='<span style="margin-right:'+Math.round(r)+'px;">'+apn.IWidget.exeFormatText(n[o],{xml:!0})+"</span>",r-=Math.round(r),a=!0)):e<0&&0!=o&&(r+=e,Math.round(r)&&(i+='<span style="margin-left:'+Math.round(r)+'px;">'+apn.IWidget.exeFormatText(n[o],{xml:!0})+"</span>",r-=Math.round(r),a=!0)),a||(i+=n[o]);t.innerHTML=i,"div"==t.tagName&&(t.style.letterSpacing="normal")}},xa._ltrSp=function(e,t){return e+"px"},xa.exeCreateTag=function(e,t,a,i,n,r){
if(void 0===apn.widgets["apn.wgt.singleText"]._apxNoFloatLetterSpacing){var o=document.body.$TAG("div",{style:"font-size:35px;letter-spacing:2px;display:inline-block;visibility:hidden;"}),s=document.body.$TAG("div",{style:"font-size:35px;letter-spacing:2.9px;display:inline-block;visibility:hidden;"});o.innerHTML=s.innerHTML="예",o.offsetWidth==s.offsetWidth?apn.widgets["apn.wgt.singleText"]._apxNoFloatLetterSpacing=!0:apn.widgets["apn.wgt.singleText"]._apxNoFloatLetterSpacing=!1,document.body.removeChild(o),document.body.removeChild(s)}if(e.o.standAlone&&r&&apn.CExe.getElementByAttr("div","data-apx-id",r)){var p=apn.CExe.getElementByAttr("div","data-apx-id",r);p.apnCur={},p.apnCur.apxCreatedFromTag=!0}else{var p=document.body.$TAG("div",{style:"position:absolute;"});p.$CSS({boxSizing:"border-box"}),p.apnCur={}}p.apnSingleText=!0,a.create.data.properties&&a.create.data.properties.attrs&&2==a.create.data.properties.attrs.v&&(p._singleTxtV=2),e.isStretch()&&apn.CExe.ACCEL(p);var l=this;return p.apnOnPostSetText=function(e,i){var n;a.create.data.properties&&a.create.data.properties.attrs&&(n=a.create.data.properties.attrs),n&&("C"==n.ofl?e.style.overflow="hidden":"E"==n.ofl?(e.style.overflow="hidden",e.style.textOverflow="ellipsis"):"O"==n.ofl&&(e.style.overflow="visible"));var r=apn.Project.resolveStyle(t.project,"textFit",a.create.data.styles.textFit);if(i&&i.length&&r){var o,s=e.style.width;if(!bx.DOM.isVisible(e)){var p,d;o=!0,p=e.style.display,e.style.display="block",e.style.visibility="hidden",d=e.parentNode,document.body.appendChild(e)}var c,g=e.clientWidth;e.style.width="auto",e.style.letterSpacing="normal",c=e.clientWidth;var u=!1;if(5==r&&1==i.length&&(r=1),(1==r||5==r)&&c>g?u=!0:4==r&&i.length>1&&c>g?u=!0:2==r&&i.length>1&&(u=!0),u){var h=apn.widgets["apn.wgt.singleText"]._apxNoFloatLetterSpacing;if(e.firstChild&&"span"==e.firstChild.tagName||(e.innerHTML='<span style="box-sizing:border-box;font:inherit;cursor:inherit;">'+e.innerHTML+"</span>"),1==r)e.firstChild.$CSS({transformOrigin:"0 0",transform:"scaleX("+g/c+")",display:"inline-block"});else if(2==r||4==r){var x=(g-c)/(i.length-1);h?l.genLtrSp(x,e.firstChild):e.firstChild.style.letterSpacing=l._ltrSp(x,parseFloat(e.style.fontSize)),x&&(e.style.textAlign="left")}else if(5==r){var f=(g-c)/2,x=f/(i.length-1);h&&(x=Math.round(x)),e.firstChild.style.letterSpacing=l._ltrSp(x,parseFloat(e.style.fontSize)),e.firstChild.style.display="inline-block";var y=e.firstChild.clientWidth-x;e.firstChild.$CSS({transformOrigin:"0 0",transform:"scaleX("+g/y+")"})}e._txtFitApplied=!0}e.style.width=s,o&&(e.style.visibility="visible",e.style.display=p,d.appendChild(e))}},p},xa.exeRenderTag=function(e,t,a,i,n,r){return apn.widgets.utils.exeRenderTag.call(this,{text:!0,textFit:!0},e,t,a,i,n,r)},xa.exeOnScreenRefresh=function(e,t){var a=e.wgtTag(t);if(!a.apnCur.apxCreatedFromTag&&a._txtFitApplied){var i;(i=e.wgtGetProperty(t,"apxText"))&&e.wgtSetProperty(t,"apxTextForced",i)}},xa.exeSetText=function(e,t,a,i,n,r,o,s,p,l,d){i&&(e.$O5b=i),void 0!==o&&(e.$O7D=o),s&&(e.$O7E=s),p&&(e.$O7F=p),l&&(e.$O7G=l),d&&(e.$ObA=d),o=o||e.$O7D,i=i||e.$O5b,s=s||e.$O7E,p=p||e.$O7F,l=l||e.$O7G,d=d||e.$ObA,e.style.whiteSpace=2==e._singleTxtV?"pre":"nowrap";var c=p&&s?s:0;e.style.lineHeight=parseInt(e.style.height)-2*c+"px",e.style.textAlign=i,d?e.style.letterSpacing=d+"px":e.style.letterSpacing="normal",s&&p||l?e.style.overflow="hidden":e.style.overflow="visible",("underline"==e.style.textDecoration||e.$ObB)&&apn.dbUI&&apn.dbUI.system&&"border"==apn.dbUI.system.exeTxtUnderlined?(e.$ObB=!0,e.style.textDecoration="none",e.innerHTML='<span style="font:inherit;cursor:inherit;text-decoration:none;box-sizing:border-box;border-bottom:solid '+apn.widgets.utils.getBorderUnderlineWeight(e)+"px "+e.style.color+';">'+apn.IWidget.exeFormatText(t)+"</span>"):e.innerHTML=apn.IWidget.exeFormatText(t)},xa.exeGetSizeByContent=function(e,t,a,i){var n=e.wgtTag(t);if(!a&&!i)return{w:e.screen.objects[t].init.shape.w,h:e.screen.objects[t].init.shape.h};var r=n.cloneNode(!0);r.style.display="block",r.style.visibility="hidden",r.style.position="relative",r.style.overflow="visible",i&&(r.style.height="auto",r.style.lineHeight="normal"),a&&(r.style.width="auto",r.style.display="inline-block"),e.tag.appendChild(r);var o=r.offsetWidth,s=r.offsetHeight;r.parentNode.removeChild(r);var p=e.screen.objects[t].init.shape.w,l=e.screen.objects[t].init.shape.h;return i&&(l=Math.ceil(s/parseInt(n.style.height)*e.screen.objects[t].init.shape.h)),a&&(p=Math.ceil(o/parseInt(n.style.width)*e.screen.objects[t].init.shape.w)),{w:p-e.screen.objects[t].init.shape.w,h:l-e.screen.objects[t].init.shape.h}},xa.edtOnChangeSingleTextEditor=function(e,t,a,i,n){var r=e.getObjectByID(a),o=n.innerHTML,s=r.style.textFit,p=r.style.ltrSp,l=apn.widgets.utils.$O2v(r.shape.w,1/e.getZoomX());if(o&&o.length&&s){var d=n.offsetWidth,c=!1;if(5==s&&1==o.length&&(s=1),(1==s||5==s)&&d>l?c=!0:4==s&&o.length>1&&d>l?c=!0:2==s&&o.length>1&&(c=!0),c){if(1==s)i.style.width=d+"px",i.$CSS({transformOrigin:"0 50%",transform:"scaleX("+l/d+")"});else if(2==s||4==s){var g=(l-d)/(o.length-1);i.style.letterSpacing=this._ltrSp(g,parseFloat(r.style.fontSize))}else if(5==s){var u=(l-d)/2,g=u/(o.length-1);i.style.letterSpacing=this._ltrSp(g,parseFloat(r.style.fontSize));var h=n.style.letterSpacing;n.style.letterSpacing=this._ltrSp(g,parseFloat(r.style.fontSize));var x=n.offsetWidth-g;i.style.width=x+"px",i.$CSS({transformOrigin:"0 0",transform:"scaleX("+l/x+")"}),n.style.letterSpacing=h}}else p?i.style.letterSpacing=p+"px":i.style.letterSpacing="normal"}},xa.edtOnBuildProperty=function(e,t,a,i){return{ofl:{title:apn.CExe.GL({ko:"영역외부표시",en:"Overflow"}),input:[{title:apn.CExe.GL({ko:"자동",en:"Auto"}),value:""},{title:apn.CExe.GL({ko:"숨김",en:"Clip"}),value:"C"},{title:apn.CExe.GL({ko:"생략(...)",en:"Ellipsis"}),value:"E"}]}}},xa.pubOnPrePublish=function(e,t,a){var i=this.pubOnGetHTML(e,t,a,{noId:!0,noDisplay:!0}),n=document.body.$TAG("div",{style:"position:absolute;overflow:hidden;visibility:hidden;"});n.innerHTML=i;var r=e.pages[t].objects[a];r.create.data.properties=r.create.data.properties||{},r.create.data.properties.attrs=r.create.data.properties.attrs||{};var o=r.create.data.properties.attrs,s=apn.IWidget.getCanvasObjectStyle({},this,e,r.create.data.styles),p=s.text,l=s.textFit,d=(s.ltrSp,r.init.shape.w);if(o.frL=void 0,o.frS=void 0,p&&p.length&&l){n.firstChild.style.letterSpacing="normal",n.firstChild.style.width="auto";var c=n.firstChild.offsetWidth,g=!1;if(5==l&&1==p.length&&(l=1),(1==l||5==l)&&c>d?g=!0:4==l&&p.length>1&&c>d?g=!0:2==l&&p.length>1&&(g=!0),g)if(1==l)o.frS=d/c;else if(2==l||4==l){var u=(d-c)/(p.length-1);o.frL=u}else if(5==l){var h=(d-c)/2,u=h/(p.length-1);n.firstChild.style.letterSpacing=this._ltrSp(u,parseFloat(n.style.fontSize));var x=n.firstChild.offsetWidth-u;o.frL=u,o.frS=d/x}}n.parentNode.removeChild(n)},xa.pubOnGetHTML=function(e,t,a,i){function n(e){var t;return t=Math.round(parseInt(e.fontSize)/17)||1,e.fontBold&&t++,t}var r,o=apn.IWidget.htmlRender(this,e,t,a,{fontUnderlined:!0,visibility:!(!i||!i.noDisplay)}),s="<div";e.pages[t].objects[a].create.data.properties&&e.pages[t].objects[a].create.data.properties.attrs&&(r=e.pages[t].objects[a].create.data.properties.attrs),r&&"O"==r.ofl?o.css+="overflow:visible;":o.style.lineWidth&&o.style.strokeStyle||o.style.fillStyle||r&&("C"==r.ofl||"E"==r.ofl)?(o.css+="overflow:hidden;",r&&"E"==r.ofl&&(o.css+="text-overflow:ellipsis;")):o.css+="overflow:visible;",r&&void 0!==r.frL?o.css+="text-align:left;":o.style.textAlign&&(o.css+="text-align:"+o.style.textAlign+";"),o.css+="white-space:"+(r&&2==r.v?"pre":"nowrap")+";line-height:"+(o.h-2*o.lineWidth)+"px;",r&&void 0!==r.frL?o.css+="letter-spacing:"+this._ltrSp(r.frL,parseFloat(o.style.fontSize))+";":o.style.ltrSp&&(o.css+="letter-spacing:"+parseFloat(o.style.ltrSp).toFixed(3)+"px;");var p="";return o.style.fontUnderlined&&(apn.dbUI&&apn.dbUI.system&&"border"==apn.dbUI.system.exeTxtUnderlined?p+="border-bottom:solid "+n(o.style)+"px "+o.style.fontStyle+";":css+="text-decoration:underline;"),r&&void 0!==r.frS&&(p+="transform-origin:0 0;transform:scaleX("+r.frS+");display:inline-block;"),s+=' style="'+o.css+'"',s+=' class="apxWgt1"',s+=i&&i.noId?">":' data-apx-id="'+a+'">',p&&(s+='<span style="font:inherit;text-decoration:none;box-sizing:border-box;'+p+'">'),s+=apn.IWidget.exeFormatText(o.style.text,{xml:!0}),p&&(s+="</span>"),s+="</div>"},apn.widgets["apn.wgt.singleText"]=xa,xa={},xa.styleMap={title:!0,borderRadiusTopLeft:!0,borderRadiusTopRight:!0,borderRadiusBottomLeft:!0,borderRadiusBottomRight:!0,csr:!0},xa.editor={properties:{hp:{title:"PassInput",input:[{title:"Enable",value:"Y"},{title:"Disable",value:"N"}]}}},xa.properties={attrs:{hp:"N"}},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,this,"apn.CItrAreaRect",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n)},xa.exeOnForceStyle=function(e,t){t.csr&&"inherit"!=t.csr||(t.csr="pointer")},xa.exeCreateTag=apn.widgets["apn.wgt.rect"].exeCreateTag,xa.exeRenderTag=function(e,t,a,i,n,r){return apn.widgets["apn.wgt.rect"].exeRenderTag.call(this,e,t,a,i,n,r),i.create.data.properties&&i.create.data.properties.attrs&&"Y"==i.create.data.properties.attrs.hp&&(a.apnPassPointerEvent=!0,a.apnPassPointerEventButHit=!0),10==bx.HCL.DV.isIE()&&(a.style.backgroundColor="rgba(255,255,255,0)",a._apxIE10eventPassProblem=!0),a},apn.widgets["apn.wgt.itrAreaRect"]=xa,xa={},xa.styleMap={title:!0,visibility:!0,strokeStyle:!0,lineWidth:!0,lineDash:!0,fillStyle:!0,alpha:!0,polygon:!0},xa.editor={properties:{hp:{title:"PassInput",input:[{title:"Enable",value:"Y"},{title:"Disable",value:"N"}]}}},xa.properties={attrs:{hp:"N"}},xa.scriptInfo={wgtData:{vertex:{help:{ko:"[{x:Number,y:Number},...]\n폴리곤의 점 정보",en:"[{x:Number,y:Number},...]\nPoints in polygon"},value:"[{x:Number,y:Number},...]",type:"go"}}},xa.createByEditor=function(e,t,a){var i={state:bx.CEditorWnd.STATE_CREATE_POLYGON,data:{type:bx.CEditorWnd.CCustomPolygon,option:{type:bx.CEditorWnd.CP_BORDER|bx.CEditorWnd.CP_NO_DIAGONAL|bx.CEditorWnd.CP_NO_VERTICAL|bx.CEditorWnd.CP_NO_HORIZONTAL|bx.CEditorWnd.CP_USE_VERTEX,style:{}}}};return apn.IWidget.getCanvasObjectStyle(i.data.option.style,this,e,t),i},xa.exeCreateTag=function(e,t,a,i,n){var r=apn.widgets.utils.$O2D(r);return r.apxRefreshOnStrokeChange=!0,r.apxRefreshOnFillChange=!0,r},xa.exeRenderTag=function(e,t,a,i,n,r,o){function s(e,t,a,i,n,r,o){if(p.polygon){if(e.clearRect(0,0,e.canvas.width,e.canvas.height),a){var s=e.fillStyle;e.fillStyle=p.fillStyle}if(t){var l=e.lineWidth,d=e.strokeStyle;bx.cCanvasObject.applyLineDash(e,p),e.lineJoin="round",e.lineWidth=p.lineWidth,e.strokeStyle=p.strokeStyle}e.beginPath();for(var c,g,u=0;u<p.polygon.length;u++)c=i+Math.floor(p.polygon[u].x*r),g=n+Math.floor(p.polygon[u].y*o),0==u?e.moveTo(c,g):e.lineTo(c,g);e.closePath(),a&&e.fill("evenodd"),t&&e.stroke(),a&&(e.fillStyle=s),t&&(e.lineWidth=l,e.strokeStyle=d)}}var p=apn.IWidget.getCanvasObjectStyle({},this,e.project,i.create.data.styles);return i.create.data.properties&&i.create.data.properties.attrs&&"Y"==i.create.data.properties.attrs.hp&&(a.apnPassPointerEvent=!0,a.apnPassPointerEventButHit=!0),apn.IWidget.exeSetAlpha(a,p.alpha),a=apn.widgets.utils.$O2F(e,a,i,p,apn.widgets.utils.$O2x(t,a,i.init.position.x,n),apn.widgets.utils.$O2y(t,a,i.init.position.y,r),apn.widgets.utils.$O2v(i.init.shape.w,n),apn.widgets.utils.$O2w(i.init.shape.h,r),n,r,s)},xa.exeDetect=function(e,t,a,i,n,r,o,s){function p(e,i,n,r,o,s){if(t.xx_polygon)for(var p=0;p<a.create.data.styles.polygon.length;p++)t.xx_polygon[p].x=n+Math.floor(a.create.data.styles.polygon[p].x*o),t.xx_polygon[p].y=r+Math.floor(a.create.data.styles.polygon[p].y*s);else{t.xx_polygon=[];for(var p=0;p<a.create.data.styles.polygon.length;p++)t.xx_polygon.push({x:n+Math.floor(a.create.data.styles.polygon[p].x*o),y:r+Math.floor(a.create.data.styles.polygon[p].y*s)})}return bx.CCanvasWnd.intersect_point_polygon(e,i,t.xx_polygon)}return apn.widgets.utils.$O2G(e,t,a,i,n,r,o,s,p)},xa.exeOnLoad=function(e,t){for(var a=[],i=0;i<e.screen.objects[t].create.data.styles.polygon.length;i++)a[i]={},a[i].x=e.screen.objects[t].create.data.styles.polygon[i].x*e.screen.objects[t].init.shape.w,a[i].y=e.screen.objects[t].create.data.styles.polygon[i].y*e.screen.objects[t].init.shape.h;e.wgtSetProperty(t,"vertex",a)},apn.widgets["apn.wgt.polygon"]=xa,xa={},xa.styleMap={title:!0,visibility:!0,mediaID:!0,angle:!0,alpha:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0,csr:!0},xa.exeScriptMediaID=!0,xa.properties={uiOpened:!1},xa.properties.attrs={cfg:{mr:0}},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,this,"apn.CImage",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n)},xa.exeCreateTag=function(e,t,a,i,n,r){if(a.create.data.properties&&a.create.data.properties.attrs&&a.create.data.properties.attrs.cfg&&parseInt(a.create.data.properties.attrs.cfg.mr)>=1){var o=document.body.$TAG("div",{style:"position:absolute;cursor:inherit;overflow:hidden;"});bx.HCL.DV.isIE()>=9&&a.create.data.properties&&a.create.data.properties.attrs&&a.create.data.properties.attrs.svg?o.$ObC=o.$TAG("canvas"):o.$ObC=o.$TAG("img",{style:"width:100%;height:100%;"})}else if(bx.HCL.DV.isIE()>=9&&a.create.data.properties&&a.create.data.properties.attrs&&a.create.data.properties.attrs.svg)var o=$TAG("canvas",{style:"position:absolute;cursor:inherit;"});else var o=$TAG("img",{style:"position:absolute;cursor:inherit;"});return o.$CSS({boxSizing:"border-box"}),o.apnCur={},o},xa.exeRenderTag=function(e,t,a,i,n,r){var o=apn.IWidget.getCanvasObjectStyle({},this,e.project,i.create.data.styles);return i.create.data.styles.strokeStyle&&i.create.data.styles.lineWidth&&(o.strokeStyle=i.create.data.styles.strokeStyle,o.lineWidth=i.create.data.styles.lineWidth),apn.IWidget.exeApplyCSSpre(i,o,a,apn.widgets.utils.$O2x(t,a,i.init.position.x,n),apn.widgets.utils.$O2y(t,a,i.init.position.y,r),apn.widgets.utils.$O2v(i.init.shape.w,n),apn.widgets.utils.$O2w(i.init.shape.h,r),n,r),apn.IWidget.exeRenderSize(e,t,a,i,e.project,n,r),apn.IWidget.exeRenderPosition(t,a,i,e.project,n,r),apn.IWidget.exeApplyCSSpost(i,o,a,apn.widgets.utils.$O2x(t,a,i.init.position.x,n),apn.widgets.utils.$O2y(t,a,i.init.position.y,r),apn.widgets.utils.$O2v(i.init.shape.w,n),apn.widgets.utils.$O2w(i.init.shape.h,r),n,r),a.$ObC&&"CANVAS"==a.$ObC.tagName&&(a.$ObC.style.width=a.style.width,a.$ObC.style.height=a.style.height,a.$ObC.width=parseInt(a.style.width),a.$ObC.height=parseInt(a.style.height)),a},xa.exeAssetLoad=function(e,t,a,i){if(a||e.screen.objects[t.apnOID].create.data&&e.screen.objects[t.apnOID].create.data.styles&&(a=e.screen.objects[t.apnOID].create.data.styles.mediaID),a){var n=t.$ObC||t;if("CANVAS"==n.tagName){var r=new Image;r.onload=function(){var e=n.getContext("2d");e.drawImage(this,0,0,parseInt(t.style.width),parseInt(t.style.height))},r.onerror=r.onabort=function(){window.console&&console.error("[APX] SVG file loading failed. url="+this.src)},r.src=e.mediaURL(a,!0)||a}else n.src=e.mediaURL(a,!0)||a;if(t.$ObC){var o=e.screen.objects[t.apnOID].create.data;1==o.properties.attrs.cfg.mr?(t.$ObC.$CSS("transformOrigin","50% 50%"),t.$ObC.$CSS("transform","rotateY(180deg)")):2==o.properties.attrs.cfg.mr?(t.$ObC.$CSS("transformOrigin","50% 50%"),t.$ObC.$CSS("transform","rotateX(180deg)")):3==o.properties.attrs.cfg.mr&&(t.$ObC.$CSS("transformOrigin","50% 50%"),t.$ObC.$CSS("transform","rotateX(180deg) rotateY(180deg)"))}}},xa.$O6o=function(e,t,a){function i(i,o,s,s,s,p){r||(p=void 0),i?(void 0!==p&&(n.data.styles.apxCT=p),e.setMediaToObject(t,i,!!o,a)):null===i&&(void 0!==n.data.styles.apxCT&&delete n.data.styles.apxCT,e.clearMediaFromObject(t))}var n=e.getObjectByID(t);if(window.AspenUIRun){var r;window.asui&&asui.CFG&&asui.CFG.getAccessInfo&&asui.CFG.getAccessInfo()&&asui.CFG.getAccessInfo().rscImageSharedList&&(r=!0);var o="image_manager",s=!1;e.wgtGetProperty(t,"svg")&&(o="svg_manager"),AspenUIRun(o,{mode:"picker",keepSize:!n.data.styles.mediaID,mediaID:n.data.styles.mediaID,noImgKeepSize:s,useNone:!!n.data.styles.mediaID,shareCAT:n.data.styles.apxCT,cbFunc:i})}},xa.onEdit=function(e,t,a,i){apn.widgets["apn.wgt.image"].$O6o(e,t)},xa.edtOnConfig=function(e,t,a,i){function n(){eduLib.edtInputApplyAll(e,o.tagSub1),e.wgtSetProperty(t,"cfg",s),e.wgtRefreshUI(t)}function r(){for(var e=0;e<p.length;e++)this.id==p[e]?(o[p[e]].style.display="block",o.tagTab.$$(p[e]).style.borderStyle="solid solid none solid"):(o[p[e]].style.display="none",o.tagTab.$$(p[e]).style.borderStyle="none none solid none")}if(!e.wgtGetProperty(t,"svg"))return void this.onEdit(e,t,a,i);var o,s=e.wgtGetProperty(t,"cfg")||{mr:0},p=["tagSub1"];if(o=e.dlgDoModal(600,240,n)){var l=40;o.tagTab=o.$TAG("div",{style:"position:relative;width:100%;height:26px;padding-bottom:"+(l-26)+"px;"}),o.tagTab.innerHTML='<span id="tagSub1" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">Mirror</span><span id="tagBlank" style="float:left;padding:2px 0 2px 0;border-bottom:solid 1px #a8a8a8;width:500px;">&nbsp;</span>',o.tagTab.$$("tagSub1").onclick=r,o.tagSub1=o.$TAG("div",{style:"width:100%;height:"+(o.clientHeight-l)+"px"}),eduLib.edtInputAdd(e,o.tagSub1,{type:"select",title:"Direction",value:s,key:"mr",options:[{title:"Horizontal",value:1},{title:"Vertical",value:2},{title:"Both",value:3},{title:"None",value:0}]}),o.tagTab.$$("tagSub1").onclick(),o.tagTab.$$("tagBlank").style.width=o.clientWidth-o.tagTab.$$("tagBlank").offsetLeft-24+"px"}},xa.exeOnLoad=function(e,t){"Transparent"==e.wgtGetProperty(t,"EventProcess")&&e.tagPassPointerEvent(e.wgtTag(t),!0)},apn.widgets["apn.wgt.image"]=xa,xa=apn.inheritWidget(apn.widgets["apn.wgt.image"]),xa.styleMap={title:!0,visibility:!0,strokeStyle:!0,lineWidth:!0,lineDash:!0,fillStyle:!0,borderRadiusTopLeft:!0,borderRadiusTopRight:!0,borderRadiusBottomLeft:!0,borderRadiusBottomRight:!0,alpha:!0,angle:!0,mediaID:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0,csr:!0},xa.exeScriptMediaID=!0,xa.editor={runtimeProperties:{ImageURL:{title:"Image URL",input:"http://"}}},xa.scriptInfo={wgtRun:{crop:{param:"{x:Number,y:Number}|''",help:"Crop the image from (x,y). Cleared if ''."}}},xa.styles={lineWidth:0,fillStyle:"transparent"},xa.properties.attrs={cfg:{mr:0}},xa.exeOnLoad=function(e,t){function a(a,i){a==t&&(n.imageCrop&&delete n.imageCrop,apn.widgets["apn.wgt.image2"].exeAssetLoad(e,n,i))}function i(a,i){if(a==t){var o,s;if(i)try{o=JSON.parse(i),void 0!==o.x&&void 0!==o.y&&(r.$ObD(e,t,o),s=!0)}catch(e){}s?n.imageCrop&&delete n.imageCrop:(r.$ObE(e,t),apn.widgets["apn.wgt.image2"].exeAssetLoad(e,n,i))}}var n=e.wgtTag(t);e.wgtListenProperty(t,"ImageURL",a);var r=this;e.wgtListenProperty(t,"crop",i)},xa.$ObD=function(e,t,a){var i=e.wgtTag(t);i.$ObF=a;var n=0,r=0;i.$ObG&&(n=i.$ObG.width||i.$ObG.naturalWidth,r=i.$ObG.height||i.$ObG.naturalHeight),n&&r&&(i.$O6q||((i.uTagHolder||i).style.overflow="hidden",i.$O6q=(i.uTagHolder||i).$TAG("img",{style:"position:absolute;cursor:inherit;"})),i.$O6q.style.left=-(a.x*(1/e.getZoomX()))+"px",i.$O6q.style.top=-(a.y*(1/e.getZoomX()))+"px",i.$O6q.style.width=n*(1/e.getZoomX())+"px",i.$O6q.style.height=r*(1/e.getZoomY())+"px",i.$O6q.src=i.$ObG.src,(i.uTagHolder||i).style.backgroundImage="none")},xa.$ObE=function(e,t){var a=e.wgtTag(t);a.$O6q&&(a.removeChild(a.$O6q),delete a.$O6q,delete a.$ObF)},xa.exeCreateTag=function(e,t,a,i,n,r){var o=apn.widgets["apn.wgt.rect"].exeCreateTag(e,t,a,i,n,r);return o},xa.exeRenderTag=function(e,t,a,i,n,r){var o=apn.IWidget.getCanvasObjectStyle({},this,e.project,i.create.data.styles);i.create.data.styles.strokeStyle&&i.create.data.styles.lineWidth&&(o.strokeStyle=i.create.data.styles.strokeStyle,o.lineWidth=i.create.data.styles.lineWidth),apn.IWidget.exeApplyCSSpre(i,o,a,apn.widgets.utils.$O2x(t,a,i.init.position.x,n),apn.widgets.utils.$O2y(t,a,i.init.position.y,r),apn.widgets.utils.$O2v(i.init.shape.w,n),apn.widgets.utils.$O2w(i.init.shape.h,r),n,r),apn.IWidget.exeRenderSize(e,t,a,i,e.project,n,r),apn.IWidget.exeRenderPosition(t,a,i,e.project,n,r),apn.IWidget.exeApplyCSSpost(i,o,a,apn.widgets.utils.$O2x(t,a,i.init.position.x,n),apn.widgets.utils.$O2y(t,a,i.init.position.y,r),apn.widgets.utils.$O2v(i.init.shape.w,n),apn.widgets.utils.$O2w(i.init.shape.h,r),n,r);var s=i.create.data.properties;if(apn.Project.isInHTML(t.project,t.getPageID(),a.apnOID)&&s&&(s.attrs&&s.attrs.cfg&&void 0!==s.attrs.cfg.mr&&delete s.attrs.cfg.mr,s.imgCrop&&delete s.imgCrop),s&&s.attrs&&s.attrs.cfg&&parseInt(s.attrs.cfg.mr)>=1){var p=parseInt(a.style.width),l=parseInt(a.style.height);p-=2*bx.$checkNaN(parseInt(a.style.borderWidth)),l-=2*bx.$checkNaN(parseInt(a.style.borderWidth)),a.uTagHolder=a.$TAG("div",{style:"position:absolute;cursor:inherit;left:0px;top:0px;width:"+p+"px;height:"+l+"px;"}),a.style.overflow="hidden"}s&&s.imgCrop&&(a.imageCrop=s.imgCrop),a.tagOnPostResize=function(e,t){t.uTagHolder&&(t.uTagHolder.style.width=t.style.width,t.uTagHolder.style.height=t.style.height),t.imageCrop&&bx.CImageEditor.applyToDIV(t.uTagHolder||t,t.imageCrop)}},xa.exeAssetLoad=function(e,t,a,i){if(i)return bx.CImageEditor.resetDIV(t.uTagHolder||t),(t.uTagHolder||t).style.backgroundImage="none",void(t.$ObG&&(t.$ObG.src=""));var n=e.screen.objects[t.apnOID].create.data;if(a||(n&&n.styles&&n.styles.mediaID?a=n.styles.mediaID:n&&n.properties&&n.properties.attrs&&(n.properties.attrs.URL||n.properties.attrs.URL2)&&(a=n.properties.attrs.URL2&&e.viewer.o.standAlone?n.properties.attrs.URL2:n.properties.attrs.URL)),a){if(t.imageCrop?bx.CImageEditor.applyToDIV(t.uTagHolder||t,t.imageCrop,e.mediaURL(a,!0)||a):(bx.CImageEditor.resetDIV(t.uTagHolder||t),(t.uTagHolder||t).$CSS("backgroundSize","100% 100%"),(t.uTagHolder||t).style.backgroundRepeat="no-repeat",(t.uTagHolder||t).style.backgroundImage="url("+(e.mediaURL(a,!0)||a)+")"),n&&n.properties&&n.properties.attrs&&n.properties.attrs.cfg&&(1==n.properties.attrs.cfg.mr?(t.uTagHolder.$CSS("transformOrigin","50% 50%"),t.uTagHolder.$CSS("transform","rotateY(180deg)")):2==n.properties.attrs.cfg.mr?(t.uTagHolder.$CSS("transformOrigin","50% 50%"),t.uTagHolder.$CSS("transform","rotateX(180deg)")):3==n.properties.attrs.cfg.mr&&(t.uTagHolder.$CSS("transformOrigin","50% 50%"),t.uTagHolder.$CSS("transform","rotateX(180deg) rotateY(180deg)"))),!t.$ObG){t.$ObG=t.$TAG("img",{style:"display:none;"});var r=this;t.$ObG.onload=function(){t.$ObF&&r.$ObD(e,t.apnOID,t.$ObF)}}t.$ObG.src=e.mediaURL(a,!0)||a}},xa.onEdit=function(e,t,a,i){void 0!==e.wgtGetProperty(t,"URL")?this.$O6p(e,t):apn.widgets["apn.wgt.image"].onEdit.call(this,e,t,a,i)},xa.edtOnConfig=function(e,t,a,i){function n(){apn.widgets["apn.wgt.image2"].$O6q(e,t)}void 0===e.wgtGetProperty(t,"URL")||e.wgtGetProperty(t,"URL")?void 0!==e.wgtGetProperty(t,"URL")||e.wgtGetProperty(t,"apxMediaID")?n():apn.widgets["apn.wgt.image"].$O6o(e,t,n):this.$O6p(e,t,n)},xa.$O6p=function(e,t,a){function i(){eduLib.edtInputApplyAll(e,n),e.wgtSetProperty(t,"URL",s.URL),s.URL?e.setMediaToObject(t,s.URL,!0,a):e.clearMediaFromObject(t),void 0!==o&&e.wgtSetProperty(t,"URL2",s.URL2)}var n,r=e.wgtGetProperty(t,"URL"),o=e.wgtGetProperty(t,"URL2"),s={URL:r,URL2:o};if(void 0===o)var p=160,l=apn.CExe.GL({ko:"이미지 URL",en:"Image URL"})+" (m)";else var p=220,l=apn.CExe.GL({ko:"이미지 URL",en:"Image URL"})+" (m)",d=apn.CExe.GL({ko:"실행용 이미지 URL",en:"Image URL for execution"}),c=apn.CExe.GL({ko:"※ 실행용 이미지가 입력되면 실행에서 그 이미지가 사용됩니다.\n실행용으로 Local disk의 이미지를 사용할 경우, Publish된 index.html을 기준으로 상대 경로를 입력합니다.",en:"※ If execution image is set, it will be displayed on execution.\nIf execution image is a local image, its path needs to be the relative path from published 'index.html'."});(n=e.dlgDoModal(820,p,i))&&(eduLib.edtInputAdd(e,n,{type:"text",title:l,key:"URL",value:s,join:void 0!==o}),void 0!==o&&(eduLib.edtInputAdd(e,n,{type:"text",title:d,key:"URL2",value:s,join:!0}),eduLib.edtInputAdd(e,n,{type:"message",value:c,join:!0})))},xa.$O6q=function(e,t){function a(){if(p){var a=s.serialize();a?(d.data=d.data||{},d.data.properties=d.data.properties||{},d.data.properties.imgCrop=a):d.data&&d.data.properties&&void 0!==d.data.properties.imgCrop&&delete d.data.properties.imgCrop,d.setUpdated(!0),e.invalidateRect(d),e.draw(),e.onUpdated(bx.CCanvasWnd.OBJ_UPDATED,d)}s&&e.releaseWgtImageEditor(),eduLib.edtInputApplyAll(e,o.tagSub2),e.wgtSetProperty(t,"cfg",l),e.wgtRefreshUI(t)}function i(){s&&e.releaseWgtImageEditor()}function n(){for(var e=0;e<c.length;e++)this.id==c[e]?(o[c[e]].style.display="block",o.tagTab.$$(c[e]).style.borderStyle="solid solid none solid"):(o[c[e]].style.display="none",o.tagTab.$$(c[e]).style.borderStyle="none none solid none")}function r(e){if(e){if(d.data&&d.data.properties&&d.data.properties.imgCrop){var t;if(d.shape.w!=d.data.properties.imgCrop.cW||d.shape.h!=d.data.properties.imgCrop.cH){t=bx.$cloneObject({},d.data.properties.imgCrop);var a=d.shape.w/d.data.properties.imgCrop.cW,i=d.shape.h/d.data.properties.imgCrop.cH;t.cX=t.cX*a,t.cY=t.cY*i,t.rW=t.rW*a,t.rH=t.rH*i,t.cW=d.shape.w,t.cH=d.shape.h}else t=d.data.properties.imgCrop;s.deserialize(t)}else s.stretchImage();s.invalidateRect(),s.draw(),o.tagSub1.innerHTML="",o.tagSub1.appendChild(s.tag),s.show();var n=o.tagSub1.$TAG("div",{align:"center",style:"position:relative;left:50%;margin-left:-30px;width:60px;border:solid 1px #7f7f7f;padding:1px;margin-top:3px;color:#7f7f7f;font-size:14px;"});n.$CSS("borderRadius","3px"),n.innerHTML="Reset",n.onmouseout=function(){this.style.color="#7f7f7f",this.style.borderColor="#7f7f7f"},n.onmouseover=function(){this.style.color="#2cb100",this.style.borderColor="#2cb100"},n.onclick=function(){s.stretchImage(),s.invalidateRect(),s.draw()},p=!0}else o.tagSub1.innerHTML="",o.tagSub1.$TAG("div",{align:"center",style:"position:relative;width:100%;"}).innerHTML="<br/><br/><br/><br/>Cannot load the image.<br/>It could be temporary network problem or image URL problem."}var o,s,p,l=e.wgtGetProperty(t,"cfg")||{mr:0},d=e.getObjectByID(t),c=["tagSub1","tagSub2"];if(o=e.dlgDoModal(600,600,a,i)){var g=40;o.tagTab=o.$TAG("div",{style:"position:relative;width:100%;height:26px;padding-bottom:"+(g-26)+"px;"}),o.tagTab.innerHTML='<span id="tagSub1" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">Crop</span><span id="tagSub2" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">Mirror</span><span id="tagBlank" style="float:left;padding:2px 0 2px 0;border-bottom:solid 1px #a8a8a8;">&nbsp;</span>',o.tagTab.$$("tagSub1").onclick=o.tagTab.$$("tagSub2").onclick=n,o.tagSub1=o.$TAG("div",{style:"width:100%;height:"+(o.clientHeight-g)+"px"}),o.tagSub2=o.$TAG("div",{style:"width:100%;height:"+(o.clientHeight-g)+"px"}),o.tagSub1.$TAG("div",{align:"center",style:"position:relative;top:40%;width:100%;"}).innerHTML="Loading image...",s=e.allocWgtImageEditor(o.tagSub1.clientWidth,o.tagSub1.clientHeight-34),s.setImage(e.mediaURL(e.wgtGetProperty(t,"apxMediaID"))||e.wgtGetProperty(t,"URL"),d.shape.w,d.shape.h,r),eduLib.edtInputAdd(e,o.tagSub2,{type:"select",title:"Direction",value:l,key:"mr",options:[{title:"Horizontal",value:1},{title:"Vertical",value:2},{title:"Both",value:3},{title:"None",value:0}]}),o.tagTab.$$("tagSub1").onclick(),o.tagTab.$$("tagBlank").style.width=o.clientWidth-o.tagTab.$$("tagBlank").offsetLeft-24+"px"}},apn.widgets["apn.wgt.image2"]=xa,xa={},xa.styleMap={title:!0,visibility:!0,mediaID:!0,angle:!0,alpha:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0,csr:!0},xa.exeScriptMediaID=!0,xa.properties={attrs:{}},xa.createAsCanvasObject=apn.widgets["apn.wgt.image"].createAsCanvasObject,xa.exeCreateTag=function(e,t,a,i,n,r){if(e.o.standAlone&&r&&apn.CExe.getElementByAttr("img","data-apx-id",r))var o=apn.CExe.getElementByAttr("img","data-apx-id",r);else var o=$TAG("img",{style:"position:absolute;cursor:inherit;"});return o.$CSS({boxSizing:"border-box"}),o.apnCur={},o},xa.exeRenderTag=function(e,t,a,i,n,r){var o=apn.IWidget.getCanvasObjectStyle({},this,e.project,i.create.data.styles);return apn.IWidget.exeApplyCSSpre(i,o,a,apn.widgets.utils.$O2x(t,a,i.init.position.x,n),apn.widgets.utils.$O2y(t,a,i.init.position.y,r),apn.widgets.utils.$O2v(i.init.shape.w,n),apn.widgets.utils.$O2w(i.init.shape.h,r),n,r),apn.IWidget.exeRenderSize(e,t,a,i,e.project,n,r),apn.IWidget.exeRenderPosition(t,a,i,e.project,n,r),apn.IWidget.exeApplyCSSpost(i,o,a,apn.widgets.utils.$O2x(t,a,i.init.position.x,n),apn.widgets.utils.$O2y(t,a,i.init.position.y,r),apn.widgets.utils.$O2v(i.init.shape.w,n),apn.widgets.utils.$O2w(i.init.shape.h,r),n,r),a},xa.exeAssetLoad=function(e,t,a,i){a||e.screen.objects[t.apnOID].create.data&&e.screen.objects[t.apnOID].create.data.styles&&(a=e.screen.objects[t.apnOID].create.data.styles.mediaID),a&&(t.src=e.mediaURL(a,!0)||a)},xa.pubOnGetHTML=function(e,t,a,i){var n=apn.IWidget.htmlRender(this,e,t,a),r="<img";return n.style.mediaID&&(r+=' src="'+apn.Project.mediaResolve(e,n.style.mediaID,!1,!0)+'"'),e.pages[t].objects[a].create.data.properties.attrs.bg&&(n.css+="pointer-events:none;"),r+=' style="'+n.css+'"',r+=' class="apxWgt1"',r+=i&&i.noId?"/>":' data-apx-id="'+a+'"/>'},xa.onEdit=apn.widgets["apn.wgt.image"].onEdit,apn.widgets["apn.wgt.image0"]=xa,xa={},xa.styleMap={title:!0,visibility:!0,font:!0,fontSize:!0,fontStyle:!0,fontItalic:!0,fontBold:!0,textMultiLine:!0,fontUnderlined:!0,text:!0,textAlign:!0,textValign:!0,textPadding:!0,textWordWrap:!0,fontStrokeStyle:!0,fontStrokeWidth:!0,alpha:!0,angle:!0,mediaID:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0,csr:!0},xa.exeScriptMediaID=!0,xa.properties={uiOpened:!1,tv:2},xa.createAsCanvasObject=apn.widgets["apn.wgt.image"].createAsCanvasObject,xa.exeCreateTag=apn.widgets["apn.wgt.rect"].exeCreateTag,xa.exeRenderTag=apn.widgets["apn.wgt.rect"].exeRenderTag,xa.exeOnScreenRefresh=apn.widgets["apn.wgt.rect"].exeOnScreenRefresh,xa.onEdit=apn.widgets["apn.wgt.rect"].onEdit,xa.edtOnConfig=apn.widgets["apn.wgt.image"].onEdit,xa.exeAssetLoad=function(e,t,a,i){a||e.screen.objects[t.apnOID].create.data&&e.screen.objects[t.apnOID].create.data.styles&&(a=e.screen.objects[t.apnOID].create.data.styles.mediaID),a&&(t.$CSS("backgroundSize","100% 100%"),t.style.backgroundRepeat="no-repeat",t.style.backgroundImage="url("+(e.mediaURL(a,!0)||a)+")")},apn.widgets["apn.wgt.imageText"]=xa,xa=apn.inheritWidget(apn.widgets["apn.wgt.imageText"]),xa.styleMap={title:!0,visibility:!0,strokeStyle:!0,lineWidth:!0,lineDash:!0,fillStyle:!0,borderRadiusTopLeft:!0,borderRadiusTopRight:!0,borderRadiusBottomLeft:!0,borderRadiusBottomRight:!0,alpha:!0,angle:!0,mediaID:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0,csr:!0},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,this,"apn.CImage",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n,{fixImage:!0})},xa.exeCreateTag=function(e,t,a,i,n){var r=apn.widgets["apn.wgt.rect"].exeCreateTag(e,t,a,i,n);return r.imageTag=r.$TAG("img",{style:"position:absolute;"}),r.imageTag.onload=function(){this.width=Math.round(this.naturalWidth*i),this.height=Math.round(this.naturalHeight*n),this.style.left=(parseInt(this.parentNode.style.width)-this.width)/2-this.parentNode.apnLW+"px",this.style.top=(parseInt(this.parentNode.style.height)-this.height)/2-this.parentNode.apnLW+"px"},r},xa.exeOnScreenRefresh=void 0,xa.onEdit=void 0,xa.exeAssetLoad=function(e,t,a){a||e.screen.objects[t.apnOID].create.data&&e.screen.objects[t.apnOID].create.data.styles&&(a=e.screen.objects[t.apnOID].create.data.styles.mediaID),
a&&(t.imageTag.src=e.mediaURL(a,!0)||a)},apn.widgets["apn.wgt.imageRect"]=xa,xa={},xa.exeFireStateEvent=!0,xa.styleMap={title:!0,visibility:!0,alpha:!0,state:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0,borderRadiusTopLeft:!0,borderRadiusTopRight:!0,borderRadiusBottomLeft:!0,borderRadiusBottomRight:!0,csr:!0},xa.editor={iconThumb:"imgs/wgts/thumbs/multi_layer_container.png"},xa.properties={uiOpened:!1,attrs:{ofl:""}},xa.useLayerOverflow=!0,xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,apn.widgets["apn.wgt.layerContainer"],"apn.CLayerContainer",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n)},xa.exeCreateTag=function(e,t,a,i,n,r){if(e.o.standAlone&&r&&apn.CExe.getElementByAttr("div","data-apx-id",r)){var o=apn.CExe.getElementByAttr("div","data-apx-id",r);o.style.overflow="hidden",o.apnCur={},o.apnCur.apxCreatedFromTag=!0}else{var o=document.body.$TAG("div",{style:"position:absolute;overflow:hidden;"});o.apnCur={}}return o},xa.exeRenderTag=function(e,t,a,i,n,r){var o=apn.IWidget.getCanvasObjectStyle({},this,e.project,i.create.data.styles);return apn.IWidget.exeSetAlpha(a,o.alpha),apn.IWidget.exeRenderSize(e,t,a,i,e.project,n,r),apn.IWidget.exeRenderPosition(t,a,i,e.project,n,r),apn.IWidget.$O6x(o,a,n,r),10==bx.HCL.DV.isIE()&&(a.style.backgroundColor="rgba(255,255,255,0)",a._apxIE10eventPassProblem=!0),a},xa.exeSetState=function(e,t,a,i){a!=i&&e.fireEvent("stateChange",a,t.apnOID)},xa.exeOnStart=function(e,t){var a=e.wgtTag(t);if("Y"==e.wgtGetProperty(t,"ofl")&&a.childNodes){for(var i=0;i<a.childNodes.length;i++)a.childNodes[i].apnOID&&(a.childNodes[i].style.overflow="visible");a.style.overflow="visible"}},xa.onEdit=function(e,t,a,i,n){apn.widgets.utils.editWidget(e.getObjectByID(t),e,2,!0,void 0,n)},xa.edtOnBuildProperty=function(e,t,a,i){return this.useLayerOverflow?{ofl:{title:apn.CExe.GL({ko:"영역외부표시",en:"Overflow"}),input:[{title:apn.CExe.GL({ko:"표시",en:"Visible"}),value:"Y"},{title:apn.CExe.GL({ko:"숨김",en:"Clip"}),value:""}]}}:null},apn.widgets["apn.wgt.layerContainer"]=xa,xa=apn.inheritWidget(apn.widgets["apn.wgt.layerContainer"]),xa.styleMap={title:!0,visibility:!0,alpha:!0,state:!0,csr:!0},xa.scriptInfo={wgtData:{apxStep:{help:"{current:0-based Number, count:1-based Number}\n'current' pane index and 'count' of panes this widget has. This will be updated on 'State Change' event.",type:"go"}}},xa.exeFireStateEvent=!0,xa.editor={iconThumb:"imgs/wgts/thumbs/pageContainer.png",properties:{Direction:["Horizontal","Vertical"],Effect:[apn.P.effectTitle.move,apn.P.effectTitle.slideUp,apn.P.effectTitle.cardUp,apn.P.effectTitle.glue,apn.P.effectTitle.timeLag,apn.P.effectTitle.cube],RoundUp:["Yes","No"]}},xa.properties.attrs={Effect:"Slide",Direction:"Horizontal",RoundUp:"Yes",apxStep:{current:0,count:1}},xa.edtOnBuildProperty=void 0,xa.exeOnLoad=function(e,t){var a,i=e.screen.objects[t],n=0;for(a in i.layout.layers)n++;if(n>1){var r,o,s=e.wgtGetProperty(t,"Direction")||"Horizontal",p=e.wgtGetProperty(t,"RoundUp")||"Yes",l=e.wgtGetProperty(t,"Effect");l=l?apn.P.effectFromTitle[l]:"move",o=apn.Project.findITRs(e.project,e.getPageID(),t,!0),r={action:"CWS",event:"Horizontal"==s?"flickLeft":"flickUp",target:{objectID:t,stateID:"Yes"==p?"$RF":"$F"},transit:{duration:500},_system:!0},r.transit.effect=l+("Horizontal"==s?"Left":"Top"),o.push(r),r={action:"CWS",event:"Horizontal"==s?"flickRight":"flickDown",target:{objectID:t,stateID:"Yes"==p?"$RB":"$B"},transit:{duration:500},_system:!0},r.transit.effect=l+("Horizontal"==s?"Right":"Bottom"),o.push(r)}},xa.exeSetState=function(e,t,a,i){var n=[],r=e.screen.objects[t.apnOID].layout.layers;for(var o in r)n.push({order:r[o].order,id:o});apn.UTIL.sort(n,"order",1,!0);var s=n.length,p=-1;for(o=0;o<n.length;o++)if(n[o].id==a){p=o;break}e.wgtSetProperty(t.apnOID,"apxStep",{current:p,count:s});var l,d;for(o in r)if(o!=a)for(l=e.getWidgetsByProperty("apxMediaControl",r[o].id),d=0;d<l.length;d++)e.wgtTag(l[d]).apxBackgroundRun||e.wgtControlMedia(l[d],"stop");a!=i&&e.fireEvent("stateChange",a,t.apnOID)},xa.onEdit=function(e,t,a,i,n){apn.widgets.utils.editWidget(e.getObjectByID(t),e,2,!0,{layerTitlePrefix:"Pane",layerOrdering:!0},n)},apn.widgets["apn.wgt.pagedContainer"]=xa,xa=apn.inheritWidget(apn.widgets["apn.wgt.pagedContainer"]),xa.exeFireStateEvent=!0,xa.editor={iconThumb:"imgs/wgts/thumbs/pageContainer.png",properties:{Effect:{title:"Drag Effect",input:["None",apn.P.effectTitle.move,apn.P.effectTitle.cardUp,apn.P.effectTitle.cube0]},Direction:["Horizontal","Vertical"],RoundUp:["Yes","No"]}},xa.scriptInfo=xa.scriptInfo||{},xa.scriptInfo.wgtRun={disableDrag:{param:"Boolean|'left'|'right'",help:{ko:"드래그에 의한 전환 효과의 사용을 제어합니다.",en:"Disable/enable dragging with current slide effect."}}},xa.scriptInfo.wgtData={activePane:{help:{ko:"[paneTitle,...]|undefined\n사용할 Pane들을 지정합니다. 지정되면 해당 Pane들만 사용되고 목록의 첫 Pane에서 시작합니다.\nEx)\nwgt.setData(target,'activePane',['Pane2','Pane6','Pane3']);",en:"[paneTitle,...]|undefined\nList of active panes. If this is set, other panes will be disabled and the first of this list will be displayed.\nEx)\nwgt.setData(target,'activePane',['Pane2','Pane6','Pane3']);"}},allPane:{help:{ko:"[paneTitle,...]\n전체 Pane의 제목을 목록으로 가져옵니다.",en:"[paneTitle,...]\nList of titles of all panes."},type:"go",value:"[paneTitle,...]"}},xa.exeOnLoad=function(e,t){function a(e,a){e==t&&(r.$ObH=a)}function i(a,i){if(a==t){var n=apn.widgets["apn.wgt.pagedContainer2"].$ObM(e,t,i);n.length&&(e.stateLayerActivate(t,n[0].id),e.stateSetActive(t,n[0].id))}}function n(a,i){if(a==t){var n=apn.Project.getStateByObjectID(e.viewer.project,e.getPageID(),t);n&&(apn.UTIL.sort(n,"order",1,!0),n[i]&&n[i].stateID&&e.wgtSetProperty(t,"apxLayer",n[i].stateID))}}var r=e.wgtTag(t);e.wgtListenProperty(t,"disableDrag",a);e.wgtListenProperty(t,"activePane",i);var o=apn.Project.getStateByObjectID(e.viewer.project,e.getPageID(),t);if(o){apn.UTIL.sort(o,"order",1,!0);for(var s=[],p=0;p<o.length;p++)s.push(o[p].title);e.wgtSetProperty(t,"allPane",s)}e.wgtListenProperty(t,"apxStepRun",n)},xa.$ObM=function(e,t,a){var i=[],n=e.screen.objects[t].layout.layers;if(a&&a.length){var r=[];for(var o in n)r.push({order:n[o].order,id:o,layerOID:n[o].id,title:apn.Project.getStateTitleByObjectID(e.project,e.getPageID(),t,o)});if(r&&r.length){var s,p;for(o=0;o<a.length;o++){for(p=!1,s=0;s<r.length;s++)if(r[s].title==a[o]){p=!0,i.push(r[s]);break}p||e.log(t,"Invalid layer(pane) title='"+a[o]+"' is referenced from 'activePane' setting.")}}}return i},xa.exeSetState=function(e,t,a,i){function n(e){if("left"==t.$ObH){if(e==-1)return!1}else if("right"==t.$ObH){if(1==e)return!1}else if(t.$ObH)return!1;return!0}var r=e.wgtGetProperty(t.apnOID,"activePane"),o=e.screen.objects[t.apnOID].layout.layers;if(states=apn.widgets["apn.wgt.pagedContainer2"].$ObM(e,t.apnOID,r),!states.length){for(var s in o)states.push({order:o[s].order,id:s,layerOID:o[s].id});apn.UTIL.sort(states,"order",1,!0)}var p=-1;for(s=0;s<states.length;s++)if(states[s].id==a){p=s;break}if(p!=-1){var l,d,c,g=-1,u=-1;p>=0&&states.length&&(l=e.wgtTag(states[p].layerOID),p-1>=0?u=p-1:"Yes"==e.wgtGetProperty(t.apnOID,"RoundUp")&&states.length>2&&(u=(p-1+states.length)%states.length),u!=-1&&u!=p?(d=e.wgtTag(states[u].layerOID),t.$O6r=states[u].id):t.$O6r=null,p+1<=states.length-1?g=p+1:"Yes"==e.wgtGetProperty(t.apnOID,"RoundUp")&&states.length>2&&(g=(p+1)%states.length),g!=-1&&g!=p?(c=e.wgtTag(states[g].layerOID),t.$O6s=states[g].id):t.$O6s=null),l&&"None"!=e.wgtGetProperty(t.apnOID,"Effect")&&(t.onBxPageDragEnd||(t.onBxPageDragEnd=function(a){1==a&&t.$O6s?(e.stateLayerActivate(t.apnOID,t.$O6s),e.stateSetActive(t.apnOID,t.$O6s)):2==a&&t.$O6r&&(e.stateLayerActivate(t.apnOID,t.$O6r),e.stateSetActive(t.apnOID,t.$O6r))}),bx.PageDrag(t,l,d,c,apn.P.effectFromTitle[e.wgtGetProperty(t.apnOID,"Effect")]||"move","Horizontal"==e.wgtGetProperty(t.apnOID,"Direction")?"x":"y",{fnCanDrag:n})),apn.widgets["apn.wgt.pagedContainer"].exeSetState.call(this,e,t,a,i)}},apn.widgets["apn.wgt.pagedContainer2"]=xa,xa={},xa.styleMap={title:!0,visibility:!0,alpha:!0,state:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0,csr:!0},xa.exeItrNoResize=!0,xa.editor={iconThumb:"imgs/wgts/thumbs/multi_scene_container.png"},xa.properties={uiOpened:!1,attrs:{ver:2}},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,apn.widgets["apn.wgt.sceneContainer"],"apn.CSceneContainer",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n)},xa.exeCreateTag=function(e,t,a,i,n){var r=document.body.$TAG("div",{style:"position:absolute;overflow:hidden;"});return r.apnCur={},a.create.data&&a.create.data.properties&&a.create.data.properties.attrs&&a.create.data.properties.attrs.ver&&(r.apnCur.ver=a.create.data.properties.attrs.ver),r},xa.exeRenderTag=function(e,t,a,i,n,r){return apn.widgets["apn.wgt.layerContainer"].exeRenderTag.call(this,e,t,a,i,n,r),apn.IWidget.isInAnimation(t,a.apnOID)||apn.CExe.ACCEL(a),a},xa.WGTS_SHOW=["apn.wgt.rect","apn.wgt.roundRect","apn.wgt.ellipse","apn.wgt.line","apn.wgt.image","apn.wgt.image2","apn.wgt.imageText","apn.wgt.polygon","apn.wgt.imageRect","apn.wgt.imageRound","apn.wgt.video","apn.wgt.audio","apn.wgt.itrAreaRect","apn.wgt.itrAreaEllipse","edu.wgt.videoHolder","edu.wgt.videoPlayer","edu.wgt.audioPlayer","edu.wgt.writePad","edu.wgt.btnStateS","edu.wgt.qstnText","ux.wgt.btnImage","ux.wgt.YT","ux.wgt.IFRAME","edu.wgt.subtitle","ux.wgt.imgSprite","ux.wgt.shtSprite","ux.wgt.patch3","ux.wgt.patch3","ux.wgt.inputText"],xa.onEdit=function(e,t,a,i){apn.widgets.utils.editWidget(e.getObjectByID(t),e,1,!0,{wgtsShow:apn.widgets["apn.wgt.sceneContainer"].WGTS_SHOW,editNoGroup:!0})},apn.widgets["apn.wgt.sceneContainer"]=xa,xa={},xa.styleMap={title:!0,visibility:!0,alpha:!0,state:!0,csr:!0},xa.editor={iconThumb:"imgs/wgts/thumbs/scroll_container.png",properties:{ScrollerX:["Auto","Always","Hidden"],ScrollerY:["Auto","Always","Hidden"],Mode:[{title:"Normal",value:""},{title:"Dropdown",value:"dd"}]},states:{ready:"Ready",refresh:"Refresh"}},xa.scriptInfo={wgtData:{scrollArea:{help:"{w:Number,h:Number}\nScroll area size. Ignored if smaller than edited container size.",value:{}},scrollX:{help:"Number(>=0)\nGet or set(scroll to) X scroll position",value:0},scrollY:{help:"Number(>=0)\nGet or set(scroll to) Y scroll position",value:0}},wgtRun:{scrollTo:{param:"'top'|'bottom'|'left'|'right'",help:"Scroll to given position."}}},xa.properties={uiOpened:!1,attrs:{ScrollerX:"Auto",ScrollerY:"Auto",Mode:""}},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,apn.widgets["apn.wgt.scrollContainer"],"apn.CScrollContainer",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n)},xa.exeCreateTag=function(e,t,a,i,n){var r=document.body.$TAG("div",{style:"position:absolute;"});return r.$CSS({boxSizing:"border-box"}),r.apnCur={},r.apnScroll=!0,bx.HCL.DV.hasTouchEvent()&&r.$CSS("overflowScrolling","touch"),"Hidden"==a.create.data.properties.attrs.ScrollerY?r.style.overflowY="hidden":"Always"==a.create.data.properties.attrs.ScrollerY?r.style.overflowY="scroll":r.style.overflowY="auto","Hidden"==a.create.data.properties.attrs.ScrollerX?r.style.overflowX="hidden":"Always"==a.create.data.properties.attrs.ScrollerX?r.style.overflowX="scroll":r.style.overflowX="auto",r.$A({class:"apnCExeScroll"}),r},xa.exeRenderTag=apn.widgets["apn.wgt.layerContainer"].exeRenderTag,xa.exeSetState=function(e,t,a,i,n){if("refresh"==a){var r=e.$ObI(e.screen.objects[t.apnOID]);apn.IWidget.exeRenderSize(e.viewer,e,e.wgtTag(r),e.screen.objects[r],e.project,1/e.getZoomX(),1/e.getZoomY())}},xa.exeOnLoad=function(e,t){function a(a,i){if(a==t&&i&&i.w&&i.h){var n=e.$ObI(e.screen.objects[t],i.w,i.h);apn.IWidget.exeRenderSize(e.viewer,e,e.wgtTag(n),e.screen.objects[n],e.project,1/e.getZoomX(),1/e.getZoomY()),e.wgtSetProperty(t,"scrollArea",{w:i.w,h:i.h},!0),e.wgtSetProperty(t,"scrollX",Math.round(s.scrollLeft*e.getZoomX()),!0),e.wgtSetProperty(t,"scrollY",Math.round(s.scrollTop*e.getZoomY()),!0)}}function i(e,a){if(e==t){if(!s._scrollCntrVisible)return void(s._scrollCntrDlydScrollTo=a);if("top"==a||"bottom"==a){var i=parseInt(s.style.height),n=parseInt(s.firstChild.style.height),r=0;s.clientHeight&&(r=i-s.clientHeight),"bottom"==a?s.scrollTop=-(i-n)+r:s.scrollTop=0}else if("left"==a||"right"==a){var o=parseInt(s.style.width),p=parseInt(s.firstChild.style.width),r=0;s.clientWidth&&(r=o-s.clientWidth),"right"==a?s.scrollLeft=-(o-p)+r:s.scrollLeft=0}}}function n(a,i){if(a==t){if(!s._scrollCntrVisible)return void(s._scrollCntrDlydScrollX=i);s.scrollLeft=Math.round(bx.$checkNaN(parseFloat(i))/e.getZoomX())}}function r(a,i){if(a==t){if(!s._scrollCntrVisible)return void(s._scrollCntrDlydScrollY=i);s.scrollTop=Math.round(bx.$checkNaN(parseFloat(i))/e.getZoomY())}}function o(a,i,n,r,o,p,l){"click"==s.__scrollContainer_showEvent?i==bx.CGesture.POINTER_START&&(bx.DOM.IsDescendantOf(bx.Event.getElement(l),s)||bx.Event.getElement(l)==s||(s.style.display="none",e.fireEvent("wgtEvent","hd",t))):"tapStart"==s.__scrollContainer_showEvent&&i==bx.CGesture.POINTER_START&&(bx.DOM.IsDescendantOf(bx.Event.getElement(l),s)||bx.Event.getElement(l)==s||(s.__scrollContainer_show?delete s.__scrollContainer_show:(s.style.display="none",e.fireEvent("wgtEvent","hd",t))))}var s=e.wgtTag(t);bx.Event.add(s,"scroll",function(a){e.wgtSetProperty(t,"scrollX",Math.round(s.scrollLeft*e.getZoomX()),!0),e.wgtSetProperty(t,"scrollY",Math.round(s.scrollTop*e.getZoomY()),!0),e.fireEvent("wgtEvent","scl",t,void 0,!0)},!1);e.wgtSetProperty(t,"scrollArea",{w:Math.round(s.scrollWidth*e.getZoomX()),h:Math.round(s.scrollHeight*e.getZoomY())},!0),e.wgtListenProperty(t,"scrollArea",a),e.wgtListenProperty(t,"scrollTo",i),e.wgtSetProperty(t,"scrollX",0,!0),e.wgtListenProperty(t,"scrollX",n),e.wgtSetProperty(t,"scrollY",0,!0),e.wgtListenProperty(t,"scrollY",r),"dd"==e.wgtGetProperty(t,"Mode")&&(new bx.CGesture(document,o,{noDelayedEvent:!0,noLongholdEvent:!0}),"block"==s.style.display&&apn.widgets["apn.wgt.scrollContainer"]._onDdShow(s,"click"))},xa._onDdShow=function(e,t){"click"!=t&&"tapStart"!=t||(e.__scrollContainer_showEvent=t,"tapStart"==t&&(e.__scrollContainer_show=!0))},xa.exeOnStart=function(e,t){var a=e.wgtTag(t);e.fireEvent("wgtEvent","none"==a.style.display?"hd":"sh",t),a._scrollCntrVisible=e.wgtIsVisible(t)},xa.exeOnResume=function(e,t){var a=e.wgtTag(t);a._scrollCntrVisible=e.wgtIsVisible(t)},xa.exeOnVisibilityChange=function(e,t,a){var i=e.wgtTag(t);i._scrollCntrVisible=a,a&&(void 0!==i._scrollCntrDlydScrollTo&&(e.wgtSetProperty(t,"scrollTo",i._scrollCntrDlydScrollTo),i._scrollCntrDlydScrollTo=void 0),void 0!==i._scrollCntrDlydScrollX&&(e.wgtSetProperty(t,"scrollX",i._scrollCntrDlydScrollX),i._scrollCntrDlydScrollX=void 0),void 0!==i._scrollCntrDlydScrollY&&(e.wgtSetProperty(t,"scrollY",i._scrollCntrDlydScrollY),i._scrollCntrDlydScrollY=void 0))},xa.exeOnShow=function(e,t,a,i){"dd"==e.wgtGetProperty(t,"Mode")&&a&&apn.widgets["apn.wgt.scrollContainer"]._onDdShow(e.wgtTag(t),i),e.fireEvent("wgtEvent",a?"sh":"hd",t)},xa.onEdit=function(e,t,a,i,n){apn.widgets.utils.editWidget(e.getObjectByID(t),e,2,!1,void 0,n)},xa.edtOnBuildEvent=function(e,t,a,i){i.wgtEvent={value:"wgtEvent",title:apn.P.eventTitle.wgtEvent,param:{}},i.wgtEvent.param.scl="Scroll",i.wgtEvent.param.sh="Show",i.wgtEvent.param.hd="Hide"},apn.widgets["apn.wgt.scrollContainer"]=xa,xa=apn.inheritWidget(apn.widgets["apn.wgt.layerContainer"]),xa.styleMap={title:!0,visibility:!0,alpha:!0},xa.editor={iconThumb:"imgs/wgts/thumbs/html.png"},xa.properties={uiOpened:!1,attrs:{cfg:{bg:{mediaID:void 0,x:0,y:0,w:1e3,h:1e3}}}},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,apn.widgets["apn.wgt.htmlCntr"],"apn.CNoneClipLayerContainer",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n)},xa.exeRenderTag=function(e,t,a,i,n,r){if(apn.widgets["apn.wgt.layerContainer"].exeRenderTag.call(this,e,t,a,i,n,r),a.apnCur.apxCreatedFromTag&&1==n&&1==r);else{var o=i.create.data;o&&o.properties&&o.properties.attrs&&o.properties.attrs.cfg&&o.properties.attrs.cfg.bg&&o.properties.attrs.cfg.bg.mediaID&&(a.style.backgroundPosition=o.properties.attrs.cfg.bg.x*n+"px "+o.properties.attrs.cfg.bg.y*r+"px",a.style.backgroundImage="url("+t.mediaURL(o.properties.attrs.cfg.bg.mediaID)+")",a.style.backgroundRepeat="no-repeat",a.$CSS("backgroundSize",o.properties.attrs.cfg.bg.w*n+"px "+o.properties.attrs.cfg.bg.h*r+"px"))}return a},xa.pubOnGetHTML=function(e,t,a,i){var n=apn.IWidget.htmlRender(this,e,t,a),r="<div",o=e.pages[t].objects[a].create;return o.data&&o.data.properties&&o.data.properties.attrs&&o.data.properties.attrs.cfg&&o.data.properties.attrs.cfg.bg&&o.data.properties.attrs.cfg.bg.mediaID&&(n.css+="background-size:"+o.data.properties.attrs.cfg.bg.w+"px "+o.data.properties.attrs.cfg.bg.h+"px;background-position:"+o.data.properties.attrs.cfg.bg.x+"px "+o.data.properties.attrs.cfg.bg.y+"px;background-repeat:no-repeat;background-image:url("+apn.Project.mediaResolve(e,o.data.properties.attrs.cfg.bg.mediaID,!1,!0)+");"),r+=' style="user-select:text;-ms-user-select:text;-webkit-user-select:text;-moz-user-select:text;overflow:hidden;'+n.css+'"',r+=' class="apxWgt1"',r+=i&&i.noId?">":' data-apx-id="'+a+'">'},xa.onEdit=function(e,t,a,i,n){var r=[];for(var o in apn.widgets)"apn.wgt.htmlCntr"!=o&&apn.widgets[o]&&apn.widgets[o].pubOnGetHTML&&r.push(o);apn.widgets.utils.editWidget(e.getObjectByID(t),e,2,!1,{wgtsShow:r},n)},xa.edtOnPreloadAsset=function(e,t,a){function i(e,t,i){t&&(n.apnWgtHtmlCntrImg=s.bg.image,a(!0))}var n=e.getObjectByID(t),r=n.data;if(!e.IEditable&&!n.apnWgtHtmlCntrImg&&r&&r.properties&&r.properties.attrs&&r.properties.attrs.cfg&&r.properties.attrs.cfg.bg&&r.properties.attrs.cfg.bg.mediaID){var o=e.mediaURL(r.properties.attrs.cfg.bg.mediaID,!0),s={bg:{url:o}};(new apn.CRscLoader).load(e.getData(),s,i)}else a(!0)},xa.edtOnDraw=function(e,t,a,i,n,r,o,s){function p(t,a,i){a&&(d.apnWgtHtmlCntrImg=u.bg.image,l(d.apnWgtHtmlCntrImg,c.properties.attrs.cfg.bg.x,c.properties.attrs.cfg.bg.y),e.draw())}function l(e,t,r){bx.CCanvasWnd.drawImage(a,e,Math.round(i+t),Math.round(n+r),c.properties.attrs.cfg.bg.w||d.shape.w-2*t,c.properties.attrs.cfg.bg.h||d.shape.h-2*r)}var d=e.getObjectByID(t);if(d){var c=d.data;if(d.apnWgtHtmlCntrImg)l(d.apnWgtHtmlCntrImg,c.properties.attrs.cfg.bg.x,c.properties.attrs.cfg.bg.y);else if(c&&c.properties&&c.properties.attrs&&c.properties.attrs.cfg&&c.properties.attrs.cfg.bg&&c.properties.attrs.cfg.bg.mediaID){var g=e.mediaURL(c.properties.attrs.cfg.bg.mediaID),u={bg:{url:g}};(new apn.CRscLoader).load(e.getData(),u,p)}}};xa.edtOnConfig=function(e,t){function a(){eduLib.edtInputApplyAll(e,n),e.wgtSetProperty(t,"cfg",i);var a=e.getObjectByID(t);a.apnWgtHtmlCntrImg=void 0,e.wgtRefreshUI(t)}var i=e.wgtGetProperty(t,"cfg");i=i||{},i.bg=i.bg||{mediaID:void 0,x:0,y:0,w:1e3,h:1e3};var n;(n=e.dlgDoModal(600,Math.ceil(.8*bx.UX.height),a))&&(eduLib.edtInputAdd(e,n,{type:"title",title:apn.CExe.GL({ko:"배경 이미지",en:"Background image"})}),eduLib.edtInputAdd(e,n,{type:"image",title:apn.CExe.GL({ko:"파일",en:"File"}),key:"bg",value:i,join:!0}),eduLib.edtInputAdd(e,n,{type:"number",title:apn.CExe.GL({ko:"표시 너비",en:"Display width"})+"[px]",key:"w",value:i.bg,join:!0}),eduLib.edtInputAdd(e,n,{type:"number",title:apn.CExe.GL({ko:"표시 높이",en:"Dispaly height"})+"[px]",key:"h",value:i.bg,join:!0}),eduLib.edtInputAdd(e,n,{type:"number",title:apn.CExe.GL({ko:"표시 X 좌표",en:"X position"})+"[px]",key:"x",value:i.bg,join:!0}),eduLib.edtInputAdd(e,n,{type:"number",title:apn.CExe.GL({ko:"표시 Y 좌표",en:"Y position"})+"[px]",key:"y",value:i.bg,join:!0}))};apn.widgets["apn.wgt.htmlCntr"]=xa,xa={},xa.styleMap={title:!0,visibility:!0,alpha:!0,strokeStyle:!0,lineWidth:!0,lineDash:!0,fillStyle:!0,font:!0,fontSize:!0,fontStyle:!0,fontItalic:!0,fontBold:!0,textMultiLine:!0,fontUnderlined:!0,text:!0,textAlign:!0,textValign:!0,textPadding:!0,textWordWrap:!0,ltrSp:!0,lnSp:!0,fontStrokeStyle:!0,fontStrokeWidth:!0,angle:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0,csr:!0},xa.properties={tv:2},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,apn.widgets["apn.wgt.ellipse"],"bx.CEditorWnd.CEllipse",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n)},xa.exeCreateTag=function(e,t,a,i,n){var r=apn.widgets["apn.wgt.rect"].exeCreateTag(e,t,a,i,n);return r.$CSS("borderRadius","50%"),r},xa.exeOnScreenRefresh=apn.widgets["apn.wgt.rect"].exeOnScreenRefresh,xa.exeRenderTag=apn.widgets["apn.wgt.rect"].exeRenderTag,xa.onEdit=function(e,t,a,i){return apn.widgets.utils.setAsOpened(e,e.getObjectByID(t))&&e.save(),apn.widgets.utils.$O2C(e,e.getData(),this,t,a,i,function(e){e.$CSS("borderRadius","50%")})},apn.widgets["apn.wgt.ellipse"]=xa,xa={},xa.styleMap={title:!0,csr:!0},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,this,"apn.CItrAreaEllipse",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n)},xa.exeOnForceStyle=function(e,t){t.csr&&"inherit"!=t.csr||(t.csr="pointer")},xa.exeCreateTag=apn.widgets["apn.wgt.ellipse"].exeCreateTag,xa.exeRenderTag=apn.widgets["apn.wgt.ellipse"].exeRenderTag,apn.widgets["apn.wgt.itrAreaEllipse"]=xa,xa={},xa.styleMap={title:!0,visibility:!0,alpha:!0,mediaID:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0,csr:!0},xa.exeScriptMediaID=!0,xa.exeAssetDelayedLoad=!0,xa.scriptInfo={wgtData:{playbackRate:{help:{ko:"1|Number\n재생 속도. 1이 기본값입니다.",en:"1|Number\nPlayback rate of media. 1 for original speed."},value:1},duration:{help:{ko:"Second|0\n재생 시간. 0이면 로딩전입니다.",en:"Second|0\nPlay duration of media. 0 if not ready."},value:0,type:"go"},playSection:{help:{ko:"{from:Second,to:Second}|undefined\n부분 재생을 위한 대역",en:"{from:Second,to:Second}|undefined\nCurrent play section of media to play a part of it."}},supportFullScreen:{help:{ko:"Boolean\n전체화면 기능 지원 여부",en:"Boolean\ntrue if supports fullscreen mode."},value:"Boolean",type:"go"}},wgtRun:{seekTo:{param:"Second",help:{ko:"재생 위치를 지정합니다.",en:"Seek to given position."}},fullScreen:{param:"Boolean",help:{ko:"전체화면으로 전환/취소",en:"Change to or restore from fullscreen mode."}}}},xa.properties={state:"stop",uiOpened:!1,attrs:{apxMediaControl:!0,Control:"System",Loop:"No",apxStep:{current:0,count:1},stp:0}},xa.editor={iconThumb:"imgs/wgts/thumbs/video.png",properties:{Control:["System","Simple","None"],stp:{title:"Step",input:"",type:"number"}},states:{play:"Play",stop:"Stop",resume:"Resume",pause:"Pause",mute:"Mute",muteOff:"Mute Off"}},xa.CMedia={btnPlay:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABMCAYAAADHl1ErAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Q0REQUE4QkQ1QUMzMTFFNUFBRjY5OUExNTREOTY0REQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Q0REQUE4QkU1QUMzMTFFNUFBRjY5OUExNTREOTY0REQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDRERBQThCQjVBQzMxMUU1QUFGNjk5QTE1NEQ5NjRERCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDRERBQThCQzVBQzMxMUU1QUFGNjk5QTE1NEQ5NjRERCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlHBTyMAAApNSURBVHja7Jx7TFNZGsDP7UsKjIIsL5GsyCNEwPGJBqjMrtnVhJhsjLLAjGZ9JD7whbo+CMYFjMkq0aiRrG5mMRpfI9GJjsIfJitZBCJ/LIlgjIDJKBOBBcM4lQJtufvd5pY5PT3ntpTe24Ke5EtbSm/P/fX7vvN953zncMg3jfPSdXilO67xERyO8ZpzAYb3NUROoetyxHNcaO+zAODgcGHB4v0dGA0UDkZFASYFDxFQeIaMUt6XBRwnw3U4ApbKzUfOhYbZwfDEc9YjL6GhPvNh7oJSi48ssf+fFDAcCEus4udxcPh1uImC47wICweFixp7xMUdaK5gWQkZxR5xccffyQqMNB/8pnFAGgwQ6zkJjewTfsNW7NFCwLIw/k7CHu+oOyGTlNIqEhRNtMT7auKz5ABAOnZciywYHDP22kx5f5ThE8dtopoJwCJ9FK45WgmxgQsPDw8oKiqal5GRkRodHT0nNDR0VmBgYJhOp9Nrtdog4UvMZvPHkZERk9Fo7Hn//v1P3d3dbxsaGl6cOXPmBbwewkCZGaLC4HEUjeOx++G9aZI0WCoClhbTIkF0pCxYsCCkrKzs94sWLTJERkbO02g00zzxBxaLZbinp6e1ubm5vrS09N8tLS0D8OcRipgJqFaKjxuXX+MmAEtNwCIhTbNLYWFhwu7du/MSEhIMarVa583Az2q1jrx69aru4sWL34G0i6CGRaHBs2ucx9DcAWYHpRFh6EGCQUJAwkFiQOJAkkG+BFkGsiI3N/ebzs7O/4xC42VuwnfAd9WtW7fua+G7xT58KfYpTuxjuNjnYPEedOI9sQaccWsYJ6FZuFbZtSlAkIiIiOA7d+4UZGZm5ntbo9wx16dPn96EH+tmb2+vEf40JAqudWaGifIT0TIpzQoFiQCJBUkASQVZAmLYvHnzX/r6+tp5HzehDwUFBRuEPol9SxH7Giv2PVS8lwBPNE0Kll2bAjAzxGGlgSwFyb5y5Uq5MLLxftJghDVWVVWVCX0T+5hGQAvBoGkp4Y3bJkmaIh476TDz09ulpqYmd9WqVTs4aMiPmuDeoG//yMnJ+Q5emjAZwkyUjNmYpsm56bekYAXW19dvBX/1DfLjBn28ajAY/gVPB0UZYkCT9GcqN02S5uQFaIEPHz5c7++whJaVlbVR6KvQZ/GHnibeixYzR5cmqXZzVLRfFNeuQPBZf4BhfL+/mSGrQRy4ZPbs2T8+ePCgi5J28YxEnXMFjMOSaDwHdIC1adOmhOLi4hNKhw0TCiihpaWlpUO8Vv/8+fNfJGY1mKEFJ6FdNL8lqHMw5H4hbW1tFyH/i0eTsPX393cmJSXthHz0Z3hpxHwaHqdRBwAVA6KKGB0dAtRbt24VTFZYQgsLC4u/e/duPhZw67BcmPRlSMrpc5SA1QEYBIO/BSf/ZzTJm5CFgP+NxXJfluPnXE0E2j9EmqIw5RIM9l82d+7cFWgKtI6OjieJiYl/E83yI8U0rcR8Gq+ScPhOJrlly5b4uLg4A5oiLT4+3rBx48Y5FJNUsbSM5sNUlOjeBuzgwYP53g4hTp06hYxGo69GTfXhw4fzCWCkH5P0YSpWwJqSkjID1Nfr2lVXV4cKCwtRS0uLT6DBaJkN9/UFJYDliIUZJ2CcxAShpry8/CuIuabJ0em+vj5UUlKCLl26hCBhVhSYRqMJOHnyZDahWcyon7US7WSSy5Yty5Y5SUb3799He/fuFZyxotDg3r5imKMTGykNG4MWFRWlj4yMTFWi82/evEEHDhxAt2/fFqafFQEGgXjqzJkz9Rg05tKfSiIGGzPLffv2pSiZAlksFnT16lV06NAh9O7dO0XMcv/+/fMQe52UcxW4OqxKL1++fJ4vHPLLly/Rrl27UG1trc1k5WwZGRkprmDhwEjtctAyMMdYX8VKQ0ND6MKFC6i0tBQNDAzI9j0xMTFxSHo1nnOVS44BhNwrxtdBZnNzM9qxYwdqbGyU5fqQG0eT9y2VS9JKjcY+HBgYGO4PkfmHDx/QiRMn0NmzZ9Hg4KBXr63X60MYsZcDG5bTdyiA0+l0Af6U0jx+/Njm21pbW712Ta1Wq0fOFURupUZOZGEU0ftbHtjT04OOHDmCqqqqhBoMb4yUesY8oWRqNKmaMHJWV1ejc+fOKZcZSPXH/ghxkQlUNtjfgAnzAGvXrkUbNmzwRuxnoty7JDBaZbJtihbyuyF/AxYREYEg2ERpaWleuR6YtQmxC4x5EhiN6NiiAIxIfUFBQb/xF1grV65E27dvRzB6e+2aJpNpADlXZTtYGs0kyWUn2/P+/v6u8PDwZF+Dmj59um10zMzM9Pq1ISjuRvQqbarTZ63R2cojYUR662tYS5cuRZWVlbLAElpXV9drxC64493RsDFpamp6kZ2d7RNQAQEBaOvWrWj16tVIzvXihoaGNuS68pq6cGtf/BDiEtvCR1RUVBj8At/LMWORk5PDfC85Odk21TNr1iy5Z0eGIV/+03to6NcFEWEQwOsubBXcGhfaZStv7O7uNoG0QYK6UJFYR6NB+fn5aP369Qh+JNm/D+7tObAyIeeCFHI13ObDWHt38NJt87Nnz54oASs2NhZVVFSgvLw8RWAJDVzOE+RY8mSlmKVNVBIa5rBp4NixY0+sVuuwnEHomjVr0Pnz51FiYqJiPhLMcai4uLgOOW+IsNI0TMOIvXBgtnrQtra2n4UijqSkpJXe7nRYWBgqKipCCxcuREo3oQK7vb39F+Rc90qLyai55CjNJAXnd/ny5Wrk5T2IK1assIULvoAFuaj19OnTt9CvBShkJeIoc0YCAyhVKvDF69evy+Pi4rLQFGgdHR11YP7HkQelAuSeRNwkxzRMuFBJScllOX2ZUk24h6NHj/4TOZeikxomWe5EjpQWEtiNGzd+bGxsvD3ZgdXX19+srq5+ixx3irBGSOpE2eeCOnqBsIOGsUo2ac/HVlGMRiPf29vbClH6H1UqlXYywTKbzYPbtm37K8SVPci5/NxMBK5O82OsomDyb07L5i0tLR/BYf5v/vz5WZOlKFio2a+qqjoJ7b/IvVp9p4hAzQDE0jKH/PPevXtv09PTBwFc+mQAVlNTUwkZxCPRBHFgeAzG1C4pjSLNUGpjQxA40C2TYGPDNYPB8C2SYWODVIgxNlpiXziYlZX1bW1tbSUv93q+h2b46NGjShEWrlXDjNFRcusMK7tlnSHBPFPi+vXrryCg/Sk1NXWJvwwEgoO/du3a33Nzc3/AtMokAWtCP7jH2/9guO6cqtv/5Nxg+jX4tbxPaYOpO5r2eQuzi//xaJP8nj17knbu3Jk7FTbJK3oMw+LFi0OPHz/+u6l+DIMUNG8c9JEWExMzZ8aMGdFuHPTR1dTU1FZRUeHuQR+4RtGOlhn38QucB/6M9G2T5SgZqVkI3hMAnoD75A4rUvo4LA1inyc2pY/DcjWf5ssD12Q9qe7zkX4+AoYkcs/Ph0Z6CI4G8ZM/ltTd7/DWwbe8xP8qdjPIRxA9mu5SuuP/F2AARBneDEc3CR0AAAAASUVORK5CYII=",bgColor:"transparent",control:{System:{systemControl:!0},Simple:{btnPlay:!0}}},xa.exeSetState=function(e,t,a,i){(i||"stop"!=a&&"pause"!=a)&&a&&e.wgtControlMedia(e.wgtId(t),a)},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,this,"apn.CVideo",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n)},xa.exeCreateTag=function(e,t,a,i,n){function r(){var e=t.wgtTag(h.oId);e.style.visibility="hidden",u=void 0}function o(){var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;e.IWidget_onFullScreen&&(t==l.mediaTag?e.IWidget_onFullScreen(!0,t):("System"!=f&&(l.mediaTag.controls=!1),setTimeout(function(){e.IWidget_onFullScreen(!1,t)},500)))}function s(a){var i=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement,n=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitDisplayingFullscreen||l.mediaTag.webkitDisplayingFullscreen;if(n=!!n,!i){var o=bx.Event.getElement(a);o&&o.tagName&&"video"==o.tagName.toLowerCase()&&(i=o)}if(e.IWidget_onFullScreen)if(n){if(e.IWidget_onFullScreen(n,i),g&&t.wgtTag(h.oId)){var s=t.wgtTag(h.oId);s.fsBkPrtNode=s.parentNode,s.style.top="auto",s.style.bottom="1px",s.style.left="auto",s.style.right="1px",l.appendChild(s),u=setTimeout(r,x)}}else{if(g&&t.wgtTag(h.oId)){u&&(clearTimeout(u),u=void 0);var s=t.wgtTag(h.oId);s.style.visibility="visible",s.style.bottom="auto",s.style.right="auto",s.fsBkPrtNode&&(s.fsBkPrtNode.appendChild(s),apn.IWidget.exeRenderPosition(t,s,t.screen.objects[h.oId],e.project,1/t.getZoomX(),1/t.getZoomY()))}else(l.mediaTag.mozRequestFullScreen||"edge"==bx.HCL.DV.getBrowserType())&&"System"!=f&&(l.mediaTag.controls=!1);setTimeout(function(){e.IWidget_onFullScreen(n,i)},500)}}function p(e){var a=t.wgtTag(h.oId);this==a.parentNode&&(a.style.visibility="visible",u&&clearTimeout(u),u=setTimeout(r,x))}var l=$TAG("div",{style:"position:absolute;overflow:hidden;"});l.$CSS({boxSizing:"border-box"}),l.apnCur={},l.mediaTag=l.$TAG("video",{style:"border:none;position:absolute;left:0px;top:0px;width:100%;height:100%;"},{boxSizing:"border-box"}),l.apnPlayEnded=!0,l.mediaTag.apnPlayEnded=!0,l.sourceTag=l.mediaTag.$TAG("source");var d=a.create.data.properties;d&&d.attrs&&(d.attrs.apxMediaSubFormat||d.attrs.sub&&d.attrs.sub.mediaID)&&(l.sourceTag2=l.mediaTag.$TAG("source")),l.mediaTag.setAttribute("webkit-playsinline",""),l.mediaTag.setAttribute("playsinline","");var c,g,u,h=d&&d.attrs?d&&d.attrs.fs:void 0,x=3e3;e.constructor.IStub_getConfiguration&&e.constructor.IStub_getConfiguration(e.project)&&(c=e.constructor.IStub_getConfiguration(e.project).exeFullscreenNoController),c&&h&&h.oId&&(g=!0),bx.HCL.DV.isIE()?bx.Event.add(document,"MSFullscreenChange",o,!1):(g?bx.Event.add(l,"webkitfullscreenchange",s,!1):bx.Event.add(l.mediaTag,"webkitfullscreenchange",s,!1),bx.Event.add(document,"mozfullscreenchange",s,!1),bx.Event.add(l.mediaTag,"fullscreenchange",s,!1),bx.Event.add(l.mediaTag,"webkitbeginfullscreen",s,!1),bx.Event.add(l.mediaTag,"webkitendfullscreen",s,!1)),g&&bx.Event.add(l,"mousemove",p,!1),d&&d.attrs&&d.attrs.apxPoster&&d.attrs.apxPoster.mediaID&&l.mediaTag.setAttribute("poster",t.mediaURL(d.attrs.apxPoster.mediaID));var f="System";if(d&&d.attrs&&d.attrs.Control&&(f=d.attrs.Control),"Simple"==f){l.simplePlayTag=l.$TAG("img",{style:"position:absolute;left:50%;top:50%;margin-left:-38px;margin-top:-38px;display:block;",src:apn.widgets["apn.wgt.video"].CMedia.btnPlay}),l.simplePlayTag.onmouseover=function(){this.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABMCAYAAADHl1ErAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDMwQzBCOEY1QUMzMTFFNTg5QUE5QkIwREI1NkJDNUMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDMwQzBCOTA1QUMzMTFFNTg5QUE5QkIwREI1NkJDNUMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEMzBDMEI4RDVBQzMxMUU1ODlBQTlCQjBEQjU2QkM1QyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEMzBDMEI4RTVBQzMxMUU1ODlBQTlCQjBEQjU2QkM1QyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pnrug9UAAApmSURBVHja7JwLUFTXGYD/uy9YxAoSXllpRB6TykOLBBR3NXbGOC3TaZtYgpiaIp0y1WjVMcPIYKyQ2IeOnUkHJ6VjoKE+qlTaGsHOtBM0CFTHCSnCdHhNHbBlCSiJwAL7uD135y45e/aeu8uy9+6CHuaf3WV37z3n2///z3/O+c9hwD+F8dF1WLkrrvITHIbymnEDhvU3REam6zLEc1yE3qcBwMHhQoPFBjowIVA4GIUAMDF4QEBhKWITeF8ScIwE12EIWAoPHxk3GuYAwxLPaY+siIb6zYd5CkrJP9LE8TkxYDgQmlj57+Pg8Osw8wXH+BAWDgoXJfaIiyfQ3MGyEmLDHnHxxN9JCow0H7zROCAVBoj2nIRG1glvsBV7tBCwLJT/k7Dn2uvOyyTFtIoEJSRq4n0l8V2yAyAdO65FFgyOGXttFnjfRvGJczZR1TxgkT4K1xy1iNjBRUZGBh88eHB1Tk5Oamxs7Mrw8PBnQ0JCIjQajVatVi/hbmI2mydmZmZM4+PjxocPHz4YGhoaaGlp6Tp9+nQXej2FgTJTRIHBYwQ0jsXaw/rSJIVgKQhYakyLONGQsnbt2rDy8vJvZGRkGKKjo1erVKogb/yBxWKZNhqN9+7cudN8/Pjxj9rb28fQv2cExExAtQr4uDn5NWYesJQELBJSkEP27t2buG/fvvzExESDUqnU+DLws1qtM93d3TcqKysvIenhQU3zIgTPoXFeQ/MEmAOUioehRRKKJAxJJBIdkngkzyNZgyQbyaa8vLzX+vr6PrahwkpcuHuge93Yvn37Tu7efB3W8HWK5+sYydc5lG+Dhm8TrcOZs4YxIpqFa5VDm4I5iYqKCr18+XLBxo0bd/haozwx11u3bl1AP9aF4eHhcfSvKV5wrTNTTJSdj5aJaVY4kigkcUgSkaQiyURi2L179w9HRkZ6WD8Xrg4FBQU/4OrE1y2Fr2scX/dwvi3B3miaGCyHNgVjZojDSkPyApLNNTU1FVzPxgZIQT3seHV1dTlXN76OaQS0MAyaWiC88dgkSVPEYycNZn5ahzQ2NuZt27btJwwqEECFc2+obu/l5uZeQi9NmExhJkrGbFTTZDz0W2KwQpqbm3+E/NVrEMAF1fEDg8HwPno6ycsUBZqoP1N4aJJCTp6DFnLt2rXvBzosruj1+l1cXbk68z90EN8WNWaObk1S6WGv6Lgorl0hyGdtRd34oUAzQ1pBcWDmihUr7l+9enVQYNjFUgbqjDtgDDaIxseATrAKCwsTS0tL35Y7bJhXQIlKWlpaForXmjs6Oh6LzGpQQwtGRLuE/BanzqFo7BfW2dlZicZ/CbAAy+joaF9ycvIeNB79HL0cx3waHqcJdgAKCkQF0Ts6BagXL14sWKiwuBIREZFw5cqVHVjArcHGwqQvAzGnzwgErE7AUDD4HHLyr8ICL9woBPnfOGzsS3P8jLuJQMeXSFPkplxCkf2Xr1q1ahMsgtLb29uUlJT0M94sJwRM00rMp7EKEYfvYpJFRUUJ8fHxBlgkJSEhwbBr166VAiapoGmZkA9TCET3dmCHDx/e4esQouRuAXxhfuSvXlNZUlKygwBG+jFRH6agBawpKSnLkPr6XLsaHlyAl5vSoe2zv/sFGuotN6N2LRUIYBliYcYFGCMyQaiqqKh4EcVcQVJU2mgahB+3vgS/uPdTmLaaZAWmUqmCT5w4sZnQLGrUT1uJdjHJ7OzszZIOktHfuf534dWbmdA1dldWaKhtL1LM0YWNmIbNQouJidFGR0enylH5vsddsLN5A1R1vwNW1iILMBSIpy5fvlyLQaMu/SlEYrBZszxw4ECKnEMgi80Mv/l3GbzevAkGJvpkMctDhw6tBvo6KeMucHValV6/fv1qfzjkTx+1witNa6DufpXdZKUsOTk5Ke5g4cBI7XLSMmSOcf6KlUzWCTj+aTG88c9vw+i0UbL76HS6eBBfjWfcjSVnAaKxl87fQeZN4zX43kep8I//1UtyfTQ2jiXbLTaWFEo1mv1ySEhIZCBE5o9mRuDAnZeh7JNCGLd84dNra7XaMErs5cSG5vSdEuA0Gk1wIA1p/jJQY/dtd0dv+uyaarVaC64ZRB4NjVzIol5EG2jjwP9O/gd2t2yBX3eVwIxt2hc9pZYyTyg6NFpQxcba4P3eX8Fb7UWy3VMhGnzzjxaLxRSIwBQo7i5MfBPK156df+zn3EZqDKMiPkQuANinaGdmZqaQjYcGEqxntc/BOxm/h8wI34zYzGazCegJxiypYUJEZxcFJicnRwIJ1nfiXoc/bfmXz2DZ4z2TaQxcs7KdLE3IJMllJ/vz0dHRwUAAFa55Bk6/UAdvf70GQlVf8em1x8bGhkA4S1vQh9HW6OzpkUajccDfsAzR34IrWzpga+wrklx/cHCwH+gJd6wnGjYrbW1tXf4CpVUugbfS34PK7A/hmaAYye7T0tLSCe4zrwUXbh2LH1xcYl/4iImJiUC/wJ+lmLFI+yt9xjs9fD38PKMWvrokUdrZEYtlGo2Xv/sQFfhyQYTrBPC8C3sGt8KNdtnTG4eGhkxIOuXSKpVCDW88XwEf6D+WHBZXUNs6ECsTuCak2IR6SdreHTx123z79u0mOWCtWvo1+IO+BYqTy0DJqGT5gZDLaQLnlCergFmy7jTMadPA0aNHm6xW67RUlWbQX0H8Pri06S6khGXK5iOROU6VlpbeANcNEVaahgnFXjgwez5oZ2fn51wShxSVjgrWwW83/A2OpL0LQUp5h61cBnZPT89jcM17FYrJBIdGNiGT5JxfVVVVHfh4D+I3dflQj8KFDZFbZe+BWZa1njx58iJ8mYBCZiLaqDMSGECxVIGl/f39FfHx8XpYBKW3t/dGUlLSMfAiVYDck4ib5KyGcRcqKyurktKXyVW4Nhw5cuR34JqKTmqYR0MjBzgLCez8+fP3W1tb/7jQgTU3N1+oq6sbAOedIrQeUnCi7GlCnXCCsJOG0VI2hZ7PrqKMj4+zw8PD93Jzc19SKBTqhQTLbDZPFhcXv4niSiO4pp+bicDVZX6MlhRM/s9l2by9vX0COczP0tPT9QslKZjL2a+urj6ByifgWa6+S0SgpACiaZnT+LO+vn4gKytrEoHLWgjAGhsbz+Tn5zfwJogDw2MwqnaJaRRphmIbG5YgB1q0ADY21BoMhrMgwcYGsRBjtrfEbjip1+vPXr9+/Qy3vycQzbChoeEMDwvXqmlK7yi6dUZJHdoJayD1TIlz5851o4D2QWpqamagdAScg6+trf1lXl7eh5hWmURgzesH93r7H+qu+xbr9j8pN5juRH4t/0naYOqJpj3dwuzmM15tkt+/f3/ynj178hbDJnlZj2FYt25d+LFjx7Ys9mMYxKD54qCPNJ1Ot3LZsmWxHhz0MdjW1tZ56tQpTw/6wDVK6GiZOR+/wHjhz0jftlCOkhGbhWC9AeANuCfusCK5j8NSAf08sUV9HJa7+TR/Hrgm6Ul1T4/08xMwEBl7Pj000ktwQhCf+GNJPb2Hrw6+ZUU+K1tjwE8QvZrukrvi/xdgAMx03jW1DHDfAAAAAElFTkSuQmCC";
},l.simplePlayTag.onmouseout=function(){this.src=apn.widgets["apn.wgt.video"].CMedia.btnPlay};var y=this;l.simplePlayTag.onclick=function(){(l.sourceTag.src||l.sourceTag2&&l.sourceTag2.src)&&y.exeMediaPlay(l)},l.mediaTag.onclick=function(){if(!this.parentNode.mediaTag.paused&&!this.parentNode.mediaTag.ended)try{this.parentNode.mediaTag.pause()}catch(e){}}}else"System"==f&&(l.mediaTag.controls=!0);return bx.HCL.DV.isIE()||"edge"==bx.HCL.DV.getBrowserType()?l.tagOnPostResize=function(e,t){if(t.mediaTag.videoWidth&&t.mediaTag.videoHeight){var a=t.mediaTag.videoWidth/t.mediaTag.videoHeight,i=parseInt(t.style.width)/parseInt(t.style.height);Math.abs(a-i)<.01?(t.mediaTag.$CSS("transform","none"),t.mediaTag.style.left="0px",t.mediaTag.style.top="0px",t.mediaTag.style.width="100%",t.mediaTag.style.height="100%"):a<i?(t.mediaTag.$CSS("transform","scale("+i/a+",1)"),t.mediaTag.style.left=(parseInt(t.style.width)-a*parseInt(t.style.height))/2+"px",t.mediaTag.style.top="0px",t.mediaTag.style.width=a*parseInt(t.style.height)+"px",t.mediaTag.style.height="100%"):a>i&&(t.mediaTag.$CSS("transform","scale(1,"+a/i+")"),t.mediaTag.style.top=(parseInt(t.style.height)-1/a*parseInt(t.style.width))/2+"px",t.mediaTag.style.left="0px",t.mediaTag.style.height=1/a*parseInt(t.style.width)+"px",t.mediaTag.style.width="100%")}}:l.mediaTag.style.objectFit="fill",apn.widgets["apn.wgt.video"].mediaHandler(l,t,a),l},xa.exeOnStart=function(e,t){var a=e.wgtTag(t);e.wgtGetProperty(t,"apxStep")&&a.apnPlayList&&a.apnPlayList.length>1&&(e.wgtSetProperty(t,"apxStep",{current:0,count:a.apnPlayList.length}),a._uStepCur=0)},xa.mediaHandler=function(e,t,a){function i(){if(e.exeOnMediaEvent&&e.exeOnMediaEvent("trackStart",e.apnPlayList&&e.apnPlayList.length>1?e.apnPlayList&&e.apnPlayList.length:1,e.apnPlayList.apnCurrent+1),e.apnTrackPlayIdx||t.fireEvent("media","trackStart",e.apnOID),t.fireEvent("media","trS_"+(e.apnTrackPlayIdx||e.apnPlayList.apnCurrent+1),e.apnOID),t.wgtGetProperty(e.apnOID,"apxStep")&&e.apnPlayList&&e.apnPlayList.length>1){var a=(e.apnTrackPlayIdx||e.apnPlayList.apnCurrent+1)-1;void 0!==e._uStepCur&&e._uStepCur==a||(t.wgtSetProperty(e.apnOID,"apxStep",{current:a,count:e.apnPlayList.length}),e._uStepCur=a)}}function n(){if(!e.$ObK||e.mediaTag.$ObJ==e.apnOID){e.simplePlayTag&&(e.simplePlayTag.style.display="none"),e._apxAutoLoadDelayed=!1;var a=!0;e.apnPlayEnded=!1,e.mediaTag.apnPlayEnded=!1,e.mediaTag.$OcT=!1,e.mediaTag.currentTime<.1&&(t.wgtSetProperty(e.apnOID,"apxState","play",!0),e.exeOnMediaEvent&&(0==e.apnPlayList.apnCurrent&&e.exeOnMediaEvent("listStart"),i()),(0==e.apnPlayList.apnCurrent||e.apnTrackPlayIdx)&&(a=!1,t.wgtSetProperty(e.apnOID,"apxState","play",!0),t.fireEvent("media","Start",e.apnOID))),a&&(t.wgtSetProperty(e.apnOID,"apxState","resume",!0),e.exeOnMediaEvent&&e.exeOnMediaEvent("trackResume"),t.fireEvent("media","Resume",e.apnOID))}}function r(a){if(!e.$ObK||e.mediaTag.$ObJ==e.apnOID){if(e.mediaTag.$OcT)return void(e.mediaTag.$OcT=!1);1==e.apnPlayEnded?(t.wgtSetProperty(e.apnOID,"apxState","stop",!0),t.fireEvent("media","End",e.apnOID),e.exeOnMediaEvent&&e.exeOnMediaEvent("trackEnd")):(t.wgtSetProperty(e.apnOID,"apxState","pause",!0),t.fireEvent("media","Pause",e.apnOID),e.exeOnMediaEvent&&e.exeOnMediaEvent("trackPause")),e.simplePlayTag&&(e.simplePlayTag.style.display="block")}}function o(i){if(!e.$ObK||e.mediaTag.$ObJ==e.apnOID){var n=!1,r=e.apnTrackPlayIdx||(e.apnPlayList&&e.apnPlayList.length>1?e.apnPlayList.apnCurrent+1:1);e.$ObN=0,i&&(bx.HCL.DV.isIE()&&(e.mediaTag.$OcT=!0,e.mediaTag.pause(),t.wgtSetProperty(e.apnOID,"apxState","pause",!0),t.fireEvent("media","Pause",e.apnOID),e.exeOnMediaEvent&&e.exeOnMediaEvent("trackPause")),!e.apnPlayOnlyThisTrack&&e.apnPlayList&&e.apnPlayList.length>1&&(a.create.data.styles&&a.create.data.styles.mediaLoop?(e.apnPlayList.apnCurrent=(e.apnPlayList.apnCurrent+1)%e.apnPlayList.length,n=!0):e.apnPlayList.apnCurrent<e.apnPlayList.length-1&&(e.apnPlayList.apnCurrent++,n=!0),n&&(bx.HCL.DV.isChrome()&&!bx.HCL.DV.isMobile()&&e.apnPlayList[e.apnPlayList.apnCurrent]&&e.apnPlayList[e.apnPlayList.apnCurrent].indexOf&&0==e.apnPlayList[e.apnPlayList.apnCurrent].indexOf("data:audio")?e.sourceTag.src=apn.widgets.utils.$O7H(e.apnPlayList[e.apnPlayList.apnCurrent]):e.sourceTag.src=e.apnPlayList[e.apnPlayList.apnCurrent]||"",e.apnPlayListMIME[e.apnPlayList.apnCurrent]&&(e.sourceTag.type=e.apnPlayListMIME[e.apnPlayList.apnCurrent]),e.sourceTag2&&(e.apnPlayListSub[e.apnPlayList.apnCurrent]?(e.sourceTag2.src=e.apnPlayListSub[e.apnPlayList.apnCurrent],e.sourceTag2.type=e.apnPlayListSubMIME[e.apnPlayList.apnCurrent]):(e.sourceTag2.src="",e.sourceTag2.type="")),e.mediaTag.load&&(e.mediaTag.load(),e.mediaTag.play())))),e.apnPlayOnlyThisTrack=!1,n?e.simplePlayTag&&(e.simplePlayTag.style.display="none"):(e.simplePlayTag&&(e.simplePlayTag.style.display="block"),e.apnPlayEnded=!0,e.mediaTag.apnPlayEnded=!0);var o=e.apnPlayList&&e.apnPlayList.length>1?e.apnPlayList&&e.apnPlayList.length:1;t.wgtSetProperty(e.apnOID,"apxState","stop",!0),e.exeOnMediaEvent&&e.exeOnMediaEvent("trackEnd",o,r),e.apnTrackPlayIdx||(t.fireEvent("media","trackEnd",e.apnOID),i&&t.fireEvent("media","trackEndN",e.apnOID)),t.fireEvent("media","trE_"+r,e.apnOID),i&&t.fireEvent("media","trEN_"+r,e.apnOID),(o==r||e.apnTrackPlayIdx)&&t.fireEvent("media","End",e.apnOID)}}function s(t){e.$ObK&&e.mediaTag.$ObJ!=e.apnOID}function p(a){if(!e.$ObK||e.mediaTag.$ObJ==e.apnOID){e.mediaTag.duration&&e.exeOnMediaEvent("infoDuration",e.mediaTag.currentTime,e.mediaTag.duration),t.wgtSetProperty(e.apnOID,"duration",e.mediaTag.duration||0,!0);var i=parseInt(t.wgtGetProperty(e.apnOID,"stp"));!i||e.apnPlayList&&e.apnPlayList.length>1||(t.wgtSetProperty(e.apnOID,"apxStep",{current:0,count:i}),e._uStepCur=0),e.tagOnPostResize&&e.tagOnPostResize(t,e)}}function l(){if(!(e.$ObK&&e.mediaTag.$ObJ!=e.apnOID||(e.$ObN&&0==e.mediaTag.currentTime&&!e.apnPlayEnded&&i(),e.mediaTag.paused))){if(e.exeOnMediaEvent("infoPlayTime",e.mediaTag.currentTime,e.mediaTag.duration),e.$ObN=e.mediaTag.currentTime,t.wgtGetProperty(e.apnOID,"playSection")){var a=t.wgtGetProperty(e.apnOID,"playSection"),n=u.exeMediaInfo(e,"currentTime");n<a.from-(bx.HCL.DV.isIOS()?.2:0)?u.exeMediaSeek(e,a.from,!0):n>=a.to&&(u.exeMediaSeek(e,a.from,!0),u.exeMediaInfo(e,"loop")||(e.$ObN=0,u.exeMediaPause(e)))}var r=parseInt(t.wgtGetProperty(e.apnOID,"stp"));if(r&&!(e.apnPlayList&&e.apnPlayList.length>1)){var n=u.exeMediaInfo(e,"currentTime"),o=e.mediaTag.duration/r,s=Math.max(0,Math.min(Math.ceil(n/o)-1,r-1));void 0!==e._uStepCur&&e._uStepCur==s||(t.wgtSetProperty(e.apnOID,"apxStep",{current:s,count:r}),e._uStepCur=s)}}}function d(t){e.$ObK&&e.mediaTag.$ObJ!=e.apnOID||e.exeOnMediaEvent("volumeChange",e.mediaTag.volume,e.mediaTag.muted)}function c(t){e.$ObK&&e.mediaTag.$ObJ!=e.apnOID||(e.mediaTag.apxSeeking=!1,e.exeOnMediaEvent("seeked"))}function g(t){e.$ObK&&e.mediaTag.$ObJ!=e.apnOID||(e.mediaTag.apxSeeking=!0)}var u=this;bx.Event.add(e.mediaTag,"play",n,!1),bx.Event.add(e.mediaTag,"ended",o,!1),bx.Event.add(e.mediaTag,"pause",r,!1),bx.Event.add(e.mediaTag,"error",s,!1),bx.Event.add(e.mediaTag,"suspend",s,!1),bx.Event.add(e.mediaTag,"abort",s,!1),bx.Event.add(e.mediaTag,"timeupdate",l,!1),bx.Event.add(e.mediaTag,"loadedmetadata",p,!1),bx.Event.add(e.mediaTag,"volumechange",d,!1),bx.Event.add(e.mediaTag,"seeked",c,!1),bx.Event.add(e.mediaTag,"seeking",g,!1),e.$ObO=function(){bx.Event.remove(e.mediaTag,"play",n,!1),bx.Event.remove(e.mediaTag,"ended",o,!1),bx.Event.remove(e.mediaTag,"pause",r,!1),bx.Event.remove(e.mediaTag,"error",s,!1),bx.Event.remove(e.mediaTag,"suspend",s,!1),bx.Event.remove(e.mediaTag,"abort",s,!1),bx.Event.remove(e.mediaTag,"timeupdate",l,!1),bx.Event.remove(e.mediaTag,"loadedmetadata",p,!1),bx.Event.remove(e.mediaTag,"volumechange",d,!1)},e.mediaTag.apxMediaOnEndException=e.mediaTag.apxMediaOnEndException||[],e.mediaTag.apxMediaOnEndException.push(function(){o()}),e.$O7I=function(){for(var t=0;t<e.mediaTag.apxMediaOnEndException.length;t++)e.mediaTag.apxMediaOnEndException[t]&&e.mediaTag.apxMediaOnEndException[t]()},e._onApxTickTimeUpdate=function(){u.exeMediaInfo(e,"pause")||l()}},xa.exeRenderTag=function(e,t,a,i,n,r){var o=apn.IWidget.getCanvasObjectStyle({},this,e.project,i.create.data.styles);return apn.IWidget.exeApplyCSSpre(i,o,a,apn.widgets.utils.$O2x(t,a,i.init.position.x,n),apn.widgets.utils.$O2y(t,a,i.init.position.y,r),apn.widgets.utils.$O2v(i.init.shape.w,n),apn.widgets.utils.$O2w(i.init.shape.h,r),n,r),apn.IWidget.exeRenderSize(e,t,a,i,e.project,n,r),apn.IWidget.exeRenderPosition(t,a,i,e.project,n,r),apn.IWidget.exeApplyCSSpost(i,o,a,apn.widgets.utils.$O2x(t,a,i.init.position.x,n),apn.widgets.utils.$O2y(t,a,i.init.position.y,r),apn.widgets.utils.$O2v(i.init.shape.w,n),apn.widgets.utils.$O2w(i.init.shape.h,r),n,r),a},xa.exeOnLoad=function(e,t){function a(a,i){a==t&&(p.exeMediaControl(l,"playbackRate",bx.$checkNaN(parseFloat(i))||1),e.wgtSetProperty(t,"playbackRate",p.exeMediaInfo(l,"playbackRate"),!0))}function i(a,i){a==t&&i&&(void 0!==i.from&&void 0!==i.to?l._apnPlaySectionStart=i.from:(l._apnPlaySectionStart=0,e.wgtSetProperty(t,"playSection",void 0,!0)))}function n(a,i){a==t&&e.wgtSetMediaInfo(t,"fullScreen",i)}function r(){setTimeout(function(){p.$ObQ(e,t,!0)},200)}function o(){p.$ObQ(e,t,!0)}function s(e,a){e==t&&p.exeMediaSeek(l,parseFloat(a)||0,!1,{seekOnly:!0})}var p=this,l=e.wgtTag(t);e.wgtSetProperty(t,"playbackRate",this.exeMediaInfo(l,"playbackRate"),!0),e.wgtListenProperty(t,"playbackRate",a),e.wgtSetProperty(t,"duration",0,!0),e.wgtListenProperty(t,"playSection",i),e.wgtListenProperty(t,"fullScreen",n),e.wgtSetProperty(t,"supportFullScreen",e.wgtGetMediaInfo(t,"supportFullScreen")),this.$ObP&&this.$ObP(e,t)&&(l.mediaTag.style.display="none",l.mediaTag.controls=!1,bx.HCL.DV.isIE()?bx.Event.add(l.mediaTag,"canplaythrough",r,!1):bx.Event.add(l.mediaTag,"canplay",o,!1)),e.wgtListenProperty(t,"seekTo",s)},xa.exeOnTick=function(e,t){if(this.$ObP&&this.$ObP(e,t)&&this.$ObQ(e,t),e.wgtGetProperty(t,"playSection")||e.wgtGetProperty(t,"highResolutionPlaytime")){var a=e.wgtTag(t);a&&a._onApxTickTimeUpdate&&a._onApxTickTimeUpdate()}},xa.exeOnPause=function(e,t){this.exeMediaStop(e.$O3d[t])},xa.exeOnScreenVisibility=function(e,t,a){var i=e.wgtTag(t);if(!i.$ObK||i.mediaTag.$ObJ==i.apnOID){var n=apn.Project.getLayout(e.project).property.CExe,r="P";if(n&&"P"==n.mediaOnHidden);else if(n&&"S"==n.mediaOnHidden)r="S";else{if(n&&"B"==n.mediaOnHidden)return;if(i.apxBackgroundOnSystemHidden)return;if(e.viewer.constructor.IStub_getConfiguration&&e.viewer.constructor.IStub_getConfiguration(e.project)&&e.viewer.constructor.IStub_getConfiguration(e.project).apxBackgroundOnSystemHidden)return}if(i.__apxLastScreenVisibility=a,"visible"==a){if(this.exeMediaInfo(i,"pause")&&i.$ObR){try{i.mediaTag.play()}catch(e){}i.$ObR=!1}}else"hidden"==a&&(this.exeMediaInfo(i,"pause")||("S"==r?this.exeMediaStop(i):(i.mediaTag.pause(),i.$ObR=!0,i.$ObN=0)))}},xa.exeOnVisibilityChange=function(e,t,a){var i,n=e.wgtTag(t),r=apn.Project.getLayout(e.project).property.CExe;r&&r.vdLD&&"Y"==r.vdLD.prgs&&(i=!0),!n.$ObK&&i&&a&&n._apxAutoLoadDelayed&&(n.mediaTag.load(),n._apxAutoLoadDelayed=!1)},xa.exeAssetLoad=function(e,t,a,i){function n(a,i,n){t.apnPlayList.push(e.mediaURL(a)||a||""),n&&(t.apnPlayListMIME[t.apnPlayList.length-1]=apn.Project.getMediaMimeType(e.project,a),i?(t.apnPlayListSub[t.apnPlayList.length-1]=e.mediaURL(i)||i,t.apnPlayListSubMIME[t.apnPlayList.length-1]=apn.Project.getMediaMimeType(e.project,i)):(t.apnPlayListSub[t.apnPlayList.length-1]="",t.apnPlayListSubMIME[t.apnPlayList.length-1]=""))}var r,o=apn.Project.getLayout(e.project).property.CExe;o&&o.vdLD&&"Y"==o.vdLD.prgs&&(r=!0),"WebAudioAPI"==t.apxMediaLayer||t.$ObK||(t.mediaTag.tagName&&"video"==t.mediaTag.tagName.toLowerCase()&&r?e.wgtGetProperty(t.apnOID,"apxDelayedLoad")?t.mediaTag.preload="none":t.mediaTag.preload="auto":e.wgtGetProperty(t.apnOID,"apxDelayedLoad")?t.mediaTag.preload="metadata":t.mediaTag.preload="auto"),t.apnPlayList=[],t.apnPlayList.apnCurrent=-1,t.apnPlayListMIME=[],t.apnPlayListSub=[],t.apnPlayListSubMIME=[];var s=e.screen.objects[t.apnOID].create.data;if(a||s&&s.styles&&(a=s.styles.mediaID),a)if(a.main&&a.main.length)for(var p=0;p<a.main.length;p++)n(a.main[p],a.sub?a.sub[p]:void 0,!0);else if(a instanceof Array)for(var p=0;p<a.length;p++)n(a[p]);else s&&s.properties&&s.properties.attrs&&s.properties.attrs.sub?n(a,s.properties.attrs.sub.mediaID,!0):n(a);t._iePlaybackRate&&delete t._iePlaybackRate,t._apxAutoLoadDelayed=!1,t.$ObK?(t.mediaTag.paused||this.exeMediaPause(t),t._apxApCHset=!0,t.apnPlayList.apnCurrent=0,t.exeOnMediaEvent&&t.exeOnMediaEvent("listSet",t.apnPlayList.length)):t.apnPlayList.length&&("WebAudioAPI"==t.apxMediaLayer?(t.mediaTag.setMedia(t.apnPlayList[0]),t.apnPlayList.apnCurrent=0):(t.mediaTag.paused||t.$O7I&&t.$O7I(),bx.HCL.DV.isChrome()&&!bx.HCL.DV.isMobile()&&t.apnPlayList[0]&&t.apnPlayList[0].indexOf&&0==t.apnPlayList[0].indexOf("data:audio")?t.sourceTag.src=apn.widgets.utils.$O7H(t.apnPlayList[0]):t.sourceTag.src=t.apnPlayList[0]||"",t.apnPlayListMIME[0]&&(t.sourceTag.type=t.apnPlayListMIME[0]),t.sourceTag2&&(t.apnPlayListSub[0]?(t.sourceTag2.src=t.apnPlayListSub[0],t.sourceTag2.type=t.apnPlayListSubMIME[0]):(t.sourceTag2.src="",t.sourceTag2.type="")),t.apnPlayList.apnCurrent=0,t.mediaTag.load&&(r&&t.mediaTag.tagName&&"video"==t.mediaTag.tagName.toLowerCase()&&!e.wgtIsVisible(t.apnOID)?t._apxAutoLoadDelayed=!0:t.mediaTag.load())),t.exeOnMediaEvent&&t.exeOnMediaEvent("listSet",t.apnPlayList.length))},xa.exeMediaPlay=function(e,t,a,i){if("hidden"!=e.__apxLastScreenVisibility){if("WebAudioAPI"==e.apxMediaLayer);else{if(!e.mediaTag.load)return;if(!e.$ObK&&!(e.sourceTag.src||e.sourceTag2&&e.sourceTag2.src))return}var n=0;if("WebAudioAPI"==e.apxMediaLayer?(e.apnPlayEnded=!1,e.mediaTag.apnPlayEnded=!1,e.apnPlayList.apnCurrent=n,e.mediaTag.setMedia(e.apnPlayList[n])):e.$ObK&&((e._apxApCHset||e.mediaTag.$ObJ!=e.apnOID)&&(e._apxApCHset=!1,e.mediaTag.paused||e.$O7I&&e.$O7I(),e.apnPlayEnded=!1,e.mediaTag.apnPlayEnded=!1,bx.HCL.DV.isChrome()&&!bx.HCL.DV.isMobile()&&e.apnPlayList[0]&&e.apnPlayList[n].indexOf&&0==e.apnPlayList[n].indexOf("data:audio")?e.sourceTag.src=apn.widgets.utils.$O7H(e.apnPlayList[n]):e.sourceTag.src=e.apnPlayList[n]||"",e.apnPlayListMIME[n]&&(e.sourceTag.type=e.apnPlayListMIME[n]),e.sourceTag2&&(e.apnPlayListSub[n]?(e.sourceTag2.src=e.apnPlayListSub[n],e.sourceTag2.type=e.apnPlayListSubMIME[n]):(e.sourceTag2.src="",e.sourceTag2.type="")),e.apnPlayList.apnCurrent=n,e.mediaTag.load(),e.mediaTag.loop=!!e.$ObK.loop),e.mediaTag.$ObJ=e.apnOID),e.apnPlayOnlyThisTrack=!1,t&&void 0!==a&&e.apnPlayList&&e.apnPlayList[a-1]&&(n=a-1,i&&(e.apnPlayOnlyThisTrack=!0)),(t||e.apnPlayEnded)&&e.apnPlayList&&e.apnPlayList.length>1&&(e.apnPlayEnded=!1,e.mediaTag.apnPlayEnded=!1,"WebAudioAPI"==e.apxMediaLayer?(e.apnPlayList.apnCurrent=n,e.mediaTag.setMedia(e.apnPlayList[n])):(bx.HCL.DV.isChrome()&&!bx.HCL.DV.isMobile()&&e.apnPlayList[0]&&e.apnPlayList[n].indexOf&&0==e.apnPlayList[n].indexOf("data:audio")?e.sourceTag.src=apn.widgets.utils.$O7H(e.apnPlayList[n]):e.sourceTag.src=e.apnPlayList[n]||"",e.apnPlayListMIME[n]&&(e.sourceTag.type=e.apnPlayListMIME[n]),e.sourceTag2&&(e.apnPlayListSub[n]?(e.sourceTag2.src=e.apnPlayListSub[n],e.sourceTag2.type=e.apnPlayListSubMIME[n]):(e.sourceTag2.src="",e.sourceTag2.type="")),e.apnPlayList.apnCurrent=n,e.mediaTag.load())),e._apxAutoLoadDelayed=!1,"WebAudioAPI"==e.apxMediaLayer)e.mediaTag.play(t);else{try{e.mediaTag.play(),e._iePlaybackRate&&(e.mediaTag.playbackRate=e._iePlaybackRate)}catch(e){console.error("Exception in play video",e)}if(e.mediaTag.paused)e.$O7I&&e.$O7I();else try{if(t){var r=0;e._apnPlaySectionStart&&(r=e._apnPlaySectionStart),e.mediaTag.currentTime=r}else bx.HCL.DV.isChrome()&&(e.apnPlayReqBySeek||e.mediaTag.apnPlayEnded&&(e.mediaTag.currentTime=0))}catch(t){bx.HCL.DV.isIE()&&"InvalidStateError"==t||(e.$O7I&&e.$O7I(),console.error("Exception in play media",t))}}bx.HCL.DV.isChrome()&&(e.apnPlayReqBySeek=!1)}},xa.exeMediaPause=function(e){if(!e.$ObK||e.mediaTag.$ObJ==e.apnOID)if("WebAudioAPI"==e.apxMediaLayer)e.mediaTag.pause();else{if(!e.mediaTag.pause)return;if(!(e.sourceTag.src||e.sourceTag2&&e.sourceTag2.src))return;try{e.mediaTag.pause(),e.mediaTag.paused&&e.simplePlayTag&&(e.simplePlayTag.style.display="block")}catch(e){}}},xa.exeMediaStop=function(e,t){if(!e.$ObK||e.mediaTag.$ObJ==e.apnOID)if("WebAudioAPI"==e.apxMediaLayer)e.apnPlayEnded=!0,e.mediaTag.apnPlayEnded=!0,e.mediaTag.stop();else{if(!e.mediaTag.pause)return;if(!(e.sourceTag.src||e.sourceTag2&&e.sourceTag2.src))return;try{e.mediaTag.paused?(e.apnPlayEnded=!0,e.mediaTag.apnPlayEnded=!0,e.mediaTag.currentTime=0,e.$O7I&&e.$O7I()):(e.mediaTag.currentTime=0,e.mediaTag.pause(),e.apnPlayEnded=!0,e.mediaTag.apnPlayEnded=!0),e.mediaTag.paused&&e.simplePlayTag&&(e.simplePlayTag.style.display="block")}catch(e){}}},xa.exeMediaSeek=function(e,t,a,i){if((!e.$ObK||e.mediaTag.$ObJ==e.apnOID)&&e.mediaTag&&e.mediaTag.duration){var n=0;n="string"==typeof t?bx.$checkNaN(parseFloat(t))/100*e.mediaTag.duration:t,n=Math.min(n,e.mediaTag.duration);var r,o;if(i&&(i instanceof Object?(r=i.rangeCheck,o=i.seekOnly):r=!0),r){if(void 0!==e.$ObS&&Math.abs(e.$ObS-n)<1)return;e.$ObS=n}o?((bx.HCL.DV.isIE()||"edge"==bx.HCL.DV.getBrowserType())&&(e.mediaTag.currentTime=n),e.mediaTag.currentTime=n):(a||e.mediaTag.paused||e.mediaTag.pause(),a&&(e.mediaTag.currentTime=n)),e.mediaTag.apnOnSeek&&e.mediaTag.apnOnSeek(n),e.exeOnMediaEvent&&e.exeOnMediaEvent("infoPlayTime",n,e.mediaTag.duration),o?(bx.HCL.DV.isChrome()&&(e.apnPlayReqBySeek=!0),e.apnPlayEnded=!1,e.mediaTag.apnPlayEnded=!1):a&&e.mediaTag.paused&&(bx.HCL.DV.isChrome()&&(e.apnPlayReqBySeek=!0),this.exeMediaPlay(e))}},xa.exeMediaControl=function(e,t,a){if(e.mediaTag){if(e.$ObK&&(e.$ObK[t]=a,e.mediaTag.$ObJ!=e.apnOID))return!0;if("WebAudioAPI"==e.apxMediaLayer){if("mute"==t)return e.mediaTag.setMute(a),!0;if("loop"==t)return e.mediaTag.setLoop(a),!0;if("volume"==t)return e.mediaTag.setVolume(a),!0}else{if("mute"==t)return a&&(e.mediaTag.muted=!1),e.mediaTag.muted=a,!0;if("loop"==t)return e.mediaTag.loop=a,!0;if("volume"==t)return e.mediaTag.volume=a,!0;if("playbackRate"==t)return e.mediaTag.playbackRate=a,bx.HCL.DV.isIE()&&(e._iePlaybackRate=a),!0}}return!1},xa.exeMediaInfo=function(e,t){if(e.mediaTag){if(e.$ObK&&e.mediaTag.$ObJ!=e.apnOID)return e.$ObK[t];if("WebAudioAPI"==e.apxMediaLayer){if("mute"==t)return e.mediaTag.getMute();if("loop"==t)return e.mediaTag.getLoop();if("volume"==t)return e.mediaTag.getVolume();if("pause"==t)return e.mediaTag.getPaused();if("currentTime"==t)return e.mediaTag.getInfoPlayTime();if("end"==t)return e.mediaTag.apnPlayEnded}else{if("mute"==t)return e.mediaTag.muted;if("loop"==t)return e.mediaTag.loop;if("volume"==t)return e.mediaTag.volume;if("pause"==t)return e.mediaTag.paused;if("currentTime"==t)return e.mediaTag.currentTime;if("playbackRate"==t)return e.mediaTag.playbackRate;if("seeking"==t)return e.mediaTag.seeking||e.mediaTag.apxSeeking;if("end"==t)return e.mediaTag.apnPlayEnded}}},xa.exeMediaClear=function(e,t){var a=e.wgtTag(t);if(a.mediaTag){if(a.$ObK)return a.mediaTag.$ObJ==a.apnOID&&(a.mediaTag.tagName&&"video"==a.mediaTag.tagName.toLowerCase()||a.mediaTag.tagName&&"audio"==a.mediaTag.tagName.toLowerCase())&&(a.mediaTag.paused||a.mediaTag.pause()),void delete a.mediaTag.$ObJ;if("WebAudioAPI"==a.apxMediaLayer)a.mediaTag.pause();else if(a.mediaTag.tagName&&"video"==a.mediaTag.tagName.toLowerCase()||a.mediaTag.tagName&&"audio"==a.mediaTag.tagName.toLowerCase())try{a.mediaTag.paused||a.mediaTag.pause(),a.sourceTag.src="",a.sourceTag2&&(a.sourceTag2.src=""),a.mediaTag.load()}catch(e){}}},xa.exeOnDestroy=function(e,t){var a=e.wgtTag(t);a.$ObO&&a.$ObO(),apn.widgets["apn.wgt.video"].exeMediaClear(e,t)},xa.$ObP=function(e,t){var a=e.wgtGetProperty(t,"apxAlpha");return!!a&&(0!=a[0].cnd||0!=a[1].cnd||0!=a[2].cnd)},xa.$ObQ=function(e,t,a){var i=e.wgtTag(t);if(i.mediaTag.videoWidth&&(a||!i.mediaTag.paused)){if(!i.cvsOut){var n=parseInt(i.style.width),r=parseInt(i.style.height);i.cvsOut=i.$TAG("canvas",{width:i.mediaTag.videoWidth,height:i.mediaTag.videoHeight,style:"position:absolute;left:0px;top:0px;width:"+n+"px;height:"+r+"px;"})}var o=i.cvsOut.getContext("2d");o.drawImage(i.mediaTag,0,0,o.canvas.width,o.canvas.height);for(var s,p=o.getImageData(0,0,o.canvas.width,o.canvas.height),l=p.data,d=e.wgtGetProperty(t,"apxAlpha"),c=0,g=l.length;c<g;c+=4)s=0,0==d[0].cnd?s++:1==d[0].cnd&&l[c+0]>bx.$checkNaN(parseInt(d[0].v))?s++:2==d[0].cnd&&l[c+0]<bx.$checkNaN(parseInt(d[0].v))?s++:3==d[0].cnd&&l[c+0]==bx.$checkNaN(parseInt(d[0].v))&&s++,0==d[1].cnd?s++:1==d[1].cnd&&l[c+1]>bx.$checkNaN(parseInt(d[1].v))?s++:2==d[1].cnd&&l[c+1]<bx.$checkNaN(parseInt(d[1].v))?s++:3==d[1].cnd&&l[c+1]==bx.$checkNaN(parseInt(d[1].v))&&s++,0==d[2].cnd?s++:1==d[2].cnd&&l[c+2]>bx.$checkNaN(parseInt(d[2].v))?s++:2==d[2].cnd&&l[c+2]<bx.$checkNaN(parseInt(d[2].v))?s++:3==d[2].cnd&&l[c+2]==bx.$checkNaN(parseInt(d[2].v))&&s++,3==s&&(l[c+3]=0);i.cvsOut.getContext("2d").putImageData(p,0,0)}},xa.onEdit=function(e,t,a,i){function n(){o.data.properties&&o.data.properties.attrs&&o.data.properties.attrs.apxPoster&&o.data.properties.attrs.apxPoster.mediaID&&e.setSubMediaToObject(t,o.data.properties.attrs.apxPoster.mediaID,!1)}function r(a,i){function r(t,a){a&&(t.setMedia(a),n(),e.draw())}if(a){var s;(s=e.mediaURL(a,!0))?e.setMediaToObject(t,a,!!i,n):(o.setMediaID(a),e.onUpdated(bx.CCanvasWnd.OBJ_UPDATED,o),o.resolveSnapshot(r))}else null===a&&(e.clearMediaFromObject(t),n())}if(window.AspenUIRun){var o=e.getObjectByID(t);AspenUIRun("video_manager",{mode:"picker",keepSize:!o.data.styles.mediaID,mediaID:o.data.styles.mediaID,useNone:!!o.data.styles.mediaID,cbFunc:r})}},xa.edtOnConfigCheck=function(e,t){var a,i=!!(t.properties&&t.properties.attrs&&t.properties.attrs.apxPoster),n=!!(t.properties&&t.properties.attrs&&t.properties.attrs.apxAlpha),r=apn.Project.getExeModule(e.getData());return r.IStub_getConfiguration&&r.IStub_getConfiguration()&&r.IStub_getConfiguration().mediaMultiFormat&&(a=!0),!!(i||n||a)},xa.edtOnConfig=function(e,t,a,i){function n(){l&&l.mediaID&&e.setSubMediaToObject(t,l.mediaID,!1)}function r(){eduLib.edtInputApplyAll(e,u),p.data.styles.mediaID?e.setMediaToObject(t,p.data.styles.mediaID,!1,n):(e.clearMediaFromObject(t),n()),d&&e.wgtSetProperty(t,"apxAlpha",d),l&&e.wgtSetProperty(t,"apxPoster",l),o&&e.wgtSetProperty(t,"sub",p.data.properties.attrs.sub)}var o,s,p=e.getObjectByID(t),l=e.wgtGetProperty(t,"apxPoster"),d=e.wgtGetProperty(t,"apxAlpha"),c=apn.Project.getExeModule(e.getData());if(c.IStub_getConfiguration){var g=c.IStub_getConfiguration(e.getData(),!0);g&&g.mediaMultiFormat&&(o=!0),g&&g.exeFullscreenNoController&&(s=!0)}if(l||d||o||s){var u;if(u=e.dlgDoModal(720,600,r)){if(o&&(p.data.properties.attrs.sub=p.data.properties.attrs.sub||{mediaID:void 0},eduLib.edtInputAdd(e,u,{type:"video",title:apn.CExe.GL({ko:"보조 비디오 파일",en:"Alternative video file"}),value:p.data.properties.attrs,key:"sub",join:!0}),eduLib.edtInputAdd(e,u,{type:"message",value:"※ "+apn.CExe.GL({ko:"기본 비디오 파일 포맷을 출력하지 못하는 브라우저를 위한 대체 파일입니다.",en:"Alternative file for browsers which cannot play the main video file format."}),join:!0}),eduLib.edtInputAdd(e,u,{type:"space",join:!0})),l&&(eduLib.edtInputAdd(e,u,{type:"image",title:apn.CExe.GL({ko:"포스터 이미지",en:"Poster File"}),value:p.data.properties.attrs,key:"apxPoster"}),eduLib.edtInputAdd(e,u,{type:"space",join:!0})),s){var h=e.getScreenData(),x=[];for(var f in h.objects)h.objects[f].create.data&&"apn.wgt.layerContainer"==h.objects[f].create.data.wgtID&&x.push({value:f,title:e.itrGetObjectTitle(f)});p.data.properties.attrs.fs=p.data.properties.attrs.fs||{oId:"",lyI:"",lyF:""},eduLib.edtInputAdd(e,u,{type:"title",title:apn.CExe.GL({ko:"전체화면 미디어제어기",en:"Fullscreen media controller"})}),x.length?(eduLib.edtInputAdd(e,u,{type:"select",title:"제어기 Container",value:p.data.properties.attrs.fs,key:"oId",options:x,join:!0}),eduLib.edtInputAdd(e,u,{type:"message",value:"※ 전체화면 비디오 기능을 사용할 때, 해당 브라우저가 전체화면에서 미디어제어기를 표시하지 않는 경우 편집된 제어기를 대신 표시하기 위한 기능입니다.",join:!0})):eduLib.edtInputAdd(e,u,{type:"message",value:"편집된 Layer Container가 없습니다.",join:!0}),eduLib.edtInputAdd(e,u,{type:"space",join:!0})}d&&eduLib.edtInputAdd(e,u,{type:"table",title:apn.CExe.GL({ko:"투명처리(크로마키 배경)",en:"Transparent channel(Chroma Keyer)"}),value:d,options:{th:[apn.CExe.GL({ko:"색상",en:"Color"}),apn.CExe.GL({ko:"비교조건",en:"Condition"}),apn.CExe.GL({ko:"색상값",en:"Value"})+"[0~255]"]},td:[{type:"text",key:"clr",readonly:!0},{type:"select",key:"cnd",options:[{title:"[None]",value:0},{title:">",value:1},{title:"<",value:2},{title:"=",value:3}]},{type:"number",key:"v"}],join:!0})}}},xa.edtOnRemapObjectID=function(e,t,a){if(t&&t.properties&&t.properties.attrs&&t.properties.attrs.fs){var i=t.properties.attrs.fs;i.oId&&(a[i.oId]?i.oId=a[i.oId]:e.getScreenData().objects[i.oId]||(i.oId=""))}},apn.widgets["apn.wgt.video"]=xa,xa=apn.inheritWidget(apn.widgets["apn.wgt.video"]),xa.styleMap={title:!0,visibility:!0,alpha:!0,mediaID:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0},xa.exeScriptMediaID=!0,xa.editor={iconThumb:"imgs/wgts/thumbs/audio.png",properties:{Control:["System","None"],Loop:["No","Yes"],stp:{title:"Step",input:"",type:"number"}},states:{play:"Play",stop:"Stop",resume:"Resume",pause:"Pause",mute:"Mute",muteOff:"Mute Off"}},xa.CMedia={bgColor:"transparent",control:{System:{systemControl:!0}}},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,this,"apn.CMedia",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n)},xa.exeCreateTag=function(e,t,a,i,n){var r=$TAG("div",{style:"position:absolute;"});if(r.$CSS({boxSizing:"border-box"}),r.apnCur={},e.IDevice_useWebAudio())r.apxMediaLayer="WebAudioAPI",r.mediaTag=new AspenWebAudio(r),apn.widgets["apn.wgt.audio"].mediaHandler_waAPI(r,t,a),a.create.data.properties&&a.create.data.properties.attrs&&"Yes"==a.create.data.properties.attrs.Loop&&r.mediaTag.setLoop(!0);else{var o=a.create.data.properties;if(apn.CExe.IWidget_getAudioAutoplayCount(e.project)&&o&&o.attrs&&o.attrs.cfg&&o.attrs.cfg.apxApCH&&o.attrs.cfg.apxApCH<=apn.CExe.IWidget_getAudioAutoplayCount(e.project))r.mediaTag=e.$ObT.$O3d[o.attrs.cfg.apxApCH-1],r.sourceTag=r.mediaTag.sourceTag,r.$ObK={},apn.widgets["apn.wgt.video"].mediaHandler(r,t,a),o&&o.attrs&&"Yes"==o.attrs.Loop?r.$ObK.loop=!0:r.$ObK.loop=!1;else{r.mediaTag=r.$TAG("audio",{style:"border:none;position:absolute;left:0px;top:0px;width:100%;height:100%"},{boxSizing:"border-box"}),r.sourceTag=r.mediaTag.$TAG("source"),o&&o.attrs&&(o.attrs.apxMediaSubFormat||o.attrs.sub&&o.attrs.sub.mediaID)&&(r.sourceTag2=r.mediaTag.$TAG("source"));var s="System";o&&o.attrs&&o.attrs.Control&&(s=o.attrs.Control),"System"==s?r.mediaTag.controls=!0:r.mediaTag.controls=!1,apn.widgets["apn.wgt.video"].mediaHandler(r,t,a),o&&o.attrs&&"Yes"==o.attrs.Loop?r.mediaTag.loop=!0:r.mediaTag.loop=!1}}return r},xa.onEdit=function(e,t){function a(a,r,o,o,o,s){n||(s=void 0),a?(void 0!==s&&(i.data.styles.apxCT=s),e.setMediaToObject(t,a,!!r)):null===a&&(void 0!==i.data.styles.apxCT&&delete i.data.styles.apxCT,e.clearMediaFromObject(t))}var i=e.getObjectByID(t);if(window.AspenUIRun){var n;window.asui&&asui.CFG&&asui.CFG.getAccessInfo&&asui.CFG.getAccessInfo()&&asui.CFG.getAccessInfo().rscAudioSharedList&&(n=!0),AspenUIRun("audio_manager",{mode:"picker",mediaID:i.data.styles.mediaID,shareCAT:i.data.styles.apxCT,useNone:!!i.data.styles.mediaID,cbFunc:a})}},xa.edtOnConfigCheck=function(e,t){var a=apn.Project.getExeModule(e.getData());return!!(a.IStub_getConfiguration&&a.IStub_getConfiguration()&&a.IStub_getConfiguration().mediaMultiFormat)},xa.edtOnConfig=function(e,t,a,i){function n(){eduLib.edtInputApplyAll(e,p),r&&e.wgtSetProperty(t,"sub",o.data.properties.attrs.sub)}var r,o=e.getObjectByID(t),s=apn.Project.getExeModule(e.getData());if(s.IStub_getConfiguration&&s.IStub_getConfiguration()&&s.IStub_getConfiguration().mediaMultiFormat&&(r=!0),r){var p;(p=e.dlgDoModal(500,400,n))&&r&&(o.data.properties.attrs.sub=o.data.properties.attrs.sub||{mediaID:void 0},eduLib.edtInputAdd(e,p,{type:"audio",title:apn.CExe.GL({ko:"보조 오디오 파일",en:"Alternative audio file"}),value:o.data.properties.attrs,key:"sub",join:!0}),eduLib.edtInputAdd(e,p,{type:"message",value:"※ "+apn.CExe.GL({ko:"기본 오디오 파일 포맷을 출력하지 못하는 브라우저를 위한 대체 파일입니다.",en:"Alternative file for browsers which cannot play the main audio file format."}),join:!0}))}},xa.mediaHandler_waAPI=function(e,t,a){function i(){e.exeOnMediaEvent&&e.exeOnMediaEvent("trackStart",e.apnPlayList&&e.apnPlayList.length>1?e.apnPlayList&&e.apnPlayList.length:1,e.apnPlayList.apnCurrent+1),e.apnTrackPlayIdx||t.fireEvent("media","trackStart",e.apnOID),t.fireEvent("media","trS_"+(e.apnTrackPlayIdx||e.apnPlayList.apnCurrent+1),e.apnOID)}function n(){var a=!0;e.apnPlayEnded=!1,e.mediaTag.apnPlayEnded=!1,e.mediaTag.getInfoPlayTime()<.1&&(t.wgtSetProperty(e.apnOID,"apxState","play",!0),e.exeOnMediaEvent&&(0==e.apnPlayList.apnCurrent&&e.exeOnMediaEvent("listStart"),i()),(0==e.apnPlayList.apnCurrent||e.apnTrackPlayIdx)&&(a=!1,t.wgtSetProperty(e.apnOID,"apxState","play",!0),t.fireEvent("media","Start",e.apnOID))),a&&(t.wgtSetProperty(e.apnOID,"apxState","resume",!0),e.exeOnMediaEvent&&e.exeOnMediaEvent("trackResume"),t.fireEvent("media","Resume",e.apnOID))}function r(i){var n=!1,r=e.apnTrackPlayIdx||(e.apnPlayList&&e.apnPlayList.length>1?e.apnPlayList.apnCurrent+1:1);!e.apnPlayOnlyThisTrack&&e.apnPlayList&&e.apnPlayList.length>1&&(a.create.data.styles&&a.create.data.styles.mediaLoop?(e.apnPlayList.apnCurrent=(e.apnPlayList.apnCurrent+1)%e.apnPlayList.length,n=!0):e.apnPlayList.apnCurrent<e.apnPlayList.length-1&&(e.apnPlayList.apnCurrent++,n=!0),n&&(e.mediaTag.setMedia(e.apnPlayList[e.apnPlayList.apnCurrent]),e.mediaTag.play())),e.apnPlayOnlyThisTrack=!1,n||(e.apnPlayEnded=!0,e.mediaTag.apnPlayEnded=!0);var o=e.apnPlayList&&e.apnPlayList.length>1?e.apnPlayList&&e.apnPlayList.length:1;t.wgtSetProperty(e.apnOID,"apxState","stop",!0),e.exeOnMediaEvent&&e.exeOnMediaEvent("trackEnd",o,r),e.apnTrackPlayIdx||t.fireEvent("media","trackEnd",e.apnOID),i&&t.fireEvent("media","trackEndN",e.apnOID),t.fireEvent("media","trE_"+r,e.apnOID),i&&t.fireEvent("media","trEN_"+r,e.apnOID),(o==r||e.apnTrackPlayIdx)&&t.fireEvent("media","End",e.apnOID)}function o(){t.wgtSetProperty(e.apnOID,"apxState","pause",!0),t.fireEvent("media","Pause",e.apnOID),e.exeOnMediaEvent&&e.exeOnMediaEvent("trackPause")}function s(){t.fireEvent("media","Resume",e.apnOID),e.exeOnMediaEvent&&e.exeOnMediaEvent("trackResume")}function p(){e.exeOnMediaEvent&&e.exeOnMediaEvent("infoDuration",e.mediaTag.getInfoPlayTime()||0,e.mediaTag.getInfoDuration()),t.wgtSetProperty(e.apnOID,"duration",e.mediaTag.getInfoPlayTime()||0,!0)}function l(){e.exeOnMediaEvent&&e.exeOnMediaEvent("infoPlayTime",e.mediaTag.getInfoPlayTime()||0,e.mediaTag.getInfoDuration())}e.mediaTag.setCallback(n,r,s,o,p,l)},apn.widgets["apn.wgt.audio"]=xa,xa={},xa.styleMap={title:!0,visibility:!0,strokeStyle:!0,lineWidth:!0,lineDash:!0,lineEnd:!0,alpha:!0,keepRatio:!0,dragX:!0,dragY:!0,csr:!0},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,this,"bx.CEditorWnd.CLine",bx.CCanvasWnd.SHAPE_LINE,t,a,i,n);
},xa.exeCreateTag=function(e,t,a,i,n){var r=$TAG("div",{style:"position:absolute;overflow:hidden;"});return r.apxLineBorderTop=!0,window.navigator&&navigator.userAgent.indexOf("Version/")!=-1&&navigator.userAgent.indexOf("Android")!=-1?(r.style.height="1px",r.style.backgroundColor="transparent"):r.style.height="0px",r.apnCur={},r},xa.exeRenderTag=function(e,t,a,i,n,r){function o(e,t,a,i){return Math.atan2(a-e,t-i)%(2*Math.PI)*(180/Math.PI)-90}var s=apn.IWidget.getCanvasObjectStyle({},this,e.project,i.create.data.styles),p=apn.widgets.utils.$O2x(t,a,i.init.position.x+i.init.shape.x[0],n),l=apn.widgets.utils.$O2y(t,a,i.init.position.y+i.init.shape.y[0],r),d=apn.widgets.utils.$O2x(t,a,i.init.position.x+i.init.shape.x[1],n),c=apn.widgets.utils.$O2y(t,a,i.init.position.y+i.init.shape.y[1],r),g=0;s.lineWidth&&s.strokeStyle&&(g=s.lineWidth*Math.min(n,r));var u=0;"1px"==a.style.height&&(u=1);var h;bx.HCL.DV.isIE()&&"round"==s.lineEnd&&g>=3&&(h=!0,a._apxLineHeight=!0);var x=Math.sqrt(Math.pow(d-p,2)+Math.pow(c-l,2));if(a.style.top=l-Math.round(g/2)+u+"px",bx.HCL.DV.isChrome()&&e.isStretch()&&"round"==s.lineEnd&&(!g||g<5)&&(s.lineEnd="square"),"butt"==s.lineEnd?(a.style.width=x+"px",a.style.left=p+"px",apn.CES.transformSet(a,"origin","0% 50%")):"square"==s.lineEnd?(a.style.width=x+Math.floor(g)+"px",a.style.left=p-Math.floor(g/2)+"px",apn.CES.transformSet(a,"origin",Math.floor(g/2)+"px 50%")):(a.style.width=x+Math.floor(g)+"px",a.style.left=p-Math.floor(g/2)+"px",apn.CES.transformSet(a,"origin",Math.floor(g/2)+"px 50%"),h?a.$CSS("borderRadius",Math.floor(g/2)+"px"):a.$CSS("borderRadius",Math.floor(g)+"px")),apn.CES.transformSet(a,"rotate",o(p,l,d,c)),apn.CES.transformApply(a),g){var f="solid";s.lineDash&&(f=2==s.lineDash.length&&s.lineDash[0]==s.lineDash[1]?"dotted":"dashed"),h?(a.style.height=(0==g?0:Math.round(g)||1)+"px",a.style.backgroundColor=s.strokeStyle):a.style.borderTop=f+" "+(0==g?0:Math.round(g)||1)+"px "+s.strokeStyle}return apn.IWidget.exeSetAlpha(a,s.alpha),apn.IWidget.exeSetCursor(a,s.csr),a},apn.widgets["apn.wgt.line"]=xa,apn.widgets.utils.$O2D=function(e){return e||(e=$TAG("canvas",{style:"position:absolute;"}),e.$CSS({boxSizing:"border-box"}),e.apnCur={},e.REFRESH_ON_RESIZE=!0),e},apn.widgets.utils.$O2F=function(e,t,a,i,n,r,o,s,p,l,d){apn.CES.transformSet(t,"rotate",0),apn.CES.transformApply(t),i.lineWidth&&i.strokeStyle&&(n-=apn.IWidget.$O3R(2,a.create.data.styles,p),r-=apn.IWidget.$O3R(2,a.create.data.styles,p),o+=apn.IWidget.$O3R(1,a.create.data.styles,p),s+=apn.IWidget.$O3R(1,a.create.data.styles,p));var c=0,g=0;if(i.angle=bx.$checkNaN(parseFloat(i.angle)),t.wgt_dx=0,t.wgt_dy=0,i.angle){var u=bx.CCanvasWnd.getEnclosingRect(n,r,o,s,i.angle);t.style.left=u.x1+"px",t.style.top=u.y1+"px",t.width=u.x2-u.x1,t.style.width=u.x2-u.x1+"px",t.height=u.y2-u.y1,t.style.height=u.y2-u.y1+"px",o=u.x2-u.x1,s=u.y2-u.y1,c=n-u.x1,g=r-u.y1,t.wgt_dx=c,t.wgt_dy=g}else t.style.left=n+"px",t.style.top=r+"px",parseInt(t.width)==o&&parseInt(t.height)==s||(t.width=o,t.height=s),t.style.width=o+"px",t.style.height=s+"px";var h=apn.widgets.utils.$O2v(a.init.shape.w,p),x=apn.widgets.utils.$O2w(a.init.shape.h,l),f=t.getContext("2d");return i.fillStyle&&(f.fillStyle=i.fillStyle),i.lineWidth&&i.strokeStyle&&(bx.cCanvasObject.applyLineDash(f,i),f.lineJoin="round",f.lineWidth=Math.max(1,Math.round(parseInt(i.lineWidth)*p)),f.strokeStyle=i.strokeStyle,i.lineDash&&apn.IWidget.exeApplyLineDash(f,i.lineDash,f.lineWidth)),i.angle&&(f.translate(o/2,s/2),f.rotate(i.angle),f.translate(-o/2,-s/2)),d(f,!(!i.lineWidth||!i.strokeStyle),!!i.fillStyle,(o-h)/2,(s-x)/2,h,x),i.text&&bx.CCanvasWnd.drawText(f,(o-h)/2,(s-x)/2,h,x,i.text,i.textMultiLine,Math.round(parseInt(i.fontSize)*l)+"px"||bx.CEditorWnd.FONT_SIZE_DEF,i.fontStyle||bx.CEditorWnd.FONT_COLOR_DEF,i.font||bx.CEditorWnd.FONT_DEF,i.textAlign,i.textValign,i.textPadding,i.fontBold,i.fontItalic,i.fontUnderlined),t},apn.widgets.utils.$O2G=function(e,t,a,i,n,r,o,s,p){var l=0;apn.Project.resolveStyle(e,"lineWidth",a.create.data.styles.lineWidth)&&(l=Math.round(Math.max(1,Math.round(parseInt(apn.Project.resolveStyle(e,"lineWidth",a.create.data.styles.lineWidth))*o))/2));var d=a.init.shape.w*o-2*l,c=a.init.shape.h*s-2*l,g=a.init.shape.w,u=a.init.shape.h,h=bx.$checkNaN(parseFloat(apn.Project.resolveStyle(e,"angle",a.create.data.styles.angle)));if(h){var x=n-g/2,f=r-u/2;n=x*Math.cos(-h)-f*Math.sin(-h),r=f*Math.cos(-h)+x*Math.sin(-h),n=Math.floor(n+g/2),r=Math.floor(r+u/2)}return p(n,r,(g-d)/2,(u-c)/2,d,c)},apn.widgets.utils.$O2I=function(e,t,a,i){var n=a.lineWidth&&a.strokeStyle?t.shape.lw:0,r=a.lineWidth&&a.strokeStyle?a.lineWidth:0;i.style.left=e.tagVP.offsetLeft+e.toScreenX(t.position.x+n)+"px",i.style.top=e.tagVP.offsetTop+e.toScreenY(t.position.y+n)+"px",i.style.width=e.toScreenW(t.shape.w-r)+"px",i.style.height=e.toScreenH(t.shape.h-r)+"px",apn.IWidget.exeSetFontStyle(i,a.fontStyle),apn.IWidget.$O6x(a,i,1/e.getZoomX(),1/e.getZoomY()),t.getAngle&&t.getAngle()?i.$CSS("transform","rotate("+t.getAngle()+"rad)"):i.$CSS("transform","none"),i.style.backgroundColor="transparent",i.style.borderColor="transparent"},apn.widgets.utils.$O2C=function(e,t,a,i,n,r,o){var s=e.getObjectByID(i),p=apn.Project.resolveStyle(t,"textMultiLine",s.data.styles.textMultiLine),l=e.getWgtInputTAG(p,apn.Project.resolveStyle(t,"textWordWrap",s.data.styles.textWordWrap));if(p){var d=l.multiTxt,c=s.style.font,g=1.2;apn.fonts&&apn.fonts[c]&&void 0!==apn.fonts[c].height&&(g=apn.fonts[c].height);var u=parseInt(apn.Project.resolveStyle(t,"fontSize",s.data.styles.fontSize))*g;apn.Project.resolveStyle(t,"lnSp",s.data.styles.lnSp)&&(u+=apn.Project.resolveStyle(t,"lnSp",s.data.styles.lnSp)),d.style.lineHeight=u*(1/e.getZoomY())+"px"}else{var d=l.singleTxt;d.style.width="100%",d.$CSS("transform","none")}apn.Project.resolveStyle(t,"ltrSp",s.data.styles.ltrSp)?d.style.letterSpacing=apn.Project.resolveStyle(t,"ltrSp",s.data.styles.ltrSp)*(1/e.getZoomY())+"px":d.style.letterSpacing="normal",d.style.display="block";var h=apn.IWidget.getCanvasObjectStyle({},a,t,s.data.styles);return d.onchange=function(){e.$O1i({text:this.value},s)},d.onfocus=function(){s.setStyle("text",""),e.draw()},d.onblur=function(t){e.$O1i({text:this.value},s),e.draw()},d.onkeypress=d.onkeyup=function(){d.value?l.dummy.innerHTML=d.value.replace(/\n$/,"<br>&nbsp;").replace(/\n/g,"<br>"):l.dummy.innerHTML="&nbsp;",p?l.dummy.offsetHeight<l.clientHeight?(d.style.height=l.clientHeight+"px","top"==h.textValign?(d.style.paddingTop="0px",d.style.paddingBottom=l.clientHeight-l.dummy.offsetHeight+"px"):"bottom"==h.textValign?(d.style.paddingTop=l.clientHeight-l.dummy.offsetHeight+"px",d.style.paddingBottom="0px"):(d.style.paddingTop=(l.clientHeight-l.dummy.offsetHeight)/2+"px",d.style.paddingBottom=(l.clientHeight-l.dummy.offsetHeight)/2+"px")):(d.style.height=l.dummy.offsetHeight+"px",d.style.paddingTop="0px",d.style.paddingBottom="0px"):a.edtOnChangeSingleTextEditor&&a.edtOnChangeSingleTextEditor(e,t,i,d,l.dummy)},l.$CSS("borderRadius","0"),apn.widgets.utils.$O2I(e,s,h,l),o&&o(l),l.dummy.style.lineHeight=d.style.lineHeight,d.value=h.text||"",l.apnShow(),d.focus(),p||d.select(),d.onkeypress(),p?(l.dummy.style.width="100%",l.dummy.offsetHeight<l.clientHeight?l.scrollTop=0:"top"==h.textValign?l.scrollTop=0:"bottom"==h.textValign?l.scrollTop=Math.max(0,d.offsetHeight-l.clientHeight):l.scrollTop=Math.max(0,(d.offsetHeight-l.clientHeight)/2)):(l.dummy.style.width="auto",l.dummy.offsetHeight<l.clientHeight?(d.style.height=l.clientHeight+"px","top"==h.textValign?(d.style.paddingTop="0px",d.style.paddingBottom=l.clientHeight-l.dummy.offsetHeight+"px"):"bottom"==h.textValign?(d.style.paddingTop=l.clientHeight-l.dummy.offsetHeight+"px",d.style.paddingBottom="0px"):(d.style.paddingTop=(l.clientHeight-l.dummy.offsetHeight)/2+"px",d.style.paddingBottom=(l.clientHeight-l.dummy.offsetHeight)/2+"px")):(d.style.height=l.dummy.offsetHeight+"px",d.style.paddingTop="0px",d.style.paddingBottom="0px"),a.edtOnChangeSingleTextEditor&&a.edtOnChangeSingleTextEditor(e,t,i,d,l.dummy)),!1},apn.widgets.utils.$O2x=function(e,t,a,i){return Math.round(a*i)-(bx.HCL.getElementX2(t.parentNode)-bx.HCL.getElementX2(e.tag))},apn.widgets.utils.toScreenX=apn.widgets.utils.$O2x,apn.widgets.utils.$O2y=function(e,t,a,i){return Math.round(a*i)-(bx.HCL.getElementY2(t.parentNode)-bx.HCL.getElementY2(e.tag))},apn.widgets.utils.toScreenY=apn.widgets.utils.$O2y,apn.widgets.utils.$O2v=function(e,t){return Math.round(e*t)},apn.widgets.utils.toScreenW=apn.widgets.utils.$O2v,apn.widgets.utils.$O2w=function(e,t){return Math.round(e*t)},apn.widgets.utils.toScreenH=apn.widgets.utils.$O2w,apn.widgets.utils.$O3Z=function(e,t){return e/t},apn.widgets.utils.$O40=function(e,t){return e/t},apn.widgets.utils.setAsOpened=function(e,t){if(t&&t.data&&t.data.properties&&!t.data.properties.uiOpened)return t.data.properties.uiOpened=!0,t.setUpdated(!0),e.invalidateRect(t),e.draw(),!0},apn.widgets.utils.editWidget=function(e,t,a,i,n,r){window.AspenUIRun&&(apn.widgets.utils.setAsOpened(t,e)&&t.save(),AspenUIRun("edit_widget",{objectID:e.id,pageID:t.getPageID(),multiState:i,type:a,options:n,stateID:r&&r.stateID?r.stateID:void 0}))},apn.widgets.utils.getBorderUnderlineWeight=function(e){var t;return t=Math.round(bx.$checkNaN(parseInt(e.$css("font-size")))/17)||1,"bold"==e.$css("font-weight")&&t++,t},apn.widgets.utils.$O7H=function(e){try{for(var t=atob(e.split(",")[1]),a=new ArrayBuffer(t.length),i=new Uint8Array(a),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);var r=new Blob([a]);return URL.createObjectURL(r)}catch(t){return e}},apn.widgets.utils.patch3=function(e,t,a,i,n){var r=apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.exePatchOverlap?apn.dbUI.system.exePatchOverlap:0;e.$ObU=e.$ObU||e.$TAG("div",{style:"cursor:inherit;position:absolute;left:0px;top:0px;width:100%;height:100%"});var o=e.$ObU;if(void 0===t?t=o.$ObV:o.$ObV=t,void 0===a?a=o.$ObW:o.$ObW=a,void 0===i?i=o.$ObX:o.$ObX=i,void 0===n?n=o.$ObY:o.$ObY=n,t){var s=parseFloat(e.style.width)/a.naturalWidth;o.tagC=o.tagC||o.$TAG("div"),o.tagC.$A({style:"cursor:inherit;position:absolute;left:0px;top:"+(a.naturalHeight*s-r)+"px;height:"+(2*r+parseFloat(e.style.height)-(a.naturalHeight+n.naturalHeight)*s)+"px;width:100%;background:url("+i.getAttribute("src")+") repeat-y left center;"}),bx.HCL.DV.isAndroid()?o.tagC.$CSS("backgroundSize","100% "+i.naturalHeight+"px"):o.tagC.$CSS("backgroundSize","100% auto"),o.tagL=o.tagL||o.$TAG("div"),o.tagL.$A({style:"cursor:inherit;position:absolute;left:0px;top:0px;width:100%;height:"+a.naturalHeight*s+"px;background:url("+a.getAttribute("src")+") no-repeat left top;"}),o.tagL.$CSS("backgroundSize","100% 100%"),o.tagR=o.tagR||o.$TAG("div"),o.tagR.$A({style:"cursor:inherit;position:absolute;left:0px;bottom:0px;width:100%;height:"+n.naturalHeight*s+"px;background:url("+n.getAttribute("src")+") no-repeat left bottom;"}),o.tagR.$CSS("backgroundSize","100% 100%")}else{var s=parseFloat(e.style.height)/a.naturalHeight;o.tagC=o.tagC||o.$TAG("div"),o.tagC.$A({style:"cursor:inherit;position:absolute;top:0px;left:"+(a.naturalWidth*s-r)+"px;width:"+(2*r+parseFloat(e.style.width)-(a.naturalWidth+n.naturalWidth)*s)+"px;height:100%;background:url("+i.getAttribute("src")+") repeat-x center top;"}),bx.HCL.DV.isAndroid()?o.tagC.$CSS("backgroundSize",i.naturalWidth+"px 100%"):o.tagC.$CSS("backgroundSize","auto 100%"),o.tagL=o.tagL||o.$TAG("div"),o.tagL.$A({style:"cursor:inherit;position:absolute;left:0px;top:0px;height:100%;width:"+a.naturalWidth*s+"px;background:url("+a.getAttribute("src")+") no-repeat left top;"}),o.tagL.$CSS("backgroundSize","100% 100%"),o.tagR=o.tagR||o.$TAG("div"),o.tagR.$A({style:"cursor:inherit;position:absolute;right:0px;top:0px;height:100%;width:"+n.naturalWidth*s+"px;background:url("+n.getAttribute("src")+") no-repeat right top;"}),o.tagR.$CSS("backgroundSize","100% 100%")}return o},apn.widgets.utils.patch9=function(e,t,a,i,n,r,o,s,p,l,d,c,g){var u=apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.exePatchOverlap?apn.dbUI.system.exePatchOverlap:0;t=t||1,a=a||1,e.$ObZ=e.$ObZ||e.$TAG("div",{style:"cursor:inherit;position:absolute;left:0px;top:0px;width:100%;height:100%"});var h=e.$ObZ;if(void 0===i?i=h.$Oc0:h.$Oc0=i,void 0===n?n=h.$ObW:h.$ObW=n,void 0===r?r=h.$Oc1:h.$Oc1=r,void 0===o?o=h.$Oc2:h.$Oc2=o,void 0===s?s=h.$Oc3:h.$Oc3=s,void 0===p?p=h.$ObY:h.$ObY=p,void 0===l?l=h.$Oc4:h.$Oc4=l,void 0===d?d=h.$Oc5:h.$Oc5=d,void 0===c?c=h.$ObX:h.$ObX=c,h.tagLT=h.tagLT||h.$TAG("div"),h.tagLT.$A({style:"cursor:inherit;position:absolute;left:0px;top:0px;height:"+i.naturalHeight*a+"px;width:"+i.naturalWidth*t+"px;background:url("+i.getAttribute("src")+") no-repeat left top;"}),h.tagLT.$CSS("backgroundSize","100% 100%"),h.tagRT=h.tagRT||h.$TAG("div"),h.tagRT.$A({style:"cursor:inherit;position:absolute;right:0px;top:0px;height:"+l.naturalHeight*a+"px;width:"+l.naturalWidth*t+"px;background:url("+l.getAttribute("src")+") no-repeat right top;"}),h.tagRT.$CSS("backgroundSize","100% 100%"),h.tagLB=h.tagLB||h.$TAG("div"),h.tagLB.$A({style:"cursor:inherit;position:absolute;left:0px;bottom:0px;height:"+r.naturalHeight*a+"px;width:"+r.naturalWidth*t+"px;background:url("+r.getAttribute("src")+") no-repeat left bottom;"}),h.tagLB.$CSS("backgroundSize","100% 100%"),h.tagRB=h.tagRB||h.$TAG("div"),h.tagRB.$A({style:"cursor:inherit;position:absolute;right:0px;bottom:0px;height:"+s.naturalHeight*a+"px;width:"+s.naturalWidth*t+"px;background:url("+s.getAttribute("src")+") no-repeat right bottom;"}),h.tagRB.$CSS("backgroundSize","100% 100%"),bx.HCL.DV.isChrome()&&g){h.tagT=h.tagT||h.$TAG("canvas"),h.tagT.$A({style:"cursor:inherit;position:absolute;left:"+(i.naturalWidth*t-u)+"px;top:0px;",width:2*u+parseFloat(e.style.width)-(i.naturalWidth+l.naturalWidth)*t,height:d.naturalHeight*a});var x=h.tagT.getContext("2d");x.scale(t,a),x.fillStyle=x.createPattern(d,"repeat-x"),x.fillRect(0,0,x.canvas.width,x.canvas.height)}else h.tagT=h.tagT||h.$TAG("div"),h.tagT.$A({style:"cursor:inherit;position:absolute;left:"+(i.naturalWidth*t-u)+"px;top:0px;width:"+(2*u+parseFloat(e.style.width)-(i.naturalWidth+l.naturalWidth)*t)+"px;height:"+d.naturalHeight*a+"px;background:url("+d.getAttribute("src")+") repeat-x center top;"}),bx.HCL.DV.isAndroid()?h.tagT.$CSS("backgroundSize",d.naturalWidth+"px 100%"):h.tagT.$CSS("backgroundSize","auto 100%");if(bx.HCL.DV.isChrome()&&g){h.tagB=h.tagB||h.$TAG("canvas"),h.tagB.$A({style:"cursor:inherit;position:absolute;left:"+(r.naturalWidth*t-u)+"px;bottom:0px;",width:2*u+parseFloat(e.style.width)-(r.naturalWidth+s.naturalWidth)*t,height:o.naturalHeight*a});var x=h.tagB.getContext("2d");x.scale(t,a),x.fillStyle=x.createPattern(o,"repeat-x"),x.fillRect(0,0,x.canvas.width,x.canvas.height)}else h.tagB=h.tagB||h.$TAG("div"),h.tagB.$A({style:"cursor:inherit;position:absolute;left:"+(r.naturalWidth*t-u)+"px;bottom:0px;width:"+(2*u+parseFloat(e.style.width)-(r.naturalWidth+s.naturalWidth)*t)+"px;height:"+o.naturalHeight*a+"px;background:url("+o.getAttribute("src")+") repeat-x center bottom;"}),bx.HCL.DV.isAndroid()?h.tagB.$CSS("backgroundSize",o.naturalWidth+"px 100%"):h.tagB.$CSS("backgroundSize","auto 100%");if(bx.HCL.DV.isChrome()&&g){h.tagL=h.tagL||h.$TAG("canvas"),h.tagL.$A({style:"cursor:inherit;position:absolute;top:"+(i.naturalHeight*a-u)+"px;left:0px;",height:2*u+parseFloat(e.style.height)-(i.naturalHeight+r.naturalHeight)*a,width:n.naturalWidth*t});var x=h.tagL.getContext("2d");x.scale(t,a),x.fillStyle=x.createPattern(n,"repeat-y"),x.fillRect(0,0,x.canvas.width,x.canvas.height)}else h.tagL=h.tagL||h.$TAG("div"),h.tagL.$A({style:"cursor:inherit;position:absolute;top:"+(i.naturalHeight*a-u)+"px;left:0px;height:"+(2*u+parseFloat(e.style.height)-(i.naturalHeight+r.naturalHeight)*a)+"px;width:"+n.naturalWidth*t+"px;background:url("+n.getAttribute("src")+") repeat-y left center;"}),bx.HCL.DV.isAndroid()?h.tagL.$CSS("backgroundSize","100% "+n.naturalHeight+"px"):h.tagL.$CSS("backgroundSize","100% auto");if(bx.HCL.DV.isChrome()&&g){h.tagR=h.tagR||h.$TAG("canvas"),h.tagR.$A({style:"cursor:inherit;position:absolute;top:"+(l.naturalHeight*a-u)+"px;right:0px;",width:p.naturalWidth*t,height:2*u+parseFloat(e.style.height)-(l.naturalHeight+s.naturalHeight)*a});var x=h.tagR.getContext("2d");x.scale(t,a),x.fillStyle=x.createPattern(p,"repeat-y"),x.fillRect(0,0,x.canvas.width,x.canvas.height)}else h.tagR=h.tagR||h.$TAG("div"),h.tagR.$A({style:"cursor:inherit;position:absolute;top:"+(l.naturalHeight*a-u)+"px;right:0px;height:"+(2*u+parseFloat(e.style.height)-(l.naturalHeight+s.naturalHeight)*a)+"px;width:"+p.naturalWidth*t+"px;background:url("+p.getAttribute("src")+") repeat-y right center;"}),bx.HCL.DV.isAndroid()?h.tagR.$CSS("backgroundSize","100% "+p.naturalHeight+"px"):h.tagR.$CSS("backgroundSize","100% auto");return h.tagC=h.tagC||h.$TAG("div"),h.tagC.$A({style:"cursor:inherit;position:absolute;top:"+(i.naturalHeight*a-u)+"px;left:"+(i.naturalWidth*t-u)+"px;height:"+(2*u+parseFloat(e.style.height)-(i.naturalHeight+r.naturalHeight)*a)+"px;width:"+(2*u+parseFloat(e.style.width)-(i.naturalWidth+l.naturalWidth)*t)+"px;background:url("+c.getAttribute("src")+") repeat left top;"}),h.tagC.$CSS("backgroundSize",100*t+"% "+100*a+"%"),h},apn.widgets.utils.getHTML=function(e,t,a,i,n,r){function o(e){var t=1.2;apn.fonts&&apn.fonts[e.font]&&void 0!==apn.fonts[e.font].height&&(t=apn.fonts[e.font].height);var a=parseInt(e.fontSize)*t;return e.lnSp&&(a+=e.lnSp),a}var s=apn.IWidget.htmlRender(this,t,a,i),p="<div";return s.css+="word-wrap:break-word;",s.style.textPadding?s.css+="overflow:hidden;":s.css+="overflow:visible;",s.style.textWordWrap&&(s.css+="white-space:pre-wrap;"),s.style.textAlign&&(s.css+="text-align:"+s.style.textAlign+";"),s.style.ltrSp&&(s.css+="letter-spacing:"+parseFloat(s.style.ltrSp).toFixed(3)+"px;"),s.style.textMultiLine&&o(s.style)?s.css+="line-height:"+o(s.style).toFixed(1)+"px;":s.css+="line-height:"+(s.h-2*s.lineWidth)+"px;",n||"top"!=s.style.textValign&&(s.css+="display:table;"),p+=' style="'+s.css+'"',p+=' class="apxWgt1"',p+=r&&r.noId?">":' data-apx-id="'+i+'">',n?p+=n(t,a,i,s):("top"!=s.style.textValign&&(p+='<div style="display:table-cell;vertical-align:'+s.style.textValign+'">'),p+=apn.IWidget.exeFormatText(s.style.text,{xml:!0}),"top"!=s.style.textValign&&(p+="</div>")),p+="</div>"},apn.widgets.utils.exeRenderTag=function(e,t,a,i,n,r,o){var s=apn.IWidget.getCanvasObjectStyle({},this,t.project,n.create.data.styles);return apn.IWidget.exeApplyCSSpre(n,s,i,apn.widgets.utils.$O2x(a,i,n.init.position.x,r),apn.widgets.utils.$O2y(a,i,n.init.position.y,o),apn.widgets.utils.$O2v(n.init.shape.w,r),apn.widgets.utils.$O2w(n.init.shape.h,o),r,o),i.apnCur.apxCreatedFromTag&&1==r&&1==o?(apn.IWidget.exeRenderPosition(a,i,n,t.project,r,o),apn.IWidget.exeSetCursor(i,s.csr||"inherit"),e&&e.textFit&&apn.widgets["apn.wgt.singleText"]._apxNoFloatLetterSpacing&&!(n.create.data.properties&&n.create.data.properties.attrs&&n.create.data.properties.attrs.apxNoLtrSpProcessed)&&(console.error("reset single text"),apn.IWidget.exeApplyCSSpost(n,s,i,apn.widgets.utils.$O2x(a,i,n.init.position.x,r),apn.widgets.utils.$O2y(a,i,n.init.position.y,o),apn.widgets.utils.$O2v(n.init.shape.w,r),apn.widgets.utils.$O2w(n.init.shape.h,o),r,o,{setTextOnly:!0}))):(apn.IWidget.exeRenderSize(t,a,i,n,t.project,r,o),apn.IWidget.exeRenderPosition(a,i,n,t.project,r,o),apn.IWidget.exeApplyCSSpost(n,s,i,apn.widgets.utils.$O2x(a,i,n.init.position.x,r),apn.widgets.utils.$O2y(a,i,n.init.position.y,o),apn.widgets.utils.$O2v(n.init.shape.w,r),apn.widgets.utils.$O2w(n.init.shape.h,o),r,o)),e&&e.text&&(i.tagOnPostResize=function(e,t){var i=a.wgtGetProperty(t.apnOID,"apxText");i&&(t.apnCur.forced=!0,apn.IWidget.exeSetText(t,i))}),i},apn.widgetLibraryLoad=function(e,t,a,i){function n(e,n){function r(e,a,n){y.length?bx.HCL.importModules(y,2,!1,o):h.length?bx.HCL.importModules(h,void 0,t,s):g.length?bx.HCL.importModules(g,void 0,t,p):i?i(!0):(document.body.style.background="inherit",bx.Loader.load())}function o(e,a,n){h.length?bx.HCL.importModules(h,void 0,t,s):g.length?bx.HCL.importModules(g,void 0,t,p):i?i(!0):(document.body.style.background="inherit",bx.Loader.load())}function s(e,a,n){g.length?bx.HCL.importModules(g,void 0,t,p):i?i(!0):(document.body.style.background="inherit",bx.Loader.load())}function p(e,t,a){i?i(!0):(document.body.style.background="inherit",bx.Loader.load())}if(e==bx.HCL.XHR.stateDone){var l;if(apn.CExe.DEBUG)l=JSON.parse(n);else try{l=JSON.parse(n)}catch(e){console.error(e)}if(!l)return void(i?i(!1):alert("Cannot load the Editor system due to temporary network problem or system configuration problem. Please reload again or consult to the support team."));var d,c,g=[],u={},h=[],x={};for(d=0;d<l.length;d++)l[d].paths&&l[d].paths.length>1&&(x[l[d].paths[0]]||(x[l[d].paths[0]]=!0,h.push(l[d].paths[0]+"/wgt.js")));for(d=0;d<l.length;d++)if(l[d].paths&&l[d].paths.length)for(c=l[d].paths.length>1?1:0;c<l[d].paths.length;c++)u[l[d].paths[c]]||(u[l[d].paths[c]]=!0,g.push(l[d].paths[c]+"/wgt.js"));if(a&&a.length)for(d=0;d<a.length;d++){for(c=0;c<h.length;c++)0==h[c].indexOf(a[d])&&(h.splice(c,1),c--);for(c=0;c<g.length;c++)0==g[c].indexOf(a[d])&&(g.splice(c,1),c--)}var f,y=[],b=[],v={};for(d=0;d<l.length;d++)if(l[d].libs&&l[d].libs.length)for(c=0;c<l[d].libs.length;c++)(f=l[d].libs[c].file||l[d].libs[c].link)&&(v[f]||(v[f]=!0,l[d].libs[c].preload?b.push(f):y.push(f)));window.location.href.indexOf("wren.kr")!=-1||window.location.href.indexOf("ifox.kr")!=-1?bx.HCL.importModule.NO_EXCEPTION_HANDLING=!0:bx.HCL.importModule.NO_EXCEPTION_HANDLING=!1,b.length?bx.HCL.importModules(b,2,!1,r):y.length?bx.HCL.importModules(y,2,!1,o):h.length?bx.HCL.importModules(h,void 0,t,s):g.length?bx.HCL.importModules(g,void 0,t,p):i?i(!0):(document.body.style.background="inherit",bx.Loader.load())}}i||window.apn&&apn.dbUI&&apn.dbUI.brand&&apn.dbUI.brand.logoFull&&(document.body.style.background='url("'+apn.dbUI.brand.logoFull+'") no-repeat center center fixed',document.body.style.backgroundSize="auto 40%"),bx.HCL.Http("GET","/DB/"+e+"/publishWgts.json",!0,n,t)},window.apn=window.apn||{},apn.widgets=apn.widgets||{utils:{}};var xa;xa={},xa.exeItrNoResize=!0,xa.exeItrNoText=!0,xa.apdNeedFontPreload=!0,xa.styleMap={title:!0,visibility:!0,fillStyle:!0,font:!0,fontSize:!0,fontStyle:!0,textAlign:!0,ltrSp:!0,lnSp:!1,alpha:!0,angle:!0},xa.editor={placeHolder:"Double click to edit"},xa.properties={attrs:{v:2,plainText:"",text:"",exeText:"",mediaID:[]}},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,this,"apn.CRtxt",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n)},xa.srcOnPreParse=function(e){var t=e.create.data.properties.attrs;t.mediaID=t.mediaID||[],t.exeText=t.exeText||"",t.plainText=t.plainText||""},xa.exeCreateTag=function(e,t,a,i,n){var r=document.body.$TAG("div",{style:"position:absolute;overflow:hidden;"});r.$CSS({boxSizing:"border-box;",backgroundColor:"red"}),r.apnCur={},r.textTag=void 0;var o=a.create.data.properties&&a.create.data.properties.attrs;if(o&&(o.text||o.exeText)){r.innerHTML=this._convertXhtmlRule(o.exeText||o.text);var s=r.querySelectorAll("img");if(s.length)for(var p=0;p<s.length;p++)s[p].dataset&&s[p].dataset.id&&(s[p].src=t.mediaURL(s[p].dataset.id))}if(1!=i||1!=n){var l=r.firstElementChild;l&&(l.style.transformOrigin="left top",l.style.msTransformOrigin="left top",l.style.webkitTransformOrigin="left top",l.style.transform="scale("+i+", "+n+")",l.style.msTransform="scale("+i+", "+n+")",l.style.webkitTransform="scale("+i+", "+n+")")}return r},xa.edtOnRemoveResource=function(e,t,a){var i,n,r=e.getObjectByID(t),o=r.data.properties&&r.data.properties.attrs;if(o&&o.text){i=r.getSnapshotTag(),i.innerHTML=o.text,n=i.querySelectorAll('img[data-id="'+a+'"]')||[];for(var s=0;s<n.length;s++)n[s].parentElement&&n[s].parentElement.removeChild(n[s]);o.text=i.innerHTML,o.mediaID=[],n=i.querySelectorAll("img[data-id]")||[];for(var s=0;s<n.length;s++)o.mediaID.indexOf(n[s].dataset.id)==-1&&o.mediaID.push(n[s].dataset.id);e.$Oc6(o,r),r.refresh()}},xa.exeRenderTag=function(e,t,a,i,n,r){function o(e,t){if(t.fontFamily&&parseInt(t.fontSize)&&t.letterSpacing&&parseInt(t.letterSpacing)<0){var a=parseInt(t.fontSize)*(.1+Math.abs(.02*parseInt(t.letterSpacing)));e.style.paddingRight=Math.ceil(a)+"px"}else e.style.paddingRight="0px"}var s=i.create.data.properties&&i.create.data.properties.attrs;if(!a.firstElementChild&&(s.text||s.exeText))return void bx.Trace.log("RTXT","warning","cannot render rxtx. wrapper tag empty");var p=apn.IWidget.getCanvasObjectStyle({},this,e.project,i.create.data.styles);apn.IWidget.exeApplyCSSpre(i,p,a,apn.widgets.utils.$O2x(t,a,i.init.position.x,n),apn.widgets.utils.$O2y(t,a,i.init.position.y,r),apn.widgets.utils.$O2v(i.init.shape.w,n),apn.widgets.utils.$O2w(i.init.shape.h,r),n,r),apn.IWidget.exeRenderSize(e,t,a,i,e.project,n,r),apn.IWidget.exeRenderPosition(t,a,i,e.project,n,r),apn.IWidget.exeApplyCSSpost(i,p,a,apn.widgets.utils.$O2x(t,a,i.init.position.x,n),apn.widgets.utils.$O2y(t,a,i.init.position.y,r),apn.widgets.utils.$O2v(i.init.shape.w,n),apn.widgets.utils.$O2w(i.init.shape.h,r),n,r),p=this.$Oc7(t.wgtGetProperty(a.apnOID,"v"),p);var l=a.firstElementChild;if(l){o(l,p);for(var d in p)l.style[d]=p[d];l.style.webkitUserSelect="none",l.style.mozUserSelect="none",l.style.msUserSelect="none",l.style.userSelect="none"}return l},xa.exeOnLoad=function(e,t){var a=e.screen.objects[t],i=(a.init.shape.w,a.init.shape.h,e.wgtTag(t));parseInt(i.style.width),parseInt(i.style.height)},xa.onEdit=function(e,t,a,i){var n=e.getObjectByID(t);apn.widgets.utils.setAsOpened(e,n)&&e.save();var r=e.getRichEditTAG(),o=apn.IWidget.getCanvasObjectStyle({},this,e.getData(),n.data.styles);return this.$Oc8(e,n,o,r),r.apnShow(n,o),!1},xa._convertXhtmlRule=function(e){return e.indexOf("<br>")!=-1&&e.indexOf("<br></br>")==-1&&(e=e.replace(/<br>/g,"<br></br>")),e.indexOf("<br/>")!=-1&&(e=e.replace(/<br\/>/g,"<br></br>")),e=e.replace(/&nbsp;/g,"&#160;")},xa.$Oc9={},xa.$Oc7=function(e,t){var a=this.$Oc9;return a.fontFamily=t.font,a.fontSize=t.fontSize,a.color=t.fontStyle,a.textAlign=t.textAlign,a.letterSpacing=t.ltrSp+"px",a},xa.$Oc8=function(e,t,a,i){var n=a.lineWidth&&a.strokeStyle?t.shape.lw:0,r=a.lineWidth&&a.strokeStyle?a.lineWidth:0,o=e.tagVP.offsetLeft+e.toScreenX(t.position.x+n),s=e.tagVP.offsetTop+e.toScreenY(t.position.y+n),p=e.getZoomPercent()/100,l=e.toScreenW(t.shape.w-r)/p,d=e.toScreenH(t.shape.h-r)/p;a=this.$Oc7(e.wgtGetProperty(t.id,"v"),a),i.style.transform="",i.style.left=o+"px",i.style.top=s+"px",i.style.width=l+"px",i.style.height=d+"px",o=-(l-l*p)/2,s=-(d-d*p)/2;for(var c in a)i.style[c]=a[c];i.style.transform="translate("+o+"px,"+s+"px) scale("+p+","+p+")",t.getAngle&&t.getAngle()&&(i.style.transform+="rotate("+t.getAngle()+"rad)"),i.style.lineHeight="normal",i.style.backgroundColor="transparent",i.style.borderColor="transparent"},xa.pubOnGetFontList=function(e,t,a){var i,n=e.pages[t].objects[a];if(n&&n.create.data&&n.create.data.properties&&n.create.data.properties.attrs&&n.create.data.properties.attrs.exeText){i=document.createElement("div"),i.innerHTML=this._convertXhtmlRule(n.create.data.properties.attrs.exeText);var r,o,s,p=[],l=document.createNodeIterator(i.firstElementChild,NodeFilter.SHOW_ELEMENT,null,!1);for(n.create.data.styles&&n.create.data.styles.font&&"inherit"!==n.create.data.styles.font&&p.push(n.create.data.styles.font);s=l.nextNode();)if(s.style&&s.style.fontFamily&&"inherit"!==s.style.fontFamily){for(o=!1,r=0;r<p.length;r++)if(p[r]===s.style.fontFamily){o=!0;break}o||p.push(s.style.fontFamily)}for(l.detach(),r=0;r<p.length;r++)p[r]&&(p[r]=p[r].replace(/\"/g,""));return p}return[]},apn.widgets["apn.wgt.rtxt"]=xa,window.apn=window.apn||{},apn.widgets=apn.widgets||{utils:{}};var xa;xa={},xa.exeItrNoResize=!0,xa.exeItrNoText=!0,xa.apdNeedFontPreload=!0,xa.styleMap={title:!0,visibility:!0,fillStyle:!0,font:!0,fontSize:!0,fontStyle:!0,textAlign:!0,ltrSp:!0,lnSp:!0,alpha:!0,angle:!0},xa.editor={placeHolder:"Double click to edit"},xa.properties={attrs:{exeText:"",prvText:"",text:"",plainText:""}},xa.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,this,"apn.CRtxt",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n)},xa.exeCreateTag=function(e,t,a,i,n,r){var o=null;if(e.o.standAlone&&r&&apn.CExe.getElementByAttr("div","data-apx-id",r))o=apn.CExe.getElementByAttr("div","data-apx-id",r),o.apnCur={},o.apnCur.apxCreatedFromTag=!0;else{o=document.body.$TAG("div",{style:"position:absolute;overflow:hidden;"}),o.apnCur={},o.apnCur.apxCreatedFromTag=!1;var s=a.create.data.properties&&a.create.data.properties.attrs||{};o.innerHTML=(e.o.standAlone?this._convertXhtmlRule(s.exeText):s.prvText)||"",o.$CSS({boxSizing:"border-box;",backgroundColor:"red"})}o.textTag=void 0;var p=o.firstElementChild;return p&&(1==i&&1==n||(p.style.transformOrigin="left top",p.style.msTransformOrigin="left top",p.style.webkitTransformOrigin="left top",p.style.transform="scale("+i+", "+n+")",p.style.msTransform="scale("+i+", "+n+")",p.style.webkitTransform="scale("+i+", "+n+")")),o},xa.exeRenderTag=function(e,t,a,i,n,r){function o(e,t){if(t.fontFamily&&parseInt(t.fontSize)&&t.letterSpacing&&parseInt(t.letterSpacing)<0){var a=parseInt(t.fontSize)*(.1+Math.abs(.02*parseInt(t.letterSpacing)));e.style.paddingRight=Math.ceil(a)+"px"}else e.style.paddingRight="0px"}var s=i.create.data.properties&&i.create.data.properties.attrs;if(!a.firstElementChild&&(s.text||s.exeText))return void bx.Trace.log("RTXT","warning","cannot render rxtx. wrapper tag empty");if(!(e.o.standAlone&&a.apnOID&&apn.CExe.getElementByAttr("div","data-apx-id",a.apnOID))){var p=apn.IWidget.getCanvasObjectStyle({},this,e.project,i.create.data.styles);apn.IWidget.exeApplyCSSpre(i,p,a,apn.widgets.utils.$O2x(t,a,i.init.position.x,n),apn.widgets.utils.$O2y(t,a,i.init.position.y,r),apn.widgets.utils.$O2v(i.init.shape.w,n),apn.widgets.utils.$O2w(i.init.shape.h,r),n,r),apn.IWidget.exeRenderSize(e,t,a,i,e.project,n,r),apn.IWidget.exeRenderPosition(t,a,i,e.project,n,r),apn.IWidget.exeApplyCSSpost(i,p,a,apn.widgets.utils.$O2x(t,a,i.init.position.x,n),apn.widgets.utils.$O2y(t,a,i.init.position.y,r),apn.widgets.utils.$O2v(i.init.shape.w,n),apn.widgets.utils.$O2w(i.init.shape.h,r),n,r),p=this.$Oc7(t.wgtGetProperty(a.apnOID,"v"),p);var l=a.firstElementChild;if(l){o(l,p);for(var d in p)l.style[d]=p[d];l.style.width=l.parentNode.offsetWidth+"px"}return l}},xa.exeOnLoad=function(e,t){},xa.onEdit=function(e,t,a,i){var n=e.getObjectByID(t);apn.widgets.utils.setAsOpened(e,n)&&e.save();var r=e.getRichEditTAG(),o=apn.IWidget.getCanvasObjectStyle({},this,e.getData(),n.data.styles);return this.$Oc8(e,n,o,r),r.apnShow(n,o),!1},xa._convertXhtmlRule=function(e){return e.indexOf("<br")!=-1&&(e=e.replace(/<(\/br|br)([^>]*)>/gi,function(e){return"</br>"==e?"":"<br></br>"})),e=e.replace(/&nbsp;/g,"&#160;")},xa.$Oc9={},xa.$Oc7=function(e,t){var a=this.$Oc9;return a.fontFamily=t.font,a.fontSize=t.fontSize,a.color=t.fontStyle,a.textAlign=t.textAlign,a.letterSpacing=t.ltrSp+"px",a.lineHeight=1.3*parseInt(t.fontSize)+t.lnSp+"px",a},xa.$Oc8=function(e,t,a,i){var n=a.lineWidth&&a.strokeStyle?t.shape.lw:0,r=a.lineWidth&&a.strokeStyle?a.lineWidth:0,o=e.tagVP.offsetLeft+e.toScreenX(t.position.x+n),s=e.tagVP.offsetTop+e.toScreenY(t.position.y+n),p=e.getZoomPercent()/100,l=e.toScreenW(t.shape.w-r)/p,d=e.toScreenH(t.shape.h-r)/p;
a=this.$Oc7(e.wgtGetProperty(t.id,"v"),a),i.style.transform="",i.style.left=o+"px",i.style.top=s+"px",i.style.width=l+"px",i.style.height=d+"px",o=-(l-l*p)/2,s=-(d-d*p)/2;for(var c in a)i.style[c]=a[c];i.style.transform="translate("+o+"px,"+s+"px) scale("+p+","+p+")",t.getAngle&&t.getAngle()&&(i.style.transform+="rotate("+t.getAngle()+"rad)"),i.style.backgroundColor="transparent",i.style.borderColor="transparent"},xa.pubOnGetFontList=function(e,t,a){var i,n=e.pages[t].objects[a];if(n&&n.create.data&&n.create.data.properties&&n.create.data.properties.attrs&&n.create.data.properties.attrs.exeText){i=document.createElement("div"),i.innerHTML=this._convertXhtmlRule(n.create.data.properties.attrs.exeText);var r,o,s,p=[],l=document.createNodeIterator(i.firstElementChild,NodeFilter.SHOW_ELEMENT,null,!1);for(n.create.data.styles&&n.create.data.styles.font&&"inherit"!==n.create.data.styles.font&&p.push(n.create.data.styles.font);s=l.nextNode();)if(s.style&&s.style.fontFamily&&"inherit"!==s.style.fontFamily){for(o=!1,r=0;r<p.length;r++)if(p[r]===s.style.fontFamily){o=!0;break}o||p.push(s.style.fontFamily)}for(l.detach(),r=0;r<p.length;r++)p[r]&&(p[r]=p[r].replace(/\"/g,""));return p}return[]},xa.pubOnGetHTML=function(e,t,a,i){function n(e){var t=1.2;apn.fonts&&apn.fonts[e.font]&&void 0!==apn.fonts[e.font].height&&(t=apn.fonts[e.font].height);var a=parseInt(e.fontSize)*t;return e.lnSp&&(a+=e.lnSp),a}var r=apn.IWidget.htmlRender(this,e,t,a),o="<div";r.style.textAlign&&(r.css+="text-align:"+r.style.textAlign+";"),r.style.ltrSp&&(r.css+="letter-spacing:"+parseFloat(r.style.ltrSp).toFixed(3)+"px;"),isNaN(r.style.lnSp)||(r.css+="line-height:"+(n(r.style).toFixed(1)+r.style.lnSp)+"px;"),o+=' style="'+r.css+'"',o+=' class="apxWgt1"',o+=i&&i.noId?">":' data-apx-id="'+a+'">';var s=e.pages[t].objects[a];return s=s&&s.create&&s.create.data&&s.create.data.properties&&s.create.data.properties.attrs,s&&s.exeText&&(o+=this._convertXhtmlRule(s.exeText)),o+="</div>"},apn.widgets["apn.wgt.simplertxt"]=xa,window.apn=window.apn||{},apn.CExe=function(e,t,a,i){bx.inClassing||(window.JSON&&!JSON.$Oca&&(JSON.$Oca=JSON.parse,JSON.parse=function(){return arguments[0]instanceof Object?arguments[0]:JSON.$Oca.apply(JSON,arguments)}),this.o=i||{},this.o.backgroundColor=this.o.backgroundColor||"#FFFFFF",this.o.eventSystem=2,this.o.screenLayoutCenter||(this.o.screenLayoutCenter=!1),this.o._screenStretchBK=this.o.screenStretch,this.o._screenLayoutCenterBK=this.o.screenLayoutCenter,this.clsPageManager=bx.CPageManager,this.$O2J=null,this._loadSession=0,apn.CExe.$O2K=apn.CExe.$O2K||0,apn.CExe.$O2K++,a=a||{},a.type=a.type?a.type|bx.CWnd.TYPE_NO_VIEWPORT:bx.CWnd.TYPE_NO_VIEWPORT,this.constructor==apn.CExe&&apn.theme&&apn.theme.EDU&&apn.theme.EDU.properties&&apn.theme.EDU.properties.exeScreenSetup&&(this.IStub_setup=void 0),bx.CWnd.call(this,e,"apn$CExe_"+apn.CExe.$O2K,"",t||new bx.CPosition({type:"overlap",coord:{top:"0px",left:"0px"},width:"100%",height:"100%"}),new bx.CMode,a))},bx.$Inherit(apn.CExe,bx.CWnd),apn.CExe.sceneEditableStyles={visibility:!0,alpha:!0,angle:!0},apn.CExe.SCROLLBAR_WIDTH=17,apn.CExe.SCROLLBAR_BTN_COLOR="#6e6e6e",apn.CExe.TIME_TOASTMSG_ERROR=5e3,apn.CExe.TIME_DEF_TRANSITION=700,apn.CExe.SW_TITLE="AspenEDU",apn.CExe.PATH_SKIN_IMG="imgs/skins",apn.CExe.NULL_AUDIO="data:audio/mp3;base64,SUQzBAAAAAAAGVRTU0UAAAAPAAADTGF2ZjU0LjYzLjEwNAD/4zjAAAAAAAAAAAAASW5mbwAAAAcAAAAMAAAHmAAvLy8vLy8vL0JCQkJCQkJCVVVVVVVVVVVoaGhoaGhoaGh7e3t7e3t7e46Ojo6Ojo6OoaGhoaGhoaGhtLS0tLS0tLTHx8fHx8fHx9ra2tra2tra2u3t7e3t7e3t//////////9MYXZmNTQuNjMuMTA0AAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/4yjEAAAAA0gAAAAATEFNRVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/4yjEfAAAA0gAAAAAVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/4yjEfAAAA0gAAAAAVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/4yjEfAAAA0gAAAAAVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/4yjEfAAAA0gAAAAAVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/4yjEfAAAA0gAAAAAVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/4yjEfAAAA0gAAAAAVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/4yjEfAAAA0gAAAAAVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/4yjEfAAAA0gAAAAAVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/4yjEfAAAA0gAAAAAVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/4yjEfAAAA0gAAAAAVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/4yjEfAAAA0gAAAAAVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUQUcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/w==",apn.CExe.DEBUG=!1,bx.CTransition.RELATIVE_TIME_SYSTEM=!0,bx.HCL.getElementX2=function(e,t){var a=0;for(void 0===this.$Ocb&&(this.$Ocb=bx.HCL.DV.isIE());e&&e!=document;)a+=e.offsetLeft||bx.$checkNaN(parseInt(e.style.left)),t&&(a-=e.scrollLeft),e=this.$Ocb?e.parentNode:e.offsetParent||e.parentNode;return a},bx.HCL.getElementY2=function(e,t){var a=0;for(void 0===this.$Ocb&&(this.$Ocb=bx.HCL.DV.isIE());e&&e!=document;)a+=e.offsetTop||bx.$checkNaN(parseInt(e.style.top)),t&&(a-=e.scrollTop),e=this.$Ocb?e.parentNode:e.offsetParent||e.parentNode;return a},apn.CExe.GL=function(e,t){return e?t&&e[t]?e[t][bx.HCL.DV.getLanguage()]?e[t][bx.HCL.DV.getLanguage()]:e[t].en?e[t].en:e[t]:e[bx.HCL.DV.getLanguage()]?e[bx.HCL.DV.getLanguage()]:e.en?e.en:e:e},apn.CExe.ACCEL=function(e){bx.HCL.DV.isIE()||(apn.CES.transformSet(e,"z",0),e.style.backfaceVisibility||(e.style.backfaceVisibility="hidden"),apn.CES.transformApply(e))},apn.CExe.fontHasBold=function(e){return apn.Project.fontHasBold(null,e)},apn.CExe.trace=function(){return!!bx.$getParamFromURL(location.href,"APXTRACE")},apn.CExe.getElementByAttr=function(e,t,a){if(void 0===t||void 0===a)return null;if(document.querySelector)return document.querySelector((e||"")+"["+t+"='"+a+"']");for(var i=document.getElementsByTagName(e),n=0;n<i.length;n++)if(i[n].getAttribute(t)==a)return i[n];return null},apn.CExe.prototype.init=function(e){function t(e){function t(e){e.canvas&&e.canvas.$O3X("exeOnScreenRefresh",e.id)}"apnFontLoad"==e.data&&l.$O2J&&l.$O2J.iteratePage(t)}function a(e){function t(){return!(!l.__iosLastTouchS_dtm||l.__iosLastTouchS_dtm>500||l.__iosLastTouchS_fingers>1)}if(e||(e=window.event),"touchstart"==e.type){var a=e.timeStamp,i=l.__iosLastTouchS_tm||a;l.__iosLastTouchS_dtm=a-i,l.__iosLastTouchS_fingers=e.targetTouches.length,l.__iosLastTouchS_tm=a}var n=e.srcElement;if("touchstart"!=e.type&&"touchend"!=e.type||!n.tagName||"input"!=n.tagName.toLowerCase()&&"textarea"!=n.tagName.toLowerCase()&&"select"!=n.tagName.toLowerCase()||t()){for(;n&&n!=n.ownerDocument;){if(n.apnScroll&&!t())return;n=n.parentNode}bx.Event.preventDefault(e)}}function i(e){e||(e=window.event);for(var t=e.srcElement;t&&t!=t.ownerDocument;){if(t.apnScroll)return;t=t.parentNode}bx.Event.preventDefault(e)}function n(e){if(e.data&&e.data.CExe){var t=e.data.CExe;"onVisibilityChange"==t.type&&(l._iframeVisibilityState=t.data,r(),"visible"==l._iframeVisibilityState?bx.Transition.resumeTimer():"hidden"==l._iframeVisibilityState&&bx.Transition.pauseTimer())}}function r(){function e(e){e.canvas&&e.canvas.$O3X("exeOnScreenVisibility",e.id,t)}var t=l._iframeVisibilityState||document.visibilityState;"visible"!=t&&"hidden"!=t||l.$O2J&&l.$O2J.iteratePage(e)}function o(e){if(e.data&&e.data.apxID&&l.getCurrentPageID()&&l.project&&l.project.pages[l.getCurrentPageID()]&&l.project.pages[l.getCurrentPageID()].objects[e.data.apxID]){var t=apn.Project.getWidgetModule(l.project.pages[l.getCurrentPageID()].objects[e.data.apxID].create.data);if(t&&t.exeOnReceiveMessage){var a=l.getPage(l.getCurrentPageID()).canvas;if(a){if(apn.CExe.DEBUG)t.exeOnReceiveMessage(a,e.data.apxID,e.data.value);else try{t.exeOnReceiveMessage(a,e.data.apxID,e.data.value)}catch(e){console.error("Problem in source code of the widget. Please consult to the technical support team.")}return}}}}function s(e){e.ctrlKey&&65!=e.keyCode&&67!=e.keyCode&&86!=e.keyCode&&bx.Event.preventDefault(e),e.altKey&&bx.Event.preventDefault(e),(e.keyCode>=112&&e.keyCode<=121||123==e.keyCode)&&bx.Event.preventDefault(e)}function p(e,t){t.ctrlKey&&bx.Event.preventDefault(t)}this.updateStart(),document.body.style.background="none",this.$Occ=new bx.CWnd(this,this.tagId+"_cntr","",new bx.CPosition({type:"overlap",coord:{top:"0px",left:"0px"},width:"100%",height:"100%",noclip:!0}),new bx.CMode,{type:bx.CWnd.TYPE_NO_VIEWPORT}).create(),this.$Occ.init(!0),this.$Occ.tag.style.overflow="hidden",this.$O2J=new this.clsPageManager(this.$Occ,new bx.CPosition({type:"overlap",coord:{top:"0px",left:"0px"},width:"100%",height:"100%",noclip:!0})).create(),this.$O2J.init(!0),this.$Occ.tag.style.backgroundColor=apn.CES.$O6l(this.o.backgroundColor);var l=this;this.o.standAlone?(this.o.noScreenFix||(bx.HCL.DV.isIOS()&&(bx.Event.add(window,"touchmove",a,!1),bx.Event.add(window,"touchstart",a,!1),bx.Event.add(window,"touchend",a,!1)),bx.HCL.DV.isAndroid()&&(bx.CGesture.supportEventPassive()?bx.Event.add(window,"touchmove",i,{capture:!1,passive:!1}):bx.Event.add(window,"touchmove",i,!1))),window.parent!=window&&bx.Event.add(window,"message",n,!1)):(apn.CExe.DEBUG=!0,bx.Event.add(window,"message",t,!1)),apn.CExe.DEBUG&&(document.oncontextmenu=null),bx.Event.add(this.tag,"mousedown",function(e){bx.Event.isLeftButton(e)||bx.Event.isRightButton(e)||(e.preventDefault(),e.stopPropagation())},!1),bx.Event.add(document,"visibilitychange",r,!1),bx.Event.add(window,"message",o,!1),!this.o.standAlone&&bx.CConsole&&(this.$O3T=new bx.CConsole(this).create(),this.$O3T.init(),this.$O3T.setZindex(bx.UX.getZindex("alert"))),bx.$getParamFromURL(location.href,"APXABRDPXY")&&bx.$getParamFromURL(location.href,"APXABRDPXY").indexOf("Y")!=-1&&(bx.Event.add(window,"keydown",s,!0),bx.Event.setupMouseWheel(window,p,30)),this.updateEnd(),bx.CWnd.prototype.init.call(this,e)},apn.CExe.prototype.onResize=function(e,t,a,i){if(!this.$Ocd){var n=bx.CWnd.prototype.onResize.call(this,e,t,a,i);if(!this.o.noResize){var r;return this.o.standAlone&&this.project&&this.isRunning()&&(r=this._resizeIsFixed()),!this.$O5l||this.$O5l.w==e.w&&this.$O5l.h==e.h||!i&&bx.DOM.isVisible(this.tag)&&this.project&&this.isRunning()&&(r?this.resize():this.onRunByResize()),this.$O5l=e,n}}},apn.CExe.prototype.onGestureCoordTransformX=function(e,t){return this.stretchSX(e)},apn.CExe.prototype.onGestureCoordTransformY=function(e,t){return this.stretchSY(t)},apn.CExe.prototype.onRunByResize=function(){this.o.screenStretch&&this.o.standAlone?this.resize():(this.pause(),this.load(),this.run())},apn.CExe.prototype.onStyleScrollBar=function(e,t,a,i,n){if(!bx.HCL.DV.isIOS()&&!bx.HCL.DV.isAndroid())if(i=i||apn.CExe.SCROLLBAR_WIDTH,e=e||"#7f7f7f",t=t||e,a=a||"#dddddd",bx.HCL.DV.isIE())bx.HCL.getCssRule(".apnCExeScroll")||bx.HCL.addCssRule(".apnCExeScroll","scrollbar-arrow-color:"+e+";scrollbar-track-color:"+a+";scrollbar-face-color:"+e+";scrollbar-shadow-color:"+a+";scrollbar-highlight-color:"+a+";scrollbar-3dlight-color:"+a+";scrollbar-darkshadow-color:"+a+";");else{var r=Math.floor(.5*i);void 0!==n&&(r=Math.floor(i*n));var o;bx.HCL.getCssRule(".apnCExeScroll")||bx.HCL.addCssRule(".apnCExeScroll"," "),bx.HCL.getCssRule(".apnCExeScroll::-webkit-scrollbar")||bx.HCL.addCssRule(".apnCExeScroll::-webkit-scrollbar","height:"+i+"px;width:"+i+"px;z-index:"+3*bx.CCanvasWnd.ZINDEX_OBJECT+";"),(o=bx.HCL.getCssRule(".apnCExeScroll::-webkit-scrollbar-track:vertical"))?o.style.cssText="border-radius:"+r+"px;background-clip:content-box;background-color:"+a+";border:solid "+Math.round(.3*i)+"px rgba(255,255,255,0);box-sizing:border-box;box-shadow:inset 0px 0px 2px #888888;z-index:"+3*bx.CCanvasWnd.ZINDEX_OBJECT+";":bx.HCL.addCssRule(".apnCExeScroll::-webkit-scrollbar-track:vertical","border-radius:"+r+"px;background-clip:content-box;background-color:"+a+";border:solid "+Math.round(.3*i)+"px rgba(255,255,255,0);box-sizing:border-box;box-shadow:inset 0px 0px 2px #888888;z-index:"+3*bx.CCanvasWnd.ZINDEX_OBJECT+";"),(o=bx.HCL.getCssRule(".apnCExeScroll::-webkit-scrollbar-track:horizontal"))?o.style.cssText="border-radius:"+r+"px;background-clip:content-box;background-color:"+a+";border:solid "+Math.round(.3*i)+"px rgba(255,255,255,0);box-sizing:border-box;box-shadow:inset 0px 0px 2px #888888;z-index:"+3*bx.CCanvasWnd.ZINDEX_OBJECT+";":bx.HCL.addCssRule(".apnCExeScroll::-webkit-scrollbar-track:horizontal","border-radius:"+r+"px;background-clip:content-box;background-color:"+a+";border:solid "+Math.round(.3*i)+"px rgba(255,255,255,0);box-sizing:border-box;box-shadow:inset 0px 0px 2px #888888;z-index:"+3*bx.CCanvasWnd.ZINDEX_OBJECT+";"),(o=bx.HCL.getCssRule(".apnCExeScroll::-webkit-scrollbar-thumb"))?(o.style.cssText="border-radius:"+r+"px;background-clip:content-box;border:solid 1px rgba(255,255,255,0);background-image:none;background-color:"+e+";box-shadow:inset 0px 0px 3px #313131;z-index:"+3*bx.CCanvasWnd.ZINDEX_OBJECT+";",(o=bx.HCL.getCssRule(".apnCExeScroll::-webkit-scrollbar-thumb:hover"))&&(e==t?o.style.cssText="border-radius:"+r+"px;background-clip:content-box;border:solid 1px rgba(255,255,255,0);background-image:none;background-color:"+e+";box-shadow:inset 0px 0px 3px #ffffff;z-index:"+3*bx.CCanvasWnd.ZINDEX_OBJECT+";":o.style.cssText="border-radius:"+r+"px;background-clip:content-box;border:solid 1px rgba(255,255,255,0);background-image:none;background-color:"+t+";box-shadow:inset 0px 0px 3px #313131;z-index:"+3*bx.CCanvasWnd.ZINDEX_OBJECT+";")):(bx.HCL.addCssRule(".apnCExeScroll::-webkit-scrollbar-thumb","border-radius:"+r+"px;background-clip:content-box;border:solid 1px rgba(255,255,255,0);background-image:none;background-color:"+e+";box-shadow:inset 0px 0px 3px #313131;z-index:"+3*bx.CCanvasWnd.ZINDEX_OBJECT+";"),e==t?bx.HCL.addCssRule(".apnCExeScroll::-webkit-scrollbar-thumb:hover","border-radius:"+r+"px;background-clip:content-box;border:solid 1px rgba(255,255,255,0);background-image:none;background-color:"+e+";box-shadow:inset 0px 0px 3px #ffffff;z-index:"+3*bx.CCanvasWnd.ZINDEX_OBJECT+";"):bx.HCL.addCssRule(".apnCExeScroll::-webkit-scrollbar-thumb:hover","border-radius:"+r+"px;background-clip:content-box;border:solid 1px rgba(255,255,255,0);background-image:none;background-color:"+t+";box-shadow:inset 0px 0px 3px #313131;z-index:"+3*bx.CCanvasWnd.ZINDEX_OBJECT+";")),bx.HCL.getCssRule(".apnCExeScroll::-webkit-scrollbar-corner")||bx.HCL.addCssRule(".apnCExeScroll::-webkit-scrollbar-corner","background-color:transparent;")}},apn.CExe.prototype.IWidget_onFullScreen=function(e,t){function a(a){a.canvas&&a.canvas.$O3X("exeOnScreenFull",a.id,{on:e,tag:t})}if(this.o.standAlone){this.$Ocd=e,this.__fullScreenByWidgetTag=t;this.$O2J.iteratePage(a)}},apn.CExe.prototype.isInFullScreenByWidget=function(){return!(!this.$Ocd||!this.__fullScreenByWidgetTag)},apn.CExe.IWidget_getAudioAutoplayCount=function(e){var t=apn.Project.getLayout(e).property;return t.CExe&&t.CExe.apCH&&t.CExe.apCH.acnt?t.CExe.apCH.acnt:0},apn.CExe.prototype.IStub_sptInfo=function(e){var t={fns:{}};this._sptGetInfo=this._sptGetInfo||this.ISub_sptGetInfo();for(var a in this._sptGetInfo)this._sptGetInfo[a].help&&(t.fns[a]=bx.$cloneObject({},this._sptGetInfo[a].help));return t},apn.CExe.prototype.IStub_sptRunCheck=function(e,t,a){if(this._sptGetInfo=this._sptGetInfo||this.ISub_sptGetInfo(),this._sptGetInfo[e]&&this._sptGetInfo[e].api){if(!this._sptGetInfo[e].apiCheck)return!0;var i=this.getCurApx();if(a&&this.$O2J.get(a)&&this.$O2J.get(a).canvas&&(i=this.$O2J.get(a).canvas),i)return this._sptGetInfo[e].apiCheck(i,t)}return!1},apn.CExe.prototype.IStub_sptRun=function(e,t,a){if(this._sptGetInfo=this._sptGetInfo||this.ISub_sptGetInfo(),this._sptGetInfo[e]&&this._sptGetInfo[e].api){var i=this.getCurApx();if(a&&this.$O2J.get(a)&&this.$O2J.get(a).canvas&&(i=this.$O2J.get(a).canvas),i)return this._sptGetInfo[e].api(i,t)}},apn.CExe.prototype.ISub_sptGetInfo=function(){var e=this;return{markKeyword:{api:function(e,t){t&&e.$O3X("exeOnMarkText",void 0,t)}},isMobile:{api:function(e,t){return bx.HCL.DV.isMobile()},help:{param:"",help:apn.CExe.GL({ko:"Mobile browser에서 실행 중인지 확인함.",en:"Check if running on a mobile browser."})+"\nReturn Boolean"}},getCurPage:{api:function(t,a){return e.$O2J.getCurrent()}}}},apn.CExe.prototype.IDevice_linkToURL=function(e,t){if(e){if("currentFrame"==t)window.location.href=e;else if("currentTab"==t)top.location.href=e;else{if("newTab"!=t)return!1;window.open(e,"_blank")}return!0}return!1},apn.CExe.prototype.IDevice_downloadURL=function(e,t,a){apn.UTIL.downloadURL(e,t,a)},apn.CExe.prototype.IDevice_useWebAudio=function(){return!!(window.AspenWebAudio&&AspenWebAudio.isUseWebAudio&&AspenWebAudio.isUseWebAudio())},apn.CExe.prototype.IStub_runScreen=function(e){this.run(void 0,e)},apn.CExe.prototype.IStub_fullScreen=function(e){bx.DOM.isVisible(this.tag)&&this.project&&this.isRunning()&&(this.$O7J=e,this.restore())},apn.CExe.prototype.IStub_getScreenList=function(){return this.$O6t()},apn.CExe.prototype.edtSetupAutoplay=function(e,t,a){a.CExe=a.CExe||{},a.CExe.apCH=a.CExe.apCH||{acnt:0,vcnt:0},eduLib.edtInputAdd(e,t,{type:"title",title:apn.CExe.GL({ko:"모바일 자동재생 채널",en:"Mobile autoplay channel"})}),eduLib.edtInputAdd(e,t,{type:"number",title:apn.CExe.GL({ko:"오디오 채널 할당",en:"Audio channel allocation"}),value:a.CExe.apCH,key:"acnt",join:!0})},apn.CExe.prototype.edtSetupVideoLoad=function(e,t,a){a.CExe=a.CExe||{},a.CExe.vdLD=a.CExe.vdLD||{prgs:""},eduLib.edtInputAdd(e,t,{type:"title",title:apn.CExe.GL({ko:"비디오 로딩 제어",en:"Video loading control"})}),eduLib.edtInputAdd(e,t,{type:"select",title:apn.CExe.GL({ko:"화면에 표시되는 시점에서 로딩",en:"Load when visible"}),key:"prgs",value:a.CExe.vdLD,options:[{title:apn.CExe.GL({ko:"예",en:"Yes"}),value:"Y"},{title:apn.CExe.GL({ko:"아니오",en:"No"}),value:""}],join:!0})},apn.CExe.prototype.edtSetupMediaOnHidden=function(e,t,a){a.CExe=a.CExe||{},a.CExe.mediaOnHidden=a.CExe.mediaOnHidden||"",eduLib.edtInputAdd(e,t,{type:"title",title:apn.CExe.GL({ko:"화면에서 감춰질 때 미디어 재생 제어",en:"Media control on hidden"})}),eduLib.edtInputAdd(e,t,{type:"select",title:apn.CExe.GL({ko:"미디어 제어방법",en:"Control type"}),key:"mediaOnHidden",value:a.CExe,options:[{title:apn.CExe.GL({ko:"[기본 동작]",en:"[Default]"}),value:""},{title:apn.CExe.GL({ko:"중지 후 자동 재개",en:"Pause and resume on visible"}),value:"P"},{title:apn.CExe.GL({ko:"종료",en:"Stop"}),value:"S"},{title:apn.CExe.GL({ko:"계속 실행",en:"Keep if playing"}),value:"B"}],join:!0})},apn.CExe.prototype.edtSetupSplash=function(e,t,a){a.CExe=a.CExe||{},a.CExe.splash=a.CExe.splash||{img:{mediaID:void 0},bgClr:this.o.backgroundColor,w:40},eduLib.edtInputAdd(e,t,{type:"title",title:apn.CExe.GL({ko:"스플래쉬 화면",en:"Splash screen"})}),eduLib.edtInputAdd(e,t,{type:"image64",title:"스플래쉬 이미지",value:a.CExe.splash,key:"img",join:!0}),eduLib.edtInputAdd(e,t,{type:"number",title:"이미지 크기(%)",value:a.CExe.splash,key:"w",join:!0,comment:"(화면 너비를 기준으로 %를 지정)"}),eduLib.edtInputAdd(e,t,{type:"color",title:"배경 색상",askUse:!0,value:a.CExe.splash,key:"bgClr",join:!0}),eduLib.edtInputAdd(e,t,{type:"message",value:"※ 컨텐츠의 초기 로딩이 느린 IE10/11 등에서 공백 시간을 줄이기 위한 기능이며, 스플래쉬를 반드시 표시하기 위한 것은 아닙니다. 즉, 로딩이 빠른 브라우저에서는 보이지 않을 수 있습니다.\n스플래쉬 이미지는 되도록 작은 파일 크기의 것을 사용하는 것이 효과적입니다.",join:!0})},apn.CExe.prototype.edtSetupExFont=function(e,t,a){a.CExe=a.CExe||{},a.CExe.exFonts=a.CExe.exFonts||[{title:"ExampleFont",face:"",ln:"en",noBold:"Y",path:"http://fonts.googleapis.com/earlyaccess/nanumgothic.css",pathL:"../../../share/font/NanumGothic/font.css"}],eduLib.edtInputAdd(e,t,{type:"title",title:apn.CExe.GL({ko:"외부 폰트",en:"External Fonts"})}),eduLib.edtInputAdd(e,t,{type:"table",value:a.CExe.exFonts,options:{th:["표시 명칭","Font Family","문자","볼드체 포함","편집중 경로","실행중 경로"],add:!0,remove:!0},join:!0,td:[{type:"text",key:"title",width:"150px"},{type:"text",key:"face",width:"150px"},{type:"select",key:"ln",width:"100px",options:[{title:"한글",value:"ko"},{title:"영문자",value:"en"},{title:"중국한자",value:"zh"},{title:"일본문자",value:"ja"},{title:"베트남문자",value:"vi"}]},{type:"select",key:"noBold",width:"100px",options:[{title:"포함",value:"N"},{title:"미포함",value:"Y"}]},{type:"text",key:"path"},{type:"text",key:"pathL"}]}),eduLib.edtInputAdd(e,t,{type:"message",value:"※ 'Font Family'가 있어야 정상적으로 등록된 Font로 간주됩니다.\n'편집중 경로'와 '실행중 경로'는 Font CSS파일의 위치입니다. '실행중 경로'는 index.html을 기준으로 상대적 경로입니다.",join:!0}),eduLib.edtInputAdd(e,t,{type:"message",value:"※ '볼드체 포함'은 Font에 볼드체가 추가로 포함이 되어 있는지 여부입니다. Font에 없어도 대부분 OS에서 볼드체를 표시하지만 오류가 나는 OS도 있습니다.\nFont 자체가 볼드체인 경우에는 '미포함'으로 지정바랍니다.",join:!0}),eduLib.edtInputAdd(e,t,{type:"message",value:"※ Knowledge Base에서 'EDTB3'와 'EDTB4'를 가이드와 샘플로 참조하시기 바랍니다.",join:!0})},apn.CExe.prototype.edtSetupLayout=function(e,t,a,i){function n(){eduLib.edtInputShow(e,t,"R","R"==this.value[0]),eduLib.edtInputShow(e,t,"Z","C"==this.value||"H"==this.value||"Z"==this.value),eduLib.edtInputShow(e,t,"F","F"==this.value)}a.CExe=a.CExe||{},a.CExe.layout=a.CExe.layout||{style:{bgImgPtn:"tile",bgImg:{mediaID:void 0},bgClr:null},layout:i||"R"},eduLib.edtInputAdd(e,t,{type:"title",title:apn.CExe.GL({ko:"화면 배치",en:"Screen layout"})}),eduLib.edtInputAdd(e,t,{type:"select",title:"화면 배치",options:[{title:"[편집 원본 크기로 실행]  가로/중앙, 세로/중앙",value:"F"},{title:"[화면 크기로 재배치 실행]  가로/중앙, 세로/상단",value:"R"},{title:"[화면 크기로 재배치 실행]  가로/중앙, 세로/중앙",value:"Rym"},{title:"[화면 크기로 재배치 실행]  가로/중앙, 세로/늘여맞춤",value:"Ryh"},{title:"[ZOOM 실행]  가로/중앙, 세로/중앙",value:"C"},{title:"[ZOOM 실행]  가로/중앙, 세로/늘여맞춤",value:"H"},{title:"[ZOOM 실행]  가로/늘여맞춤, 세로/늘여맞춤",value:"Z"}],value:a.CExe.layout,key:"layout",onchange:n,join:!0}),eduLib.edtInputAdd(e,t,{id:"F",type:"message",value:"※ 편집 원본 크기로 화면에 표시됩니다.\n- 선명하게 표시됩니다.\n- 화면 크기가 변해도 재시작되지 않습니다.",join:!0}),eduLib.edtInputAdd(e,t,{id:"R",type:"message",value:"※ 화면 크기에 부합하도록 재계산되어 표시됩니다.\n- 선명하게 표시됩니다.\n- 화면 크기가 변하면 컨텐츠가 재시작됩니다. (일부 Book 실행기는 마지막 페이지에서 재시작됩니다)",join:!0}),eduLib.edtInputAdd(e,t,{id:"Z",type:"message",value:"※ 화면 크기에 부합하도록 확대/축소(ZOOM)되어 실행됩니다.\n- 브라우저에 따라 상대적으로 선명하지 않는 경우가 있습니다. (특히, '크롬계열 브라우저')\n- 화면 크기가 변해도 재시작되지 않고 바로 반영됩니다.",join:!0}),eduLib.edtInputAdd(e,t,{type:"space"}),eduLib.edtInputAdd(e,t,{type:"title",title:"화면 배경"}),eduLib.edtInputAdd(e,t,{type:"color",title:"색상",value:a.CExe.layout.style,key:"bgClr",askUse:{yes:"변경",no:"기본색 사용"},join:!0}),eduLib.edtInputAdd(e,t,{id:"ptn",type:"select",title:"이미지 배치",value:a.CExe.layout.style,key:"bgImgPtn",options:[{title:"타일 패턴",value:"tile"},{title:"가로 패턴",value:"rptX"},{title:"늘여서 맞춤",value:"stretch"}],join:!0}),eduLib.edtInputAdd(e,t,{id:"ptn",type:"image",title:"이미지 파일",value:a.CExe.layout.style,key:"bgImg",join:!0})},apn.CExe.prototype.edtSetupBrowserTheme=function(e,t,a){a.CExe=a.CExe||{},a.CExe.brTm=a.CExe.brTm||{frameClr:null},eduLib.edtInputAdd(e,t,{type:"title",title:"브라우저 스타일"}),eduLib.edtInputAdd(e,t,{type:"color",title:"윈도우(제목) 색상",value:a.CExe.brTm,key:"frameClr",askUse:{yes:"변경",no:"기본색 사용"},join:!0}),eduLib.edtInputAdd(e,t,{type:"message",value:"※ 모바일 크롬 등 일부 브라우저에서 적용되는 기능입니다. (2017/06 기준)",join:!0})},apn.CExe.prototype.edtSetupScrollBar=function(e,t,a){a.CExe=a.CExe||{},a.CExe.scBar=a.CExe.scBar||{clrThumb:"#7f7f7f",clrThumbHover:"#7f7f7f",clrTrack:"#dddddd",cRdr:"50%"};var i=apn.CExe.GL({ko:"※ 스타일 기능은 브라우저마다 적용 범위가 다르며, 스타일이 전혀 적용되지 않는 브라우저 종류도 있습니다. 참고로 크롬 계열 브라우저가 가장 잘 적용되며 투명색도 지원됩니다.\n스크롤바의 굵기는 브라우저마다 다를 수 있으므로, 편집창에서 보이는 굵기를 기준으로 편집 객체를 배치하는 것은 좋지 않습니다.",en:"※ Each browser may have different capabilities on styling scrollbar.\nAlso, scrollbar width may be different through browsers, please don't layout objects based on scrollbar width of editor."});eduLib.edtInputAdd(e,t,{type:"title",title:apn.CExe.GL({ko:"스크롤바 스타일",en:"Scrollbar style"})}),eduLib.edtInputAdd(e,t,{type:"color",title:apn.CExe.GL({ko:"버튼 색상",en:"Button color"}),value:a.CExe.scBar,key:"clrThumb",join:!0}),eduLib.edtInputAdd(e,t,{type:"color",title:apn.CExe.GL({ko:"버튼 Hover 색상",en:"Button hover color"}),value:a.CExe.scBar,key:"clrThumbHover",join:!0}),eduLib.edtInputAdd(e,t,{type:"color",title:apn.CExe.GL({ko:"트랙 색상",en:"Bar color"}),value:a.CExe.scBar,key:"clrTrack",join:!0}),eduLib.edtInputAdd(e,t,{type:"select",title:apn.CExe.GL({ko:"모서리 둥글기",en:"Corner radius"}),value:a.CExe.scBar,key:"cRdr",options:["50%","40%","30%","20%","10%","0%"],join:!0}),eduLib.edtInputAdd(e,t,{type:"message",value:i,join:!0})},apn.CExe.prototype.edtSetupJs=function(e,t,a){function i(e,t){if(window.AspenUIRun){var a=AspenUIRun("check_script",{code:e});return!!a.succ||(t.message=a.data,!1)}return!0}a.CExe=a.CExe||{},a.CExe.js=a.CExe.js||{fs:[{js:{size:0,data:""},v:"",c:""}]},eduLib.edtInputAdd(e,t,{type:"title",title:apn.CExe.GL({ko:"자바스크립트 라이브러리",en:"JavaScript Library"})}),eduLib.edtInputAdd(e,t,{type:"table",value:a.CExe.js.fs,options:{th:["JavaScript "+apn.CExe.GL({ko:"파일",en:"File"})+"[js] (m)",apn.CExe.GL({ko:"버전 정보",en:"Version"}),apn.CExe.GL({ko:"부가 설명",en:"Comment"})],add:!0,remove:!0,order:!0},join:!0,td:[{type:"file",key:"js",accept:".js",oncheck:i},{type:"text",key:"v"},{type:"text",key:"c",multiline:!0}]}),eduLib.edtInputAdd(e,t,{type:"message",value:"※ "+apn.CExe.GL({ko:"JavaScript 파일은 UTF-8으로 인코딩되어야 합니다. 또한, 파일 이름이 그대로 문서내 고유ID로 사용됩니다.",en:"JavaScript file is supposed to be encoded in UTF-8. And its file name will be used as an unique ID in editing file."}),join:!0})},apn.CExe.prototype.edtSetupLNG=function(e,t,a,i){a.CExe=a.CExe||{},a.CExe.lng=a.CExe.lng||{},a.CExe.lng.ime=a.CExe.lng.ime||"",i&&i.ln&&(a.CExe.lng.ln=a.CExe.lng.ln||"ko"),eduLib.edtInputAdd(e,t,{type:"title",title:apn.CExe.GL({ko:"언어 설정",en:"Langauage options"})}),i&&i.ln&&(eduLib.edtInputAdd(e,t,{type:"select",title:apn.CExe.GL({ko:"기준 언어",en:"Language"}),key:"ln",value:a.CExe.lng,options:[{title:apn.CExe.GL({ko:"한국어",en:"Korean"}),value:"ko"},{title:apn.CExe.GL({ko:"영어",en:"English"}),value:"en"},{title:apn.CExe.GL({ko:"중국어",en:"Chinese"}),value:"zh"},{title:apn.CExe.GL({ko:"일본어",en:"Japanese"}),value:"ja"},{title:apn.CExe.GL({ko:"스페인어",en:"Spanish"}),value:"es"},{title:apn.CExe.GL({ko:"독일어",en:"German"}),value:"de"},{title:apn.CExe.GL({ko:"프랑스어",en:"French"}),value:"fr"},{title:apn.CExe.GL({ko:"아랍어",en:"Arabic"}),value:"ar"},{title:apn.CExe.GL({ko:"베트남어",en:"Vietnamese"}),value:"vi"}],join:!0}),eduLib.edtInputAdd(e,t,{type:"message",value:"※ "+apn.CExe.GL({ko:"다중 언어를 가진 글꼴에서 해당 언어의 문자를 정확히 표시하기 위한 목적입니다.",en:"Mainly, this is to display with proper font from multi-language fonts."}),join:!0})),eduLib.edtInputAdd(e,t,{type:"select",title:apn.CExe.GL({ko:"가능하면 한글로 입력 시작",en:"Use IME if applicable"}),key:"ime",value:a.CExe.lng,options:[{title:apn.CExe.GL({ko:"예",en:"Yes"}),value:""},{title:apn.CExe.GL({ko:"아니오",en:"No"}),value:"N"}],join:!0}),eduLib.edtInputAdd(e,t,{type:"message",value:"※ "+apn.CExe.GL({ko:"IE, Edge와 같은 일부 브라우저에서 동작할 수 있습니다.",en:"Some browsers support this function such as IE, Edge or so."}),join:!0})},apn.CExe.prototype.clearOnSetup=function(){this.$Oci&&delete this.$Oci},apn.CExe.prototype.IStub_setup=function(e){function t(){eduLib.edtInputApplyAll(e,i.tagTab1),eduLib.edtInputApplyAll(e,i.tagTab2),n&&eduLib.edtInputApplyAll(e,i.tagTab3),eduLib.edtInputApplyAll(e,i.tagTab4),e.save(),e.onExeDataChanged(),o.clearOnSetup()}function a(){for(var e in s)s[e]&&(this.id==e?(i[e].style.display="block",i.tagTab.$$(e).style.borderStyle="solid solid none solid"):(i[e].style.display="none",i.tagTab.$$(e).style.borderStyle="none none solid none"));apn.CExe._uiLastSetupTab=this.id}if(e&&e.getData()){this._applyExeProp(e.getData());var i,n=!(!this.getExeOption(e.getData())||!this.getExeOption(e.getData()).setupSplash),r=apn.Project.getLayout(e.getData()).property,o=this,s={tagTab1:!0,tagTab2:!0,tagTab3:n,tagTab4:!0},p=apn.CExe.GL({ko:"추가 설정",en:"Setup properties"});window.asui&&asui.MENU&&asui.MENU.EXE_CFG&&(p=asui.MENU.EXE_CFG),(i=e.dlgDoModal(Math.floor(.75*bx.UX.width),Math.floor(.9*bx.UX.height),t,void 0,{title:p}))&&(i.tagTab=i.$TAG("div",{style:"position:relative;width:100%;height:26px;padding-bottom:14px;"}),i.tagTab.innerHTML='<span id="tagTab1" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">'+apn.CExe.GL({ko:"실행화면",en:"Screen"})+'</span><span id="tagTab4" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">'+apn.CExe.GL({ko:"추가모듈",en:"Additional Module"})+'</span><span id="tagTab2" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">'+apn.CExe.GL({ko:"미디어",en:"Media"})+"</span>"+(n?'<span id="tagTab3" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">'+apn.CExe.GL({ko:"스플래쉬화면",en:"Splash"})+"</span>":"")+'<span id="tagBlank" style="float:left;padding:2px 0 2px 0;border-bottom:solid 1px #a8a8a8;width:100px;">&nbsp;</span>',i.tagTab.$$("tagTab1").onclick=i.tagTab.$$("tagTab2").onclick=i.tagTab.$$("tagTab4").onclick=a,n&&(i.tagTab.$$("tagTab3").onclick=a),i.tagTab1=i.$TAG("div",{style:"width:100%;height:"+(i.contentHeight-40)+"px"}),i.tagTab2=i.$TAG("div",{style:"width:100%;height:"+(i.contentHeight-40)+"px"}),n&&(i.tagTab3=i.$TAG("div",{style:"width:100%;height:"+(i.contentHeight-40)+"px"})),i.tagTab4=i.$TAG("div",{style:"width:100%;height:"+(i.contentHeight-40)+"px"}),this.edtSetupLayout(e,i.tagTab1,r),eduLib.edtInputAdd(e,i.tagTab1,{type:"space"}),this.edtSetupScrollBar(e,i.tagTab1,r),eduLib.edtInputAdd(e,i.tagTab1,{type:"space"}),this.edtSetupLNG(e,i.tagTab1,r,{ln:!!this.constructor.IStub_pubGetHEAD}),eduLib.edtInputAdd(e,i.tagTab1,{type:"space"}),this.edtSetupBrowserTheme(e,i.tagTab1,r),n&&this.edtSetupSplash(e,i.tagTab3,r),this.edtSetupAutoplay(e,i.tagTab2,r),eduLib.edtInputAdd(e,i.tagTab2,{type:"space"}),this.edtSetupVideoLoad(e,i.tagTab2,r),eduLib.edtInputAdd(e,i.tagTab2,{type:"space"}),this.edtSetupMediaOnHidden(e,i.tagTab2,r),this.edtSetupExFont(e,i.tagTab4,r),eduLib.edtInputAdd(e,i.tagTab4,{type:"space"}),this.edtSetupJs(e,i.tagTab4,r),void 0!==apn.CExe._uiLastSetupTab&&i.tagTab.$$(apn.CExe._uiLastSetupTab)?i.tagTab.$$(apn.CExe._uiLastSetupTab).onclick():i.tagTab.$$("tagTab1").onclick(),i.tagTab.$$("tagBlank").style.width=i.clientWidth-i.tagTab.$$("tagBlank").offsetLeft-24+"px")}},apn.CExe.prototype.edtPgSetupJsImport=function(e,t,a,i){var n=apn.Project.getLayout(e.getData()).property,r=[];if(n.CExe&&n.CExe.js)for(var o=0;o<n.CExe.js.fs.length;o++)n.CExe.js.fs[o].js.data&&r.push({value:n.CExe.js.fs[o].js.name,
title:n.CExe.js.fs[o].js.name+(n.CExe.js.fs[o].v?"("+n.CExe.js.fs[o].v+")":"")});r.length?r.push({value:"",title:apn.CExe.GL({ko:"[스크립트 선택]",en:"[Select]"})}):r.push({value:"",title:apn.CExe.GL({ko:"[등록된 스크립트 없음]",en:"[No script files]"})}),eduLib.edtInputAdd(e,t,{type:"title",title:i+" event"}),eduLib.edtInputAdd(e,t,{type:"table",value:a,options:{th:[apn.CExe.GL({ko:"스크립트 파일",en:"Script file"})+" (m)"],add:!0,remove:!0,order:!0},td:[{type:"select",key:"name",options:r}],join:!0})},apn.CExe.prototype.edtPgSetupPinchEv=function(e,t,a){a.apnCExe=a.apnCExe||{},a.apnCExe.evPch=a.apnCExe.evPch||"",eduLib.edtInputAdd(e,t,{type:"title",title:apn.CExe.GL({ko:"핀치줌 이벤트",en:"Pinch-zoom event"})}),eduLib.edtInputAdd(e,t,{type:"select",title:apn.CExe.GL({ko:"Pinch In/Out",en:"Pinch In/Out"}),key:"evPch",value:a.apnCExe,options:[{title:apn.CExe.GL({ko:"수신",en:"Receive"}),value:"Y"},{title:apn.CExe.GL({ko:"수신안함",en:"No"}),value:""}],join:!0}),eduLib.edtInputAdd(e,t,{type:"message",value:"※ "+apn.CExe.GL({ko:"이 기능이 사용되면, Drag 중 다른 Touch를 무시하는 기능이 Off됩니다.",en:"If receive this event, the function that prevent a drag action from being interfered by another touch will be disabled."}),join:!0})},apn.CExe.prototype.IStub_setupPage=function(e){function t(){i&&eduLib.edtInputApplyAll(e,p.tagTabX),eduLib.edtInputApplyAll(e,p.tagTab1),eduLib.edtInputApplyAll(e,p.tagTab2);for(var t in s)s[t]&&!s[t].length&&delete s[t];e.getData().pages[e.getPageID()].IJS=s,e.save()}function a(){for(var e in l)l[e]&&(this.id==e?(p[e].style.display="block",p.tagTab.$$(e).style.borderStyle="solid solid none solid"):(p[e].style.display="none",p.tagTab.$$(e).style.borderStyle="none none solid none"));apn.CExe._uiLastPgSetupTab=this.id}if(e&&e.getData()){var i,n=e.getData().pages[e.getPageID()].UI,r={spt_EvtBubble:!0,pageLoad:!0,pageRun:!0,pagePause:!0,spt_Custom:!0},o=apn.P.getEvent(e.getData(),e.getPageID(),void 0,void 0,!0),s=e.getData().pages[e.getPageID()].IJS||{};this.ISub_onSetupPage&&(i=!0);var p,l={tagTab1:!0,tagTab2:!0,tagTab3:!1,tagTabX:i},d=apn.CExe.GL({ko:"페이지 설정",en:"Setup properties"});if(window.asui&&asui.MENU&&asui.MENU.PRJ_CFG&&(d=asui.MENU.PRJ_CFG),p=e.dlgDoModal(800,Math.floor(.9*bx.UX.height),t,void 0,{title:d})){p.tagTab=p.$TAG("div",{style:"position:relative;width:100%;height:26px;padding-bottom:14px;"}),p.tagTab.innerHTML='<span id="tagTab1" style="cursor:pointer;float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">'+apn.CExe.GL({ko:"스크립트",en:"Script Import"})+'</span><span id="tagTab2" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">'+apn.CExe.GL({ko:"디바이스",en:"Device"})+"</span>"+(i?'<span id="tagTabX" style="cursor:pointer;float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;"></span>':"")+'<span id="tagBlank" style="float:left;padding:2px 0 2px 0;border-bottom:solid 1px #a8a8a8;width:100px;">&nbsp;</span>',p.tagTab.$$("tagTab1").onclick=p.tagTab.$$("tagTab2").onclick=a,p.tagTab1=p.$TAG("div",{style:"width:100%;height:"+(p.contentHeight-40)+"px"}),p.tagTab2=p.$TAG("div",{style:"width:100%;height:"+(p.contentHeight-40)+"px"}),i&&(p.tagTabX=p.$TAG("div",{style:"width:100%;height:"+(p.contentHeight-40)+"px"}),p.tagTab.$$("tagTabX").onclick=a,p.tagTab.$$("tagTabX").innerHTML=this.ISub_onSetupPage(e,p.tagTabX));var c;for(var g in r)o[g]&&(s[g]=s[g]||[{name:""}],c&&eduLib.edtInputAdd(e,p.tagTab1,{type:"space"}),this.edtPgSetupJsImport(e,p.tagTab1,s[g],o[g].title),c=!0);this.edtPgSetupPinchEv(e,p.tagTab2,n),void 0!==apn.CExe._uiLastPgSetupTab&&p.tagTab.$$(apn.CExe._uiLastPgSetupTab)?p.tagTab.$$(apn.CExe._uiLastPgSetupTab).onclick():p.tagTab.$$("tagTab1").onclick(),p.tagTab.$$("tagBlank").style.width=p.clientWidth-p.tagTab.$$("tagBlank").offsetLeft-24+"px"}}},apn.CExe.IStub_property=function(e,t,a){if(e)return apn.Project.getLayout(e).property[t]},apn.CExe.IStub_getFonts=function(e,t){var a,i={action:"add"};if(t&&apn.Project.getLayout(t).property.CExe&&apn.Project.getLayout(t).property.CExe.exFonts&&(a=apn.Project.getLayout(t).property.CExe.exFonts),a&&a.length)for(var n=0;n<a.length;n++)if(a[n]&&a[n].face){i.fonts=i.fonts||[];var r=bx.$cloneObject({},a[n]);"Y"==r.noBold?r.noBold=!0:r.noBold=void 0,e?r.path=r.pathL:delete r.pathL,r.height=1.3,r.type="google",i.fonts.push(r)}return i},apn.CExe.IStub_pubGetHTML=function(e,t){for(var a,i,n,r,o,s,p,l,d=[],c=apn.Project.getPages(e),g=!(!t||!t.preview),u=0;u<c.length;u++){for(n=apx.$O4s(e.pages[c[u]],1,"apn.wgt.htmlCntr"),p="",l={},a=0;a<n.length;a++){for(r=apx.$O4s(e.pages[c[u]],1,void 0,n[a]),this.IStub_pubArrangeHTML&&this.IStub_pubArrangeHTML(e,c[u],r),g||(l[n[a]]=!0,p+=apn.widgets["apn.wgt.htmlCntr"].pubOnGetHTML(e,c[u],n[a])),i=0;i<r.length;i++)if(s=e.pages[c[u]].objects[r[i]],(o=apn.Project.getWidgetModule(s.create.data))&&o.pubOnGetHTML)if(g)s.create.data&&s.create.data.properties&&s.create.data.properties.attrs&&s.create.data.properties.attrs.plainText?p+=s.create.data.properties.attrs.plainText:s.create.data&&s.create.data.styles&&s.create.data.styles.text&&(p+=s.create.data.styles.text);else{l[r[i]]=!0;try{p+=(p?"\n":"")+(o.pubOnGetHTML(e,c[u],r[i])||"")}catch(e){console.error("Program error in pubOnGetHTML() of "+s.create.data.wgtID+"\n\n"+e)}}g||(p+="</div>")}if(!g){var h="";for(a in e.pages[c[u]].objects)if(!l[a]&&(s=e.pages[c[u]].objects[a],(o=apn.Project.getWidgetModule(s.create.data))&&o.pubOnGetHTML))try{h+=(h?"\n":"")+(o.pubOnGetHTML(e,c[u],a)||"")}catch(e){console.error("Program error in pubOnGetHTML() of "+s.create.data.wgtID+"\n\n"+e)}h&&(p+='\n\n<div style="visibility:hidden">'+h+"</div>")}d[u]=p||""}return d},apn.CExe.prototype.ISub_edtOnPostDrawObject=function(e,t,a,i,n,r,o){if(t instanceof apn.CRect&&(!t.style.lineWidth||!t.style.strokeStyle)){t.noClipText=!0;var s=a.strokeStyle,p=a.lineWidth;a.strokeStyle="rgba(0,0,0,0.2)",a.lineWidth=1,a.strokeRect(i,n,r,o),a.strokeStyle=s,a.lineWidth=p}},apn.CExe.prototype.getPM=function(){return this.$O2J},apn.CExe.prototype.getContainer=function(){return this.$Occ},apn.CExe.prototype.getContainerTAG=function(){return this.$Occ.tag},apn.CExe.prototype.getZoomX=function(){return this.$O2O},apn.CExe.prototype.getZoomY=function(){return this.$O2P},apn.CExe.prototype.setZoom=function(e,t){this.$O2O=e,this.$O2P=t},apn.CExe.prototype.getScreenW=function(){return this.$O2N.w},apn.CExe.prototype.getScreenH=function(){return this.$O2N.h},apn.CExe.prototype.setScreenInfo=function(e){this.$O2N=e},apn.CExe.prototype.initAutoplay=function(){var e;if(this.$ObT&&this.$ObT.$O3d.length&&!this.$ObT.$Oce){for(var t=0;t<this.$ObT.$O3d.length;t++)e=this.$ObT.$O3d[t],bx.HCL.DV.isChrome()&&!bx.HCL.DV.isMobile()?e.sourceTag.src=apn.widgets.utils.$O7H(apn.CExe.NULL_AUDIO):e.sourceTag.src=apn.CExe.NULL_AUDIO,e.load&&(e.load(),e.play());this.$ObT.$Oce=!0}},apn.CExe.prototype.preloadLoadAssets=function(e){this.$Ocf=e,this.$Ocf.url&&(this.$Ocg=this.tag.$TAG("img",{src:e.url,style:"display:none;position:absolute;left:50%;top:50%;margin-top:"+-e.h/2+"px;margin-left:"+-e.w/2+"px"}),this.$Ocg.style.zIndex=11)},apn.CExe.prototype.preloadImageReset=function(){this.$Ocg&&(this.hasSkin()?this.$Ocg.style.top=this.$O2N.y+this.$O2N.h/2*this.getStretchY()+"px":this.$Ocg.style.top="50%",this.$Ocg.style.width=this.$Ocf.w*(1/this.$O2O)+"px",this.$Ocg.style.height=this.$Ocf.h*(1/this.$O2P)+"px",this.$Ocg.style.marginLeft=-this.$Ocf.w*(1/this.$O2O)/2+"px",this.$Ocg.style.marginTop=-this.$Ocf.h*(1/this.$O2P)/2+"px")},apn.CExe.prototype.pause=function(e){function t(t){t.canvas&&(e?(t.canvas.$O3X("exeOnPause",t.id),t.canvas.$O7K=!0,t.canvas.$O3M()):t.canvas.$O3X("exeOnPause",t.id))}1==this.$O3W&&(this.$O3W=2,this.$O2J.iteratePage(t))},apn.CExe.prototype.resume=function(){function e(e){e.canvas&&e.canvas.$O3X("exeOnResume",e.id)}2==this.$O3W&&(this.$O3W=1,this.$O2J.iteratePage(e))},apn.CExe.prototype.setRunState=function(e){this.$O3W=e},apn.CExe.prototype.isRunning=function(){return 1==this.$O3W},apn.CExe.prototype.clear=function(){if(this.$O3W=0,this.o&&(this.o.screenStretch=this.o._screenStretchBK,this.o.screenLayoutCenter=this.o._screenLayoutCenterBK),this.project&&apn.Project.resolveProperty(this.project,"exeNetworkMode")&&this.remoteDisconnect&&this.remoteDisconnect(),this.$O3T&&(this.$O3T.hide(),this.$O3T.clear()),this.$O3V&&delete this.$O3V,this.$O3U&&delete this.$O3U,this.$O5m&&delete this.$O5m,void 0!==this._apxPageEventList&&delete this._apxPageEventList,this.$ObT){for(var e=0;e<this.$ObT.$O3d.length;e++)try{this.$ObT.$O3d[e].pause(),this.$ObT.$O3d[e].sourceTag.src="",this.$ObT.$O3d[e].load()}catch(e){}delete this.$ObT}this.$O51(),this.$Oci=void 0,this.stretch(1,1,{noNotify:!0,cleanup:!0}),this.$O2J.reset(),delete this.project,delete this.flow,this.ISub_clear&&this.ISub_clear()},apn.CExe.prototype.destroy=function(){return this.clear(),this.$O3T&&(this.$O3T.destroy(),delete this.$O3T),this.$O2J.destroy(),delete this.$O2J,bx.CWnd.prototype.destroy.call(this)},apn.CExe.prototype.load=function(e,t,a){function i(e){if(r.o.standAlone)var t=document.body||r.tag;else{if(r.hasSkin())var t=r.$Occ.tag;else var t=r.tag;r.tag.style.background="none",r.$Occ.tag.style.background="none"}if("rptX"!=e.style.bgImgPtn&&e.style.bgImgPtn||!e.style.bgImg||!e.style.bgImg.mediaID){if("tile"==e.style.bgImgPtn&&e.style.bgImg&&e.style.bgImg.mediaID){var a=new Image;a.onload=function(){var a=1,i=1;1!=r.getStretchX()?a=r.getStretchX():1!=r.getZoomX()&&(a=1/r.getZoomX()),1!=r.getStretchY()?i=r.getStretchY():1!=r.getZoomY()&&(a=1/r.getZoomY()),t.style.backgroundImage="url("+apn.Project.mediaResolve(r.project,e.style.bgImg.mediaID,!1,r.o.standAlone)+")",t.style.backgroundRepeat="repeat",t.$CSS("backgroundSize",a*this.width+"px "+i*this.height+"px")},a.src=apn.Project.mediaResolve(r.project,e.style.bgImg.mediaID,!1,r.o.standAlone)}else if("stretch"==e.style.bgImgPtn&&e.style.bgImg&&e.style.bgImg.mediaID){var a=new Image;a.onload=function(){t.style.backgroundImage="url("+apn.Project.mediaResolve(r.project,e.style.bgImg.mediaID,!1,r.o.standAlone)+")",t.style.backgroundRepeat="no-repeat",t.$CSS("backgroundSize","100% 100%")},a.src=apn.Project.mediaResolve(r.project,e.style.bgImg.mediaID,!1,r.o.standAlone)}}else{var a=new Image;a.onload=function(){t.style.backgroundImage="url("+this.getAttribute("src")+")",t.style.backgroundRepeat="repeat-x",t.$CSS("backgroundSize","auto 100%")},a.src=apn.Project.mediaResolve(r.project,e.style.bgImg.mediaID,!1,r.o.standAlone)}r.tag.style.backgroundColor="transparent",r.$Occ.tag.style.backgroundColor="transparent",e.style.bgClr?t.style.backgroundColor=apn.CES.$O6l(e.style.bgClr):t.style.backgroundColor=apn.CES.$O6l(r.o.backgroundColor)}function n(e){e&&e.type&&(r.apxRunCmd(e.type,e.data)||r.apxDispatchMessage(e.type,e.data))}var r=this;if(this._loadSession++,t?bx.CCanvasWnd.maxFontWaitTime=1500:bx.CCanvasWnd.maxFontWaitTime=2e5,this.clear(),e?(apn.Project.$O19(e),this.$O5c=e):e=this.$O5c,this.project=this.$O3Y(e),this.project.orgPages=e.pages,this.flow=e.flow,this.ISub_onPostSetProject&&this.ISub_onPostSetProject(),!apn.Project.$O19(this.project,!0))return!1;for(var o in this.flow.pages)this.project.pages[o]||(bx.Trace.err("APN","Unknown page is in flow: pageID="+o,"CExe.load"),delete this.flow.pages[o]);var s=this.getExeOption();s&&(s.screenBackgroundColor&&(this.hasSkin()?(this.tag.style.backgroundColor="transparent",this.$Occ.tag.style.backgroundColor=apn.CES.$O6l(this.o.backgroundColor)):(this.tag.style.backgroundColor=apn.CES.$O6l(s.screenBackgroundColor),this.$Occ.tag.style.backgroundColor=apn.CES.$O6l(s.screenBackgroundColor)),this.o.screenBackgroundColor=s.screenBackgroundColor),void 0!==s.screenLayoutCenter&&(this.hasSkin()?this.o.screenLayoutCenter=!1:this.o.screenLayoutCenter=s.screenLayoutCenter),s.screenNoResize&&(this.o.standAlone?this.o.noResize=!0:this.o.noResize=!1),s.preloadAsset&&(this.o.preloadAsset=s.preloadAsset),s.screenStretch&&(this.o.screenStretch=s.screenStretch)),this._applyExeProp(this.project);var p=apn.Project.getLayout(this.project).property.CExe;if(p&&p.layout&&("C"==p.layout.layout||this.hasSkin()?(this.o.screenStretch=4,this.o.screenLayoutCenter=!0):"H"==p.layout.layout?this.o.screenStretch=2:"Z"==p.layout.layout?this.o.screenStretch=1:"Rym"==p.layout.layout&&(this.o.screenLayoutCenter=!0),i(p.layout)),p&&p.scBar){var l;p.scBar.cRdr&&(l=bx.$checkNaN(parseInt(p.scBar.cRdr))/100),this.onStyleScrollBar(p.scBar.clrThumb,p.scBar.clrThumbHover,p.scBar.clrTrack,void 0,l)}else this.onStyleScrollBar();if(this.tag.$A({class:"apnCExeScroll"}),this.o.standAlone&&p&&p.brTm&&p.brTm.frameClr&&bx.$setMeta("theme-color",p.brTm.frameClr),bx.$getParamFromURL(location.href,"APXBGCLR")&&(this.tag.style.backgroundColor="transparent",this.$Occ.tag.style.backgroundColor="transparent",(document.body||this.tag).style.backgroundColor=apn.CES.$O6l(decodeURIComponent(bx.$getParamFromURL(location.href,"APXBGCLR")))),this.o.preloadAsset&&this.preloadLoadAssets(this.o.preloadAsset),!apn.fonts){var d=apn.Project.getFontList(this.project);if(d){apn.fonts={};for(var o=0;o<d.length;o++)apn.fonts[d[o].face]={},apn.fonts[d[o].face].height=d[o].height,apn.fonts[d[o].face].noBold=d[o].noBold,apn.fonts[d[o].face].paddingRight=d[o].paddingRight||0,apn.fonts[d[o].face].title=d[o].title}}var p=apn.Project.getLayout(this.project).property;if(p.CExe&&p.CExe.apCH&&p.CExe.apCH.acnt){this.$ObT={$O3d:[]};for(var o=0;o<p.CExe.apCH.acnt;o++){var c=$TAG("audio",{style:"display:none;"});c.sourceTag=c.$TAG("source"),this.$ObT.$O3d[o]=c}}if(this.resize(),this.o.runPerPage&&this.o.standAlone||(this.o.standAlone&&this.o.noDynamicFontLoad2?(this.$O4Z(void 0,void 0,!0),t&&t()):this.$O4Z(t,a)),apn.Project.resolveProperty(this.project,"exeNetworkMode")&&this.remoteConnect&&(this.remoteConnect(window.apxNetConnection,n)||bx.Trace.log("APN","warning","Cannot connect to data switching server","CExe.load")),this.o.standAlone&&document.getElementsByTagName("TITLE").length&&this.project.property.title)try{document.getElementsByTagName("TITLE")[0].innerHTML=this.project.property.title}catch(e){}var g=apn.Project.getPages(this.project,!1,"apn.COverlayPage");if(g.length)for(var o=0;o<g.length;o++){var u=new apn.CExePage(this.$O2J,g[o],{}).create();u.viewer=this,u.init(),this.$O2J.add(u),u.execRun({data:{noNotifyToEditor:!0}}),u.canvas.$Och=!0,u.tag.style.zIndex=bx.UX.getZindex("popup");var h=bx.$cloneObject({},u.position.data);h.width="0%",h.height="0%",u.setPosition(new bx.CPosition(h)),u.tag.style.overflow="visible",u.canvas.$O3I(),u.canvas.$O5t(),u.tag.style.background="none"}return!0},apn.CExe.prototype._resizeIsFixed=function(){if("fix"==apn.Project.resolveProperty(this.project,"exeScreenSetup"))return!0;if(this.o.noLayout)return!0;var e=apn.Project.getLayout(this.project).property;return!!(e.CExe&&e.CExe.layout&&e.CExe.layout.layout&&"F"==e.CExe.layout.layout[0])},apn.CExe.prototype.resize=function(){this.$O2M=1;var e=null;this.hasSkin()&&apn.dbSkin&&(apn.Project.getLayout(this.project).property.skinShow=2,apn.Project.getLayout(this.project).property.skinID="Apple",apn.Project.getLayout(this.project).property.skinID&&(2==apn.Project.getLayout(this.project).property.skinShow||1==apn.Project.getLayout(this.project).property.skinShow&&bx.HCL.DV.isMobiile())&&(e=apn.dbSkin[apn.Project.getLayout(this.project).property.skinID].border));var t=2,a=this.innerWidth,i=this.innerHeight;e&&(a-=e.left+e.right+2*t),e&&(i-=e.top+e.bottom+2*t);var n=0;this.o.screenLayoutCenter?n=1:this.o.screenLayoutRatioByWidth&&!this.hasSkin()&&(n=2);var r=!1;if(r=this._resizeIsFixed(),r&&this.hasSkin()){var o=this.getScreenSize(a*this.$O2M,i*this.$O2M,this.getProjectSize().w,this.getProjectSize().h,void 0,n);(o.zoomX>1||o.zoomY>1)&&(r=!1)}this.$O2N=this.getScreenSize(a*this.$O2M,i*this.$O2M,this.getProjectSize().w,this.getProjectSize().h,r,n),e&&(this.$O2N.x+=e.left+t),e&&(this.$O2N.y+=e.top+t),this.$O2N.wOrg=this.$O2N.w,this.$O2N.hOrg=this.$O2N.h,this.$O2N.noClip&&this.setPosition(new bx.CPosition({type:"overlap",coord:{top:this.$O2N.y+"px",left:this.$O2N.x+"px"},width:this.$O2N.wOrg+"px",height:this.$O2N.hOrg+"px",noclip:!0}),!0);var s;if(s=this.hasSkin()||1!=this.o.screenStretch?!this.hasSkin()&&this.o.screenLayoutRatioByWidth?{type:"overlap",coord:{top:"0px",left:"0px"},width:this.innerWidth+"px",height:this.innerHeight+"px",noclip:!0}:{type:"overlap",coord:{top:this.$O2N.y+"px",left:this.$O2N.x+"px"},width:this.$O2N.wOrg+"px",height:this.$O2N.hOrg+"px",noclip:!0}:{type:"overlap",coord:{top:"0px",left:"0px"},width:this.innerWidth+"px",height:this.innerHeight+"px",noclip:!0},this.$Occ.setPosition(new bx.CPosition(s)),this.$O3T&&this.$O3T.setPosition(new bx.CPosition(bx.$cloneObject({},s))),this.o.screenStretch?(this.$O2N.zoomX=1,this.$O2N.zoomY=1,this.$O2N.w=this.getProjectSize().w,this.$O2N.h=this.getProjectSize().h,this.$O2J.setPosition(new bx.CPosition({type:"overlap",coord:{top:"0px",left:"0px"},width:this.$O2N.w+"px",height:this.$O2N.h+"px",noclip:!0}))):this.o.screenLayoutRatioByWidth&&!this.hasSkin()?this.$O2J.setPosition(new bx.CPosition({type:"overlap",coord:{top:"0px",left:"0px"},width:this.getProjectSize().w+"px",height:this.getProjectSize().h+"px",noclip:!0})):this.$O2J.setPosition(new bx.CPosition({type:"overlap",coord:{top:"0px",left:"0px"},width:"100%",height:"100%",noclip:!0})),this.$O2O=this.$O2N.zoomX,this.$O2P=this.$O2N.zoomY,this.selectMargin=Math.ceil(.01*Math.min(this.$O2N.w,this.$O2N.h)),e&&this.$O50(apn.Project.getLayout(this.project).property.skinID,apn.dbSkin[apn.Project.getLayout(this.project).property.skinID]),this.$Ocf&&this.preloadImageReset(),this.o.screenStretch){if(this.hasSkin())var p=this.$O2N.wOrg/this.getProjectSize().w,l=this.$O2N.hOrg/this.getProjectSize().h;else{var a=this.innerWidth,i=this.innerHeight;if(this.o.standAlone)var p=a/this.getProjectSize().w,l=i/this.getProjectSize().h;else var p=a/this.getPM().width,l=i/this.getPM().height}if(2==this.o.screenStretch)p=l;else if(3==this.o.screenStretch)l=p;else if(4==this.o.screenStretch){var d=Math.min(p,l);p=d,l=d}this.stretch(p,l)}},apn.CExe.prototype.stretch=function(e,t,a){bx.HCL.DV.supportCSS3D()&&(e&&t&&(1!=e||1!=t)?(apn.CES.transformSet(this.$O2J.tag,"resizeX",e),apn.CES.transformSet(this.$O2J.tag,"resizeY",t),apn.CES.transformSet(this.$O2J.tag,"origin","left top"),this.$O2J.tag.$CSS({backfaceVisibility:"hidden"}),apn.CES.transformApply(this.$O2J.tag),this.$Oci={x:e,y:t}):(apn.CES.transformClear(this.$O2J.tag),apn.CES.transformApply(this.$O2J.tag),this.$Oci&&delete this.$Oci)),a&&a.cleanup||this.$Ocf&&this.preloadImageReset(),a&&a.noNotify||this.IDriver_onZoomChange&&this.IDriver_onZoomChange(e,t)},apn.CExe.prototype.isStretch=function(){return!!this.$Oci},apn.CExe.prototype.getStretchX=function(){return this.$Oci?this.$Oci.x:1},apn.CExe.prototype.getStretchY=function(){return this.$Oci?this.$Oci.y:1},apn.CExe.prototype.stretchSX=function(e){return this.$Oci?1/this.$Oci.x*e:e},apn.CExe.prototype.stretchSY=function(e){return this.$Oci?1/this.$Oci.y*e:e},apn.CExe.prototype.getExeOption=function(e){e=e||this.project;var t=apn.Project.getLayout(e).CTXT.deviceID,a=apn.Project.getExe(e),i=apn.widgetDevice[t];return i&&i.exeModule&&i.exeModule[a]&&i.exeModule[a].option?i.exeModule[a].option:i&&i.exeOption?i.exeOption:void 0},apn.CExe.prototype._applyExeProp=function(e){var t,a=apn.Project.getLayout(e).property;this.constructor.IStub_getConfiguration&&this.constructor.IStub_getConfiguration(e)&&(t=this.constructor.IStub_getConfiguration(e).property)&&t.CExe&&(a.CExe=a.CExe||{},t.CExe.layout&&!a.CExe.layout&&(a.CExe.layout=t.CExe.layout))},apn.CExe.prototype.$O4Z=function(e,t,a,i){function n(t,i){function n(e){e.canvas&&e.canvas.$O3X("exeOnScreenRefresh",e.id)}t||a||bx.Trace.log("APN","warning","Load font file="+i,"CExe.LF"),a&&console.error("Monitor",i,t),h++,x.$O2J&&x.$O2J.iteratePage(n),h==o.length&&e&&e()}var r;bx.$getParamFromURL(location.href,"APXFONTPATH")&&(r=bx.$getParamFromURL(location.href,"APXFONTPATH"),r&&(r=decodeURIComponent(r))),!r&&this.o.pathFont&&(r=this.o.pathFont);var o=apn.Project.publishListFontFile(this.project,!0);if(r)for(var s,p=0;p<o.length;p++)"file"!=o[p].type&&"google"!=o[p].type&&"dir"!=o[p].type||(s=(o[p].path||"").split("/"),s[s.length-1].indexOf(".css")==-1&&s[s.length-1].indexOf(".ttf")==-1||(o[p].path=r+"/"+s[s.length-1]));if(this.constructor.IStub_getFonts&&(exeFonts=this.constructor.IStub_getFonts(this.o.standAlone,this.project),"replace"==exeFonts.action&&exeFonts.fonts)){for(var l,d,p=0;p<exeFonts.fonts.length;p++){for(d=!1,l=0;l<o.length;l++)if(exeFonts.fonts[p].face==o[l].face){d=!0;break}d||(exeFonts.fonts.splice(p,1),p--)}o=exeFonts.fonts}if(i)for(var c,g=apn.Project.publishListFontFile(this.project,void 0,void 0,void 0,i),p=0;p<o.length;p++){c=!1;for(var l=0;l<g.length;l++)if(o[p].face==g[l].face){c=!0;break}c||(o.splice(p,1),p--)}if(!o.length)return void(e&&e());for(var u,h=0,x=this,f=0,p=0;p<o.length;p++){"file"==o[p].type?(f=o[p].path.split("/"),u=this.o.standAlone?"fonts/"+f[f.length-1]:o[p].path):"dir"==o[p].type?(f=o[p].path.split("/"),u=this.o.standAlone&&f.length>1?"fonts/"+f[f.length-2]+"/"+f[f.length-1]:o[p].path):u=o[p].path,console.error("Try Font",o[p].face);try{bx.CCanvasWnd.loadCustomFont(o[p].face,u,n,"google"==o[p].type||"dir"==o[p].type,a)}catch(e){bx.Trace.log("APN","error","Cannot load font file="+o[p].face,"CExe.LF"),n(!1,o[p].face)}}},apn.CExe.prototype.getConsole=function(){return this.$O3T},apn.CExe.prototype.$O50=function(e,t){if(this.$Occ.tagVP.style.zIndex=10,this.$O2N.wOrg+t.border.left+t.border.right<=t.width.topCenter+t.width.topLeft+t.width.topRight||this.$O2N.wOrg+t.border.left+t.border.right<=t.width.bottomCenter+t.width.bottomLeft+t.width.bottomRight){this.$O51();var a=14;return this.$O2Q=this.$O2Q||this.tag.$TAG("div",{style:"position:absolute;border:solid 3px #686868;background-color:#272733;"}),this.$O2Q.$CSS({boxSizing:"border-box",borderRadius:"9px"}),this.$O2Q.style.width=this.$O2N.wOrg+2*a+"px",this.$O2Q.style.height=this.$O2N.hOrg+4*a+"px",this.$O2Q.style.left=this.$O2N.x-a+"px",this.$O2Q.style.top=this.$O2N.y-2*a+"px",void(this.$O2Q.style.display="block")}var i=1,n=apn.CExe.PATH_SKIN_IMG+"/"+e+"/";this.$O2R=this.$O2R||this.tag.$TAG("div",{style:"position:absolute;background-image:url("+n+"l.png);background-repeat:repeat-y;"}),this.$O2R.style.width=t.border.left+"px",this.$O2R.style.height=this.$O2N.hOrg+2*i+"px",this.$O2R.style.left=this.$O2N.x-t.border.left+"px",this.$O2R.style.top=this.$O2N.y-i+"px",this.$O2R.style.display="block",this.$O2S=this.$O2S||this.tag.$TAG("div",{style:"position:absolute;background-image:url("+n+"r.png);background-repeat:repeat-y;"}),this.$O2S.style.width=t.border.right+"px",this.$O2S.style.height=this.$O2N.hOrg+2*i+"px",this.$O2S.style.left=this.$O2N.x+this.$O2N.wOrg+"px",this.$O2S.style.top=this.$O2N.y-i+"px",this.$O2S.style.display="block";var r=this.$O2N.wOrg+t.border.left+t.border.right-t.width.topLeft-t.width.topRight,o=this.$O2N.wOrg+t.border.left+t.border.right-t.width.bottomLeft-t.width.bottomRight;this.$O2T=this.$O2T||this.tag.$TAG("div",{style:"position:absolute;background-image:url("+n+"t.png);background-repeat:repeat-x;"}),this.$O2T.style.width=r+2*i+"px",this.$O2T.style.height=t.border.top+"px",this.$O2T.style.left=this.$O2N.x-t.border.left+t.width.topLeft-i+"px",this.$O2T.style.top=this.$O2N.y-t.border.top+"px",this.$O2T.style.display="block",this.$O2U=this.$O2U||this.tag.$TAG("div",{style:"position:absolute;background-image:url("+n+"b.png);background-repeat:repeat-x;"}),this.$O2U.style.width=o+2*i+"px",this.$O2U.style.height=t.border.bottom+"px",this.$O2U.style.left=this.$O2N.x-t.border.left+t.width.topLeft-i+"px",this.$O2U.style.top=this.$O2N.y+this.$O2N.hOrg+"px",this.$O2U.style.display="block",this.$O2V=this.$O2V||this.tag.$TAG("div",{style:"z-index:1;position:absolute;background-image:url("+n+"lt.png);background-repeat:no-repeat;"}),this.$O2V.style.width=t.width.topLeft+"px",this.$O2V.style.height=t.border.top+"px",this.$O2V.style.left=this.$O2N.x-t.border.left+"px",this.$O2V.style.top=this.$O2N.y-t.border.top+"px",this.$O2V.style.display="block",this.$O2W=this.$O2W||this.tag.$TAG("div",{style:"z-index:1;position:absolute;background-image:url("+n+"rt.png);;background-repeat:no-repeat;"}),this.$O2W.style.width=t.width.topRight+"px",this.$O2W.style.height=t.border.top+"px",this.$O2W.style.left=this.$O2N.x-t.border.left+t.width.topLeft+r+"px",this.$O2W.style.top=this.$O2N.y-t.border.top+"px",this.$O2W.style.display="block",this.$O2X=this.$O2X||this.tag.$TAG("div",{style:"z-index:2;position:absolute;background-image:url("+n+"ct.png);;background-repeat:no-repeat;"}),this.$O2X.style.width=t.width.topCenter+"px",this.$O2X.style.height=t.border.top+"px",this.$O2X.style.left=this.$O2N.x+(this.$O2N.wOrg-t.width.topCenter)/2+"px",this.$O2X.style.top=this.$O2N.y-t.border.top+"px",this.$O2X.style.display="block",this.$O2Y=this.$O2Y||this.tag.$TAG("div",{style:"z-index:1;position:absolute;background-image:url("+n+"lb.png);;background-repeat:no-repeat;"}),this.$O2Y.style.width=t.width.bottomLeft+"px",this.$O2Y.style.height=t.border.bottom+"px",this.$O2Y.style.left=this.$O2N.x-t.border.left+"px",this.$O2Y.style.top=this.$O2N.y+this.$O2N.hOrg+"px",this.$O2Y.style.display="block",this.$O2Z=this.$O2Z||this.tag.$TAG("div",{style:"z-index:1;position:absolute;background-image:url("+n+"rb.png);;background-repeat:no-repeat;"}),this.$O2Z.style.width=t.width.bottomRight+"px",this.$O2Z.style.height=t.border.bottom+"px",this.$O2Z.style.left=this.$O2N.x-t.border.left+t.width.bottomLeft+o+"px",this.$O2Z.style.top=this.$O2N.y+this.$O2N.hOrg+"px",this.$O2Z.style.display="block",this.$O30=this.$O30||this.tag.$TAG("div",{style:"z-index:2;position:absolute;background-image:url("+n+"cb.png);;background-repeat:no-repeat;"}),this.$O30.style.width=t.width.bottomCenter+"px",this.$O30.style.height=t.border.bottom+"px",this.$O30.style.left=this.$O2N.x+(this.$O2N.wOrg-t.width.bottomCenter)/2+"px",this.$O30.style.top=this.$O2N.y+this.$O2N.hOrg+"px",this.$O30.style.display="block"},apn.CExe.prototype.$O51=function(){this.$O2Q&&(this.$O2Q.style.display="none"),this.$O2R&&(this.$O2R.style.display="none"),this.$O2S&&(this.$O2S.style.display="none"),this.$O2T&&(this.$O2T.style.display="none"),this.$O2U&&(this.$O2U.style.display="none"),this.$O2V&&(this.$O2V.style.display="none"),this.$O2W&&(this.$O2W.style.display="none"),this.$O2X&&(this.$O2X.style.display="none"),this.$O2Y&&(this.$O2Y.style.display="none"),this.$O2Z&&(this.$O2Z.style.display="none"),this.$O30&&(this.$O30.style.display="none")},apn.CExe.prototype.hasSkin=function(){return!this.o.standAlone&&!this.$O7J},apn.CExe.prototype.doPreRunProcess=function(){this.$O3W=1},apn.CExe.prototype.runByTitle=function(e){if(this.project){for(var t=apn.Project.getPages(this.project),a=apn.Project.getPageTitles(this.project),i=0;i<a.length;i++)if(a[i]==e)return void this.run(void 0,t[i]);this.run()}},apn.CExe.prototype.runByIndex=function(e,t){if(this.project){var a=apn.Project.getPages(this.project);return e>=1&&a[e-1]?void this.run(void 0,a[e-1],void 0,t):void this.run()}},apn.CExe.prototype.run=function(e,t,a,i){function n(e,a){e?m.$O2J.prev({transit:y,transitDuration:f,transitTiming:b,postRun:a,data:{refresh:i,popup:v}}):m.$O2J.run(t,{transit:y,transitDuration:f,transitTiming:b,postRun:a,data:{refresh:i,popup:v}})}function r(e){return e?m.$O2J.canPrev({transit:y,transitDuration:f,transitTiming:b}):void m.$O2J.canRun(t,{transit:y,transitDuration:f,transitTiming:b})}function o(){function e(){m.$O2J.get(a).show()}if(s()){var a=m.$O2J.getCurrent();m.$O2J.run(t,{transit:y,transitDuration:f,transitTiming:b,postRun:e,data:{refresh:i,popup:v}})}}function s(){return m.$O2J.canRun(t,{transit:y,transitDuration:f,transitTiming:b})}function p(e){r(!0)&&n(!0)}function l(e){return r(!0)}function d(){if(s()){var e=m.$O2J.historyPop();void 0!==e&&void 0!==m.$O2J.getCurrent()?(m.$O2J.get(e).execShut(m.$O2J.get(m.$O2J.getCurrent())),m.$O2J.get(m.$O2J.getCurrent()).execRun(),m.$O2J.get(m.$O2J.getCurrent()).execTransitEnd()):bx.Trace.log("APN","warning","Invalid link flow case","CExe.run"),o()}}function c(){var e=m.$O2J.getCurrent();if(l(e)){var a=m.$O2J.historyGet(1);void 0!==a?(m.$O2J.get(a).execShut(m.$O2J.get(t)),m.$O2J.get(t).execRun(),m.$O2J.get(t).execTransitEnd(),m.$O2J.historyAdd(1,t)):bx.Trace.log("APN","warning","Invalid link flow case","CExe.run"),p(e)}}if(this.project){if(!t&&!e){var g;(g=bx.$getParamFromURL(location.href,"APXFLOW"))&&this.getStartPageID(g)&&(t=this.getStartPageID(g))}if((0==t||t)&&(t+=""),t&&e)return void bx.Trace.log("APN","warning","Parameter error link="+e+", pageID="+t,"CExe.run");this.doPreRunProcess();var u,h=!1;if(e?e.to&&e.to.reset&&(i=!0):(t||(t=this.$O36()),t&&(e={action:"LTP",to:{pageID:t},transit:{effect:"none"}}),h=!0),!e){for(u in this.project.pages)if("apn.CFlowPage"==this.project.pages[u].module){t=u,e={action:"LTP",to:{pageID:t},transit:{effect:"none"}},h=!0;break}this.o.standAlone||apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.flwModeHide||this.showLoading("Start with the first page in the file due to empty flow!",apn.CExe.TIME_TOASTMSG_ERROR)}if(this.flow.pages[e.to.pageID]||(this.flow.pages[e.to.pageID]={init:{}},this.flow.pages[e.to.pageID].init.position={x:0,y:0}),t=e.to.pageID,t==this.$O2J.getCurrent())return void(i&&this.reloadCurPage());var x;(x=this.$O2J.get(t))||(x=new apn.CExePage(this.$O2J,t,{}).create(),x.viewer=this,x.init(),this.$O2J.add(x)),e.transit=e.transit||{},apn.Project.resolveTransit(this.project,e.transit,a),bx.$checkNaN(parseInt(e.transit.duration))||(e.transit.effect="none");var f,y=e.transit.effect||"none",f="none"==y?1:bx.$checkNaN(parseInt(e.transit.duration)),b=e.transit.timing,v=!h&&"3"==e.to.type,C=!h&&void 0!==this.$O2J.getCurrent()&&this.$O2J.get(this.$O2J.getCurrent()).popup,m=this;C?a?v?bx.Trace.log("APN","warning","Invalid link flow case","CExe.run"):p(this.$O2J.getCurrent()):this.$O2J.getPrev()==t?(a=!0,p(this.$O2J.getCurrent())):v?d():c():a?v?bx.Trace.log("APN","warning","Invalid link flow case","CExe.run"):n(a):v?o():n(a)}},apn.CExe.prototype.reloadCurPage=function(){var e;(e=this.$O2J.getCurrent())&&this._reloadPage(e)},apn.CExe.prototype._reloadPage=function(e){var t=this.$O2J.get(e);t&&t.canvas&&(t.canvas.$O37(),t.canvas.$O5n(),t.canvas.$O3I(),t.canvas.afterLoaded=!1,t.canvas.$O5t(),t.apxInRun=!0,this.IDriver_onRefreshScreen&&this.IDriver_onRefreshScreen(e))},apn.CExe.prototype.reloadPage=apn.CExe.prototype._reloadPage,apn.CExe.prototype.$O6t=function(){function e(t){var a=n.project.pages[t];if("apn.CFlowPage"==a.module){if(a.ITRs&&a.ITRs.length)for(var r=0;r<a.ITRs.length;r++)"LTP"!=a.ITRs[r].action||i[a.ITRs[r].to.pageID]||(i[a.ITRs[r].to.pageID]=!0,e(a.ITRs[r].to.pageID));for(var o in a.objects)if(a.objects[o].ITRs&&a.objects[o].ITRs.length)for(r=0;r<a.objects[o].ITRs.length;r++)"LTP"!=a.objects[o].ITRs[r].action||i[a.objects[o].ITRs[r].to.pageID]||(i[a.objects[o].ITRs[r].to.pageID]=!0,
e(a.objects[o].ITRs[r].to.pageID))}}var t=[],a=this.$O36();if(a){var i={},n=this;i[a]=!0,e(a);for(var r in i)t.push(r)}return t},apn.CExe.prototype.$O36=function(e){if(!this.project)return null;for(var t in this.flow.pages)if(this.project.pages[t].ITRs&&this.project.pages[t].ITRs.length)for(i=0;i<this.project.pages[t].ITRs.length;i++)if("LTP"==this.project.pages[t].ITRs[i].action)if(2==e){if(this.project.pages[t].ITRs[i].from.objectID==apn.Project.ID_2NDARY_POINT)return this.project.pages[t].ITRs[i].to.pageID}else if(!this.o.standAlone&&this.o.useSecondaryFlow&&this.project.pages[t].ITRs[i].from.objectID==apn.Project.ID_2NDARY_POINT)return this.project.pages[t].ITRs[i].to.pageID;if(void 0===e||1==e)for(var t in this.flow.pages)if(this.project.pages[t].ITRs&&this.project.pages[t].ITRs.length)for(i=0;i<this.project.pages[t].ITRs.length;i++)if("LTP"==this.project.pages[t].ITRs[i].action&&this.project.pages[t].ITRs[i].from.objectID==apn.Project.ID_START_POINT)return this.project.pages[t].ITRs[i].to.pageID;var a=apn.Project.getPages(this.project,!0,"apn.CFlowPage");return a.length?a[0]:null},apn.CExe.prototype.getStartPageID=apn.CExe.prototype.$O36,apn.CExe.prototype.isRunnerablePage=function(e){return"apn.CFlowPage"==e.module},apn.CExe.prototype.getOutPageID=function(){if(!this.project)return null;for(var e in this.flow.pages)if(this.project.pages[e].ITRs&&this.project.pages[e].ITRs.length)for(i=0;i<this.project.pages[e].ITRs.length;i++)if("LTP"==this.project.pages[e].ITRs[i].action&&this.project.pages[e].ITRs[i].from.objectID==apn.Project.ID_END_POINT)return this.project.pages[e].ITRs[i].to.pageID;return null},apn.CExe.prototype.getInPageID=function(){if(!this.project)return null;for(var e in this.flow.pages)if(this.project.pages[e].ITRs&&this.project.pages[e].ITRs.length)for(i=0;i<this.project.pages[e].ITRs.length;i++)if("LTP"==this.project.pages[e].ITRs[i].action&&this.project.pages[e].ITRs[i].from.objectID==apn.Project.ID_IN_POINT)return this.project.pages[e].ITRs[i].to.pageID;return null},apn.CExe.prototype.getCurrentPageID=function(){return this.project&&this.$O2J?void 0===this.$O2J.getCurrent()?null:this.$O2J.getCurrent():null},apn.CExe.prototype.getCurPageID=apn.CExe.prototype.getCurrentPageID,apn.CExe.prototype.getCurApx=function(){var e;if(e=this.$O2J.getCurrent()){var t=this.$O2J.get(e);if(t&&t.canvas)return t.canvas}},apn.CExe.prototype.getPage=function(e){return this.project&&this.$O2J?this.$O2J.get(e):null},apn.CExe.prototype.getProjectSize=function(){return apn.Project.getScreenSize(this.project)},apn.CExe.prototype.getPaneCount=function(){return{x:1,y:1}},apn.CExe.prototype.getScreenSize=function(e,t,a,i,n,r){var o={},s=apn.Project.getLayout(this.project).property.CExe;if(!this.hasSkin()&&!this.o.noLayout&&s&&s.layout&&("H"==s.layout.layout||s.layout.layout.indexOf("yh")!=-1))return o.w=Math.round(t/i*a),o.h=t,o.x=Math.round((e-o.w)/2),o.y=Math.round((t-o.h)/2),"H"==s.layout.layout?(o.zoomX=1,o.zoomY=1):(o.zoomY=i/o.h,o.zoomX=o.zoomY),s.layout.layout.indexOf("$FIX")!=-1&&(o.x=0,o.y=0,o.noClip=!0),o;if(n)o.zoomX=1,o.zoomY=1,o.w=a,o.h=i,this.o.noLayout?(o.x=0,o.y=0):(o.x=Math.round((e-o.w)/2),o.y=Math.round((t-o.h)/2));else{var p,l,d=e/a;if(2==r)p=a,l=i,o.zoomX=1,o.zoomY=1;else if(Math.floor(d*i)<=t||2==r)p=e,l=Math.round(d*i),o.zoomX=1/d,o.zoomY=1/d;else{var c=t/i;l=t,p=Math.round(c*a),o.zoomX=1/c,o.zoomY=1/c}o.w=p,o.h=l,o.x=Math.round((e-o.w)/2),1==r?o.y=Math.round((t-o.h)/2):o.y=0}var g=this.getPaneCount();return g.x>1&&(o.w=Math.floor(o.w/g.x)*g.x),g.y>1&&(o.h=Math.floor(o.h/g.y)*g.y),o},apn.CExe.prototype.setPinchDetectInfo=function(e){this.__uPncDctInfo=e},apn.CExe.prototype.showLoading=function(e,t){if(!this.$O39){var a=Math.ceil(this.height/54);this.$O39=this.tagVP.$TAG("div",{align:"center"},{position:"absolute",fontSize:a+"px",maxWidth:parseInt(.7*this.width)+"px",padding:Math.floor(a/2)+"px "+2*a+"px "+Math.floor(a/2)+"px "+2*a+"px",borderRadius:Math.floor(.4*a)+"px",backgroundColor:apn.CES.$O6l("rgba(83, 83, 83, 0.5)"),color:"#ffffff"})}if(this.$O2U&&"block"==this.$O2U.style.display?this.$O39.style.bottom=parseInt(this.$O2U.style.height)+parseInt(.01*this.height)+"px":this.$O39.style.bottom=parseInt(.06*this.height)+"px",this.$O39.$O3a&&(clearTimeout(this.$O39.$O3a),this.$O39.$O3a=0),t){var i=this;this.$O39.$O3a=setTimeout(function(){i.hideLoading()},t)}this.$O39.style.display="block",this.$O39.innerHTML=e,this.$O39.style.zIndex=bx.UX.getZindex("alert"),this.$O39.style.left=parseInt((this.width-this.$O39.offsetWidth)/2)+"px"},apn.CExe.prototype.hideLoading=function(){this.$O39&&(this.$O39.style.display="none",this.$O39.$O3a=0)},apn.CExe.prototype.$O3Y=function(e){var t=e.tmp,a=e.rsc;delete e.tmp,a&&delete e.rsc;var i=bx.$cloneObject({},e);return e.tmp=t,a&&(e.rsc=a,i.rsc=a),i},apn.CExePage=function(e,t,a,i){bx.inClassing||bx.CPage2.call(this,e,t,i,void 0,a)},bx.$Inherit(apn.CExePage,bx.CPage2),apn.CExePage.prototype.execInit=function(){this.updateStart(),this.tag.style.zIndex=0,this.canvas=new(this.o.CExePage&&this.o.CExePage.clsCanvas?this.o.CExePage.clsCanvas:apn.CES)(this.tagVP),this.canvas.viewer=this.viewer,this.canvas.page=this,this.canvas.popup=this.popup,this.canvas.init(),this.canvas.zoom(this.viewer.$O2O,this.viewer.$O2P),this.canvas.$O5o(this.id),this.updateEnd(),this.canvas.tag.style.visibility="hidden"},apn.CExePage.prototype.execRun=function(e){this.show();var t=!0;if(e&&e.data&&e.data.popup?this.popup=!0:this.popup=!1,this.apxInRun=!1,this.canvas?this.canvas.$O41&&e&&e.data&&e.data.refresh&&(this.canvas.$O37(),this.viewer.IDriver_onRefreshScreen&&this.viewer.IDriver_onRefreshScreen(this.id),t=!1):(this.execInit(),this.initialized=!0,t=!1),this.popup||this.tag.parentNode.bxPageTransition&&this.tag.parentNode.bxPageTransition.tagPopup&&(this.tag.parentNode.bxPageTransition.tagPopup.style.display="none"),t&&this.canvas.$O41){var a=this;setTimeout(function(){a.canvas.$O3X("exeOnResume",a.id)},0)}else this.canvas.$O5n(e&&e.data&&e.data.noStart);this.canvas.$O41=!0,this.canvas.$O5q(),e&&e.data&&(e.data.noStart||e.data.noNotifyToEditor)||this.viewer.IDriver_onRunScreen&&this.viewer.IDriver_onRunScreen(this.id),this.viewer.ISub_onPostRunPage&&this.viewer.ISub_onPostRunPage(this)},apn.CExePage.prototype.execShut=function(e){this.hide(!0),this.popup=!1,this.canvas&&this.canvas.$O3X("exeOnPause",this.id),this.canvas&&this.canvas._eventOnPagePause()},apn.CExePage.prototype.execTransitStart=function(){this.popup&&this.canvas&&this.canvas.project&&(apn.Project.$O5X(this.canvas.project,this.viewer.o.standAlone,"color",this.canvas.screen.BG?this.canvas.screen.BG.fillStyle:void 0,this.tag.parentNode.bxPageTransition.tagPopup,1/this.canvas.getZoomX(),1/this.canvas.getZoomY()),this.canvas.screen.BG?apn.Project.$O5X(this.canvas.project,this.viewer.o.standAlone,"media",this.canvas.screen.BG.mediaID||this.canvas.screen.BG.mediaFillStyle,this.tag.parentNode.bxPageTransition.tagPopup,1/this.canvas.getZoomX(),1/this.canvas.getZoomY()):apn.Project.$O5X(this.canvas.project,this.viewer.o.standAlone,"media",void 0,this.tag.parentNode.bxPageTransition.tagPopup,1/this.canvas.getZoomX(),1/this.canvas.getZoomY()))},apn.CExePage.prototype.execTransitEnd=function(e){this.canvas&&this.canvas.afterLoaded&&(e||this.canvas.$O3I(),this.canvas.afterLoaded=!1),this.popup&&(this.tag.parentNode.bxPageTransition.tagPopup.style.display="block"),this.canvas&&(e||this.canvas.$O5t(),this.canvas.$O5r()),this.apxInRun=!0},apn.CExePage.prototype.execPreShut=function(e){e&&e.popup||this.canvas.$O5s()},apn.CExePage.prototype.execTransitOutEnd=function(e){this.canvas&&this.canvas.$O5r()},apn.CExePage.prototype.destroy=function(){return this.canvas&&(void 0!==this.canvas.$O42&&(bx.Transition.loopRemove(this.canvas.$O42),delete this.canvas.$O42),this.canvas.$O3M(),this.canvas.$O7K=!0,delete this.canvas),bx.CWnd.prototype.destroy.call(this)},apn.CExeScreen=function(e){if(!bx.inClassing){this.$O3d={},this.tag=e;var t=bx.HCL.getElementRect(this.tag);this.width=t.w,this.height=t.h}},apn.CES=apn.CExeScreen,apn.CES.transformSet=function(e,t,a){"rotate"==t?e.apxTrRotate=a:"rotateZ"==t?e.apxTrRotateZ=a:"rotateY"==t?e.apxTrRotateY=a:"resize"==t?e.apxTrResize=a:"resizeX"==t?e.apxTrResizeX=a:"resizeY"==t?e.apxTrResizeY=a:"origin"==t?e.apxTrOrigin=a:"x"==t?e.apxTrX=a:"y"==t?e.apxTrY=a:"z"==t?e.apxTrZ=a:"originX"==t?e.apxTrOriginX=a:"originY"==t&&(e.apxTrOriginY=a)},apn.CES.transformApply=function(e){if(bx.HCL.DV.isIE()&&bx.HCL.DV.isIE()<=8)if(void 0!==e.apxTrRotate&&0!==e.apxTrRotate){var t=bx.CCanvasWnd.degreeToRad(e.apxTrRotate),a=Math.cos(t),i=Math.sin(t),n=this.$O6y||{},r=.5,o=.5;if(e.apxTrOrigin&&e.apxTrOrigin.split){var s=e.apxTrOrigin.split(" ");r="left"==s[0]?0:"right"==s[0]?1:"center"==s[0]?.5:bx.$checkNaN(parseFloat(s[0]))/100,o="top"==s[1]?0:"bottom"==s[1]?1:"center"==s[1]?.5:bx.$checkNaN(parseFloat(s[1]))/100}n=bx.CCanvasWnd.getEnclosingRect(parseInt(e.style.left),parseInt(e.style.top),apn.CES.$O5v(e)||1,apn.CES.$O5x(e)||1,t,n,parseInt(e.style.left)+apn.CES.$O5v(e)*r,parseInt(e.style.top)+apn.CES.$O5x(e)*o),e.style.marginLeft=n.x1-parseInt(e.style.left)+"px",e.style.marginTop=n.y1-parseInt(e.style.top)+"px",e.$CSS("filter",bx.$applyMsFilter(e,"matrix","M11="+a+",M12="+-i+",M21="+i+",M22="+a))}else e.$CSS("filter",bx.$applyMsFilter(e,"matrix"));else{var p="";void 0!==e.apxTrRotateZ&&0!==e.apxTrRotateZ&&(p+=p?" rotateZ("+e.apxTrRotateZ+"deg)":"rotateZ("+e.apxTrRotateZ+"deg)"),void 0!==e.apxTrRotateY&&0!==e.apxTrRotateY&&(p+=p?" rotateY("+e.apxTrRotateY+"deg)":"rotateY("+e.apxTrRotateY+"deg)"),void 0!==e.apxTrRotate&&0!==e.apxTrRotate&&(p+=p?" rotate("+e.apxTrRotate+"deg)":"rotate("+e.apxTrRotate+"deg)"),void 0!==e.apxTrResize&&1!==e.apxTrResize&&(p+=p?" scale("+e.apxTrResize+","+e.apxTrResize+")":"scale("+e.apxTrResize+","+e.apxTrResize+")"),void 0!==e.apxTrResizeX&&1!==e.apxTrResizeX&&(p+=p?" scaleX("+e.apxTrResizeX+")":"scaleX("+e.apxTrResizeX+")"),void 0!==e.apxTrResizeY&&1!==e.apxTrResizeY&&(p+=p?" scaleY("+e.apxTrResizeY+")":"scaleY("+e.apxTrResizeY+")"),void 0!==e.apxTrX&&0!==e.apxTrX?(p+=p?" translateX("+bx.$checkNaN(parseInt(e.apxTrX))+"px)":"translateX("+bx.$checkNaN(parseInt(e.apxTrX))+"px)",e.$O7L=e.apxTrX+(e.width||parseInt(e.style.width))*(void 0===e.apxTrOriginX?.5:e.apxTrOriginX)+"px"):e.$O7L&&delete e.$O7L,void 0!==e.apxTrY&&0!==e.apxTrY?(p+=p?" translateY("+bx.$checkNaN(parseInt(e.apxTrY))+"px)":"translateY("+bx.$checkNaN(parseInt(e.apxTrY))+"px)",e.$O7O=e.apxTrY+(e.height||parseInt(e.style.height))*(void 0===e.apxTrOriginY?.5:e.apxTrOriginY)+"px"):e.$O7O&&delete e.$O7O,void 0!==e.apxTrZ&&(p+=p?" translateZ("+bx.$checkNaN(parseInt(e.apxTrZ))+"px)":"translateZ("+bx.$checkNaN(parseInt(e.apxTrZ))+"px)"),p?(e.$CSS("transform",p),e.$O7L||e.$O7O?e.$CSS("transformOrigin",(e.$O7L||"50%")+" "+(e.$O7O||"50%")):e.apxTrOrigin&&e.$CSS("transformOrigin",e.apxTrOrigin)):e.$CSS("transform","none")}},apn.CES.transformClear=function(e){void 0!==e.apxTrRotate&&delete e.apxTrRotate,void 0!==e.apxTrRotateZ&&delete e.apxTrRotateZ,void 0!==e.apxTrRotateY&&delete e.apxTrRotateY,void 0!==e.apxTrResize&&delete e.apxTrResize,void 0!==e.apxTrResizeX&&delete e.apxTrResizeX,void 0!==e.apxTrResizeY&&delete e.apxTrResizeY,void 0!==e.apxTrOrigin&&delete e.apxTrOrigin,void 0!==e.apxTrX&&delete e.apxTrX,void 0!==e.apxTrY&&delete e.apxTrY,void 0!==e.apxTrZ&&delete e.apxTrZ,void 0!==e.apxOriginX&&delete e.apxOriginX,void 0!==e.apxOriginY&&delete e.apxOriginY},apn.CES.$O5v=function(e){return bx.$checkNaN(parseInt(e.style.width))+apn.CES.$O5w(e)},apn.CES.$O5w=function(e){return bx.$checkNaN(parseInt(e.$css("padding-left")))+bx.$checkNaN(parseInt(e.$css("padding-right")))+bx.$checkNaN(parseInt(e.$css("border-left-width")))+bx.$checkNaN(parseInt(e.$css("border-right-width")))},apn.CES.$O5x=function(e){return bx.$checkNaN(parseInt(e.style.height))+apn.CES.$O5y(e)},apn.CES.$O5y=function(e){return bx.$checkNaN(parseInt(e.$css("padding-top")))+bx.$checkNaN(parseInt(e.$css("padding-bottom")))+bx.$checkNaN(parseInt(e.$css("border-top-width")))+bx.$checkNaN(parseInt(e.$css("border-bottom-width")))},apn.CES.$O6l=function(e){return bx.HCL.DV.isIE()&&bx.HCL.DV.isIE()<=8&&e&&e.toLowerCase&&0==e.toLowerCase().indexOf("rgba(")?apn.CES.$O6z(e):e},apn.CES.ieColor=apn.CES.$O6l,apn.CES.$O6z=function(e){if(e&&e.toLowerCase&&0==e.toLowerCase().indexOf("rgba(")){var t=e.substring(5).split(",");if(t.length>=4)return 0==bx.$checkNaN(parseFloat(t[3]))?"transparent":"rgb("+bx.$checkNaN(parseInt(t[0]))+","+bx.$checkNaN(parseInt(t[1]))+","+bx.$checkNaN(parseInt(t[2]))+")"}return e},apn.CES.$O6k=function(e){if(bx.HCL.DV.isIE()&&bx.HCL.DV.isIE()<=8&&e&&e.toLowerCase&&0==e.toLowerCase().indexOf("rgba(")){var t=e.substring(5).split(",");if(t.length>=4){if(0==bx.$checkNaN(parseFloat(t[3])))return"";var a,i="";return a=new Number(Math.floor(255*bx.$checkNaN(parseFloat(t[3])))).toString(16),i+=1==a.length?"0"+a:a,a=new Number(bx.$checkNaN(parseInt(t[0]))).toString(16),i+=1==a.length?"0"+a:a,a=new Number(bx.$checkNaN(parseInt(t[1]))).toString(16),i+=1==a.length?"0"+a:a,a=new Number(bx.$checkNaN(parseInt(t[2]))).toString(16),i+=1==a.length?"0"+a:a}}return""},apn.CES.toRGB=apn.CES.$O6z,apn.CES.setupScrollY=function(e){e.style.overflowY="auto",bx.HCL.DV.hasTouchEvent()&&e.$CSS("overflowScrolling","touch"),e.apnScroll=!0},apn.CES.toRGBA=function(e,t){var a=g=b=0;if(t=t||0,e=e||"",e=e.toLowerCase(),"#"==e[0]&&7==e.length)return a=parseInt("0x"+e.substring(1,3)),g=parseInt("0x"+e.substring(3,5)),b=parseInt("0x"+e.substring(5,7)),"rgba("+a+","+g+","+b+","+t+")";if(0==e.indexOf("rgb(")){var i=e.substring(4).split(",");return a=parseInt(i[0]),g=parseInt(i[1]),b=parseInt(i[2]),"rgba("+a+","+g+","+b+","+t+")"}return e},apn.CES.prototype.init=function(e){this.$O44()},apn.CES.prototype.zoom=function(e,t){return this.$O2O=e,this.$O2P=t,!0},apn.CES.prototype.getZoomX=function(){return this.$O2O},apn.CES.prototype.getZoomY=function(){return this.$O2P},apn.CES.prototype.getPageID=function(){return this.$O1m},apn.CES.prototype.getPageId=apn.CES.prototype.getPageID,apn.CES.prototype.isPaused=function(){return this.$O6J},apn.CES.prototype.$Ocj=function(e){function t(a){e?(a._CExeCsrBk=a.style.cursor,a.style.cursor="none"):a.apnCur&&a.apnCur.cursor?a.style.cursor=a.apnCur.cursor:a._CExeCsrBk?a.style.cursor=a._CExeCsrBk:a.style.cursor="inherit";for(var i=0;i<a.childNodes.length;i++)1==a.childNodes[i].nodeType&&t(a.childNodes[i])}t(this.tag)},apn.CES.prototype.applyCursor=apn.CES.prototype.$Ocj,apn.CES.prototype.setCursor=function(e,t,a){this.$Ock={url:e,cx:t||0,cy:a||0},this.$Ocl||(this.$Ocl=this.tag.$TAG("img",{style:"position:absolute;"}),this.$Ocl.$CSS("pointerEvents","none"),this.tagPassPointerEvent(this.$Ocl,!0));var i=this;this.$Ocl.onload=function(){i.$Ocl&&(i.$Ocl.style.width=Math.round(1/i.getZoomX()*this.naturalWidth)+"px",i.$Ocl.style.height=Math.round(1/i.getZoomY()*this.naturalHeight)+"px",i.$Ock.cx=Math.round(i.$Ock.cx*(1/i.getZoomX())),i.$Ock.cy=Math.round(i.$Ock.cy*(1/i.getZoomY())))},this.$Ocl.src=e,this.$Ocl.style.display="none",this.$Ocl.style.zIndex=3*bx.CCanvasWnd.ZINDEX_OBJECT,this.$Ocj(!0)},apn.CES.prototype.clearCursor=function(){this.$Ock&&(delete this.$Ock,this.$Ocj(),this.$Ocl.parentNode.removeChild(this.$Ocl),delete this.$Ocl)},apn.CES.prototype.eventBlock=function(e){this.$O7P=e},apn.CES.prototype.isEventBlocked=function(){return this.$O7P},apn.CES.prototype.$O44=function(){function e(e,a,i,n,r,o,s){var p=bx.HCL.getElementX(t.tag),l=bx.HCL.getElementY(t.tag),d=bx.HCL.getElementX(t.viewer.getContainerTAG()),c=bx.HCL.getElementY(t.viewer.getContainerTAG()),g=i,u=n;if(i=t.viewer.onGestureCoordTransformX(r-d,o-c),n=t.viewer.onGestureCoordTransformY(r-d,o-c),i+=d,n+=c,i-=p,n-=l,t.$Ocm=Math.round(i/(1/t.$O2O)),t.$Ocn=Math.round(n/(1/t.$O2P)),t._lastEvTag=bx.Event.getElement(s),t.startDrag&&(a==bx.CGesture.POINTER_DRAG||a==bx.CGesture.POINTER_END)){var h=t.startDrag,x=t.$O46(h),f=t.$O47(h);if(a==bx.CGesture.POINTER_DRAG){if(h.x_inDrag||(h.x_inDrag=!0,t.inDragTag=h,h.$CSS({transitionDuration:0})),!h.apxOnDrag||h.apxOnDrag(t,h.x_dragSX+(i-h.x_inDragSX),h.x_dragSY+(n-h.x_inDragSY),i,n,s,i-(bx.HCL.getElementX2(h)-p),n-(bx.HCL.getElementY2(h)-l))){var y=h.x_dragW,b=h.x_dragH;if(x){var v=h.x_dragSX+(i-h.x_inDragSX),C=0;t.$O5z(h)?v<0?(C=0-v,v=0):v>h.parentNode.clientWidth-y&&(C=h.parentNode.clientWidth-y-v,v=h.parentNode.clientWidth-y):t.$O7Q(h)&&(v>0?(C=-v,v=0):v<-(y-h.parentNode.clientWidth)&&(C=-v-(y-h.parentNode.clientWidth),v=-(y-h.parentNode.clientWidth))),h.apnOID&&t.screen.objects[h.apnOID]&&(t.$O5D(t.screen.objects[h.apnOID],apn.widgets.utils.$O3Z(i+C-h.x_inDragEX,1/t.$O2O),void 0),t.screen.objects[h.apnOID].init.position.x+=apn.widgets.utils.$O3Z(i+C-h.x_inDragEX,1/t.$O2O)),h.style.left=v+"px",h.x_inDragEX=i+C}if(f){var m=h.x_dragSY+(n-h.x_inDragSY),I=0;t.$O5z(h)?m<0?(I=0-m,m=0):m>h.parentNode.clientHeight-b&&(I=h.parentNode.clientHeight-b-m,m=h.parentNode.clientHeight-b):t.$O7Q(h)&&(m>0?(I=-m,m=0):m<-(b-h.parentNode.clientHeight)&&(I=-m-(b-h.parentNode.clientHeight),m=-(b-h.parentNode.clientHeight))),h.apnOID&&t.screen.objects[h.apnOID]&&(t.$O5D(t.screen.objects[h.apnOID],void 0,apn.widgets.utils.$O40(n+I-h.x_inDragEY,1/t.$O2P)),t.screen.objects[h.apnOID].init.position.y+=apn.widgets.utils.$O40(n+I-h.x_inDragEY,1/t.$O2P)),h.style.top=m+"px",h.x_inDragEY=n+I}(x||f)&&h.apnOID&&t.screen.objects[h.apnOID]&&(t.$O4a(h,"drag"),apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.exeApxMoveWgtByDOM||apn.IWidget.exeRenderPosition(t,h,t.screen.objects[h.apnOID],t.project,1/t.$O2O,1/t.$O2P))}}else if(a==bx.CGesture.POINTER_END){if(h.x_inDrag=!1,t.inDragTag=null,t.inDragLastTime=s.timeStamp,!h.apxOnDragEnd||h.apxOnDragEnd(t,s)||(h.style.left=h.x_dragSX+"px",h.style.top=h.x_dragSY+"px",h.apnOID&&t.screen.objects[h.apnOID]&&(x&&(t.$O5D(t.screen.objects[h.apnOID],h.x_inDragScX-t.screen.objects[h.apnOID].init.position.x,void 0,!0),t.screen.objects[h.apnOID].init.position.x=h.x_inDragScX),f&&(t.$O5D(t.screen.objects[h.apnOID],void 0,h.x_inDragScY-t.screen.objects[h.apnOID].init.position.y,!0),t.screen.objects[h.apnOID].init.position.y=h.x_inDragScY))),h.apnOID&&t.screen.objects[h.apnOID]){apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.exeApxMoveWgtByDOM||apn.IWidget.exeRenderPosition(t,h,t.screen.objects[h.apnOID],t.project,1/t.$O2O,1/t.$O2P,!0),t.$O4a(h,"dragEnd"),t.$O5E=h;var S,_=!1;if(S=t.$O5A(h,i,n))for(var T=0;T<S.length;T++)t.$O4a(t.$O3d[S[T]],"dragDrop:"+h.apnOID),t.$O5B(t.$O3d[S[T]],"dragDrop:"+h.apnOID)&&(_=!0);_||t.$O5F({result:!1})}void 0!==h._x_dragCssSel&&(h.$CSS("userSelect",h._x_dragCssSel),h._x_dragCssSel=void 0),t.startDrag=null}}if(a!=bx.CGesture.POINTER_MOVE&&a!=bx.CGesture.POINTER_DRAG||"mousemove"==s.type&&t.$Ock&&t.$Ocl&&("none"==t.$Ocl.style.display&&(t.$Ocl.style.display="block"),t.$Ocl.style.left=i-t.$Ock.cx+"px",t.$Ocl.style.top=n-t.$Ock.cy+"px"),a==bx.CGesture.PINCH_END){if(t.$O7P)return;var w=s.targetTouches[0].clientX,P=s.targetTouches[0].clientY,E=t.viewer.onGestureCoordTransformX(s.targetTouches[0].clientX-d,s.targetTouches[0].clientY-c),V=t.viewer.onGestureCoordTransformY(s.targetTouches[0].clientX-d,s.targetTouches[0].clientY-c);E+=d,V+=c,E-=p,V-=l;var j=r,A=o,L=Math.max(g,u),D=Math.max(j,A);D>L&&D/L>(t.viewer.__uPncDctInfo&&t.viewer.__uPncDctInfo.ratioOut?t.viewer.__uPncDctInfo.ratioOut:1.5)?t.$O48(apn.CExe.EV_PINCH_OUT,E,V,w,P,s,E,V):D<L&&L/D>(t.viewer.__uPncDctInfo&&t.viewer.__uPncDctInfo.ratioIn?t.viewer.__uPncDctInfo.ratioIn:1.5)&&t.$O48(apn.CExe.EV_PINCH_IN,E,V,w,P,s,E,V)}else if(a==bx.CGesture.MOUSE_OUT){if(t.$O7P)return;var O=s.toElement||s.relatedTarget;O&&bx.Event.getElement(s).apnOID&&(!bx.DOM.IsDescendantOf(O,t.tag)||O.tagName&&"iframe"==O.tagName.toLowerCase())&&(t.$O6A(null),t.$O6B("pointerOut",bx.Event.getElement(s),r,o,s,i,n))}else if(!t.inDragLastTime||t.inDragLastTime!=s.timeStamp||a!=bx.CGesture.POINTER_FLICK_LEFT&&a!=bx.CGesture.POINTER_FLICK_RIGHT&&a!=bx.CGesture.POINTER_FLICK_UP&&a!=bx.CGesture.POINTER_FLICK_DOWN){if(t.$O7P)return;t.$O48(a,i,n,r,o,s,i,n),t.viewer.IDriver_onGestureEvent&&t.viewer.IDriver_onGestureEvent(a,i,n,r,o,s,t)}else{if(t.$O7P)return;t.inDragLastTime=0}t.$O7P||t.$O4d(a,i,n,r,o,s)}this.$Ocm=this.$Ocn=0;var t=this,a=this.viewer.project.pages[this.page.id].UI.apnCExe;new bx.CGesture(this.tag,e,{noDelayedEvent:!0,noLongholdEvent:!this.viewer.o.useLongHold,pinchEvent:a&&"Y"==a.evPch})},apn.CES.prototype.$O4d=function(e,t,a,i,n,r){if(e==bx.CGesture.POINTER_START){var o=this.$O4e(e,t,a,i,n,r);if(!o)return;for(var s=this.$O46(o),p=this.$O47(o);o&&o!=this.tag&&!s&&!p;)(o=o.parentNode)&&(s=this.$O46(o),p=this.$O47(o));if(s||p)if(!o.apxOnDragStart||o.apxOnDragStart(this,t,a,r,t-(bx.HCL.getElementX2(o)-bx.HCL.getElementX2(this.tag)),a-(bx.HCL.getElementY2(o)-bx.HCL.getElementY2(this.tag)))){if(this.startDrag=o,o.apnOID&&apn.CExe.ACCEL(o),o.apnOID&&this.screen.objects[o.apnOID]&&(o.x_inDragScX=this.screen.objects[o.apnOID].init.position.x,o.x_inDragScY=this.screen.objects[o.apnOID].init.position.y,this.$O4a(o,"dragStart")),o.x_dragSX=parseInt(o.style.left)||0,o.x_dragSY=parseInt(o.style.top)||0,o.apnOID&&this.screen.objects[o.apnOID]){var l=this._getBoundingClientRect(o,o.x_dragSX,o.x_dragSY);o.x_dragW=Math.abs(l.x2-l.x1),o.x_dragH=Math.abs(l.y2-l.y1),o.x_dragSX=l.x1,o.x_dragSY=l.y1}else o.x_dragW=o.offsetWidth,o.x_dragH=o.offsetHeight;o.x_inDragSX=t,o.x_inDragSY=a,o.x_inDragEX=t,o.x_inDragEY=a,"none"!=o.$css("user-select")?(o._x_dragCssSel=o.$css("user-select"),o.$CSS("userSelect","none")):o._x_dragCssSel=void 0}else this.startDrag=null}},apn.CES.prototype._getBoundingClientRect=function(e,t,a){var i={},n=this.screen.objects[e.apnOID],r=1,o=1;void 0!==e.apxTrResizeX&&1!==e.apxTrResizeX&&(r=e.apxTrResizeX),void 0!==e.apxTrResizeY&&1!==e.apxTrResizeY&&(o=e.apxTrResizeY);var s=e.offsetWidth*r,p=e.offsetHeight*o;return i=bx.CCanvasWnd.getEnclosingRect(0,0,s,p,n.create.data.styles.angle||0,i,s*(n.init.cx+.5),p*(n.init.cy+.5)),t+=(e.offsetWidth-s)/2,a+=(e.offsetHeight-p)/2,i.x1+=t,i.x2+=t,i.y1+=a,i.y2+=a,i},apn.CES.prototype.$O5B=function(e,t){var a=this.$O3g(t,e?e.apnOID:void 0);if(a&&a.length)for(var i=0;i<a[0].length;i++)if("FDR"==a[0][i].action)return!0;return!!this.$Oco(t,e?e.apnOID:void 0)||!(!e||!e.apnOID||this.$O3u(e.apnOID,"acceptDrop")!==!0)},apn.CES.prototype.$O5A=function(e,t,a){function i(e,t){return s.screen.objects[t].create.zIndex-s.screen.objects[e].create.zIndex}var n,r=this.$O5G(e.apnOID,!0);for(var o in this.$O3d)o!=e.apnOID&&bx.DOM.isVisible(this.$O3d[o])&&r==this.$O5G(o,!0)&&this.$O3u(o,"acceptDrop")!==!1&&(void 0!==this.$O3u(o,"acceptDrop")||this.$O5H("dragDrop",o))&&apx.wgt.$O4u(this,e,this.$O3d[o])&&(n=n||[],n.push(o));var s=this;return n&&n.length>1&&n.sort(i),n||null},apn.CES.prototype.$O5C=function(e,t){return(!e||!e.apnBlockPointerEvent)&&(!!(e.apnOID&&this.screen.objects[e.apnOID]&&this.screen.objects[e.apnOID].create.data&&this.screen.objects[e.apnOID].create.data.styles&&this.screen.objects[e.apnOID].create.data.styles[t])||!(!e.apxDragInfo||!e.apxDragInfo[t]))},apn.CES.prototype.$O46=function(e){return this.$O5C(e,"dragX")},apn.CES.prototype.$O47=function(e){return this.$O5C(e,"dragY")},apn.CES.prototype.$O5z=function(e){return this.$O5C(e,"dragInParent")},apn.CES.prototype.$O7Q=function(e){return this.$O5C(e,"dragContainParent")},apn.CES.prototype.$O6C=function(e,t){var a=this.$O3g(t,e?e.apnOID:void 0);if(a&&a.length)return!0;if(this.$Oco(t,e?e.apnOID:void 0))return!0;if(e&&("pointerOver"==t||"pointerOut"==t))if(e.apnOID){if(this.$O3u(e.apnOID,"acceptMouseOver")===!0)return!0}else if(e.apxOnEventOver)return!0;return!1},apn.CES.prototype.$O5d=function(e){if(e.apnCur&&e.apnCur.Event2Holder&&!(e.apxOnEvent||e.apxOnDragStart||e.apxOnDrag||e.apxOnDragEnd))return!0},apn.CES.prototype.$O49=function(e,t,a,i,n,r,o){if(this.$O5d(e))return!0;for(var s=!1,p=e;p&&p!=this.tag;){if(p.apnPassPointerEvent&&p.apnPassPointerEventButHit){s=!0;break}if(p.apnPassPointerEvent)return!0;p=p.parentNode}if("pointerOut"!=o&&e.apnOID&&this.$O1m==e.apnPID&&this.screen.objects[e.apnOID]){var l=apn.Project.getWidgetModule(this.screen.objects[e.apnOID].create.data);if(l&&l.exeDetect){var d=bx.HCL.getElementX2(this.$O3d[e.apnOID],!0)-bx.HCL.getElementX2(this.tag,!0),c=bx.HCL.getElementY2(this.$O3d[e.apnOID],!0)-bx.HCL.getElementY2(this.tag,!0);if(!l.exeDetect(this.project,this.$O3d[e.apnOID],this.screen.objects[e.apnOID],this.viewer.selectMargin,(n-d)*this.getZoomX(),(r-c)*this.getZoomY(),1,1))return!0;p.apnPassPointerEvent&&p.apnPassPointerEventButHit&&(s=!0)}}return!!s&&1},apn.CES.prototype.event2checkPass=apn.CES.prototype.$O49,apn.CES.prototype.$O4a=function(e,t){return!(!e||!e.apnBlockPointerEvent)||this.eventExe(t,e?e.apnOID:void 0)},apn.CES.prototype.$O4e=function(e,t,a,i,n,r,o){this.$O4e.$O4c=this.$O4e.$O4c||[];for(var s=document.elementFromPoint(i,n),p=bx.HCL.DV.isIE()?document.activeElement:void 0;s&&this.$O49(s,i,n,r,t,a)&&(o&&s.apnPassPointerEventButHit&&o(s),s.style.visibility="hidden",this.$O4e.$O4c.push(s),s=document.elementFromPoint(i,n),s!=this.tag&&s!=this.tag.ownerDocument););if(this.$O4e.$O4c.length)for(var l=0;l<this.$O4e.$O4c.length;l++)this.$O4e.$O4c[l].style.visibility="visible";return p&&p.tagName&&("input"==p.tagName.toLowerCase()||"textarea"==p.tagName.toLowerCase())&&p.focus(),this.$O4e.$O4c.length=0,s},apn.CES.prototype.$O48=function(e,t,a,i,n,r){function o(e){p.$O6B(s,e,i,n,r,t,a)}var s,p=this;if(!(s=this.$O3G(e)))return null;var l=this.$O4e(e,t,a,i,n,r,o);if(l)if("click"!=s&&"tapStart"!=s||this.viewer.initAutoplay(),"_pointerMove"==s){var d=this.$O6D("pointerOver",l),c=this.$O6A(d||l);c&&c.pointerOut&&this.$O6B("pointerOut",c.pointerOut,i,n,r,t,a),c&&c.pointerOver&&this.$O6B("pointerOver",c.pointerOver,i,n,r,t,a)}else this.$O6B(s,l,i,n,r,t,a)},apn.CES.prototype.$O6B=function(e,t,a,i,n,r,o){for(var s=!1,p=!1,l=t;l&&l!=this.tag&&(this.$O49(l,a,i,n,r,o,e)!==!0&&("pointerOver"==e||"pointerOut"==e?l.apxOnEventOver&&(s=!!l.apnBlockPointerEvent||l.apxOnEventOver(this,"pointerOver"==e,n)):l.apxOnEvent&&(s=!!l.apnBlockPointerEvent||l.apxOnEvent(this,e,a,i,r*this.getZoomX(),o*this.getZoomY(),n))),!s);)l=l.parentNode;for(l=t;l&&l!=this.tag&&(this.$O49(l,a,i,n,r,o,e)!==!0&&l.apnOID&&this.$O1m==l.apnPID&&this.screen.objects[l.apnOID]&&(p=this.$O4a(l,e)),!p);)l=l.parentNode;l==this.tag&&(s||p||this.$O4a(void 0,e))},apn.CES.prototype.$O6D=function(e,t){if(!this.screen)return null;for(var a=t;a&&a!=this.tag;){if(a.apnOID&&this.$O1m==a.apnPID&&this.screen.objects[a.apnOID]){if(this.$O6C(a,e))return a}else if(("pointerOver"==e||"pointerOut"==e)&&a.apxOnEventOver)return a;a=a.parentNode}return null},apn.CES.prototype.$O6A=function(e){if(this.$O6E){if(this.$O6E!=e){var t={pointerOut:this.$O6E};return this.$O6E=null,e&&(e.apnOID||e.apxOnEventOver)&&(this.$O6E=e,t.pointerOver=e),t}}else if(e&&(e.apnOID||e.apxOnEventOver))return this.$O6E=e,{pointerOver:e}},apn.CES.prototype.toEvtScreenX=function(e){return e-bx.HCL.getElementX2(this.tag)},apn.CES.prototype.toEvtScreenY=function(e){return e-bx.HCL.getElementY2(this.tag)},apn.CES.prototype.$O34=function(e,t,a){function i(){r++,n==r&&t()}var n=e.length,r=0;if(t&&0==n)return void t();for(var o=0;o<e.length;o++)this.$O35(e[o],t?i:void 0,a)},apn.CES.prototype.$O35=function(e,t,a,i){if(apn.CExe.trace()&&console.error("[APX Trace] ITR",e),"LTP"==e.action&&"1"==e.to.type&&this.getPageID()!=e.to.pageID&&(this.$O3X("exeOnPreLinkToPage"),this.$O5e&&(e.$O3y=e.$O3y?e.$O3y+this.$O5e:this.$O5e)),e.$O3y){var n=this,r=this.setTimeout(function(){n.$O5I(r),n.$O7K||n.$O3i(e,t,a,i)},e.$O3y);return this.$O5J(r,i||e.action,e.$Ocp),!0}return this.$O3i(e,t,a,i)},apn.CES.prototype.$O3i=function(e,t,a,i){var n=!0;switch(e.action){case"LTP":e.to&&e.to.pageID==this.getPageID()&&(e.to.reset=!0),this.viewer.run(e);break;case"LTH":var r={to:{pageID:this.viewer.$O36(),reset:e.reset},transit:bx.$cloneObject({},e.transit)};r.transit.effect=apn.Project.resolveProperty(this.viewer.project,"trEffectBackward",r.transit.effect),this.viewer.run(r);break;case"LTB":if(void 0!==this.viewer.$O2J.getPrev()){var r={to:{pageID:this.viewer.$O2J.getPrev(),reset:e.reset},transit:bx.$cloneObject({},e.transit)};this.viewer.run(r,void 0,!0)}else this.viewer.showLoading("No page to go back in history.",apn.CExe.TIME_TOASTMSG_ERROR);break;case"CWP":this.$O3j(e,t,a,i)||(n=!1);break;case"CWS":this.$O3r(e)||(n=!1);break;case"FDR":this.$O5F(e)||(n=!1);break;case"URL":this.$O6F(e,t)||(n=!1);break;case"CMT":}return n||(bx.Trace.log("APN","error","Invalid ITR","CES.runInteraction"),bx.Trace.data(e)),n},apn.CES.prototype.$O3s=function(e,t,a){function i(e,a){return t.states?void 0===t.states[e].order&&void 0===t.states[a].order?0:void 0===t.states[e].order?1:void 0===t.states[a].order?-1:t.states[e].order-t.states[a].order:t.layers?void 0===t.layers[e].order&&void 0===t.layers[a].order?0:void 0===t.layers[e].order?1:void 0===t.layers[a].order?-1:t.layers[e].order-t.layers[a].order:void 0}var n,r=[];if(1==apn.Project.checkStateType(t)){for(n in t.states)r.push(n);r.sort(i)}else if(2==apn.Project.checkStateType(t)){for(n in t.layers)r.push(n);r.sort(i)}var o;for(n=0;n<r.length;n++)if(r[n]==a){o=n;break}return void 0===o?(bx.Trace.log("APN","warning","Invalid current state="+a,"CES.opCWS"),bx.Trace.data(t),null):"$RF"==e?r[(o+1)%r.length]:"$RB"==e?r[(o-1+r.length)%r.length]:"$F"==e?o+1<r.length?r[o+1]:null:"$B"==e?o-1>=0?r[o-1]:null:(bx.Trace.log("APN","warning","Invalid state="+e,"CES.opCWS"),null)};apn.CES.prototype.$O3k=function(e){return"$RB"==e||"$B"==e};apn.CES.prototype.$O3r=function(e){function t(){s.$O3p(s.screen,a,i),o.$O7R=!1}if(e.target&&e.target.stateID&&this.screen.objects[e.target.objectID]){if(0==e.target.stateID.indexOf("$APX"))return this.wgtSetProperty(e.target.objectID,"apxState",e.target.stateID.substring(4)),!0;var a;a=this.screen.objects[e.target.objectID].layout;var i=e.target.stateID,n=this.$O3l(e.target.objectID);if(i&&"$"==i.charAt(0)&&(i=this.$O3s(i,a,n)),
null===i)return!0;if(1==apn.Project.checkStateType(a)){e.timing?apn.Project.resolveTiming(this.project,e.timing):e.transit&&(e.timing=e.transit,delete e.timing.effect,apn.Project.resolveTiming(this.project,e.timing));var r,o=this.$O3d[e.target.objectID];r=this.$O3n(this.project,this.screen,a,n,i,e.timing,o.apnCur.ver);var s=this;return r&&r.length&&(o.$O7R=!0,this.$O34(r,t)),this.$O3m(e.target.objectID,i),!0}if(2!=apn.Project.checkStateType(a))return!1;e.transit&&apn.Project.resolveTransit(this.project,e.transit,apn.CES.prototype.$O3k(e.target.stateID));var p=this.$O3d[e.target.objectID];if(bx.PageDrag&&bx.PageDrag.isInTransit(p))return!0;if(void 0!==p.$O7S)return!0;if(bx.PageTransition.isInTransit(p)&&p.apnTransitITR!=e&&bx.PageTransition.abort(p),this.$O3l(e.target.objectID)==i)return!0;var l=this.$O3d[this.$O3q(e.target.objectID,i)],d=this.$O3d[this.$O3q(e.target.objectID,this.$O3l(e.target.objectID))];if(p&&l&&d){var s=this,c=p.style.overflow;return p.onBxPageTransitionEnd=function(t){p.style.overflow=c,s.$O4f(e.target.objectID,i),s.$O3m(e.target.objectID,i)},e.transit=e.transit||{effect:"none"},(!e.transit.duration||e.transit.duration<50)&&(e.transit.effect="none"),"none"==e.transit.effect&&(e.transit.duration=1),p.apnTransitITR=e,"none"!=e.transit.effect?(p.$O7S=setTimeout(function(){l.style.opacity=1,delete p.$O7S,bx.PageTransition(p,l,d,e.transit.effect,e.transit.duration,e.transit.timing?{timing:e.transit.timing}:void 0)},0),l.style.display="block",l.style.opacity=0):(bx.PageTransition(p,l,d,e.transit.effect,e.transit.duration,e.transit.timing?{timing:e.transit.timing}:void 0),l.style.display="block"),!0}alert("["+apn.CExe.SW_TITLE+"]\r\n[Error] Interaction("+e.title+") is on the removed object!")}return!1},apn.CES.$O5L=function(e,t,a,i,n,r,o,s){var p=Math.sqrt(Math.pow(n-a,2)+Math.pow(r-i,2)),l=Math.atan2(n-a,i-r),d=1;switch(t=t||1,e){case"arcCW":d=1;break;case"arcCCW":d=-1}var c=-(p/2)*Math.cos(o*Math.PI)+p/2,g=-(t*p/2)*Math.sin(o*Math.PI)*d;s.x=apn.CES.$O5M(0,0,l-Math.PI/2,c,g)+a,s.y=apn.CES.$O5N(0,0,l-Math.PI/2,c,g)+i},apn.CES.prototype.$O7T=function(e,t){if(e.apnTRs&&e.apnTRs[t]){var a=(e.apnTRs[t]+"").split(":");2==a.length&&bx.Transition.end(parseInt(a[0]),a[1]),delete e.apnTRs[t]}},apn.CES.prototype.$O6G=function(e,t,a,i){if(t){apn.CES.$O5Q=apn.CES.$O5Q||0,apn.CES.$O5Q++,t.id="TMR$"+apn.CES.$O5Q,e.apnTRs=e.apnTRs||{};var n=this;return t.onEnd=function(e){!e.element.REFRESH_ON_RESIZE||void 0===e.styles.width&&void 0===e.styles.height||apn.IWidget.exeRenderSize(n.viewer,n,e.element,n.screen.objects[e.element.apnOID],n.project,1/n.$O2O,1/n.$O2P),i&&i()},e.apnTRs[a]=bx.Transition.add(t)+":"+t.id,e.apnTRs[a]}},apn.CES.prototype.$O7U=function(e){this.$O7V=this.$O7V||[],e&&this.$O7V.push(e)},apn.CES.prototype.$O7W=function(){if(this.$O7V){for(var e=0;e<this.$O7V.length;e++){var t=(this.$O7V[e]+"").split(":");2==t.length&&bx.Transition.end(parseInt(t[0]),t[1])}delete this.$O7V}},apn.CES.prototype.$O3j=function(e,t,a,i){function n(e,t){return{element:e,timing:apn.CES.toBxTiming(t.timing),time:parseInt(t.duration),styles:{},roundUp:t.roundUp,wait:bx.$checkNaN(parseFloat(t.wait))/100}}function r(t,a,i){apn.CES.$O5L(e.trace.type,e.trace.ratio,L,D,j,A,i,O)}function o(e,t,a){O.use&&(a=O.x),_.$O5D(_.screen.objects[e.apnOID],a-_.screen.objects[e.apnOID].init.position.x,void 0),_.screen.objects[e.apnOID].init.position.x=a}function s(e,t,a){O.use&&(a=O.y),_.$O5D(_.screen.objects[e.apnOID],void 0,a-_.screen.objects[e.apnOID].init.position.y),_.screen.objects[e.apnOID].init.position.y=a}function p(e,t,a){apn.IWidget.exeRenderPosition(_,e,_.screen.objects[e.apnOID],_.project,1/_.$O2O,1/_.$O2P,1==a)}function l(t,a,i){apn.CES.$O5L(e.trace.type,e.trace.ratio,0,0,W,B,i,H)}function d(e,t,a){H.use&&(a=H.x),_.$O5D(_.screen.objects[e.apnOID],a-N,void 0),_.screen.objects[e.apnOID].init.position.x+=a-N,N=a}function c(e,t,a){H.use&&(a=H.y),_.$O5D(_.screen.objects[e.apnOID],void 0,a-G),_.screen.objects[e.apnOID].init.position.y+=a-G,G=a}function g(e,t,a){apn.IWidget.exeRenderPosition(_,e,_.screen.objects[e.apnOID],_.project,1/_.$O2O,1/_.$O2P,1==a)}function u(e,t,a){_.screen.objects[e.apnOID].init.shape.w=a}function h(e,t,a){_.screen.objects[e.apnOID].init.shape.h=a,apn.IWidget.exeRenderSize(_.viewer,_,e,_.screen.objects[e.apnOID],_.project,1/_.$O2O,1/_.$O2P,!1,!0)}function x(e,t,a){apn.CES.transformSet(e,"resizeX",a)}function f(e,t,a){apn.CES.transformSet(e,"resizeY",a),apn.CES.transformApply(e)}function y(e,t,a){_.screen.objects[e.apnOID].init.shape.w+=a-Z,_.screen.objects[e.apnOID].init.shape.w<1&&(_.screen.objects[e.apnOID].init.shape.w=1),Z=a}function b(e,t,a){_.screen.objects[e.apnOID].init.shape.h+=a-J,_.screen.objects[e.apnOID].init.shape.h<1&&(_.screen.objects[e.apnOID].init.shape.h=1),J=a,apn.IWidget.exeRenderSize(_.viewer,_,e,_.screen.objects[e.apnOID],_.project,1/_.$O2O,1/_.$O2P,!1,!0)}function v(e,t,a){"px0"==t?_.screen.objects[e.apnOID].init.shape.x[0]=a:"py0"==t?_.screen.objects[e.apnOID].init.shape.y[0]=a:"px1"==t?_.screen.objects[e.apnOID].init.shape.x[1]=a:"py1"==t?_.screen.objects[e.apnOID].init.shape.y[1]=a:"x"==t&&(_.screen.objects[e.apnOID].init.position.x=a)}function C(e,t,a){_.screen.objects[e.apnOID].init.position.y=a,w&&w.exeRenderTag&&w.exeRenderTag(_.viewer,_,e,_.screen.objects[e.apnOID],1/_.$O2O,1/_.$O2P)}function m(e,t,a){_.screen.objects[e.apnOID].create.data.styles.alpha=a,apn.IWidget.exeSetAlpha(e,a)}function I(t,a,i){_.screen.objects[t.apnOID].create.data.styles.angle=i,e.set.angle2?apn.IWidget.exeSetAngle(t,i,_.screen.objects[t.apnOID].init,e.set.angle2.cx,e.set.angle2.cy):apn.IWidget.exeSetAngle(t,i,void 0,void 0,void 0,!0)}var S,_=this,T=!1;if(e.target&&e.set&&(S=this.$O3d[e.target.objectID])){var w=apn.Project.getWidgetModule(this.screen.objects[e.target.objectID].create.data);w&&(w.exeItrNoResize&&(e.set.size&&delete e.set.size,e.set.sizeBy&&delete e.set.sizeBy),w.exeItrNoZoom&&e.set.zoom&&delete e.set.zoom),e.set.line&&this.screen.objects[e.target.objectID].init.shape.type!=bx.CCanvasWnd.SHAPE_LINE&&delete e.set.line;var P;if(e.timing&&(apn.Project.resolveTiming(this.project,e.timing),e.timing.roundUp&&!parseInt(e.timing.duration)&&(e.timing.duration=1)),w&&w.exeItrNoText||(void 0!==e.set.text&&this.wgtSetProperty(e.target.objectID,"apxText",e.set.text),void 0!==e.set.textColor&&(apn.IWidget.exeSetFontStyle(S,e.set.textColor),this.wgtSetProperty(e.target.objectID,"apxTextColor",e.set.textColor))),void 0!==e.set.value&&this.sptWgtSetProp(e.target.objectID,"value",e.set.value),e.set.drag){this.screen.objects[e.target.objectID].create.data=this.screen.objects[e.target.objectID].create.data||{};var E=this.screen.objects[e.target.objectID].create.data;E.styles=E.styles||{},void 0!==e.set.drag.dragX&&(E.styles.dragX="Yes"==e.set.drag.dragX),void 0!==e.set.drag.dragY&&(E.styles.dragY="Yes"==e.set.drag.dragY),"SPT"==i?(void 0!==e.set.drag.dragInParent&&(E.styles.dragInParent="Yes"==e.set.drag.dragInParent||"In"==e.set.drag.dragInParent),void 0!==e.set.drag.dragContainParent&&(E.styles.dragContainParent="Contain"==e.set.drag.dragInParent)):(E.styles.dragInParent="Yes"==e.set.drag.dragInParent||"In"==e.set.drag.dragInParent,E.styles.dragContainParent="Contain"==e.set.drag.dragInParent),this.$O46(S)||this.$O47(S)?S.apnDragCsr=!0:S.apnDragCsr=!1,apn.IWidget.exeSetCursor(S,S.apnCur.orgCursor)}if(e.set.extended)for(var V in e.set.extended)this.wgtSetProperty(e.target.objectID,V,e.set.extended[V]);if(void 0!==e.set.visibility&&("Hide"!=e.set.visibility&&e.set.visibility!==!1?(S.$Ocq&&(clearTimeout(S.$Ocq),S.$Ocq=null),S.style.display="block","Pass"==e.set.visibility||1===e.set.visibility?(this.tagPassPointerEvent(S,!0),this.tagBlockPointerEvent(S,!1)):"Block"==e.set.visibility||2===e.set.visibility?(this.tagPassPointerEvent(S,!1),this.tagBlockPointerEvent(S,!0)):(this.tagPassPointerEvent(S,!1),this.tagBlockPointerEvent(S,!1)),w&&w.exeOnShow&&w.exeOnShow(this,e.target.objectID,!0,e.event),this._exeOnWgtVisibilityChange(e.target.objectID,!0)):(e.event&&e.event.indexOf&&("tapStart"==e.event||e.event.indexOf(";tapStart;")!=-1)?S.$Ocq=setTimeout(function(){S.style.display="none",S.$Ocq=null},0):S.style.display="none",w&&w.exeOnShow&&w.exeOnShow(this,e.target.objectID,!1,e.event),this._exeOnWgtVisibilityChange(e.target.objectID,!1)),this.wgtSetProperty(e.target.objectID,"apxVisibility",e.set.visibility)),e.set.media&&e.set.media.toLowerCase&&apn.IWidget.hasMediaControl(this,S)&&this.wgtControlMedia(S.apnOID,e.set.media.toLowerCase()),e.set.position&&(void 0!==e.set.position.x||void 0!==e.set.position.y)){var j=isNaN(parseInt(e.set.position.x))?this.screen.objects[S.apnOID].init.position.x:parseInt(e.set.position.x),A=isNaN(parseInt(e.set.position.y))?this.screen.objects[S.apnOID].init.position.y:parseInt(e.set.position.y);this.$O7T(S,"position");var L=this.screen.objects[S.apnOID].init.position.x,D=this.screen.objects[S.apnOID].init.position.y,O={x:0,y:0};if(j!=L||A!=D)if(e.timing&&e.timing.timing&&"none"!=e.timing.timing&&parseInt(e.timing.duration)){apn.CExe.ACCEL(S);var k=n(S,e.timing);e.trace&&"none"!=e.trace.type&&e.trace.ratio>0&&(O.use=!0,k.styles.trace={from:0,to:1,unit:r}),k.styles.x={from:L,to:j,unit:o},k.styles.y={from:D,to:A,unit:s},k.styles.end={from:0,to:1,unit:p},this.$O7U(this.$O6G(S,k,"position",T?void 0:t)),T=!0}else o(S,"x",j),s(S,"y",A),p(S,"end",1)}if(e.set.sizeBy&&e.set.sizeBy.originCenter&&(void 0!==e.set.sizeBy.w||void 0!==e.set.sizeBy.h)){var R=bx.$checkNaN(parseFloat(e.set.sizeBy.w)),M=bx.$checkNaN(parseFloat(e.set.sizeBy.h));(R||M)&&(e.set.positionBy={x:-R/2,y:-M/2}),delete e.set.sizeBy.originCenter}if(e.set.positionBy&&(void 0!==e.set.positionBy.x||void 0!==e.set.positionBy.y)){var W=bx.$checkNaN(parseFloat(e.set.positionBy.x)),B=bx.$checkNaN(parseFloat(e.set.positionBy.y)),N=0,G=0,H={x:0,y:0};e.timing&&e.timing.timing&&"none"!=e.timing.timing&&parseInt(e.timing.duration)?(apn.CExe.ACCEL(S),P||(P=n(S,e.timing)),e.trace&&"none"!=e.trace.type&&e.trace.ratio>0&&(H.use=!0,P.styles.trace={from:0,to:1,unit:l}),P.styles.dx={from:0,to:W,unit:d},P.styles.dy={from:0,to:B,unit:c},P.styles.end={from:0,to:1,unit:g}):(d(S,"dx",W),c(S,"dy",B),g(S,"end",1))}if(e.set.size&&e.set.size.w&&e.set.size.h){var U=isNaN(parseInt(e.set.size.w))?this.screen.objects[S.apnOID].init.shape.w:parseInt(e.set.size.w),F=isNaN(parseInt(e.set.size.h))?this.screen.objects[S.apnOID].init.shape.h:parseInt(e.set.size.h);if(e.timing&&e.timing.timing&&"none"!=e.timing.timing&&parseInt(e.timing.duration)){apn.CExe.ACCEL(S);var z=n(S,e.timing);this.$O7T(S,"size"),z.styles.width={from:this.screen.objects[S.apnOID].init.shape.w,to:U,unit:u},z.styles.height={from:this.screen.objects[S.apnOID].init.shape.h,to:F,unit:h},this.$O7U(this.$O6G(S,z,"size",T?void 0:t)),T=!0}else this.$O7T(S,"size"),this.$O6G(S,null,"size"),u(S,"width",U),h(S,"height",F)}if(e.set.trOrg){var X=bx.$checkNaN(parseFloat(e.set.trOrg.orgX)),Y=bx.$checkNaN(parseFloat(e.set.trOrg.orgY));this.screen.objects[S.apnOID].init.cx=apn.CES._sptOrX2CrX(this.screen.objects[S.apnOID],X),this.screen.objects[S.apnOID].init.cy=apn.CES._sptOrY2CrY(this.screen.objects[S.apnOID],Y)}if(e.set.zoom&&e.set.zoom.w&&e.set.zoom.h){var U=isNaN(parseFloat(e.set.zoom.w))?1:parseFloat(e.set.zoom.w),F=isNaN(parseFloat(e.set.zoom.h))?1:parseFloat(e.set.zoom.h);if(apn.CES.transformSet(S,"origin",apn.IWidget.exeGetTrOrigin(this.screen.objects[S.apnOID].init,this.screen.objects[S.apnOID].init.cx,this.screen.objects[S.apnOID].init.cy)),e.timing&&e.timing.timing&&"none"!=e.timing.timing&&parseInt(e.timing.duration)){apn.CExe.ACCEL(S);var $=n(S,e.timing);this.$O7T(S,"zoom"),$.styles.scaleX={from:S.apxTrResizeX||1,to:U,unit:x},$.styles.scaleY={from:S.apxTrResizeY||1,to:F,unit:f},this.$O7U(this.$O6G(S,$,"zoom",T?void 0:t)),T=!0}else this.$O7T(S,"zoom"),this.$O6G(S,null,"zoom"),x(S,"scaleX",U),f(S,"scaleY",F)}if(e.set.sizeBy&&(void 0!==e.set.sizeBy.w||void 0!==e.set.sizeBy.h)){var R=bx.$checkNaN(parseFloat(e.set.sizeBy.w)),M=bx.$checkNaN(parseFloat(e.set.sizeBy.h)),Z=0,J=0;e.timing&&e.timing.timing&&"none"!=e.timing.timing&&parseInt(e.timing.duration)?(apn.CExe.ACCEL(S),P||(P=n(S,e.timing)),P.styles.dw={from:0,to:R,unit:y},P.styles.dh={from:0,to:M,unit:b}):(y(S,"dw",R),b(S,"dh",M))}if(e.set.line&&(6==e.set.line.length||void 0!==e.set.line.x1&&void 0!==e.set.line.y1&&void 0!==e.set.line.x2&&void 0!==e.set.line.y2))if(e.timing&&e.timing.timing&&"none"!=e.timing.timing&&parseInt(e.timing.duration)){var Q=n(S,e.timing);if(this.$O7T(S,"line"),6==e.set.line.length)Q.styles.px0={from:this.screen.objects[S.apnOID].init.shape.x[0],to:e.set.line[2],unit:v},Q.styles.py0={from:this.screen.objects[S.apnOID].init.shape.y[0],to:e.set.line[3],unit:v},Q.styles.px1={from:this.screen.objects[S.apnOID].init.shape.x[1],to:e.set.line[4],unit:v},Q.styles.py1={from:this.screen.objects[S.apnOID].init.shape.y[1],to:e.set.line[5],unit:v},Q.styles.x={from:this.screen.objects[S.apnOID].init.position.x,to:e.set.line[0],unit:v},Q.styles.y={from:this.screen.objects[S.apnOID].init.position.y,to:e.set.line[1],unit:C};else{var q=Math.min(e.set.line.x1,e.set.line.x2),K=Math.min(e.set.line.y1,e.set.line.y2);Q.styles.px0={from:this.screen.objects[S.apnOID].init.shape.x[0],to:e.set.line.x1-q,unit:v},Q.styles.py0={from:this.screen.objects[S.apnOID].init.shape.y[0],to:e.set.line.y1-K,unit:v},Q.styles.px1={from:this.screen.objects[S.apnOID].init.shape.x[1],to:e.set.line.x2-q,unit:v},Q.styles.py1={from:this.screen.objects[S.apnOID].init.shape.y[1],to:e.set.line.y2-K,unit:v},Q.styles.x={from:this.screen.objects[S.apnOID].init.position.x,to:q,unit:v},Q.styles.y={from:this.screen.objects[S.apnOID].init.position.y,to:K,unit:C}}this.$O7U(this.$O6G(S,Q,"line",T?void 0:t)),T=!0}else if(this.$O7T(S,"line"),this.$O6G(S,null,"line"),6==e.set.line.length)this.screen.objects[S.apnOID].init.shape.x[0]=e.set.line[2],this.screen.objects[S.apnOID].init.shape.y[0]=e.set.line[3],this.screen.objects[S.apnOID].init.shape.x[1]=e.set.line[4],this.screen.objects[S.apnOID].init.shape.y[1]=e.set.line[5],this.screen.objects[S.apnOID].init.position.x=e.set.line[0],C(S,"y",e.set.line[1]);else{var q=Math.min(e.set.line.x1,e.set.line.x2),K=Math.min(e.set.line.y1,e.set.line.y2);this.screen.objects[S.apnOID].init.shape.x[0]=e.set.line.x1-q,this.screen.objects[S.apnOID].init.shape.y[0]=e.set.line.y1-K,this.screen.objects[S.apnOID].init.shape.x[1]=e.set.line.x2-q,this.screen.objects[S.apnOID].init.shape.y[1]=e.set.line.y2-K,this.screen.objects[S.apnOID].init.position.x=q,C(S,"y",K)}if(void 0!==e.set.alpha)if(e.set.alpha=parseFloat(e.set.alpha)||0,e.timing&&e.timing.timing&&"none"!=e.timing.timing&&parseInt(e.timing.duration))if(apn.CExe.ACCEL(S),a)P||(P=n(S,e.timing)),P.styles.alpha={from:parseFloat(apn.Project.resolveStyle(this.project,"alpha",this.screen.objects[S.apnOID].create.data.styles.alpha)),to:Math.max(0,Math.min(1,e.set.alpha)),unit:m};else{var ee=n(S,e.timing);this.$O7T(S,"alpha"),ee.styles.alpha={from:parseFloat(apn.Project.resolveStyle(this.project,"alpha",this.screen.objects[S.apnOID].create.data.styles.alpha)),to:Math.max(0,Math.min(1,e.set.alpha)),unit:m},this.$O7U(this.$O6G(S,ee,"alpha",T?void 0:t)),T=!0}else a||(this.$O7T(S,"alpha"),this.$O6G(S,null,"alpha")),m(S,"alpha",Math.max(0,Math.min(1,e.set.alpha)));if(void 0!==e.set.angle){"object"==typeof e.set.angle?(e.set.angle2=e.set.angle,e.set.angle=e.set.angle2.angle):apn.CES.transformSet(S,"origin",apn.IWidget.exeGetTrOrigin(this.screen.objects[S.apnOID].init,this.screen.objects[S.apnOID].init.cx,this.screen.objects[S.apnOID].init.cy)),e.set.angle=parseFloat(e.set.angle)||0;var te=!1;if(!e.set.angle2||S.apnCur.trCX==e.set.angle2.cx&&S.apnCur.trCY==e.set.angle2.cy||(te=!0),!te&&e.timing&&e.timing.timing&&"none"!=e.timing.timing&&parseInt(e.timing.duration))if(apn.CExe.ACCEL(S),a)P||(P=n(S,e.timing)),P.styles.angle={from:apn.Project.resolveStyle(this.project,"angle",this.screen.objects[S.apnOID].create.data.styles.angle),to:e.set.angle,unit:I};else{var ae=n(S,e.timing);this.$O7T(S,"angle"),ae.styles.angle={from:apn.Project.resolveStyle(this.project,"angle",this.screen.objects[S.apnOID].create.data.styles.angle),to:e.set.angle,unit:I},this.$O7U(this.$O6G(S,ae,"angle",T?void 0:t)),T=!0}else a||(this.$O7T(S,"angle"),this.$O6G(S,null,"angle")),I(S,"angle",e.set.angle)}if(void 0!==e.set.zIndex){var ie;ie="top"==e.set.zIndex||"Top"==e.set.zIndex?this.$O3v()+1:"bottom"==e.set.zIndex||"Bottom"==e.set.zIndex?this.$O3w()-1:"restore"==e.set.zIndex||"Restore"==e.set.zIndex?this.screen.objects[S.apnOID].create.zIndex:parseInt(e.set.zIndex),apn.IWidget.exeSetZIndex(S,ie)}return e.set.animation&&("Play"==e.set.animation||"Loop"==e.set.animation?this.wgtAniCheck(e.target.objectID)&&this.wgtAniRun(e.target.objectID,"Play"==e.set.animation?1:2):this.wgtAniSet(e.target.objectID)),P?(P.onEnd=function(e){!e.element.REFRESH_ON_RESIZE||void 0===e.styles.width&&void 0===e.styles.height||apn.IWidget.exeRenderSize(_.viewer,_,e.element,_.screen.objects[e.element.apnOID],_.project,1/_.$O2O,1/_.$O2P),t&&t()},apn.CES.$O5Q=apn.CES.$O5Q||0,apn.CES.$O5Q++,P.id="TMR$"+apn.CES.$O5Q,this.$O7U(bx.Transition.add(P)+":"+P.id)):T||t&&t(),!0}return t&&t(),bx.Trace.log("APN","error","Invalid CWP tag="+S,"CES.runInteraction"),!1},apn.CES.prototype.$O5F=function(e){if(this.$O5E){var t=this;return setTimeout(function(){t.$O4a(t.$O5E,"dragDropResult:"+(e.result?"Accepted":"Rejected"))},0),!0}return!1},apn.CES.prototype.$O6F=function(e){return!!(this.viewer.IDevice_linkToURL&&e.target&&e.target.objectID)&&("$URL_CF"==e.target.objectID?this.viewer.IDevice_linkToURL(e.url,"currentFrame"):"$URL_CW"==e.target.objectID?this.viewer.IDevice_linkToURL(e.url,"currentTab"):"$URL_NW"==e.target.objectID&&this.viewer.IDevice_linkToURL(e.url,"newTab"))},apn.CES.toBxTiming=function(e,t){switch(e){case"ease":return"inOutQuad";case"ease-in":return"inCubic";case"ease-out":return"outCubic";case"ease-in-out":return"inOutCubic";default:return t&&"linear"!=e?"":"linear"}},apn.CES.prototype.$O5H=function(e,t){var a=apn.Project.findITRs(this.project,this.$O1m,t);if(a&&a.length)for(var i=0;i<a.length;i++)if(0==a[i].event.indexOf(e))return!0;return!!this.$Oco(e,t)},apn.CES.prototype.$O3g=function(e,t){function a(e,t){return void 0===e.cases&&void 0===t.cases?0:void 0===e.cases?1:void 0===t.cases?-1:e.cases-t.cases}function i(e,t){return void 0===e.order&&void 0===t.order?0:void 0===e.order?1:void 0===t.order?-1:e.order-t.order}var n=apn.Project.findITRs(this.project,this.$O1m,t);if(!n)return null;n=n.concat();var r;if(apn.P.isObjectCompositeSysEV(e)){var o=apn.P.resolveCompositeSysEV(e);if("$ELSE"!=o.param){for(r=0;r<n.length&&n[r].event!=e;r++);r==n.length&&(e=o.ev+":$ELSE")}}for(r=0;r<n.length;r++)n[r].event!=e&&(n.splice(r,1),r--);if(0==n.length)return null;n.sort(a);var s=[];for(s.push(n),r=0;r<s.length;r++)1==s[r].length&&"WAT"==s[r][0].action&&(s.splice(r,1),r--);var p,l;for(r=0;r<s.length;r++)for(l=0,s[r].sort(i),p=0;p<s[r].length;p++)"WAT"==s[r][p].action&&s[r][p].timing?(l+=bx.$checkNaN(parseInt(s[r][p].timing.duration)),s[r].splice(p,1),p--):s[r][p].$O3y=l;return s},apn.CES.prototype.$Oco=function(e,t){return apn.Project.getSPT(this.project,this.$O1m,t,e)},apn.CES.prototype.$O3z=function(){this.$O3A={},this.$O3B={}},apn.CES.prototype.$O3t=function(e,t,a){void 0!==e?(this.$O3A[e]=this.$O3A[e]||{},this.$O3A[e][t]=a):this.$O3B[t]=a},apn.CES.prototype.$O3u=function(e,t){return void 0===e?this.$O3B[t]:this.$O3A[e]?this.$O3A[e][t]:void 0},apn.CES.prototype.$O5q=function(){for(var e in this.$O3d)this.wgtGetProperty(e,"apxFixOverPage")&&(this.$O3d[e].apxParentPO=this.$O3d[e].parentNode,this.viewer.$O2J.tag.appendChild(this.$O3d[e]))},apn.CES.prototype.$O5r=function(){for(var e in this.$O3d)this.$O3d[e].apxParentPO&&(this.$O3d[e].apxParentPO.appendChild(this.$O3d[e]),delete this.$O3d[e].$O6I)},apn.CES.prototype.pageOverEnd=apn.CES.prototype.$O5r,apn.CES.prototype.$O5s=function(){for(var e in this.$O3d)this.wgtGetProperty(e,"apxFixOverPage")&&(this.$O5O=this.$O5O||this.tag.$TAG("div",{style:"display:none"}),this.$O3d[e].apxParentPO=this.$O3d[e].parentNode,this.$O5O.appendChild(this.$O3d[e]))},apn.CES.prototype.$O3C=function(){var e,t,a;this.$O3z();for(e in this.screen.objects)if(a=this.screen.objects[e],a.layout&&a.layout.children&&a.layout.children.length)for(t=0;t<a.layout.children.length;t++)this.screen.objects[a.layout.children[t]]&&this.$O3t(a.layout.children[t],"parent",e);for(e in this.screen.objects)a=this.screen.objects[e],a.init.shape.type==bx.CCanvasWnd.SHAPE_RECT?(a.x_o_w=a.init.shape.w,a.x_o_h=a.init.shape.h):a.init.shape.type==bx.CCanvasWnd.SHAPE_LINE&&(a.x_o_w=Math.abs(a.init.shape.x[1]-a.init.shape.x[0])+1,a.x_o_h=Math.abs(a.init.shape.y[1]-a.init.shape.y[0])+1);for(e in this.screen.objects)a=this.screen.objects[e],"apn.CScrollContainer"==a.module&&this.$ObI(a);for(e in this.screen.objects)if(a=this.screen.objects[e],1==apn.Project.checkStateType(a.layout))this.$O3t(e,"activeState",a.layout.state),this.$O3p(this.screen,a.layout,a.layout.state);else if(2==apn.Project.checkStateType(a.layout)){this.$O3t(e,"activeState",a.create.data.styles.state);for(t in a.layout.layers)t!=a.create.data.styles.state?this.$O3t(a.layout.layers[t].id,"isHidden",!0):this.$O3t(a.layout.layers[t].id,"isHidden",!1),"apn.CScrollContainer"!=a.module&&bx.$copyObject(this.screen.objects[a.layout.layers[t].id].init,a.init)}for(e in this.screen.objects)a=this.screen.objects[e],a.create.data&&a.create.data.styles&&this.$O3t(e,"visibility",a.create.data.styles.visibility)},apn.CES.prototype.$Ocr=function(e){var t,a;if(a=this.screen.objects[e],a.layout&&a.layout.children&&a.layout.children.length)for(t=0;t<a.layout.children.length;t++)this.screen.objects[a.layout.children[t]]&&this.$O3t(a.layout.children[t],"parent",e);if(a.init.shape.type==bx.CCanvasWnd.SHAPE_RECT?(a.x_o_w=a.init.shape.w,a.x_o_h=a.init.shape.h):a.init.shape.type==bx.CCanvasWnd.SHAPE_LINE&&(a.x_o_w=Math.abs(a.init.shape.x[1]-a.init.shape.x[0])+1,a.x_o_h=Math.abs(a.init.shape.y[1]-a.init.shape.y[0])+1),"apn.CScrollContainer"==a.module&&this.$ObI(a),1==apn.Project.checkStateType(a.layout))this.$O3t(e,"activeState",a.layout.state),this.$O3p(this.screen,a.layout,a.layout.state);else if(2==apn.Project.checkStateType(a.layout)){this.$O3t(e,"activeState",a.create.data.styles.state);for(t in a.layout.layers)t!=a.create.data.styles.state?this.$O3t(a.layout.layers[t].id,"isHidden",!0):this.$O3t(a.layout.layers[t].id,"isHidden",!1),"apn.CScrollContainer"!=a.module&&bx.$copyObject(this.screen.objects[a.layout.layers[t].id].init,a.init)}a.create.data&&a.create.data.styles&&this.$O3t(e,"visibility",a.create.data.styles.visibility)},apn.CES.prototype.$ObI=function(e,t,a){var i,n,r;if(i=this.screen.objects[e.layout.layers[1].id],i.init.position.x=e.init.position.x,i.init.position.y=e.init.position.y,t&&a)i.init.shape.w=Math.max(t,e.init.shape.w),i.init.shape.h=Math.max(a,e.init.shape.h);else if(i.init.shape.w=e.init.shape.w,i.init.shape.h=e.init.shape.h,i.layout){var o=this.$O3D(void 0,i.layout.children);n=o.x-i.init.position.x,r=o.y-i.init.position.y,i.init.shape.w=Math.max(i.init.shape.w,o.w+n),i.init.shape.h=Math.max(i.init.shape.h,o.h+r)}return i.x_o_w=e.init.shape.w,i.x_o_h=e.init.shape.h,e.layout.layers[1].id},apn.CES.prototype.$O3E=function(){function e(){t.viewer.$Ocg&&(t.tag&&void 0!==t.tag.$Ocs&&(t.tag.style.opacity=t.tag.$Ocs,delete t.tag.$Ocs),t.viewer.$Ocg.style.display="none")}if(this.viewer.$Ocf){this.viewer.$Ocg&&(this.tag.$Ocs=this.tag.style.opacity,this.tag.style.opacity=0,this.viewer.$Ocg.style.display="block");var t=this;this.$Oct(e)}var a;for(a in this.screen.objects)this.$Ocu(a)},apn.CES.prototype.$Ocu=function(e){this.$O3u(e,"isHidden")&&(this.$O3d[e].style.display="none"),this.$O3u(e,"visibility")===!1?this.$O3d[e].style.display="none":1===this.$O3u(e,"visibility")?this.tagPassPointerEvent(this.$O3d[e],!0):2===this.$O3u(e,"visibility")&&this.tagBlockPointerEvent(this.$O3d[e],!0)},apn.CES.prototype.$O5o=function(e){var t=bx.$cloneObject({},this.viewer.project.orgPages[e]);this.viewer.project.pages[e]=t,this.$O1B(t,this.viewer.project,e)},apn.CES.prototype.run=apn.CES.prototype.$O5o,apn.CES.prototype.$O37=function(){this.$O5o(this.$O1m)},apn.CES.prototype.reset=apn.CES.prototype.$O37,apn.CES.prototype.$O5n=function(e){var t=this;if(!e){this.$O6J=!1;var a;for(var i in t.screen.objects)a=apn.Project.getWidgetModule(t.screen.objects[i].create.data),a&&a.exeSetState&&t.wgtGetProperty(i,"apxState")&&null!==a.exeSetState(t,t.$O3d[i],t.wgtGetProperty(i,"apxState"),void 0,!0)&&a.exeFireStateEvent&&this.fireEvent("stateChange","$APX"+t.wgtGetProperty(i,"apxState"),i);for(var i in t.screen.objects)a=apn.Project.getWidgetModule(t.screen.objects[i].create.data),a&&a.exeSetState&&apn.Project.checkStateType(t.screen.objects[i].layout)&&!a.BLACKBOX_MODEL&&a.exeSetState(t,t.$O3d[i],t.$O3l(i),void 0);t.$O3X("exeOnStart",t.$O1m)}t.tag.style.visibility="visible"},apn.CES.prototype.startProcess=apn.CES.prototype.$O5n,apn.CES.prototype.$O3D=function(e,t,a){var i,n,r,o,s;a=a||{x:0,y:0,w:1,h:1},e&&(s=this.screen.objects[e])&&(i=s.init.position.x,n=s.init.position.y,r=s.init.position.x+s.init.shape.w,o=s.init.position.y+s.init.shape.h);for(var p,l,d,c,g={},u=0;u<t.length;u++)(s=this.screen.objects[t[u]])&&(p=s.init.position.x,l=s.init.position.y,s.init.shape.type==bx.CCanvasWnd.SHAPE_LINE?(d=s.init.position.x+Math.abs(s.init.shape.x[1]-s.init.shape.x[0])+1,c=s.init.position.y+Math.abs(s.init.shape.y[1]-s.init.shape.y[0])+1):(d=s.init.position.x+s.init.shape.w,c=s.init.position.y+s.init.shape.h),apn.Project.isWidget(s.create.data)&&void 0!==s.create.data.styles.angle&&(s.create.data.styles.angle=bx.$checkNaN(parseFloat(s.create.data.styles.angle)),bx.CCanvasWnd.getEnclosingRect(p,l,d-p,c-l,s.create.data.styles.angle,g),void 0!==g.x1&&(p=g.x1),void 0!==g.y1&&(l=g.y1),void 0!==g.x2&&(d=g.x2),void 0!==g.y2&&(c=g.y2)),(void 0===i||i>p)&&(i=p),(void 0===n||n>l)&&(n=l),(void 0===r||r<d)&&(r=d),(void 0===o||o<c)&&(o=c));return void 0!==i&&(a.x=i,a.y=n,a.w=r-i,a.h=o-n),a},apn.CES.prototype.getAreaOfGroup=apn.CES.prototype.$O3D,apn.CExe.EV_PINCH_IN=901,apn.CExe.EV_PINCH_OUT=902,apn.CES.prototype.$O3G=function(e){var t=null;switch(e){case bx.CGesture.POINTER_TAP:t="click";break;case bx.CGesture.POINTER_START:t="tapStart";break;case bx.CGesture.POINTER_HOLD:t="longHold";break;case apn.CExe.EV_PINCH_IN:t="pinchIn";break;case apn.CExe.EV_PINCH_OUT:t="pinchOut";break;case bx.CGesture.POINTER_FLICK_LEFT:t="flickLeft";break;case bx.CGesture.POINTER_FLICK_RIGHT:t="flickRight";break;case bx.CGesture.POINTER_FLICK_UP:t="flickUp";break;case bx.CGesture.POINTER_FLICK_DOWN:t="flickDown";break;case bx.CGesture.POINTER_MOVE:t="_pointerMove"}return this.viewer.onGestureEventTransform&&null!==this.viewer.onGestureEventTransform(e)&&(t=this.viewer.onGestureEventTransform(e)||null),t},apn.CES.prototype.$O3I=function(){this.eventExe("pageLoad")},apn.CES.prototype.$O5t=function(){function e(e){e.canvas&&e.canvas.$Och&&e.canvas.$O3X("exeOnPageRun",e.canvas.getPageID(),t.getPageID())}this.eventExe("pageRun");var t=this;this.$Och||this.viewer.$O2J.iteratePage(e)},apn.CES.prototype.eventOnPageRun=apn.CES.prototype.$O5t,apn.CES.prototype._eventOnPagePause=function(){this.eventExe("pagePause")},apn.CES.$Ocv={pageLoad:!0,pageRun:!0,click:!0,tapStart:!0,flickLeft:!0,flickRight:!0,flickUp:!0,flickDown:!0,dragStart:!0,drag:!0,dragEnd:!0,dragDrop:!0,dragDropResult:!0,pinchIn:!0,pinchOut:!0,stateChange:!0,inputChange:!0,inputFocus:!0,inputBlur:!0,inputSet:!0,media:!0,animation:!0,wgtEvent:!0,musicNote:!0,musicBeat:!0,musicLine:!0,musicVerse:!0,pointerOver:!0,pointerOut:!0,spt_Custom:!0},apn.CES.prototype.eventExe=function(e,t){if(this.$O7K)return!1;var a=this.$O3g(e,t),i=!1;a&&a.length&&(this.$O34(a[0]),i=!0),this.sptEval(e,t,{oId:t,ev:e,depth:0})&&(i=!0),"pointerOver"!=e&&"pointerOut"!=e||t&&this.$O3u(t,"acceptMouseOver")===!0&&(i=!0),void 0===this.viewer._apxPageEventList&&(this.viewer._apxPageEventList=apn.P.$O7u(this.project));var n,r=apn.P.resolveCompositeSysEV(e),o=r?r.ev:e;if(apn.CES.$Ocv[o]||this.viewer._apxPageEventList&&this.viewer._apxPageEventList[o]){var s=!0;t&&this.$O3d[t].apxBubblingCtl&&this.$O3d[t].apxBubblingCtl[o]&&(s=!1,1===this.$O3d[t].apxBubblingCtl[o]&&delete this.$O3d[t].apxBubblingCtl[o]),s&&this.$Oco("spt_EvtBubble")&&(n=r?"spt_EvtBubble:"+r.param+";"+o+";"+(t||""):"spt_EvtBubble:;"+o+";"+(t||""),this.sptEval("spt_EvtBubble",void 0,{oId:void 0,ev:n,depth:0}))}return this._apxEventListenBubble&&this._apxEventListenBubble.length&&(r?this._eventDispatchBubbleToAPX(o,t||"",r.param):this._eventDispatchBubbleToAPX(o,t||"","")),i},apn.CES.prototype._eventDispatchBubbleToAPX=function(e,t,a){function i(e,t,a){return function(){return e.apply(t,[a])}}if(this._apxEventListenBubble&&this._apxEventListenBubble.length)for(var n=this,r=0;r<this._apxEventListenBubble.length;r++)this._apxEventListenBubble[r].event==e&&setTimeout(i(function(e){n._apxEventListenBubble&&n._apxEventListenBubble[e]&&n._apxEventListenBubble[e].handler(a,t)},this,r),0)},apn.CES.$Ocw={exeOnScreenVisibility:!0,exeOnScreenFull:!0,exeOnMarkText:!0,exeOnScale:!0,exeOnPageRun:!0},apn.CES.prototype.$O3X=function(e,t,a){var i;if("exeOnResume"==e)this.$O6J=!1,apx.wgt.$O5P(this);else if("exeOnPause"==e){if(this.$O5K(),this.viewer.o.clearItrOnPause&&this.$O7W(),this.$O4i)for(var n in this.$O4i)try{this.$O4i[n].tag.pause()}catch(e){}this.$O6J=!0}if(this.screen)for(var n in this.screen.objects){if(i=apn.Project.getWidgetModule(this.screen.objects[n].create.data),i&&i[e]){if("exeOnPause"==e&&this.$O3d[n].apxBackgroundRun)continue;if(apn.CExe.DEBUG)apn.CES.$Ocw[e]?i[e](this,n,a):i[e](this,n);else try{apn.CES.$Ocw[e]?i[e](this,n,a):i[e](this,n)}catch(e){this.log(n,"Problem in source code of the widget. Please consult to the technical support team.")}}"exeOnStart"==e&&this.eventExe("spt_WgtStart",n)}},apn.CES.prototype.exeOnPageState=apn.CES.prototype.$O3X,apn.CES.prototype._exeOnWgtVisibilityChange=function(e,t){var a=this.screen.objects[e],i=apn.Project.getWidgetModule(a.create.data);if(i&&i.exeOnVisibilityChange&&i.exeOnVisibilityChange(this,e,t),a.layout&&a.layout.children&&a.layout.children.length)for(var n=0;n<a.layout.children.length;n++)this._exeOnWgtVisibilityChange(a.layout.children[n],this.wgtIsVisible(a.layout.children[n]))},apn.CES.prototype.$O5G=function(e,t){return apn.Project.findParentOf(this.screen,e,void 0,t)},apn.CES.mapNonWgtGroupOverflow={"apn.CLayerContainer":"visible",
"apn.CFixedLayerContainer":"visible","apn.CLayer":"hidden","bx.CEditorWnd.CGroup":"visible","bx.CEditorWnd.CContainer":"visible"},apn.CES.prototype.$O3L=function(e,t,a){var i,n=this,r=apn.Project.getWidgetModule(a.create.data);if(r?(this.$O3d[t]=r.exeCreateTag(this.viewer,this,a,1/this.$O2O,1/this.$O2P,t),i=this.$O3d[t],i.apnOID=t,i.apnPID=this.$O1m,e.apnOID&&(i.apnParentOID=e.apnOID),(this.$O5H("click",t)||this.$O5H("tapStart",t))&&(i.apnTapCsr=!0),e.appendChild(i),r.exeRenderTag(this.viewer,this,i,a,1/this.$O2O,1/this.$O2P),i.style.display="block"):(this.$O3d[t]||(this.$O3d[t]=e.$TAG("div",{style:"position:absolute;"}),this.$O3d[t].apnCur={}),i=this.$O3d[t],i.apnOID=t,i.apnPID=this.$O1m,e.apnOID&&(i.apnParentOID=e.apnOID),apn.IWidget.exeSetAlpha(i,1),apn.IWidget.exeRenderPosition(this,i,this.screen.objects[t],this.project,1/this.$O2O,1/this.$O2P),apn.IWidget.exeRenderSize(this.viewer,this,i,this.screen.objects[t],this.project,1/this.$O2O,1/this.$O2P),apn.IWidget.exeSetCursor(i,"inherit"),apn.CES.mapNonWgtGroupOverflow[a.module]?i.style.overflow=apn.CES.mapNonWgtGroupOverflow[a.module]:bx.Trace.log("APN","warning","Unknown non-widget group="+a.module,"CES.createWidget"),"bx.CEditorWnd.CGroup"==a.module?i.style.display="none":i.style.display="block",!a.layout||!a.layout.children||a.ITRs&&a.ITRs.length||(i.apnCur.isHolder=!0)),!i.apnCur.apxCreatedFromTag){var o;if(this.viewer.constructor.IStub_pubProcWgtAttr&&(o=this.viewer.constructor.IStub_pubProcWgtAttr(this.project,this.getPageID(),t))){if(o.attr)for(var s in o.attr)void 0!==o.attr[s]&&i.setAttribute(s,o.attr[s]);if(o.attr0&&i.firstChild&&1==i.firstChild.nodeType)for(var s in o.attr0)void 0!==o.attr0[s]&&i.firstChild.setAttribute(s,o.attr0[s])}}if((this.$O46(i)||this.$O47(i))&&(i.apnDragCsr=!0,apn.IWidget.exeSetCursor(i,i.apnCur.orgCursor)),(this.viewer.o.fullAccel||this.viewer.isStretch())&&apn.CExe.ACCEL(i),a.layout&&a.layout.children&&"apn.CLayer"==a.module&&(i.apnCur.Event2Holder=!0),apn.IWidget.exeSetZIndex(i,a.create.zIndex),i.$CSS({transitionDuration:0}),apn.CExe.DEBUG&&a.create.data&&a.create.data.styles&&(i.title=(a.create.data.styles.title?a.create.data.styles.title+":":":")+t+"("+a.create.data.wgtTitle+")"),window.apx&&apx.wgt&&r&&r.exeMediaPlay&&(i.exeOnMediaEvent=function(e,a,i){if(n.$O4j&&n.$O4j.length)for(var r=0;r<n.$O4j.length;r++)n.$O4j[r].mediaWidgetId==t&&n.$O4j[r].handler(e,a,i)}),a.layout&&a.layout.children&&a.layout.children.length)for(var p=0;p<a.layout.children.length;p++)this.screen.objects[a.layout.children[p]]&&("bx.CEditorWnd.CGroup"==a.module?this.$O3L(e,a.layout.children[p],this.screen.objects[a.layout.children[p]]):this.$O3L(i,a.layout.children[p],this.screen.objects[a.layout.children[p]]))},apn.CES.prototype.$O3x=function(e,t){var a=this.screen.objects[e],i=this.$O3d[e],n=apn.Project.getWidgetModule(a.create.data);n&&n.exeRenderTag?n.exeRenderTag(this.viewer,this,i,a,1/this.$O2O,1/this.$O2P,t):(apn.IWidget.exeRenderPosition(this,i,a,this.project,1/this.$O2O,1/this.$O2P),apn.IWidget.exeRenderSize(this.viewer,this,i,a,this.project,1/this.$O2O,1/this.$O2P)),apn.IWidget.exeSetZIndex(i,a.create.zIndex)},apn.CES.prototype.$O5D=function(e,t,a){function i(e,r){if(r>0&&(void 0!==t&&t&&(e.init.position.x+=t),void 0!==a&&a&&(e.init.position.y+=a)),e.layout&&e.layout.states){var o;for(var s in e.layout.states)for(o in e.layout.states[s].objects)void 0!==t&&t&&(e.layout.states[s].objects[o].init.position.x+=t),void 0!==a&&a&&(e.layout.states[s].objects[o].init.position.y+=a);for(o in e.layout.states[0].objects)void 0!==t&&t&&(n.screen.objects[o].init.position.x+=t),void 0!==a&&a&&(n.screen.objects[o].init.position.y+=a)}else if(e.layout&&e.layout.children&&e.layout.children.length)for(var s=0;s<e.layout.children.length;s++)i(n.screen.objects[e.layout.children[s]],r+1)}if(t||a){var n=this;i(e,0)}},apn.CES.prototype.$Oct=function(e){function t(){r++,n==r&&e()}function a(t,a,i){r++,n==r&&e()}var i,n=1,r=0;for(var o in this.screen.objects)i=apn.Project.getWidgetModule(this.screen.objects[o].create.data),i&&i.exeAssetPreload&&n++;for(o in this.screen.objects)i=apn.Project.getWidgetModule(this.screen.objects[o].create.data),i&&i.exeAssetPreload&&i.exeAssetPreload(this,o,t);var s=apn.Project.publishListAsset(this.project,this.$O1m),p=0,l={};for(o=0;o<s.length;o++)"image"==apn.Project.$O8G(this.project,s[o])&&(l[o]={url:this.mediaURL(s[o])},p++);p?(new apn.CRscLoader).load(this.project,l,a):a(0,0,0)},apn.CES.prototype.$O1B=function(e,t,a,i){function n(e){if(o.$O6J){if(!o.$O7K&&o.$O4k){var t;for(var a in o.$O3d)t=apn.Project.getWidgetModule(o.screen.objects[a].create.data),t&&t.exeOnTick&&"Y"==o.wgtGetProperty(a,"apxBackgroundTick")&&t.exeOnTick(o,a,e)}}else{if(o.$O4k){o.$O4k=!1;var t;for(var a in o.$O3d)t=apn.Project.getWidgetModule(o.screen.objects[a].create.data),t&&t.exeOnTick&&(t.exeOnTick(o,a,e),o.$O4k=!0)}window.apx&&apx.wgt&&apx.wgt.$O4l(o,e)}}this.$O3M(),this.project=t,this.flow=t.flow,this.screen=e,this.$O1m=a,this.popup?(this.tag.style.backgroundColor="transparent",this.tag.style.backgroundImage="none"):(apn.Project.$O5X(this.project,this.viewer.o.standAlone,"color",this.screen.BG?this.screen.BG.fillStyle:void 0,this.tag,1/this.getZoomX(),1/this.getZoomY()),this.screen.BG?apn.Project.$O5X(this.project,this.viewer.o.standAlone,"media",this.screen.BG.mediaID||this.screen.BG.mediaFillStyle,this.tag,1/this.getZoomX(),1/this.getZoomY()):apn.Project.$O5X(this.project,this.viewer.o.standAlone,"media",void 0,this.tag,1/this.getZoomX(),1/this.getZoomY())),this.$O3X("exeOnPagePreLoad",a);var r;this.$O3C();for(r in this.screen.objects)void 0===this.$O3u(r,"parent")&&this.$O3L(this.tag,r,this.screen.objects[r]);this.$O3E();var o=this,s=0;for(r in this.screen.objects)wgtModule=apn.Project.getWidgetModule(this.screen.objects[r].create.data),wgtModule&&wgtModule.exeAssetDelayedLoad&&s++;for(r in this.screen.objects)wgtModule=apn.Project.getWidgetModule(this.screen.objects[r].create.data),wgtModule&&wgtModule.exeAssetLoad&&(s>1&&wgtModule.exeAssetDelayedLoad&&this.wgtSetProperty(r,"apxDelayedLoad",!0),wgtModule.exeAssetLoad(this,this.$O3d[r]));return this.$O3X("exeOnLoad",a),this.$O6J=!!this.viewer.o.clearItrOnPause,this.$O4k=!0,void 0!==this.$O42&&(bx.Transition.loopRemove(this.$O42),delete this.$O42),this.$O42=bx.Transition.loopAdd(n),this.afterLoaded=!0,!0},apn.CES.prototype.$O3M=function(){if(this.$O5K(!0),this.$O7W(),this.startDrag=null,this.$O7P=!1,this.clearCursor(),this.$O3X("exeOnDestroy",this.getPageID()),this.tag.innerHTML="",this.$O3d={},this.$Ock&&delete this.$Ock,this.$Ocl&&delete this.$Ocl,this._lastEvTag&&delete this._lastEvTag,this.$O4j&&delete this.$O4j,this.$O4m&&delete this.$O4m,this.$O4n&&delete this.$O4n,this._apxEventListenBubble&&delete this._apxEventListenBubble,this.$O4i){for(var e in this.$O4i)if("WebAudioAPI"==this.$O4i[e].type)this.$O4i[e].tag.stop(),this.$O4i[e].tag.close();else try{this.$O4i[e].tag.pause(),this.$O4i[e].tag.sourceTag.src="",this.$O4i[e].tag.load()}catch(e){}delete this.$O4i}this.$O5e&&(this.$O5e=0),this.$Ocx&&delete this.$Ocx,delete this.screen},apn.CES.prototype.$O3n=function(e,t,a,i,n,r,o){function s(e){var t={action:"CWP",event:"none",target:{objectID:m},set:{}};return r&&(t.timing=bx.$cloneObject({},r),t.timing.effect&&delete t.timing.effect),t}var p,l=[];if(2==o);else if(i==n)return l;var d,c,g,u,h,x,f,y,b=a.states[0].objects,v=a.states[i].objects,C=a.states[n].objects;for(var m in b)d=C[m]||b[m],c=2==o?t.objects[m]||v[m]||b[m]:v[m]||b[m],f=!1,g=d.init.cx,u=d.init.cy,h=c.init.cx,x=c.init.cy,g==h&&u==x||(f=!0),d.init.shape.type==bx.CCanvasWnd.SHAPE_LINE?d.init.position.x==c.init.position.x&&d.init.position.y==c.init.position.y&&d.init.shape.x[0]==c.init.shape.x[0]&&d.init.shape.y[0]==c.init.shape.y[0]&&d.init.shape.x[1]==c.init.shape.x[1]&&d.init.shape.y[1]==c.init.shape.y[1]||(p=s(m),p.set.line=[d.init.position.x,d.init.position.y,d.init.shape.x[0],d.init.shape.y[0],d.init.shape.x[1],d.init.shape.y[1]],l.push(p)):(d.init.position.x==c.init.position.x&&d.init.position.y==c.init.position.y||(p=s(m),2==o?p.set.position={x:d.init.position.x,y:d.init.position.y}:p.set.positionBy={x:d.init.position.x-c.init.position.x,y:d.init.position.y-c.init.position.y},l.push(p)),d.init.shape.w==c.init.shape.w&&d.init.shape.h==c.init.shape.h||(p=s(m),2==o?p.set.size={w:d.init.shape.w,h:d.init.shape.h}:p.set.sizeBy={w:d.init.shape.w-c.init.shape.w,h:d.init.shape.h-c.init.shape.h},l.push(p))),2==o?d.create.zIndex!=this.$O3d[m].apnCur.zIndex&&(p=s(m),p.set.zIndex=d.create.zIndex,l.push(p)):d.create.zIndex!=c.create.zIndex&&(p=s(m),p.set.zIndex=d.create.zIndex,l.push(p)),d.create.data&&d.create.data.styles&&(y=apn.Project.getWidgetModule(this.screen.objects[m].create.data),y&&y.styleMap&&y.styleMap.angle&&(f||apn.Project.resolveStyle(e,"angle",d.create.data.styles.angle)!=apn.Project.resolveStyle(e,"angle",c.create.data.styles.angle))&&(p=s(m),p.set.angle={angle:apn.Project.resolveStyle(e,"angle",d.create.data.styles.angle)},p.set.angle.cx=g,p.set.angle.cy=u,l.push(p)),y&&y.styleMap&&y.styleMap.alpha&&apn.Project.resolveStyle(e,"alpha",d.create.data.styles.alpha)!=apn.Project.resolveStyle(e,"alpha",c.create.data.styles.alpha)&&(p=s(m),p.set.alpha=apn.Project.resolveStyle(e,"alpha",d.create.data.styles.alpha),l.push(p)),y&&y.styleMap&&y.styleMap.visibility&&apn.Project.resolveStyle(e,"visibility",d.create.data.styles.visibility)!=apn.Project.resolveStyle(e,"visibility",c.create.data.styles.visibility)&&(p=s(m),p.set.visibility=apn.Project.resolveStyle(e,"visibility",d.create.data.styles.visibility),l.push(p)));return l},apn.CES.prototype.$O3q=function(e,t){return this.screen.objects[e].layout.layers[t].id},apn.CES.prototype.$O4f=function(e,t){var a=this.screen.objects[e].layout.layers;if(void 0!==a[t]&&this.$O3u(this.screen.objects[e].layout.layers[t].id,"isHidden"))for(var i in a)i==t?(this.$O3t(a[i].id,"isHidden",!1),this.$O3d[a[i].id].style.display="block",this._exeOnWgtVisibilityChange(a[i].id,!0)):(this.$O3t(a[i].id,"isHidden",!0),this.$O3d[a[i].id].style.display="none",this._exeOnWgtVisibilityChange(a[i].id,!1))},apn.CES.prototype.stateLayerActivate=apn.CES.prototype.$O4f,apn.CES.prototype.$O3l=function(e,t){var a=this.$O3u(e,"activeState");return void 0!==a||t||bx.Trace.log("APN","warning","Invalid layer container="+e,"CES.$O3l"),a},apn.CES.prototype.stateGetActive=apn.CES.prototype.$O3l,apn.CES.prototype.$O3m=function(e,t){if(!this.screen.objects[e].layout||!this.screen.objects[e].layout.layers||void 0!==this.screen.objects[e].layout.layers[t]){var a=this.$O3l(e,!0);if(this.$O3t(e,"activeState",t),void 0!==e){var i=apn.Project.getWidgetModule(this.screen.objects[e].create.data);i&&i.exeSetState&&!i.BLACKBOX_MODEL&&i.exeSetState(this,this.$O3d[e],t,a)}}},apn.CES.prototype.stateSetActive=apn.CES.prototype.$O3m,apn.CES.prototype.$O3p=function(e,t,a){var i,n;this.$O3N(e,t);for(i in t.states[a].objects){if(t.states[a].objects[i].create.data&&t.states[a].objects[i].create.data.styles){e.objects[i].create.data=e.objects[i].create.data||{},e.objects[i].create.data.styles=e.objects[i].create.data.styles||{};for(n in apn.CExe.sceneEditableStyles)e.objects[i].create.data.styles[n]=t.states[a].objects[i].create.data.styles[n]}bx.$cloneObject(e.objects[i].init,t.states[a].objects[i].init)}},apn.CES.prototype.$O3N=function(e,t){var a;for(a in t.states[0].objects)bx.$cloneObject(e.objects[a].create,t.states[0].objects[a].create),bx.$cloneObject(e.objects[a].init,t.states[0].objects[a].init)},apn.CES.prototype.$O3o=function(e){for(var t in e.states[0].objects)this.$O3x(t)},apn.CES.prototype.$O5K=function(e){if(this.viewer.o.clearItrOnPause&&(e=!0),this.$O4o){for(var t=this.$O4o.concat(),a=0;a<t.length;a++)(e||"CWP"!=t[a].action&&"SPT"!=t[a].action)&&(this.clearTimeout(t[a].id),t.splice(a,1),a--);e&&delete this.$O4o}},apn.CES.prototype.$O5I=function(e){if(this.$O4o)for(var t=0;t<this.$O4o.length;t++)this.$O4o[t].id==e&&(this.$O4o.splice(t,1),t--)},apn.CES.prototype.$Ocy=function(e){var t=!1;if(this.$O4o)for(var a=0;a<this.$O4o.length;a++)this.$O4o[a].grp&&this.$O4o[a].grp==e&&(this.$Ocz(this.$O4o[a].id),this.$O4o.splice(a,1),a--,t=!0);return t},apn.CES.prototype.$O5J=function(e,t,a){this.$O4o=this.$O4o||[],this.$O4o.push({id:e,action:t,grp:a})},apn.CES.prototype.setTimeout=function(e,t){var a={time:t,onEnd:e,onCancel:function(){}};return apn.CES.$O5Q=apn.CES.$O5Q||0,apn.CES.$O5Q++,a.id="TMR$"+apn.CES.$O5Q,bx.Transition.add(a)+":"+a.id},apn.CES.prototype.clearTimeout=function(e){if(e){var t=(e+"").split(":");2==t.length&&bx.Transition.end(parseInt(t[0]),t[1])}},apn.CES.prototype.$Ocz=function(e){if(e){var t=(e+"").split(":");2==t.length&&bx.Transition.cancel(parseInt(t[0]),t[1])}},apn.CES.prototype.$O3v=function(){var e=bx.CCanvasWnd.ZINDEX_OBJECT;for(var t in this.screen.objects)e<this.screen.objects[t].create.zIndex&&(e=this.screen.objects[t].create.zIndex),this.$O3d[t]&&void 0!==this.$O3d[t].apnCur.zIndex&&e<this.$O3d[t].apnCur.zIndex&&(e=this.$O3d[t].apnCur.zIndex);return e},apn.CES.prototype.getZIndexMax=apn.CES.prototype.$O3v,apn.CES.prototype.$O3w=function(){var e=bx.CCanvasWnd.ZINDEX_OBJECT;for(var t in this.screen.objects)e>this.screen.objects[t].create.zIndex&&(e=this.screen.objects[t].create.zIndex),this.$O3d[t]&&void 0!==this.$O3d[t].apnCur.zIndex&&e>this.$O3d[t].apnCur.zIndex&&(e=this.$O3d[t].apnCur.zIndex);return e},apn.CES.$O5M=function(e,t,a,i,n){return a?Math.cos(a)*(i-e)-Math.sin(a)*(n-t)+e:i},apn.CES.$O5N=function(e,t,a,i,n){return a?Math.sin(a)*(i-e)+Math.cos(a)*(n-t)+t:n},apn.CES.$O4p=function(e,t,a,i,n,r,o){var s,p=o&&o>4?o:32,l=0;for(r=r||[],r.length=p,s=0;s<p;s++)r[s]={};for(s=0;s<p;s++)l=s/p*(2*Math.PI),r[s].x=e+a/2+a/2*Math.cos(l),r[s].y=t+i/2+i/2*Math.sin(l),n&&(r[s].x0=apn.CES.$O5M(e+a/2,t+i/2,n,r[s].x,r[s].y),r[s].y=apn.CES.$O5N(e+a/2,t+i/2,n,r[s].x,r[s].y),r[s].x=r[s].x0,delete r[s].x0);return r},apn.CES.getLineAngle=function(e){return(Math.atan2(e.x[1]-e.x[0],e.y[0]-e.y[1])+2*Math.PI)%(2*Math.PI)},apn.CES.sptERR={notFound:{en:"Widget is not found.",ko:"위젯이 존재하지 않습니다."},notFoundPage:{en:"Page is not found.",ko:"페이지가 존재하지 않습니다."},notSet:{en:"Tried to access an unset value.",ko:"Set되지 않은 값에 대한 Get요청입니다."},notSetValue:{en:"Tried to set undefined/invalid value.",ko:"Set할 수 없는 값을 지정하려고 했습니다. 실행이 취소되었습니다."},noSupportProp:{en:"The property is not supported for the widget.",ko:"위젯이 지원하지 않는 속성입니다."},noSupportAPI:{en:"The API is not supported for the widget.",ko:"위젯이 지원하지 않는 API입니다."},noAPIparam:{en:"Unsupported parameter is passed for API.",ko:"API가 지원하지 않는 인수입니다."},dupSearch:{en:"More than one instance are searched by the request.",ko:"하나 이상의 객체가 검색이 되었습니다."},errAction:{en:"Problem in executing the given Action.",ko:"액션 실행에서 오류가 발생했습니다."},errLoop:{en:"Run of cloneScriptOf() is cancled due to possibility of infinite-loop.",ko:"무한 루프 발생의 가능성으로 인해 cloneScriptOf()의 실행이 취소되었습니다."},noSupportClone:{en:"Cloning of Scene type widgets are not supported yet.",ko:"Scene구조 위젯에 대한 Clone 기능은 아직 제공되지 않습니다."},noSupportExeRun:{en:'The execution layer cannot run "exe.run()" for ',ko:"현재 실행기가 지원하지 않는 exe.run()기능입니다."}},apn.CES.sptWgtInfo=function(e,t,a){var i={props:{},propHelps:{},APIs:[]},n=apn.P.getEvent(e,t,a);if(n&&n.length){for(var r,o=0;o<n.length;o++)if(n[o].param)for(r in n[o].param)"$"==(r||"")[0]&&delete n[o].param[r];i.events=n}if(a&&e.pages[t]&&e.pages[t].objects[a]&&e.pages[t].objects[a].create&&e.pages[t].objects[a].create.data){var s,p=e.pages[t].objects[a].create.data,l=apn.Project.getWidgetModule(p);l&&l.styleMap&&l.styleMap.title&&(i.props.label=apn.Project.resolveStyle(e,"title",p.styles?p.styles.title:void 0),i.propHelps.label="String");var d=apn.P.getSetOfCWP(e,t,a);void 0!==d.position&&(i.props.x=e.pages[t].objects[a].init.position.x,i.props.y=e.pages[t].objects[a].init.position.y),void 0!==d.size&&(i.props.w=e.pages[t].objects[a].init.shape.w,i.props.h=e.pages[t].objects[a].init.shape.h),void 0!==d.trOrg&&(i.props.origin=apn.CES._sptCrX2OrX(e.pages[t].objects[a],e.pages[t].objects[a].init.cx)+","+apn.CES._sptCrX2OrX(e.pages[t].objects[a],e.pages[t].objects[a].init.cy),i.propHelps.origin="{x:0~1,y:0~1}");var c=apn.Project.getExeStateByObjectID(e,t,a);if(c&&c.length>1){var g;if(p.properties&&void 0!==p.properties.state?g="$APX"+p.properties.state:1==apn.Project.checkStateType(e.pages[t].objects[a].layout)?g=e.pages[t].objects[a].layout.state:2==apn.Project.checkStateType(e.pages[t].objects[a].layout)&&(g=p.styles.state),void 0!==g){i.props.state=apn.Project.getExeStateTitleByObjectID(e,t,a,g);for(var u="",o=0;o<c.length;o++)u+=(u?",":"")+"'"+c[o].title+"'";u&&(i.propHelps.state=u)}}if(void 0!==d.visibility&&(s=apn.Project.resolveStyle(e,"visibility",p.styles?p.styles.visibility:void 0),"Hide"==s||s===!1?i.props.visibility="hidden":"Pass"==s||1===s?i.props.visibility="visibleEventPass":"Block"==s||2===s?i.props.visibility="visibleEventBlock":"Show"!=s&&s!==!0||(i.props.visibility="visible"),i.propHelps.visibility="'visible','visibleEventPass','visibleEventBlock','hidden'"),void 0!==d.alpha&&(i.props.opacity=apn.Project.resolveStyle(e,"alpha",p.styles?bx.$checkNaN(parseFloat(p.styles.alpha)):void 0),i.propHelps.opacity="Percent(%)"),void 0!==d.angle&&(s=apn.Project.resolveStyle(e,"angle",p.styles?p.styles.angle:void 0),i.props.angle=bx.CCanvasWnd.radToDegree(s),i.propHelps.angle="Degree(˚)"),l&&(l.exeInputSet||l.exeInputGet)){var h="";if(l.edtOnInputGet)try{h=l.edtOnInputGet(e,t,a)}catch(e){console.error("[Aspen] Problem in source code of edtOnInputGet(). Please consult to the technical support team.")}i.props.value=h}if(void 0!==d.text&&(i.props.text=apn.Project.resolveStyle(e,"text",p.styles?p.styles.text:void 0),i.propHelps.text="String"),void 0!==d.textColor&&(i.props.textColor=apn.Project.resolveStyle(e,"fontStyle",p.styles?p.styles.fontStyle:void 0),i.propHelps.textColor="Color"),l&&l.styleMap&&!l.exeItrNoText){if(l.styleMap.fontItalic&&(i.props.textItalic=apn.Project.resolveStyle(e,"fontItalic",p.styles?p.styles.fontItalic:void 0),i.propHelps.textItalic="Boolean"),l.styleMap.fontBold&&(i.props.textBold=apn.Project.resolveStyle(e,"fontBold",p.styles?p.styles.fontBold:void 0),i.propHelps.textItalic="Boolean"),l.styleMap.fontUnderlined&&(i.props.textUnderline=apn.Project.resolveStyle(e,"fontUnderlined",p.styles?p.styles.fontUnderlined:void 0),i.propHelps.textItalic="Boolean"),l.styleMap.font){var x=apn.Project.resolveStyle(e,"font",p.styles?p.styles.font:void 0);i.props.font="",apn.fonts&&apn.fonts[x]&&apn.fonts[x].title&&(i.props.font=apn.fonts[x].title),i.propHelps.font="Font Name(in the font list)"}l.styleMap.fontSize&&(i.props.fontSize=apn.Project.resolveStyle(e,"fontSize",p.styles?p.styles.fontSize:void 0),i.propHelps.fontSize="String with 'px', ex) '12px'")}l&&l.styleMap&&l.styleMap.strokeStyle&&(i.props.strokeStyle=apn.Project.resolveStyle(e,"strokeStyle",p.styles?p.styles.strokeStyle:void 0),i.propHelps.strokeStyle="Color"),l&&l.styleMap&&l.styleMap.fillStyle&&(i.props.fillStyle=apn.Project.resolveStyle(e,"fillStyle",p.styles?p.styles.fillStyle:void 0),i.propHelps.fillStyle="Color"),l&&l.styleMap&&l.styleMap.lineDash&&(i.props.lineDash=apn.CES.$OcA(apn.Project.resolveStyle(e,"lineDash",p.styles?p.styles.lineDash:void 0)),i.propHelps.lineDash="'solid','dotted','dashed'"),l&&l.styleMap&&l.styleMap.lineWidth&&(i.props.lineWeight=apn.Project.resolveStyle(e,"lineWidth",p.styles?p.styles.lineWidth:void 0),i.propHelps.lineWeight="Number"),void 0!==d.drag&&(s=apn.Project.resolveStyle(e,"dragX",p.styles?p.styles.dragX:void 0),s!==!0&&s!==!1||(i.props.dragX=s),i.propHelps.dragX="Boolean",s=apn.Project.resolveStyle(e,"dragY",p.styles?p.styles.dragY:void 0),s!==!0&&s!==!1||(i.props.dragY=s),i.propHelps.dragY="Boolean"),l&&!l.APX_NO_POINTER_EV&&(i.props.acceptDrop="",i.propHelps.acceptDrop="Boolean,''",i.props.acceptMouseOver="",i.propHelps.acceptMouseOver="Boolean"),l&&l.exeScriptMediaID&&!(p.properties&&p.properties.attrs&&p.properties.attrs.URL)&&l.styleMap&&l.styleMap.mediaID&&(s=apn.Project.resolveStyle(e,"mediaID",p.styles?p.styles.mediaID:void 0),s?i.props.media={url:apn.Project.$O1e(e,s)||"",type:apn.Project.$O8G(e,s)}:i.props.media={url:"",type:"image"});for(var o in i.props)break;if(void 0===o&&delete i.props,c&&c.length>1){i.states=[];for(var o=0;o<c.length;o++)i.states.push(c[o].title)}var f,y;if(l&&l.scriptInfo&&l.scriptInfo.wgtData){var b;if(l.scriptInfo.wgtDataByParam?p&&p.properties&&p.properties.attrs&&p.properties.attrs[l.scriptInfo.wgtDataByParam]&&(b=l.scriptInfo.wgtData[p.properties.attrs[l.scriptInfo.wgtDataByParam]]):b=l.scriptInfo.wgtData,b)for(var o in b)if(b[o]){i.data=i.data||{},i.data[o]={},p&&p.properties&&p.properties.attrs&&void 0!==p.properties.attrs[o]?i.data[o].value="string"==typeof p.properties.attrs[o]?p.properties.attrs[o]:JSON.stringify(p.properties.attrs[o]):void 0!==b[o].value&&(i.data[o].value="string"==typeof b[o].value?b[o].value:JSON.stringify(b[o].value));var v="";"go"==b[o].type?(v+="\n[Get-only]",f=!0):"so"==b[o].type?(v+="\n[Set-only]",y=!0):(f=!0,y=!0),i.data[o].help=apn.CExe.GL(b[o].help)+v}}if(l&&l.scriptInfo&&l.scriptInfo.wgtRun){var C;if(l.scriptInfo.wgtRunByParam?p&&p.properties&&p.properties.attrs&&p.properties.attrs[l.scriptInfo.wgtRunByParam]&&(C=l.scriptInfo.wgtRun[p.properties.attrs[l.scriptInfo.wgtRunByParam]]):C=l.scriptInfo.wgtRun,C)for(var o in C)C[o]&&(i.fns=i.fns||{},i.fns[o]={},i.fns[o].param=C[o].param,i.fns[o].help=apn.CExe.GL(C[o].help))}i.props&&(i.APIs.push("wgt.get"),i.APIs.push("wgt.set")),f&&i.APIs.push("wgt.getData"),y&&i.APIs.push("wgt.setData"),i.fns&&i.APIs.push("wgt.run"),i.APIs.push("wgt.zIndexTo"),d.position&&(i.APIs.push("wgt.moveTo"),i.APIs.push("wgt.moveBy")),d.size&&(i.APIs.push("wgt.sizeTo"),i.APIs.push("wgt.sizeBy")),l&&l.exeGetSizeByContent&&i.APIs.push("wgt.sizeByContent"),void 0!==d.angle&&i.APIs.push("wgt.rotateTo"),void 0!==d.alpha&&i.APIs.push("wgt.opacityTo"),d.zoom&&i.APIs.push("wgt.zoomTo"),d.line&&i.APIs.push("wgt.lineTo"),i.states&&i.APIs.push("wgt.changeState"),e.pages[t].objects[a].layout&&e.pages[t].objects[a].layout.states||i.APIs.push("wgt.clone"),2==apn.Project.checkStateType(e.pages[t].objects[a].layout)&&i.APIs.push("wgt.getLayer"),i.APIs.length||delete i.APIs}return i},apn.CES._sptCrX2OrX=function(e,t){return(t+e.init.shape.w/2)/e.init.shape.w},apn.CES._sptCrY2OrY=function(e,t){return(t+e.init.shape.h/2)/e.init.shape.h},apn.CES._sptOrX2CrX=function(e,t){return t*e.init.shape.w-e.init.shape.w/2},apn.CES._sptOrY2CrY=function(e,t){return t*e.init.shape.h-e.init.shape.h/2},apn.CES.$OcA=function(e){var t="solid";return e&&(t=2==e.length&&e[0]==e[1]?"dotted":"dashed"),t},apn.CES.$OcE=function(e){for(var t=apn.P.getStatic(apn.P.LINEDASH),a=0;a<t.length;a++)if(t[a].title==e)return t[a].value;return null},apn.CES.prototype.runITR=function(e,t){if(e&&e.target&&e.target.objectID&&"$"!=e.target.objectID[0]&&!(this.screen.objects[e.target.objectID]&&this.screen.objects[e.target.objectID].create.data&&this.screen.objects[e.target.objectID].create.data.wgtID))return void this.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"notFound")+" (Invalid widget="+this.$OcB(e.target.objectID)+")");if(e.timing&&!e.timing.duration&&delete e.timing,e.set&&e.set.alpha&&e.set.alpha<=.01&&(e.set.alpha*=100),apn.CExe.DEBUG&&console.log("[SCRIPT] runITR",JSON.stringify(e),t),t){var a;"string"==typeof t&&(a=t.split(";")).length>1?(e.$O3y=bx.$checkNaN(parseInt(a[0])),e.$Ocp=a[1]):e.$O3y=bx.$checkNaN(parseInt(t))}this.$O35(e,void 0,void 0,"SPT")||this.sptLog("err",apn.CExe.GL(apn.CES.sptERR,"errAction")+" (Action="+e.action+")")},apn.CES.prototype.sptEval=function(e,t,a){var i;if(this.$OcC=a,i=this.$Oco(e,t)){if(a.depth>5)return this.sptLog("err",apn.CExe.GL(apn.CES.sptERR,"errLoop")+" (WidgetID="+this.$OcB(a.oId)+")"),!0;if(window.AspenUIRun){var n;n=apn.P.resolveCompositeSysEV(a.ev||e);var r=bx.$cloneObject({},a);return r.depth++,AspenUIRun("run_script",{src:i,apx:this,objectID:a.oId||t,param:n&&n.param?n.param:void 0,stack:r}),!0}}return!1},apn.CES.$OcD=function(e){var t,a={};return"string"==typeof e&&(t=e.split(";")).length>1?(a.wait=bx.$checkNaN(parseInt(t[0])),a.grp=t[1]):a.wait=bx.$checkNaN(parseInt(e)),a},apn.CES.prototype.sptPageSetVar=function(e,t,a){function i(){n.$Ocx=n.$Ocx||{},n.$Ocx[e]=t}var n=this;if(a){var r=apn.CES.$OcD(a),o=this.setTimeout(function(){n.$O5I(o),n.$O7K||i()},r.wait);this.$O5J(o,"SPT",r.grp)}else i()},apn.CES.prototype.sptPageGetVar=function(e){return this.$Ocx&&void 0!==this.$Ocx[e]?this.$Ocx[e]:""},apn.CES.prototype.sptWgtClone=function(e,t,a){var i=this.wgtClone(e,t,a);return void 0===i?(this.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"notFound")+" (WidgetID="+this.$OcB(e)+")"),""):null===i?(this.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"noSupportClone")+" (WidgetID="+this.$OcB(e)+")"),""):i},apn.CES.prototype.sptWgtBubbling=function(e,t,a,i){var n,r=this.wgtTag(e);if(a)for(var o in apn.P.eventTitle)if(a==apn.P.eventTitle[o]){n=o;break}if(r.apxBubblingCtl=r.apxBubblingCtl||{},t)if(n)r.apxBubblingCtl[n]=!i||1;else for(var o in apn.CES.$Ocv)r.apxBubblingCtl[o]=!i||1;else n?r.apxBubblingCtl[n]&&delete r.apxBubblingCtl[n]:r.apxBubblingCtl={}},apn.CES.prototype.sptWgtGetProp=function(e,t,a){var i;if(!(i=this.screen.objects[e]))return a||this.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"notFound")+" (WidgetID="+this.$OcB(e)+")"),"";if(!i.create.data||!i.create.data.wgtID)return a||this.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"notFound")+" (Invalid widget="+this.$OcB(e)+")"),"";if(("w"==t||"h"==t)&&i.init.shape.type!=bx.CCanvasWnd.SHAPE_RECT)return a||this.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"noSupportProp")+" (WidgetID="+this.$OcB(e)+': "w", "h")'),"";if("x"==t)return i.init.position.x;if("y"==t)return i.init.position.y;if("w"==t)return i.init.shape.w;if("h"==t)return i.init.shape.h;if("state"==t){var n;if(n=this.wgtGetProperty(e,"apxState")?"$APX"+this.wgtGetProperty(e,"apxState"):this.stateGetActive(e,!0))return apn.Project.getExeStateTitleByObjectID(this.project,this.getPageID(),e,n)}if(!i.create.data||!i.create.data.styles)return a||this.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"noSupportProp")+" (WidgetID="+this.$OcB(e)+': "text", "textColor", "visibility", "angle", "opacity", "dragX", "dragY")'),"";var r,o=apn.Project.getWidgetModule(i.create.data);if(!o||!o.exeItrNoText){if("text"==t)return apn.Project.resolveStyle(this.project,"text",this.wgtGetProperty(e,"apxText"))||"";if("textColor"==t)return apn.Project.resolveStyle(this.project,"fontStyle",this.wgtGetProperty(e,"apxTextColor"))||"";if("textItalic"==t)return apn.Project.resolveStyle(this.project,"fontItalic",this.wgtGetProperty(e,"apxTextItalic"))||!1;if("textBold"==t)return apn.Project.resolveStyle(this.project,"fontBold",this.wgtGetProperty(e,"apxTextBold"))||!1;if("textUnderline"==t)return apn.Project.resolveStyle(this.project,"fontUnderlined",this.wgtGetProperty(e,"apxTextUnderline"))||!1;if("fontSize"==t)return apn.Project.resolveStyle(this.project,"fontSize",this.wgtGetProperty(e,"apxFontSize"))||"";if("font"==t){var s=apn.Project.resolveStyle(this.project,"font",this.wgtGetProperty(e,"apxFont"));return apn.fonts&&apn.fonts[s]&&apn.fonts[s].title?apn.fonts[s].title:""}}if("strokeStyle"==t)return apn.Project.resolveStyle(this.project,"strokeStyle",this.wgtGetProperty(e,"apxStrokeStyle"))||"";if("fillStyle"==t)return apn.Project.resolveStyle(this.project,"fillStyle",this.wgtGetProperty(e,"apxFillStyle"))||"";if("lineDash"==t)return apn.CES.$OcA(apn.Project.resolveStyle(this.project,"lineDash",this.wgtGetProperty(e,"apxLineDash")));if("lineWeight"==t)return apn.Project.resolveStyle(this.project,"lineWidth",this.wgtGetProperty(e,"apxLineWeight"))||"";if("visibility"==t){if(r=apn.Project.resolveStyle(this.project,"visibility",this.wgtGetProperty(e,"apxVisibility")),"Hide"==r||r===!1)return"hidden";if("Pass"==r||1===r)return"visibleEventPass";if("Block"==r||2===r)return"visibleEventBlock";if("Show"==r||r===!0)return"visible"}if("angle"==t)return r=apn.Project.resolveStyle(this.project,"angle",this.wgtGetProperty(e,"apxAngle")),bx.CCanvasWnd.radToDegree(r);if("opacity"==t)return r=this.wgtGetProperty(e,"apxOpacity"),void 0!==r&&bx.$checkNaN(parseFloat(r)),apn.Project.resolveStyle(this.project,"alpha",r);if("dragX"==t&&(r=apn.Project.resolveStyle(this.project,"dragX",this.wgtGetProperty(e,"apxDragX")),r===!0||r===!1))return r;if("dragY"==t&&(r=apn.Project.resolveStyle(this.project,"dragY",this.wgtGetProperty(e,"apxDragY")),r===!0||r===!1))return r;if("media"==t)return this.wgtGetProperty(e,"sptMediaID")||"";if("label"==t)return apn.Project.resolveStyle(this.project,"title",this.wgtGetProperty(e,"apxLabel"))||"";if("value"==t){var o=apn.Project.getWidgetModule(this.screen.objects[e].create.data);if(o&&o.exeInputGet){var p=o.exeInputGet(this,this.$O3d[e]);return void 0===p||null===p?"":p}}if("acceptDrop"==t){var l=_this.$O3u(e,"acceptDrop");return l===!0||l===!1?l:""}if("acceptMouseOver"==t){var d=_this.$O3u(e,"acceptMouseOver");return d===!0||d===!1?d:""}return"origin"==t?{x:apn.CES._sptCrX2OrX(this.screen.objects[e],this.screen.objects[e].init.cx),y:apn.CES._sptCrY2OrY(this.screen.objects[e],this.screen.objects[e].init.cy)}:(a||this.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"noSupportProp")+" (WidgetID="+this.$OcB(e)+': "'+t+'")'),"")},apn.CES.prototype.sptWgtSetProp=function(e,t,a,i){function n(){if("label"==t)return void r.wgtSetProperty(e,"apxLabel",a);if("media"==t)return void r.wgtSetProperty(e,"sptMediaID",a);if("strokeStyle"==t)return void r.wgtSetProperty(e,"apxStrokeStyle",a);if("fillStyle"==t)return void r.wgtSetProperty(e,"apxFillStyle",a);if("lineDash"==t)return void r.wgtSetProperty(e,"apxLineDash",apn.CES.$OcE(a));if("lineWeight"==t)return void r.wgtSetProperty(e,"apxLineWeight",a);if("fontSize"==t||"textItalic"==t||"textBold"==t||"textUnderline"==t){var i=apn.Project.getWidgetModule(r.screen.objects[e].create.data);if(!i||!i.exeItrNoText)return"fontSize"==t&&r.wgtSetProperty(e,"apxFontSize",bx.$checkNaN(parseInt(a))+"px"),"textItalic"==t&&r.wgtSetProperty(e,"apxTextItalic",a),"textBold"==t&&r.wgtSetProperty(e,"apxTextBold",a),void("textUnderline"==t&&r.wgtSetProperty(e,"apxTextUnderline",a))}else if("font"==t&&a){var i=apn.Project.getWidgetModule(r.screen.objects[e].create.data);if(!i||!i.exeItrNoText){var n;if(apn.fonts)for(var o in apn.fonts)if((apn.fonts[o].title||"").toLowerCase()==(a||"").toLowerCase()){n=o;break}return n?void r.wgtSetProperty(e,"apxFont",n):void r.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"notSetValue")+" (WidgetID="+r.$OcB(e)+', key=font, value="'+a+'")')}}else{if("value"==t){var i=apn.Project.getWidgetModule(r.screen.objects[e].create.data);return void(i&&i.exeInputSet&&i.exeInputSet(r,r.$O3d[e],a));
}if("x"==t||"y"==t||"w"==t||"h"==t){var s=r.screen.objects[e];if("x"==t||"y"==t){var p=s.init.position.x,l=s.init.position.y;return"x"==t?p=a:"y"==t&&(l=a),void r.$O3i({action:"CWP",target:{objectID:e},set:{position:{x:p,y:l}}})}if(("w"==t||"h"==t)&&s&&s.init.shape.type==bx.CCanvasWnd.SHAPE_RECT){var d=s.init.shape.w,c=s.init.shape.h;return"w"==t?d=a:"h"==t&&(c=a),void r.$O3i({action:"CWP",target:{objectID:e},set:{size:{w:d,h:c}}})}}else{if("angle"==t)return a=bx.CCanvasWnd.degreeToRad(a),void r.$O3i({action:"CWP",target:{objectID:e},set:{angle:a}});if("opacity"==t)return void r.$O3i({action:"CWP",target:{objectID:e},set:{alpha:a}});if("acceptDrop"==t)return void r.wgtAcceptDrop(e,a);if("acceptMouseOver"==t)return void r.wgtAcceptPointerOver(e,a)}}r.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"noSupportProp")+" (Widget="+r.$OcB(e)+': "'+t+'")')}var r=this;if(!(this.screen.objects[e]&&this.screen.objects[e].create.data&&this.screen.objects[e].create.data.wgtID))return void this.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"notFound")+" (Invalid widget="+this.$OcB(e)+")");if(i){var o=apn.CES.$OcD(i),s=this.setTimeout(function(){r.$O5I(s),r.$O7K||n()},o.wait);this.$O5J(s,"SPT",o.grp)}else n()},apn.CES.prototype.sptWgtSetData=function(e,t,a,i){function n(){r.wgtSetProperty(e,t,a)}var r=this;if(!(this.screen.objects[e]&&this.screen.objects[e].create.data&&this.screen.objects[e].create.data.wgtID))return void this.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"notFound")+" (Invalid widget="+this.$OcB(e)+")");if(i){var o=apn.CES.$OcD(i),s=this.setTimeout(function(){r.$O5I(s),r.$O7K||n()},o.wait);this.$O5J(s,"SPT",o.grp)}else n()},apn.CES.prototype.sptWgtGetData=function(e,t){if(!(this.screen.objects[e]&&this.screen.objects[e].create.data&&this.screen.objects[e].create.data.wgtID))return this.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"notFound")+" (Invalid widget="+this.$OcB(e)+")"),"";var a=this.wgtGetProperty(e,t);return void 0===a?"":a},apn.CES.prototype.sptFileGetVar=function(e){var t=this.ctxGet(e);return void 0===t?"":t},apn.CES.prototype.sptFileSetVar=function(e,t,a){function i(){n.ctxSet(e,t)}var n=this;if(a){var r=apn.CES.$OcD(a),o=this.setTimeout(function(){n.$O5I(o),n.$O7K||i()},r.wait);this.$O5J(o,"SPT",r.grp)}else i()},apn.CES.prototype.sptFileBrowse=function(e,t){if("pages"==e){for(var a=apn.Project.getPages(this.project),i=apn.Project.getPageTitles(this.project),n=[],r=0;r<a.length;r++)i[r]&&n.push({id:a[r],label:i[r]});return n}if("widgets"==e){var n=[];if(void 0===t||!this.project.pages[t])return this.sptLog("err",apn.CExe.GL(apn.CES.sptERR,"notFoundPage")+" (param(pageId)="+t+")"),n;var o,s=this.project.pages[t].objects;for(var r in s)s[r].create.data&&s[r].create.data.styles&&s[r].create.data.styles.title&&(o={id:r,label:s[r].create.data.styles.title},s[r].create.data.properties&&s[r].create.data.properties.attrs&&(o.data=s[r].create.data.properties.attrs),n.push(o));return n}this.sptLog("err",apn.CExe.GL(apn.CES.sptERR,"noAPIparam")+" (API=file.browse, key="+e+")")},apn.CES.prototype.$OcB=function(e){if(e&&this.screen&&this.screen.objects[e]&&this.screen.objects[e].create.data&&this.screen.objects[e].create.data.styles){var t="";if(this.screen.objects[e].create.data.styles.title&&(t+=this.screen.objects[e].create.data.styles.title),this.screen.objects[e].create.data.wgtTitle&&(t+="("+this.screen.objects[e].create.data.wgtTitle+")"),t)return t}return e},apn.CES.prototype.$OcF=function(e,t){var a="",i=apn.P.resolveCompositeSysEV(t);return i&&i.ev?(a=apn.P.eventTitle[i.ev],this.sptResolveParam(e,i.ev,i.param)&&(a+="("+this.sptResolveParam(e,i.ev,i.param)+")")):a=apn.P.eventTitle[t],a},apn.CES.prototype.sptLog=function(e,t,a){var i="",n="",r="",o="#ffffff";if("warn"==e?(i="Script:warning ",o="#ffff55"):"err"==e?(i="Script:error ",o="#ff5555"):i="Script:log ",a=a||this.$OcC){var s=this.$OcF(a.oId,a.ev);s&&(n+="on "+s+" "),a.oId&&(n+="@"+(this.$OcB(a.oId)||"Untitled"))}this.screen&&this.screen.UI&&this.screen.UI.title&&(n+="@"+this.screen.UI.title),window.AspenUIRun&&AspenUIRun("cur_script_line")>=0&&(r=" at line:"+AspenUIRun("cur_script_line")),this.viewer.$O3T?this.viewer.$O3T.error((i||n?'<span style="color:'+o+'">['+i+n.replace(/</g,"&lt;").replace(/>/g,"&gt;")+r+"]</span> ":"")+t.replace(/</g,"&lt;").replace(/>/g,"&gt;")):window.console&&console.error("["+i+(this.screen&&this.screen.UI&&this.screen.UI.title?" in "+this.screen.UI.title:"")+"] "+t)},apn.CES.prototype.widgetsByLabel=function(e,t,a){var i=apx.$O4s(this,a?5:4,"title",t,void 0,void 0,e);return 0==i.length&&this.sptLog("err",apn.CExe.GL(apn.CES.sptERR,"notFound")+" (Label="+e+")"),!a&&i.length>1&&(i=[i[0]],this.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"dupSearch")+" (Label="+e+")")),i},apn.CES.prototype.countWidgetsByLabel=function(e,t,a){var i=apx.$O4s(this,a?5:4,"title",t,void 0,void 0,e);return i.length},apn.CES.prototype.wgtIsChildOf=function(e,t){return!(!e||!t||e==t)&&!!apx.$O4s(this,6,e,t).length},apn.CES.prototype.sptResetPage=function(e){function t(){a.viewer._reloadPage(a.getPageID())}var a=this;if(e){var i=apn.CES.$OcD(e),n=this.setTimeout(function(){a.$O5I(n),a.$O7K||t()},i.wait);this.$O5J(n,"SPT",i.grp)}else t()},apn.CES.prototype.pageByLabel=function(e){if(void 0===e)return this.getPageID();var t=apn.Project.getPages(this.project);if(0==t.length)return this.sptLog("err",apn.CExe.GL(apn.CES.sptERR,"notFound")+" (Label="+e+")"),null;for(var a="",i=0,n=0;n<t.length;n++)this.project.pages[t[n]]&&this.project.pages[t[n]].UI.title==e&&(""==a&&(a=t[n]),i++);return i>1&&this.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"dupSearch")+" (Label="+e+")"),a},apn.CES.prototype.sptResolveParam=function(e,t,a,i){if(a){var n=apn.P.resolveCompositeSysEV(t);if(n&&n.ev&&(t=n.ev),"spt_EvtBubble"==t){var r=a.split(";"),i=i||1;if(i=parseInt(i),1==i){var o=apn.P.getEvent(this.project,this.getPageID(),r[2]?r[2]:void 0,void 0,!0,this);if("spt_Custom"==r[1])return decodeURIComponent(r[0]||"");if(o[r[1]]&&o[r[1]].param&&o[r[1]].param[r[0]])return o[r[1]].param[r[0]]}else if(2==i){if(apn.P.eventTitle[r[1]])return apn.P.eventTitle[r[1]];if(void 0===this.viewer._apxPageEventList&&(this.viewer._apxPageEventList=apn.P.$O7u(this.project)),this.viewer._apxPageEventList&&this.viewer._apxPageEventList[r[1]])return this.viewer._apxPageEventList[r[1]].title}else if(3==i)return r[2]}else{var o=apn.P.getEvent(this.project,this.getPageID(),e,void 0,!0,this);if("spt_Custom"==t)return decodeURIComponent(a);if(o[t]&&o[t].param&&o[t].param[a])return o[t].param[a]}}return""},apn.CES.prototype.sptPointerX=function(){return this.$Ocm},apn.CES.prototype.sptPointerY=function(){return this.$Ocn},apn.CES.prototype.sptPointerOrigin=function(){if(this._lastEvTag){var e=this._lastEvTag;if(e.apnOID&&(!e.apnCur||!e.apnCur.Event2Holder))return e.apnOID;for(e=e.parentNode;e&&e!=this.tag&&e!=this.viewer.getPM().tag&&e!=this.tag.ownerDocument;){if(e.apnOID&&(!e.apnCur||!e.apnCur.Event2Holder))return e.apnOID;e=e.parentNode}}return""},apn.CES.prototype.sptCancelWait=function(e){return this.$Ocy(e)},apn.CES.prototype.sptExeCall=function(e,t){return this.viewer.IStub_sptRunCheck&&!this.viewer.IStub_sptRunCheck(e,t,this.getPageID())||!this.viewer.IStub_sptRun?void this.sptLog("err",apn.CExe.GL(apn.CES.sptERR,"noSupportExeRun")+" (Function="+e+", Param="+t+")"):this.viewer.IStub_sptRun(e,t,this.getPageID())},apn.CES.prototype.sptExeGetURLParam=function(e){return bx.$getParamFromURL(location.href,e)?decodeURIComponent(bx.$getParamFromURL(location.href,e)):""},apn.CES.prototype.sptExeIsPreview=function(){return!this.viewer.o.standAlone},apn.CES.prototype.sptGetLayerID=function(e,t){var a,i;if(a=apn.Project.getStateByObjectID(this.project,this.getPageID(),e))for(var n=0;n<a.length;n++)if(a[n].title==t){i=apn.Project.getStateLayerObjectID(this.project,this.getPageID(),e,a[n].stateID);break}return i?i:(this.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"notFound")+" (ContainerID="+this.$OcB(e)+") Layer="+t),"")},apn.CES.prototype.sptFireCustomEvent=function(e,t,a,i){function n(t,i){t.fireEvent("spt_Custom",encodeURIComponent(e||""),i,void 0,a)}function r(){function e(e){e.canvas&&e.canvas!=o&&e.canvas.$Och&&n(e.canvas)}n(o,i.oId),o.$Och&&o.viewer.getCurrentPageID()&&n(o.viewer.getPage(o.viewer.getCurrentPageID()).canvas),o.viewer.$O2J.iteratePage(e)}var o=this;if(t){var s=apn.CES.$OcD(t),p=this.setTimeout(function(){o.$O5I(p),o.$O7K||r()},s.wait);this.$O5J(p,"SPT",s.grp)}else r()},apn.CES.prototype.sptSizeByContent=function(e,t,a,i){var n;if(a.target&&a.target.objectID&&"$"!=a.target.objectID[0]&&this.screen.objects[a.target.objectID]&&(n=apn.Project.getWidgetModule(this.screen.objects[a.target.objectID].create.data)),n&&n.exeGetSizeByContent){var r=n.exeGetSizeByContent(this,a.target.objectID,e,t);(r.w||r.h)&&(a.set.sizeBy.w=r.w,a.set.sizeBy.h=r.h,this.runITR(a,i))}else this.sptLog("warn",apn.CExe.GL(apn.CES.sptERR,"noSupportAPI")+" (API=wgt.sizeByContent, Widget="+this.$OcB(a.target.objectID)+")")},apn.CES.prototype.sptSystem=function(e,t,a,i){function n(){r.viewer.o.standAlone?window[t]=a:r.sptLog(void 0,'extern.set("'+t+'",'+JSON.stringify(a)+") called.")}if("run"==e)if(this.viewer.o.standAlone)if(window[t]&&"function"==typeof window[t]){void 0===a||a instanceof Array||(a=[a]);try{return window[t].apply(window,a)}catch(e){window.console&&console.error(e)}}else this.sptLog("warn","window."+t+"() does not exist or is not a function.");else this.sptLog(void 0,'extern.run("'+t+'",'+JSON.stringify(a)+") called.");else if("get"==e){if(this.viewer.o.standAlone)return window[t];this.sptLog(void 0,'extern.get("'+t+'") called.')}else if("set"==e){var r=this;if(i){var o=apn.CES.$OcD(i),s=this.setTimeout(function(){r.$O5I(s),r.$O7K||n()},o.wait);this.$O5J(s,"SPT",o.grp)}else n()}},apn.CES.prototype.sptEval=function(ev,oId,stack){var _this=this,pageId=this.getPageID(),src=this.$Oco(ev,oId);if(void 0===this.isSptCanVer2&&(this.isSptCanVer2=apn.Project.sptCanVer2(this.project)),src){if(this.scriptEvals=this.scriptEvals||__setScriptRunIf(),this.scriptStubs=this.scriptStubs||this.scriptEvals.getEvalStubs(),stack.depth>5)return this.sptLog("err",apn.CExe.GL(apn.CES.sptERR,"errLoop")+" (WidgetID="+this.$OcB(stack.oId)+")"),!0;var scriptEvals=this.scriptEvals,scriptStubs=this.scriptStubs,runOId=stack.oId||oId,runEvt=stack.ev||ev,cEV=apn.P.resolveCompositeSysEV(runEvt),param=cEV&&cEV.param?cEV.param:void 0;with(scriptEvals.setRunMode(!0),scriptEvals.setRunApx(this),scriptEvals.setOidAndParam(runOId,param,stack),scriptStubs)if(this.isSptCanVer2){runEvt=cEV&&cEV.ev||runEvt;var funcName="sptFunc_"+(pageId||"page")+"_"+(runOId||"object")+"_"+runEvt;funcName=funcName.replace(/[^(a-z0-9)]/gi,"_"),scriptStubs[funcName]||eval("scriptStubs['"+funcName+"'] = function() { try { "+src+'\n\n } catch(ex) { _this.sptLog("err", "Execution error:" + ex); if (ex.stack) console.error(ex.stack); }}'),scriptStubs[funcName]&&scriptStubs[funcName]()}else eval("try { "+src+'\n\n } catch(ex) { _this.sptLog("err", "Execution error:" + ex); if (ex.stack) console.error(ex.stack); }');return scriptEvals.removeOidAndParam(),!0}return!1},window.apx=window.apx||{},apx.$O4s=function(e,t,a,i,n,r,o,s){function p(e,i,n,d){if(0!=n)if(void 0===a)i.create.data&&i.create.data.wgtID&&r.push(e);else if(1==t&&i.create.data&&i.create.data.wgtID&&i.create.data.wgtID==a)r.push(e);else if(2==t&&i.create.data&&i.create.data.properties&&i.create.data.properties.attrs&&i.create.data.properties.attrs.apxType==a)r.push(e);else if(3==t&&i.create.data&&i.create.data.properties&&i.create.data.properties.attrs&&void 0!==i.create.data.properties.attrs[a])r.push(e);else if(4==t&&i.create.data&&i.create.data.styles&&i.create.data.styles[a]==o)r.push(e);else if(5==t&&i.create.data&&i.create.data.styles&&void 0!==i.create.data.styles[a]&&(i.create.data.styles[a]||"").indexOf(o)!=-1)r.push(e);else if(6==t&&e==a)r.push(e);else if(7==t&&a){var c;(c=a(i.create.data))&&(r.push(e),2==c&&(d=!0))}if(!d&&i.layout&&i.layout.children)for(var g,u=0;u<i.layout.children.length;u++)g=apn.Project.getWidgetModule(l.objects[i.layout.children[u]].create.data),p(i.layout.children[u],l.objects[i.layout.children[u]],n+1,g&&g.BLACKBOX_MODEL||s&&apn.Project.checkStateType(l.objects[i.layout.children[u]].layout))}r?r.length=0:r=[];var l;if(window.apn&&apn.CES&&e instanceof apn.CES?l=e.screen:(l=e,e=null),n&&e){if(!l.objects[n])return bx.Trace.log("APX","warning","Non-exist widget id="+n,"searchWidgets"),r;for(var d in e.$O3d)d!=n&&e.$O3d[d].parentNode==e.$O3d[n].parentNode&&(void 0===a&&l.objects[d].create.data&&l.objects[d].create.data.wgtID?r.push(d):1==t&&l.objects[d].create.data&&l.objects[d].create.data.wgtID==a?r.push(d):2==t&&l.objects[d].create.data&&l.objects[d].create.data.properties&&l.objects[d].create.data.properties.attrs&&l.objects[d].create.data.properties.attrs.apxType==a?r.push(d):3==t&&l.objects[d].create.data&&l.objects[d].create.data.properties&&l.objects[d].create.data.properties.attrs&&void 0!==l.objects[d].create.data.properties.attrs[a]?r.push(d):4==t&&l.objects[d].create.data&&l.objects[d].create.data.styles&&l.objects[d].create.data.styles[a]==o?r.push(d):5==t&&l.objects[d].create.data&&l.objects[d].create.data.styles&&void 0!==l.objects[d].create.data.styles[a]&&(l.objects[d].create.data.styles[a]||"").indexOf(o)!=-1?r.push(d):6==t||7==t&&a&&a(l.objects[d].create.data)&&r.push(d))}if(i){if(!l.objects[i])return bx.Trace.log("APX","warning","Non-exist widget id="+i,"searchWidgets"),r;p(i,l.objects[i],0)}if(!i&&!n)for(var d in l.objects)void 0===a&&l.objects[d].create.data&&l.objects[d].create.data.wgtID?r.push(d):1==t&&l.objects[d].create.data&&l.objects[d].create.data.wgtID==a?r.push(d):2==t&&l.objects[d].create.data&&l.objects[d].create.data.properties&&l.objects[d].create.data.properties.attrs&&l.objects[d].create.data.properties.attrs.apxType==a?r.push(d):3==t&&l.objects[d].create.data&&l.objects[d].create.data.properties&&l.objects[d].create.data.properties.attrs&&void 0!==l.objects[d].create.data.properties.attrs[a]?r.push(d):4==t&&l.objects[d].create.data&&l.objects[d].create.data.styles&&l.objects[d].create.data.styles[a]==o?r.push(d):5==t&&l.objects[d].create.data&&l.objects[d].create.data.styles&&void 0!==l.objects[d].create.data.styles[a]&&(l.objects[d].create.data.styles[a]||"").indexOf(o)!=-1?r.push(d):6==t||7==t&&a&&a(l.objects[d].create.data)&&r.push(d);return r},apx.searchWidgets=apx.$O4s,window.apx=window.apx||{},apx.wgt={$O4z:{apxState:"state"},_sysPseudoProp:{apxLayer:!0},$O4y:{apxText:"text",apxTextForced:"text",apxMediaID:"mediaID",fontStyle:"fontStyle",apxVisibility:"visibility",apxAngle:"angle",apxOpacity:"alpha",apxDragX:"dragX",apxDragY:"dragY",apxTextColor:"fontStyle",apxLabel:"title",apxStrokeStyle:"strokeStyle",apxFillStyle:"fillStyle",apxLineDash:"lineDash",apxLineWeight:"lineWidth",apxFontSize:"fontSize",apxTextItalic:"fontItalic",apxTextBold:"fontBold",apxTextUnderline:"fontUnderlined",apxFont:"font",apxCursor:"csr",sptMediaID:"mediaID"}},apx.wgt.spriteDefaultFrameDuration=33,apx.wgt.$O4l=function(e,t){function a(a,i){if(i.frames.length>1){i.lastTime||(i.lastTime=t);var n=(i.frame+1)%i.frames.length,r=i.frame%i.frames.length;if(1==i.type){if(i.lastTime<t&&!e.$OcG(a)){e.wgtAniSet(a,i.states[n],i.frames[n],i.durations[r],!0);if(i.lastTime=t+i.durations[r],i.frame==i.frames.length-2){if(i.frame++,!i.loop)return i.lastTime}else i.frame++}}else if(2==i.type&&i.lastTime+i.durations[r]<t)if(e.wgtAniSet(a,i.states[n],i.frames[n],void 0,!0),i.lastTime=0==i.lastTime?t:i.lastTime+i.durations[r],i.frame==i.frames.length-2){if(i.frame++,!i.loop)return i.lastTime}else i.frame++}else if(i.lastTime+i.durations[0]<t)return e.wgtAniSet(a,i.states[0],i.frames[0],0,!0),i.lastTime=t,i.lastTime;return 0}var i,n,r;for(var o in e.$O3d)if(n=e.$O3d[o].apxSpriteCtxt,n&&n.length)if(n.apxCur!=-1){if(void 0===n.apxCur){for(r=0;r<n.length;r++)e.wgtAniSet(o,n[r].states[0],n[r].frames[0],0,!0);n.apxCur=0}(i=a(o,n[n.apxCur]))&&(n.apxLoop?(n.apxCur=(n.apxCur+1)%n.length,n[n.apxCur].lastTime=i):n.apxCur<n.length-1?(n.apxCur++,n[n.apxCur].lastTime=i):1==n[n.apxCur].type?(n.apxCur=-1,n.apxEndTime=i):(n.apxCur=-1,e.fireEvent("animation","End",o)))}else n.apxEndTime&&n.apxEndTime<t&&(e.fireEvent("animation","End",o),n.apxEndTime=0)},apx.wgt.$O5P=function(e){for(var t in e.$O3d)e.$O3d[t].apxSpriteCtxt&&e.$O3d[t].apxSpriteCtxt.length&&e.$O3d[t].apxSpriteCtxt.apxCur!=-1&&e.$O3d[t].apxSpriteCtxt[e.$O3d[t].apxSpriteCtxt.apxCur]&&(e.$O3d[t].apxSpriteCtxt[e.$O3d[t].apxSpriteCtxt.apxCur].lastTime=0)},apx.wgt.$O4t=function(e){var t;if(t=e.$css("transform")){var a=t.replace(/ /,"").split(/[\(\)\,]/),i=parseFloat(a[1]),n=parseFloat(a[2]),r=(Math.sqrt(i*i+n*n),Math.atan2(n,i));return r}return 0},apx.wgt.$O4u=function(e,t,a,i){function n(t,a,i){var n;n=a.init.shape.type==bx.CCanvasWnd.SHAPE_LINE?2:1;var r=apx.wgt.$O4t(t);if(1==n){var o=apx.tag.$O4v(e,t),s=apx.tag.$O4w(e,t),p=parseInt(t.style.width),l=parseInt(t.style.height),d=0;if("bx.CEditorWnd.CEllipse"==a.module&&(d=1),r||0!=d){var c={type:"poly",pts:[]};if(0==d){var g=o+p/2,u=s+l/2;c.pts.push({x:apn.CES.$O5M(g,u,r,o,s),y:apn.CES.$O5N(g,u,r,o,s)}),c.pts.push({x:apn.CES.$O5M(g,u,r,o+p,s),y:apn.CES.$O5N(g,u,r,o+p,s)}),c.pts.push({x:apn.CES.$O5M(g,u,r,o+p,s+l),y:apn.CES.$O5N(g,u,r,o+p,s+l)}),c.pts.push({x:apn.CES.$O5M(g,u,r,o,s+l),y:apn.CES.$O5N(g,u,r,o,s+l)})}else apn.CES.$O4p(o,s,p,l,r||0,c.pts);return c}if("poly"==i){var c={type:"poly",pts:[]};return c.pts.push({x:o,y:s}),c.pts.push({x:o+p,y:s}),c.pts.push({x:o+p,y:s+l}),c.pts.push({x:o,y:s+l}),c}return{type:"rect",x:o,y:s,w:p,h:l}}if(2==n){var h,x,o=(Math.abs(a.init.shape.x[1]-a.init.shape.x[0])||1,Math.abs(a.init.shape.y[1]-a.init.shape.y[0])||1,apx.tag.$O4v(e,t)),s=apx.tag.$O4w(e,t),f=1/e.$O2O,y=1/e.$O2P,g=.5,u=.5,c={type:"poly",pts:[]},b=apn.IWidget.$O2z(2,e.project,a,f);if(b>1){var v=apn.CES.getLineAngle(a.init.shape);h=o+a.init.shape.x[0]*f,x=s+a.init.shape.y[0]*y,c.pts.push({x:apn.CES.$O5M(h,x,-(Math.PI/2-v),h,x-b),y:apn.CES.$O5N(h,x,-(Math.PI/2-v),h,x-b)}),c.pts.push({x:apn.CES.$O5M(h,x,Math.PI/2+v,h,x-b),y:apn.CES.$O5N(h,x,Math.PI/2+v,h,x-b)}),h=o+a.init.shape.x[1]*f,x=s+a.init.shape.y[1]*y,c.pts.push({x:apn.CES.$O5M(h,x,Math.PI/2+v,h,x-b),y:apn.CES.$O5N(h,x,Math.PI/2+v,h,x-b)}),c.pts.push({x:apn.CES.$O5M(h,x,-(Math.PI/2-v),h,x-b),y:apn.CES.$O5N(h,x,-(Math.PI/2-v),h,x-b)})}else c.pts.push({x:o+a.init.shape.x[0]*f,y:s+a.init.shape.y[0]*y}),c.pts.push({x:o+a.init.shape.x[1]*f,y:s+a.init.shape.y[1]*y});return c}return null}if(!t.apnOID||!a.apnOID)return!1;var r,o,s=e.screen.objects[t.apnOID],p=e.screen.objects[a.apnOID];if(r=n(t,s),o=n(a,p),!r||!o)return!1;if("rect"==r.type&&"rect"==o.type)return i||(i=0),bx.CCanvasWnd.intersect_rect_rect(r.x-i,r.y-i,r.w+2*i,r.h+2*i,o.x-i,o.y-i,o.w+2*i,o.h+2*i);if("rect"==r.type&&(r=n(t,s,"poly")),"rect"==o.type&&(o=n(a,p,"poly")),"polySet"!=r.type&&"polySet"!=o.type)return bx.CCanvasWnd.intersect_polygon_polygon(r.pts,o.pts);for(var l,d="polySet"==r.type?r.polygons:[r.pts],c="polySet"==o.type?o.polygons:[o.pts],g=0;g<d.length;g++)for(l=0;l<c.length;l++)if(bx.CCanvasWnd.intersect_polygon_polygon(d[g],c[l]))return!0;return!1},apx.tag={},apx.tag.$O4v=function(e,t){return bx.HCL.getElementX2(t)-bx.HCL.getElementX2(e.tag)},apx.tag.$O4w=function(e,t){return bx.HCL.getElementY2(t)-bx.HCL.getElementY2(e.tag)},apn.CES.prototype.widgetsByClass=function(e,t,a,i){var n;return i&&i instanceof Array||void 0!==i&&(n=i,i=void 0),apx.$O4s(this,1,e,t,a,i,void 0,n)},apn.CES.prototype.getWidgetsByClass=apn.CES.prototype.widgetsByClass,apn.CES.prototype.widgetsByType=function(e,t,a,i){var n;return i&&i instanceof Array||void 0!==i&&(n=i,i=void 0),apx.$O4s(this,2,e,t,a,i,void 0,n)},apn.CES.prototype.getWidgetsByType=apn.CES.prototype.widgetsByType,apn.CES.prototype.widgetsByProperty=function(e,t,a,i){var n;return i&&i instanceof Array||void 0!==i&&(n=i,i=void 0),apx.$O4s(this,3,e,t,a,i,void 0,n)},apn.CES.prototype.getWidgetsByProperty=apn.CES.prototype.widgetsByProperty,apn.CES.prototype.widgetsByStyle=function(e,t,a,i,n){return apx.$O4s(this,4,e,a,i,n,t)},apn.CES.prototype.mediaURL=function(e,t){return"video"!=apn.Project.getMediaType(this.project,e)&&"audio"!=apn.Project.getMediaType(this.project,e)&&(t=!1),apn.Project.$O1e(this.viewer.project,e,t,this.viewer.o.standAlone)},apn.CES.prototype.localMediaURL=function(e,t,a){if(!this||!this.screen||!this.screen.objects[e])return void bx.Trace.log("APX","warning","Non-exist widget id="+e,"localMediaURL");if(this.screen.objects[e].create.data&&this.screen.objects[e].create.data.wgtID){if(this.viewer.o.standAlone)return"wgts/"+this.screen.objects[e].create.data.wgtID+"/"+(a||"imgs")+"/"+t;var i=this.screen.objects[e].create.data.wgtID.split(".");return"DB/"+i[0]+"/apx/"+this.screen.objects[e].create.data.wgtID+"/"+(a||"imgs")+"/"+t}return t},apn.CES.prototype.attachmentURL=function(e,t){return this.viewer.o.standAlone?"./asset/"+this.getPageID()+"_"+e+t:null},apn.CES.prototype.log=function(e,t){if(this.viewer.$O3T){var a="";e&&this.screen.objects[e]&&this.screen.objects[e].create.data&&this.screen.objects[e].create.data.styles&&this.screen.objects[e].create.data.styles.title&&(a=this.screen.objects[e].create.data.styles.title),e&&this.screen.objects[e]&&this.screen.objects[e].create.data&&(a+="("+this.screen.objects[e].create.data.wgtTitle+")"),this.viewer.$O3T.error((a?'<span style="color:#ffffff">['+a+(this.screen.UI&&this.screen.UI.title?" in "+this.screen.UI.title:"")+"]</span> ":"")+t)}},apn.CES.prototype.devError=function(e){bx.Log.isActive()&&window.console&&arguments.length>1&&(e&&this.screen.objects[e]&&this.screen.objects[e].create.data?arguments[0]="["+this.screen.objects[e].create.data.wgtTitle+"]":arguments[0]="[APX]",console.error.apply(console,arguments))},apn.CES.prototype.allocAsyncWork=function(e,t){var a=this;return function(){if(!a.$O7K)return t.apply(e,arguments)}},apn.CES.prototype.fireEvent=function(e,t,a,i,n){function r(){if(d.$O4n&&d.$O4n.length)for(var t,i=0;i<d.$O4n.length;i++)if(t=!1,d.$O4n[i].pId==d.viewer.$O2J.getCurrent()&&(t=!0),t||d.$O4n[i].always){var n=e.split(":");event=n[0],d.$O4n[i].event==event&&d.$O4n[i].handler(n[1])}d.eventExe(e,a)}var o=!1;if(this.viewer.isRunning()){if(apn.P.eventTitle[e]){if(this.$O6J&&!(i||"media"==e&&"Pause"==t||t&&t.indexOf&&0==t.indexOf("$APX")))return;o=!0}e+=t?":"+t:"";var s=apn.P.$O7u(this.project);if(s){var p,l;for(p in s){if(s[p].param)for(l in s[p].param)p+":"+l==e&&(o=!0);else p==e&&(o=!0);if(o)break}}if(o){var d=this;n?r():setTimeout(r,0)}else bx.Trace.log("APX","warning","Unknown APX Event="+e,"fireEvent")}},apn.CES.prototype.playAudio=function(e,t,a){if(this.viewer.IDevice_useWebAudio()){if((this.viewer.getCurrentPageID()!=this.getPageID()||this.isPaused())&&(!a||!a.allowBackground))return void(a&&a.onEnd&&a.onEnd(e));this.$O4i=this.$O4i||{index:0},e=this.$O4i.index++ +"",this.$O4i[e]={type:"WebAudioAPI"},this.$O4i[e].$OcH=this.tag.$TAG("div",{style:"display:none;"}),this.$O4i[e].tag=new AspenWebAudio(this.$O4i[e].$OcH);var i=this.$O4i[e].tag;a&&a.onEnd&&i.setCallback(void 0,a.onEnd),i.setMedia(this.mediaURL(t)||t),i.setLoop(!(!a||!a.loop)),i.play()}else this.$OcI(e,t,a)},apn.CES.prototype.$OcI=function(e,t,a){function i(e){this.$O6K&&this.$O6K(this.$O5f,this.duration||0)}function n(){this.$O6L&&this.$O6L(this.$O5f,this.currentTime)}var r,o=!1,s=!1;if((this.viewer.getCurrentPageID()!=this.getPageID()||this.isPaused())&&(!a||!a.allowBackground))return void(a&&a.onEnd&&a.onEnd(e));if(this.$O4i=this.$O4i||{index:0},e||(e=this.$O4i.index++ +"",o=!0),this.$O4i[e]?s=!0:(this.$O4i[e]={},this.$O4i[e].tag=this.tag.$TAG("audio",{style:"display:none;"}),this.$O4i[e].tag.sourceTag=this.$O4i[e].tag.$TAG("source")),r=this.$O4i[e].tag){var p=this;r.$O5f=e,r.$O5i=o,a&&a.onEnd?r.$O5g=a.onEnd:r.$O5g=void 0,a&&a.onDuration?r.$O6K=a.onDuration:r.$O6K=void 0,a&&a.onPlayTime?r.$O6L=a.onPlayTime:r.$O6L=void 0,s||(r.onerror=r.onabort=function(e){if(("ended"==e.type||"error"==e.type||"pause"==e.type)&&this.$O5g&&this.$O7X){this.$O7X=!1;var t=this;setTimeout(function(){t.$O5g(t.$O5f)},0)}this.$O5i&&p.$O4i&&p.$O4i[this.$O5f]&&(p.tag.removeChild(this),delete p.$O4i[this.$O5f])},bx.Event.add(r,"ended",r.onerror,!1),bx.Event.add(r,"pause",r.onerror,!1),bx.Event.add(r,"loadedmetadata",i,!1),bx.Event.add(r,"timeupdate",n,!1)),r.loop=!(!a||!a.loop),r.sourceTag.src=this.mediaURL(t)||t,r.load(),!o&&a&&a.loadOnly||(r.$O7X=!0,r.play())}},apn.CES.prototype.stopAudio=function(e){if(this.$O4i[e])try{this.$O4i[e].tag.currentTime=0,this.$O4i[e].tag.pause()}catch(e){}},apn.CES.prototype.pauseAudio=function(e){if(this.$O4i[e])try{this.$O4i[e].tag.pause()}catch(e){}},apn.CES.prototype.resumeAudio=function(e){if(this.$O4i[e])try{this.$O4i[e].tag.play()}catch(e){}},apn.CES.prototype.ctxSet=function(e,t){if(this.viewer.$O3U=this.viewer.$O3U||{},this.viewer.$O3U[e]=t,this.viewer.$O3V&&this.viewer.$O3V.length)for(var a,i=0;i<this.viewer.$O3V.length;i++)a=!1,this.viewer.$O3V[i].pId==this.viewer.$O2J.getCurrent()&&(a=!0),(a||this.viewer.$O3V[i].always)&&this.viewer.$O3V[i].key==e&&this.viewer.$O3V[i].handler(t,e)},apn.CES.prototype.ctxGet=function(e){if(this.viewer.$O3U)return this.viewer.$O3U[e]},apn.CES.prototype.pageGetValue=function(e){return this.sptPageGetVar(e)},apn.CES.prototype.wgtClone=function(e,t,a){function i(e){if(!(l.screen.objects[e].layout&&l.screen.objects[e].layout.children&&l.screen.objects[e].layout.states)&&(p.push(e),l.screen.objects[e].layout&&l.screen.objects[e].layout.children))for(var t=0;t<l.screen.objects[e].layout.children.length;t++)i(l.screen.objects[e].layout.children[t])}if(!this.screen||!this.screen.objects[e])return void bx.Trace.log("APX","warning","Non-exist widget id="+e,"wgtClone");if(!(this.screen.objects[e]&&this.screen.objects[e].create.data&&this.screen.objects[e].create.data.wgtID))return void bx.Trace.log("APX","warning","Invalid widget id="+e,"wgtClone");if(t&&(!this.screen.objects[t]||!this.screen.objects[t].layout||!this.screen.objects[t].layout.layers))return void bx.Trace.log("APX","warning","Invalid parent widget id="+e,"wgtClone");var n;if(t){var r=this.screen.objects[t].layout.layers;for(g in r)if(r[g].title==a||void 0===a){n=r[g].id;break}void 0===n&&(n=r[0].id)}var o,s={};if(this.screen.objects[e].layout&&this.screen.objects[e].layout.layers){var p=[],l=this;i(e);for(var d,c,g=0;g<p.length;g++)d=this.$OcJ(p[g]),void 0===o&&(o=d,void 0!==n?(this.screen.objects[n].layout=this.screen.objects[n].layout||{},this.screen.objects[n].layout.children=this.screen.objects[n].layout.children||[],this.screen.objects[n].layout.children.push(o)):(c=this.$O5G(e,!0))&&(this.screen.objects[c].layout=this.screen.objects[c].layout||{},this.screen.objects[c].layout.children=this.screen.objects[c].layout.children||[],this.screen.objects[c].layout.children.push(o))),s[p[g]]=d;for(g=0;g<p.length;g++)this.$OcK(s[p[g]],s);this.$OcL(o,n||c,s)}else{if(this.screen.objects[e].layout&&this.screen.objects[e].layout.states)return null;o=this.$OcJ(e),s[e]=o;var c;void 0!==n?(this.screen.objects[n].layout=this.screen.objects[n].layout||{},this.screen.objects[n].layout.children=this.screen.objects[n].layout.children||[],this.screen.objects[n].layout.children.push(o)):(c=this.$O5G(e,!0))&&(this.screen.objects[c].layout=this.screen.objects[c].layout||{},this.screen.objects[c].layout.children=this.screen.objects[c].layout.children||[],this.screen.objects[c].layout.children.push(o)),this.$OcK(e,s),this.$OcL(o,n||c,s)}return o},apn.CES.prototype.$OcJ=function(e){var t=this.screen.objects[e];this.screen.$O4x=this.screen.$O4x||0,this.screen.$O4x++;var a=e+this.screen.$O4x+"_";return this.screen.objects[a]=bx.$cloneObject({},t),a},apn.CES.prototype.$OcK=function(e,t){function a(e,t){for(var a=0;a<e.length;a++)if(e[a].target&&e[a].target.objectID&&t[e[a].target.objectID]&&(e[a].target.objectID=t[e[a].target.objectID]),e[a].from&&e[a].from.objectID&&t[e[a].from.objectID]&&(e[a].from.objectID=t[e[a].from.objectID]),e[a].event&&apn.P.isObjectCompositeSysEV(e[a].event)){var i=apn.P.resolveCompositeSysEV(e[a].event);"$"!=i.param.charAt(0)&&t[i.param]&&(e[a].event=i.ev+":"+t[i.param])}}if(this.screen.objects[e].layout&&this.screen.objects[e].layout.children)for(var i=0;i<this.screen.objects[e].layout.children.length;i++)t[this.screen.objects[e].layout.children[i]]||(this.screen.objects[e].layout.children.splice(i,1),i--);this.screen.objects[e].ITRs&&this.screen.objects[e].ITRs.length&&a(this.screen.objects[e].ITRs,t),this.screen.objects[e].layout&&apn.Project.$O4K(t,this.screen.objects[e].layout)},apn.CES.prototype.$OcL=function(e,t,a){for(var i in a)this.$Ocr(a[i]);this.$O3L(t?this.$O3d[t]:this.tag,e,this.screen.objects[e]);for(i in a){this.$Ocu(a[i]);var n=apn.Project.getWidgetModule(this.screen.objects[a[i]].create.data);if(n){if(n.exeAssetLoad)if(apn.CExe.DEBUG)n.exeAssetLoad(this,this.$O3d[a[i]]);else try{n.exeAssetLoad(this,this.$O3d[a[i]])}catch(e){this.log(a[i],"Problem in source code of the widget. Please consult to the technical support team.")}if(n.exeOnLoad)if(apn.CExe.DEBUG)n.exeOnLoad(this,a[i]);else try{n.exeOnLoad(this,a[i])}catch(e){this.log(a[i],"Problem in source code of the widget. Please consult to the technical support team.")}if(n.exeSetState&&(this.wgtGetProperty(a[i],"apxState")&&null!==n.exeSetState(this,this.$O3d[a[i]],this.wgtGetProperty(a[i],"apxState"),void 0,!0)&&n.exeFireStateEvent&&this.fireEvent("stateChange","$APX"+this.wgtGetProperty(a[i],"apxState"),a[i]),apn.Project.checkStateType(this.screen.objects[a[i]].layout)&&!n.BLACKBOX_MODEL&&n.exeSetState(this,this.$O3d[a[i]],this.$O3l(a[i]),void 0)),n.exeOnStart)if(apn.CExe.DEBUG)n.exeOnStart(this,a[i]);else try{n.exeOnStart(this,a[i])}catch(e){this.log(a[i],"Problem in source code of the widget. Please consult to the technical support team.")}}}},apn.CES.prototype.wgtSetValue=function(e,t){this.sptWgtSetProp(e,"value",t)},apn.CES.prototype.wgtGetValue=function(e){return this.sptWgtGetProp(e,"value")},apn.CES.prototype.wgtGetProperty=function(e,t){if(!this||!this.screen||!this.screen.objects[e])return void bx.Trace.log("APX","warning","Non-exist widget id="+e,"wgtGetProperty");if(apx.wgt.$O4y[t]){if(this.screen.objects[e].create.data&&this.screen.objects[e].create.data.styles)return this.screen.objects[e].create.data.styles[apx.wgt.$O4y[t]];
}else if(apx.wgt.$O4z[t]){if(this.screen.objects[e].create.data&&this.screen.objects[e].create.data.properties)return this.screen.objects[e].create.data.properties[apx.wgt.$O4z[t]]}else if(apx.wgt._sysPseudoProp[t]){if("apxLayer"==t&&2==apn.Project.checkStateTypeByObjectID(this.project,this.getPageID(),e))return this.$O3l(e,!0)}else if(this.screen.objects[e].create.data&&this.screen.objects[e].create.data.properties&&this.screen.objects[e].create.data.properties.attrs)return this.screen.objects[e].create.data.properties.attrs[t]},apn.CES.prototype.wgtSetProperty=function(e,t,a,i){if(!(this&&this.screen&&this.screen.objects[e]&&this.screen.objects[e].create.data))return void bx.Trace.log("APX","warning","Non-exist widget id="+e,"wgtSetProperty");if(apx.wgt.$O4y[t]){if(this.screen.objects[e].create.data.styles=this.screen.objects[e].create.data.styles||{},this.screen.objects[e].create.data.styles[apx.wgt.$O4y[t]]=a,!i){var n=this.wgtTag(e);if("apxText"==t)apn.IWidget.exeSetText(n,a);else if("apxTextForced"==t)n.apnCur.forced=!0,apn.IWidget.exeSetText(n,a);else if("apxStrokeStyle"==t||"apxLineWeight"==t)apn.IWidget.exeSetLine(n,apn.Project.resolveStyle(this.project,"lineWidth",this.screen.objects[e].create.data.styles.lineWidth),apn.Project.resolveStyle(this.project,"strokeStyle",this.screen.objects[e].create.data.styles.strokeStyle),1/this.getZoomX(),this),apn.IWidget.exeSetLineDash(n,apn.Project.resolveStyle(this.project,"lineDash",this.screen.objects[e].create.data.styles.lineDash),this);else if("apxFillStyle"==t)apn.IWidget.exeSetFillStyle(n,apn.Project.resolveStyle(this.project,"fillStyle",this.screen.objects[e].create.data.styles.fillStyle),this);else if("apxLineDash"==t)apn.IWidget.exeSetLineDash(n,apn.Project.resolveStyle(this.project,"lineDash",this.screen.objects[e].create.data.styles.lineDash),this);else if("apxFontSize"==t){apn.IWidget.$Obv(n,apn.Project.resolveStyle(this.project,"fontSize",this.screen.objects[e].create.data.styles.fontSize),1/this.getZoomY());var r=this.wgtGetProperty(e,"apxText")||"";n.apnCur.forced=!0,apn.IWidget.exeSetText(n,r,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,parseInt(a)*(1/this.getZoomY()))}else if("apxFont"==t){this.viewer.$O4Z(),n.style.fontFamily=apn.Project.resolveStyle(this.project,"font",this.screen.objects[e].create.data.styles.font);var r=this.wgtGetProperty(e,"apxText")||"";n.apnCur.forced=!0,apn.IWidget.exeSetText(n,r,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,parseInt(a)*(1/this.getZoomY()))}else if("apxTextItalic"==t||"apxTextBold"==t||"apxTextUnderline"==t){"apxTextItalic"==t?apn.IWidget.$Obx(n,apn.Project.resolveStyle(this.project,"fontItalic",this.screen.objects[e].create.data.styles.fontItalic)):"apxTextBold"==t?apn.IWidget.$Obw(n,apn.Project.resolveStyle(this.project,"fontBold",this.screen.objects[e].create.data.styles.fontBold),apn.Project.resolveStyle(this.project,"font",this.screen.objects[e].create.data.styles.font)):"apxTextUnderline"==t&&apn.IWidget.$Oby(n,apn.Project.resolveStyle(this.project,"fontUnderlined",this.screen.objects[e].create.data.styles.fontUnderlined));var r=this.wgtGetProperty(e,"apxText")||"";n.apnCur.forced=!0,apn.IWidget.exeSetText(n,r)}else if("apxMediaID"==t){var o=apn.Project.getWidgetModule(this.screen.objects[e].create.data);o&&o.exeAssetLoad&&o.exeAssetLoad(this,n,a)}else if("sptMediaID"==t){var o=apn.Project.getWidgetModule(this.screen.objects[e].create.data);o&&o.exeAssetLoad&&o.exeAssetLoad(this,n,a,!a&&0!==a)}}}else if(apx.wgt.$O4z[t]){this.screen.objects[e].create.data.properties=this.screen.objects[e].create.data.properties||{};var s=this.screen.objects[e].create.data.properties[apx.wgt.$O4z[t]];if(this.screen.objects[e].create.data.properties[apx.wgt.$O4z[t]]=a,!i&&"apxState"==t){var o=apn.Project.getWidgetModule(this.screen.objects[e].create.data);if(o&&(o.exeFireStateEvent&&a&&a!=s&&this.fireEvent("stateChange","$APX"+a,e),o.exeSetState))return o.exeSetState(this,this.$O3d[e],a,s)}}else apx.wgt._sysPseudoProp[t]?"apxLayer"==t&&2==apn.Project.checkStateTypeByObjectID(this.project,this.getPageID(),e)&&(this.$O3m(e,a),this.$O4f(e,a)):(this.screen.objects[e].create.data.properties=this.screen.objects[e].create.data.properties||{},this.screen.objects[e].create.data.properties.attrs=this.screen.objects[e].create.data.properties.attrs||{},this.screen.objects[e].create.data.properties.attrs[t]=a);if(!i&&this.$O4m&&this.$O4m.length)for(var p,l=0;l<this.$O4m.length;l++)p=!1,this.$O4m[l].pId==this.viewer.$O2J.getCurrent()&&(p=!0),(p||this.$O4m[l].always)&&this.$O4m[l].key==t&&this.$O4m[l].handler(e,a)},apn.CES.prototype.wgtAcceptDrop=function(e,t){this.$O3t(e,"acceptDrop",t)},apn.CES.prototype.wgtAcceptPointerOver=function(e,t){this.$O3t(e,"acceptMouseOver",t)},apn.CES.prototype.wgtTag=function(e){return this.$O3d[e]?this.$O3d[e]:void bx.Trace.log("APX","warning","Non-exist widget id="+e,"wgtTag")},apn.CES.prototype.wgtId=function(e){return e.apnOID},apn.CES.prototype.wgtIsVisible=function(e){return!!this.$O3d[e]&&bx.DOM.isVisible(this.$O3d[e])},apn.CES.prototype.wgtControlMedia=function(e,t,a,i){if(!this.$O3d[e])return bx.Trace.log("APX","warning","Non-exist widget id="+e,"wgtControlMedia"),!1;var n=apn.Project.getWidgetModule(this.screen.objects[e].create.data);switch(t){case"play":case"resume":if(n&&n.exeMediaPlay)return n.exeMediaPlay(this.$O3d[e],"resume"!=t,a,i),!0;break;case"pause":if(n&&n.exeMediaPause)return n.exeMediaPause(this.$O3d[e]),!0;break;case"stop":if(n&&n.exeMediaStop)return n.exeMediaStop(this.$O3d[e],this),!0;break;case"mute":if(n&&n.exeMediaControl)return n.exeMediaControl(this.$O3d[e],"mute",!0),!0;break;case"muteOff":if(n&&n.exeMediaControl)return n.exeMediaControl(this.$O3d[e],"mute",!1),!0;break;default:bx.Trace.log("APX","warning","Unknown media action="+t,"wgtControlMedia")}return!1},apn.CES.prototype._videoReqFullScreen=function(e,t){var a,i,n=this.wgtGetProperty(e,"fs");this.viewer.constructor.IStub_getConfiguration&&this.viewer.constructor.IStub_getConfiguration(this.project)&&(a=this.viewer.constructor.IStub_getConfiguration(this.project).exeFullscreenNoController),a&&n&&n.oId&&(i=!0);var r=this.wgtTag(e).mediaTag;return r.msRequestFullscreen?(t||(r.controls||(r.controls=!0),r.msRequestFullscreen()),!0):r.mozRequestFullScreen?(t||(this.viewer.IWidget_onFullScreen(!0),r.controls||(r.controls=!0),r.mozRequestFullScreen()),!0):r.requestFullscreen?(t||r.requestFullscreen(),!0):r.webkitRequestFullscreen?(t||(i&&this.wgtTag(n.oId)?r.parentNode.webkitRequestFullscreen():("edge"!=bx.HCL.DV.getBrowserType()||r.controls||(r.controls=!0),r.webkitRequestFullscreen())),!0):!!r.webkitEnterFullscreen&&(t||r.webkitEnterFullscreen(),!0)},apn.CES.prototype._videoEndFullScreen=function(e){return document.msExitFullscreen?(document.msExitFullscreen(),!0):document.mozCancelFullScreen?(document.mozCancelFullScreen(),!0):document.exitFullscreen?(document.exitFullscreen(),!0):document.webkitCancelFullScreen?(document.webkitCancelFullScreen(),!0):!(!document.webkitSupportsFullscreen||!document.webkitExitFullscreen)&&(document.webkitExitFullscreen(),!0)},apn.CES.prototype.wgtSetMediaInfo=function(e,t,a){if(!this.$O3d[e])return bx.Trace.log("APX","warning","Non-exist widget id="+e,"wgtSetMediaInfo"),!1;if("fullScreen"==t)return a?this._videoReqFullScreen(e):this._videoEndFullScreen(e);var i=apn.Project.getWidgetModule(this.screen.objects[e].create.data);return!(!i||!i.exeMediaControl)&&(i.exeMediaControl(this.$O3d[e],t,a),!0)},apn.CES.prototype.wgtGetMediaInfo=function(e,t){if(!this.$O3d[e])return void bx.Trace.log("APX","warning","Non-exist widget id="+e,"wgtGetMediaInfo");if("supportFullScreen"==t)return this._videoReqFullScreen(e,!0);var a=apn.Project.getWidgetModule(this.screen.objects[e].create.data);return a&&a.exeMediaInfo?a.exeMediaInfo(this.$O3d[e],t):void 0},apn.CES.prototype.wgtListenMedia=function(e,t,a,i){if(this.$O4j=this.$O4j||[],i)for(var n=0;n<this.$O4j.length;n++)this.$O4j[n].oId==e&&this.$O4j[n].mediaWidgetId==t&&this.$O4j[n].handler==a&&(this.$O4j.splice(n,1),n--);else this.$O4j.push({oId:e,mediaWidgetId:t,handler:a})},apn.CES.prototype.wgtListenContext=function(e,t,a,i,n){if(this.viewer.$O3V=this.viewer.$O3V||[],"apn.COverlayPage"==this.screen.module&&(i=!0),n)for(var r=0;r<this.viewer.$O3V.length;r++)this.viewer.$O3V[r].oId==e&&this.viewer.$O3V[r].key==t&&this.viewer.$O3V[r].handler==a&&(this.viewer.$O3V.splice(r,1),r--);else this.viewer.$O3V.push({oId:e,pId:this.wgtTag(e).apnPID,key:t,handler:a,always:i})},apn.CES.prototype.wgtListenProperty=function(e,t,a,i,n){if(this.$O4m=this.$O4m||[],"apn.COverlayPage"==this.screen.module&&(i=!0),n)for(var r=0;r<this.$O4m.length;r++)this.$O4m[r].oId==e&&this.$O4m[r].key==t&&this.$O4m[r].handler==a&&(this.$O4m.splice(r,1),r--);else this.$O4m.push({oId:e,pId:this.wgtTag(e).apnPID,key:t,handler:a,always:i})},apn.CES.prototype.wgtListenPageEvent=function(e,t,a,i,n){if(this.$O4n=this.$O4n||[],"apn.COverlayPage"==this.screen.module&&(i=!0),n)for(var r=0;r<this.$O4n.length;r++)this.$O4n[r].oId==e&&this.$O4n[r].event==t&&this.$O4n[r].handler==a&&(this.$O4n.splice(r,1),r--);else this.$O4n.push({oId:e,pId:this.wgtTag(e).apnPID,event:t,handler:a,always:i})},apn.CES.prototype.wgtListenBubbleEvent=function(e,t,a,i){if(this._apxEventListenBubble=this._apxEventListenBubble||[],i)for(var n=0;n<this._apxEventListenBubble.length;n++)this._apxEventListenBubble[n].oId==e&&this._apxEventListenBubble[n].event==t&&this._apxEventListenBubble[n].handler==a&&(this._apxEventListenBubble.splice(n,1),n--);else this._apxEventListenBubble.push({oId:e,pId:this.wgtTag(e).apnPID,event:t,handler:a})},apn.CES.prototype.toCanvasX=function(e){return e*this.getZoomX()},apn.CES.prototype.toCanvasY=function(e){return e*this.getZoomY()},apn.CES.prototype.tagX=function(e,t){return void 0===t&&(t=e.style.left),parseFloat(t)+(bx.HCL.getElementX2(e.parentNode)-bx.HCL.getElementX2(this.tag))},apn.CES.prototype.tagY=function(e,t){return void 0===t&&(t=e.style.top),parseFloat(t)+(bx.HCL.getElementY2(e.parentNode)-bx.HCL.getElementY2(this.tag))},apn.CES.prototype.wgtX=function(e){return this.screen.objects[e].init.position.x},apn.CES.prototype.wgtY=function(e){return this.screen.objects[e].init.position.y},apn.CES.prototype.wgtW=function(e){return this.screen.objects[e].init.shape.w},apn.CES.prototype.wgtH=function(e){return this.screen.objects[e].init.shape.h},apn.CES.prototype.wgtMoveTo=function(e,t,a){var i,n;void 0!==t&&(i=t-this.screen.objects[e].init.position.x),void 0!==a&&(n=a-this.screen.objects[e].init.position.y),(i||n)&&(this.$O5D(this.screen.objects[e],i,n),this.screen.objects[e].init.position.x=t,this.screen.objects[e].init.position.y=a,apn.IWidget.exeRenderPosition(this,this.wgtTag(e),this.screen.objects[e],this.project,1/this.$O2O,1/this.$O2P))},apn.CES.prototype.wgtSizeTo=function(e,t,a){void 0===t&&void 0===a||(void 0!==t&&(this.screen.objects[e].init.shape.w=t),void 0!==a&&(this.screen.objects[e].init.shape.h=a),apn.IWidget.exeRenderSize(this.viewer,this,this.wgtTag(e),this.screen.objects[e],this.project,1/this.$O2O,1/this.$O2P))},apn.CES.prototype.wgtSizeByContent=function(e,t,a){var i=apn.Project.getWidgetModule(this.screen.objects[e].create.data);if(i&&i.exeGetSizeByContent){var n=i.exeGetSizeByContent(this,e,t,a);if(n.w||n.h)return n.w&&(this.screen.objects[e].init.shape.w+=n.w),n.h&&(this.screen.objects[e].init.shape.h+=n.h),apn.IWidget.exeRenderSize(this.viewer,this,this.$O3d[e],this.screen.objects[e],this.project,1/this.$O2O,1/this.$O2P),!0}return!1},apn.CES.prototype.wgtAniRun=function(e,t){function a(e,t){return void 0===e.order&&void 0===t.order?0:void 0===e.order?1:void 0===t.order?-1:e.order-t.order}function i(t,i,n,o){o>=r.$O3d[e].apxSpriteCtxt.length&&r.$O3d[e].apxSpriteCtxt.push({frames:[],states:[],durations:[],lastTime:0,frame:0});var s=r.screen.objects[i].layout;if(1==apn.Project.checkStateType(s)){var p=[];for(var l in s.states)p.push({order:s.states[l].order,id:l});for(p.sort(a),l=0;l<p.length;l++)r.$O3d[e].apxSpriteCtxt[o].frames.push(apn.Project.getStateTitleByObjectID(r.project,r.$O1m,i,p[l].id)),r.$O3d[e].apxSpriteCtxt[o].states.push(t),r.$O3d[e].apxSpriteCtxt[o].durations.push(void 0===s.states[p[l].id].duration?apx.wgt.spriteDefaultFrameDuration:bx.$checkNaN(parseInt(s.states[p[l].id].duration))),r.$O3d[e].apxSpriteCtxt[o].loop=n,r.$O3d[e].apxSpriteCtxt[o].type=1}else if(2==apn.Project.checkStateType(s)){var p=[];for(var l in s.layers)p.push({order:s.layers[l].order,id:l});for(p.sort(a),l=0;l<p.length;l++)r.$O3d[e].apxSpriteCtxt[o].frames.push(s.layers[p[l].id].title),r.$O3d[e].apxSpriteCtxt[o].states.push(t),r.$O3d[e].apxSpriteCtxt[o].durations.push(bx.$checkNaN(parseInt(s.layers[p[l].id].duration))||apx.wgt.spriteDefaultFrameDuration),r.$O3d[e].apxSpriteCtxt[o].loop=n,r.$O3d[e].apxSpriteCtxt[o].type=2}}if(!(this&&this.screen&&this.screen.objects[e]&&this.$O3d[e]))return void bx.Trace.log("APX","warning","Invalid widget id="+e,"wgtAniRun");var n;if(n=apn.Project.checkStateType(this.screen.objects[e].layout)){this.$O3d[e].apxSpriteCtxt=[],this.$O3d[e].apxSpriteCtxt.apxLoop=2==t;var r=this;if(void 0===arguments[2])return i(void 0,e,1!=t,0),!0;if(arguments.length>2){for(var o,s,p,l=2;l<arguments.length;l++){s=null;for(o in this.screen.objects[e].layout.layers)if(this.screen.objects[e].layout.layers[o].title==arguments[l]){s=this.screen.objects[e].layout.layers[o].id;break}p=!1,3==t&&l==arguments.length-1&&(p=!0),s&&(s=this.$O4A(s),s||this.log(e,'"'+arguments[l]+'" state does not include any animation widget. Animation request will be ignored.')),s&&i(arguments[l],s,p,l-2,t)}return!0}}},apn.CES.prototype.wgtAniCheck=function(e,t,a,i){if(!this.screen.objects[e]||!this.$O3d[e])return bx.Trace.log("APX","warning","Invalid widget id="+e,"wgtAniCheck"),0;if(!apn.Project.checkStateType(this.screen.objects[e].layout))return 0;i&&(i.stateID&&delete i.stateID,i.stateCntrID&&delete i.stateCntrID,i.frameID&&delete i.frameID);var n,r,o=!1;if(void 0!==t&&2==apn.Project.checkStateType(this.screen.objects[e].layout))for(n in this.screen.objects[e].layout.layers)this.screen.objects[e].layout.layers[n].title==t&&(o=!0,r=this.screen.objects[e].layout.layers[n].id,i&&(i.stateID=n));if(o){var s,p=this.screen.objects[r].layout;for(n=0;n<p.children.length;n++)if(apn.Project.checkStateType(this.screen.objects[p.children[n]].layout)){s=p.children[n];break}if(!s)return 1;e=s,i&&(i.stateCntrID=s)}var l,d=this.screen.objects[e].layout,c=0;if(1==apn.Project.checkStateType(d))for(n in d.states)apn.Project.getStateTitleByObjectID(this.project,this.$O1m,e,n)!=a&&void 0!==a||void 0===l&&(l=n),c++;else if(2==apn.Project.checkStateType(d)){void 0===a&&(l=this.screen.objects[e].create.data.styles.state);for(n in d.layers)d.layers[n].title==a&&void 0===l&&(l=n),c++}return l?(i&&(i.frameID=l),c):0},apn.CES.prototype.wgtAniGetState=function(e){var t;return void 0!==(t=this.$O3l(e,!0))?this.screen.objects[e].layout.layers[t].title:null},apn.CES.prototype.$OcG=function(e){return!(!this.$O3d[e]||!this.$O3d[e].$O7R)},apn.CES.prototype.wgtAniSet=function(e,t,a,i,n){apn.CES.prototype.wgtAniSet.$O4B||(apn.CES.prototype.wgtAniSet.$O4B={});var r=apn.CES.prototype.wgtAniSet.$O4B;if(this.wgtAniCheck(e,t,a,r)){if(n||this.$O3d[e].apxSpriteCtxt&&((this.$O3d[e].apxSpriteCtxt.apxCur!=-1||this.$O3d[e].apxSpriteCtxt.apxEndTime)&&this.fireEvent("animation","End",e),delete this.$O3d[e].apxSpriteCtxt),r.stateID&&(this.$O3m(e,r.stateID),this.$O4f(e,r.stateID)),r.stateCntrID&&(e=r.stateCntrID),r.frameID){if(this.$O3l(e)==r.frameID&&!this.$O3d[e].$O7R)return!1;if(1==apn.Project.checkStateType(this.screen.objects[e].layout)){var o={action:"CWS",target:{pageID:this.$O1m,objectID:e,stateID:r.frameID}};o.timing={timing:"linear",duration:i||1},i&&(o.timing={timing:"linear",duration:i}),this.$O35(o)}else this.$O3m(e,r.frameID),this.$O4f(e,r.frameID)}return!0}},apn.CES.prototype.$O4A=function(e){for(var t=this.screen.objects[e].layout,a=0;a<t.children.length;a++)if(apn.Project.checkStateType(this.screen.objects[t.children[a]].layout))return t.children[a]},apn.CES.prototype.wgtIntersectWith=function(e,t,a,i,n){if(this.wgtIntersectWith.$O4C=this.wgtIntersectWith.$O4C||[],this.wgtIntersectWith.$O4C.length=0,2!=a&&3!=a)return apx.wgt.$O4u(this,this.wgtTag(t),this.wgtTag(i),n)?[i]:null;if(2==a?this.getWidgetsByType(i,e,void 0,this.wgtIntersectWith.$O4C):this.getWidgetsByClass(i,e,void 0,this.wgtIntersectWith.$O4C),this.wgtIntersectWith.$O4C.length){for(var r=0;r<this.wgtIntersectWith.$O4C.length;r++)apx.wgt.$O4u(this,this.wgtTag(t),this.wgtTag(this.wgtIntersectWith.$O4C[r]),n)||(this.wgtIntersectWith.$O4C.splice(r,1),r--);return this.wgtIntersectWith.$O4C.length?this.wgtIntersectWith.$O4C.concat():null}},apn.CES.prototype.wgtGetParent=function(e){if(this.screen)return apn.Project.findParentOf(this.screen,e,void 0,!0)};apn.CES.prototype.srcCloneWidget=function(e){function t(e){if(n.push({idOld:e}),i.screen.objects[e].layout&&i.screen.objects[e].layout.children)for(var a=0;a<i.screen.objects[e].layout.children.length;a++)t(i.screen.objects[e].layout.children[a])}function a(e){if("object"==typeof e&&e instanceof Object)for(var t in e)"layout"==t&&e[t]&&apn.Project.$O4K(r,e[t]),a(e[t])}if(!this.screen||!this.screen.objects[e])return void bx.Trace.log("APX","warning","Non-exist widget id="+e,"srcCloneWidget");this.screen.$O4x=this.screen.$O4x||0;var i=this,n=[];t(e);for(var r={},o=0;o<n.length;o++)this.screen.$O4x++,n[o].idNew=n[o].idOld+this.screen.$O4x+"_",r[n[o].idOld]=n[o].idNew;for(o=0;o<n.length;o++)this.screen.objects[n[o].idNew]=bx.$cloneObject({},this.screen.objects[n[o].idOld]),this.screen.objects[n[o].idNew].layout&&apn.Project.$O4K(r,this.screen.objects[n[o].idNew].layout);a(this.screen.objects[n[0].idNew]);var s;return(s=this.$O5G(n[0].idOld,!0))&&this.screen.objects[s].layout.children.push(n[0].idNew),n[0].idNew};apn.CES.prototype.srcAddWidget=function(e,t,a){if(!this.screen||!this.screen.objects[e])return void bx.Trace.log("APX","warning","Non-exist widget id="+e,"srcAddWidget");this.screen.$O4x=this.screen.$O4x||0,this.screen.$O4x++;var i={create:{data:{properties:{},styles:{visibility:!1},wgtID:t,wgtTitle:""},style:{}},init:{position:{x:this.screen.objects[e].init.position.x,y:this.screen.objects[e].init.position.y},shape:{type:1,w:128,h:32}}};a&&bx.$copyObject(i.create.data.properties,a);var n=e+this.screen.$O4x+"_";if(this.screen.objects[n]=i,this.screen.objects[e].layout&&this.screen.objects[e].layout.children&&this.screen.objects[e].layout.children.length){var r=this.screen.objects[e].layout.children[0];this.screen.objects[r].layout=this.screen.objects[r].layout||{},this.screen.objects[r].layout.children=this.screen.objects[r].layout.children||[],this.screen.objects[r].layout.children.push(n)}return n},apn.CES.prototype.srcSetWidgetStyle=function(e,t,a){if(!this.screen||!this.screen.objects[e])return void bx.Trace.log("APX","warning","Non-exist widget id="+e,"srcSetWidgetStyle");var i=this.screen.objects[e].create;i.data=i.data||{},i.data.styles=i.data.styles||{},i.data.styles[t]=a},apn.CES.prototype.srcGetWidgetStyle=function(e,t){return this.screen&&this.screen.objects[e]?this.screen.objects[e].create.data&&this.screen.objects[e].create.data.styles?apn.Project.resolveStyle(this.project,t,this.screen.objects[e].create.data.styles[t]):void 0:void bx.Trace.log("APX","warning","Non-exist widget id="+e,"srcGetWidgetStyle")},apn.CES.prototype.srcSetWidgetProperty=function(e,t,a){return this&&this.screen&&this.screen.objects[e]&&this.screen.objects[e].create.data?apx.wgt.$O4y[t]?void this.srcSetWidgetStyle(e,apx.wgt.$O4y[t],a):(apx.wgt.$O4z[t]&&(t=apx.wgt.$O4z[t]),this.screen.objects[e].create.data.properties=this.screen.objects[e].create.data.properties||{},this.screen.objects[e].create.data.properties.attrs=this.screen.objects[e].create.data.properties.attrs||{},void(this.screen.objects[e].create.data.properties.attrs[t]=a)):void bx.Trace.log("APX","warning","Non-exist widget id="+e,"srcSetWidgetProperty")},apn.CES.prototype.srcGetWidgetProperty=apn.CES.prototype.wgtGetProperty,apn.CES.prototype.tagPutOn=function(e,t){e.style.zIndex=t.style.zIndex,bx.DOM.putAfter(e,t)},apn.CES.prototype.tagPutUnder=function(e,t){e.style.zIndex=t.style.zIndex,bx.DOM.putBefore(e,t)},apn.CES.prototype.tagBlockPointerEvent=function(e,t){e.apnBlockPointerEvent=t},apn.CES.prototype.tagPassPointerEvent=function(e,t){e.apnPassPointerEvent=t,t?e.style.pointerEvents="none":e.style.pointerEvents="auto",e._apxIE10eventPassProblem&&(t?e.style.backgroundColor="transparent":e.style.backgroundColor="rgba(255,255,255,0)")},apn.CES.prototype.tagDraggable=function(e,t,a,i){e.apxDragInfo=e.apxDragInfo||{},e.apxDragInfo.dragX=t,e.apxDragInfo.dragY=a,"inParent"==i?e.apxDragInfo.dragInParent=!0:"containParent"==i&&(e.apxDragInfo.dragContainParent=!0)},apn.CES.prototype.tagTransform=function(e,t,a,i){function n(e,t,a){i(a)}function r(e){a(e.element)}if(!e||!t)return void bx.Trace.log("APX","warning","Invalid parameter tag="+e+", effect="+t,"tagTransform");if(apn.CES.$O5Q=apn.CES.$O5Q||0,apn.CES.$O5Q++,t.id="APX$"+apn.CES.$O5Q,t.element=e,apn.CES.toBxTiming(t.timing,!0)&&(t.timing=apn.CES.toBxTiming(t.timing)),bx.Easing[t.timing]||(t.timing="linear"),t.time=t.duration||0,t.style){t.styles=t.style;var o=this;t.styles.rotate&&(t.styles.rotate.unit=function(e,t,a){apn.CES.transformSet(e,"rotate",a),apn.CES.transformApply(e)}),t.styles.rotate_&&(t.styles.rotate_.unit=function(e,t,a){apn.CES.transformSet(e,"rotate",a)}),t.styles.rotateY&&(t.styles.rotateY.unit=function(e,t,a){apn.CES.transformSet(e,"rotateY",a),apn.CES.transformApply(e)}),t.styles.rotateY_&&(t.styles.rotateY_.unit=function(e,t,a){apn.CES.transformSet(e,"rotateY",a)}),t.styles.resize&&(t.styles.resize.unit=function(e,t,a){apn.CES.transformSet(e,"resize",a),apn.CES.transformApply(e)}),t.styles.resize_&&(t.styles.resize_.unit=function(e,t,a){apn.CES.transformSet(e,"resize",a)}),t.styles.toX&&(t.styles.toX.unit=function(e,t,a){o.tagTransformX(e,a,!0)}),t.styles.toX_&&(t.styles.toX_.unit=function(e,t,a){o.tagTransformX(e,a)}),t.styles.toY&&(t.styles.toY.unit=function(e,t,a){o.tagTransformY(e,a,!0)}),t.styles.toY_&&(t.styles.toY_.unit=function(e,t,a){o.tagTransformY(e,a)})}else i&&(t.styles={ratio:{from:0,to:1,unit:n}});delete t.duration,delete t.style,a&&(t.onEnd=r);var s=bx.Transition.add(t);return s+":"+t.id},apn.CES.prototype.tagTransformX=function(e,t,a){if(this.$O7Y=void 0===this.$O7Y?bx.HCL.DV.supportCSS3D():this.$O7Y,e){if(void 0===t)return this.$O7Y&&void 0!==e.apxTrX?e.apxTrX:parseInt(e.style.left);this.$O7Y?(apn.CES.transformSet(e,"x",t),a&&apn.CES.transformApply(e)):e.style.left=t+"px"}},apn.CES.prototype.tagTransformY=function(e,t,a){if(this.$O7Y=void 0===this.$O7Y?bx.HCL.DV.supportCSS3D():this.$O7Y,e){if(void 0===t)return this.$O7Y&&void 0!==e.apxTrY?e.apxTrY:parseInt(e.style.top);this.$O7Y?(apn.CES.transformSet(e,"y",t),a&&apn.CES.transformApply(e)):e.style.top=t+"px"}},apn.CES.prototype.tagTransformCancel=function(e,t){if(t){var a=(t+"").split(":");2==a.length&&bx.Transition.end(parseInt(a[0]),a[1])}},apn.CES.prototype.utlGetIndexInFlow=function(e,t,a){function i(e,t){return void 0===x.project.pages[e].UI.order&&void 0===x.project.pages[t].UI.order?0:void 0===x.project.pages[e].UI.order?1:void 0===x.project.pages[t].UI.order?-1:x.project.pages[e].UI.order-x.project.pages[t].UI.order}var n,r={count:0,index:0,pageIds:[]},o=this.wgtTag(e);if(!this.screen.objects[e].create.data)return bx.Trace.log("APX","warning","Invalid widget id="+e+" to check Flow Index","utlGetIndexInFlow"),r;n=this.screen.objects[e].create.data.wgtID;var s,p,l;if(!a&&o.parentNode&&o.parentNode.parentNode&&this.wgtId(o.parentNode.parentNode)){var d=this.wgtId(o.parentNode.parentNode);if(2==apn.Project.checkStateType(this.screen.objects[d].layout)){var c,g=this.wgtId(o.parentNode),u=[];for(p in this.screen.objects[d].layout.layers)u.push({id:p,objectID:this.screen.objects[d].layout.layers[p].id,order:this.screen.objects[d].layout.layers[p].order});for(apn.UTIL.sort(u,"order",1,!0),s=0;s<u.length;s++)if(u[s].objectID==g)r.index=r.count,r.count++;else if(this.screen.objects[u[s].objectID].layout&&(c=this.screen.objects[u[s].objectID].layout.children))for(p=0;p<c.length;p++)if(l=this.screen.objects[c[p]].create.data,l&&l.wgtID==n&&(!t||l.properties&&l.properties.attrs&&l.properties.attrs[t.key]==t.value)){r.count++;break}return r}}var h,x=this;if(!this.viewer.IStub_getScreenList)return r;var f=this.viewer.IStub_getScreenList();for(f.sort(i),s=0;s<f.length;s++){h=!1;for(p in this.project.pages[f[s]].objects)l=this.project.pages[f[s]].objects[p].create.data,l&&l.wgtID==n&&(!t||l.properties&&l.properties.attrs&&l.properties.attrs[t.key]==t.value)&&(h=!0);h&&(f[s]==o.apnPID&&(r.index=r.count),r.count++,r.pageIds.push(f[s]))}return r},apn.CES.prototype.utlRunInteractionOf=function(e,t){return this.$O3d[e]?void this.eventExe(t,e):void bx.Trace.log("APX","warning","Invalid widget id="+e,"utlRunInteractionOf")},apn.CES.prototype.netBroadcast=function(e,t){if(this.viewer.remoteBroadcast){var a={type:e,data:t};return this.viewer.remoteBroadcast(JSON.stringify(a))}return!1},apn.CES.prototype.netToServer=function(e,t){if(this.viewer.remoteSendToServer){var a={type:e,data:t};return this.viewer.remoteSendToServer(JSON.stringify(a))}return!1},apn.CES.prototype.netCmdRunPage=function(e,t){var a={from:"T",to:this.viewer.project.property.id+"::APX::"+e};return t&&t.transit&&(a.transit=transit),t&&t.refresh&&(a.refresh=t.refresh),this.viewer.remoteOnLTP&&this.viewer.remoteOnLTP(e),this.netBroadcast("APX_LTP",a)},apn.CES.prototype.netListen=function(e,t,a){var i;return(i=this.$O3d[e])?void(t?(i.apxOnNetEvent=t,i.apxNetEventAlways=a):(delete i.apxOnNetEvent,delete i.apxNetEventAlways)):(bx.Trace.log("APX","warning","Invalid widget id="+e,"netListen"),0)},apn.CES.prototype.netId=function(){return this.viewer.remoteGetClientProfile?this.viewer.remoteGetClientProfile():null},apn.CES.prototype.netClientList=function(){return this.viewer.remoteGetLoginClientList()||[]},apx.cloneContainerWidget=function(e){var t=apn.inheritWidget(e||apx.wgtLayer);return apn.dbUI&&apn.dbUI.apx&&apn.dbUI.apx.wgtEditorStyle&&(t.editor=bx.$copyObject({},apn.dbUI.apx.wgtEditorStyle)),(e||apx.wgtLayer).apxUI&&(t.apxUI=bx.$cloneObject([],(e||apx.wgtLayer).apxUI)),t},apx.cloneBasicWidget=function(){var e=apx.cloneContainerWidget(apn.widgets["apn.wgt.rect"]);return e.styleMap={title:!0,visibility:!0,strokeStyle:!0,lineWidth:!0,lineDash:!0,fillStyle:!0,alpha:!0,angle:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0},e.editor=e.editor||{},delete e.exeOnScreenRefresh,delete e.onEdit,delete e.exeSetText,e},apx.wgtLayer={BLACKBOX_MODEL:!0},apx.wgtLayer.styleMap={title:!0,visibility:!0,alpha:!0,state:!0},apx.wgtLayer.properties={},apx.wgtLayer.canvasObjectModule="apn.CLayerContainer",apx.wgtLayer.exeCreateTag=apn.widgets["apn.wgt.layerContainer"].exeCreateTag,apx.wgtLayer.exeRenderTag=apn.widgets["apn.wgt.layerContainer"].exeRenderTag,apx.wgtLayer.createAsCanvasObject=function(e,t,a,i,n){return apn.IWidget.createCanvasObject(e,this,this.canvasObjectModule||"apn.CLayerContainer",bx.CCanvasWnd.SHAPE_RECT,t,a,i,n)},apx.wgtLayer.onEdit=function(e,t){var a={editLockRemove:!0,editLockResize:!0,editLockMove:!0},i=apn.Project.getWidgetModule(e.getObjectByID(t).data);if(i&&i.apxUI){for(var n,r={},o=0;o<i.apxUI.length;o++)if(i.apxUI[o]&&(i.apxUI[o].apxWidget&&(r[i.apxUI[o].apxWidget]=!0),i.apxUI[o].wgtClass&&i.apxUI[o].wgtClass.length))for(n=0;n<i.apxUI[o].wgtClass.length;n++)r[i.apxUI[o].wgtClass[n]]=!0;var s=[];for(n in r)s.push(n);s.length&&(a.wgtsFocus=s)}apn.widgets.utils.editWidget(e.getObjectByID(t),e,2,!1,a)},apn.CExe.prototype.apxRunCmd=function(e,t){if("APX_LTP"==e&&t&&t.to){if(this.isRunning()){var a=!1,i=t.to.split("::APX::"),n=i[1].replace(/^\s+|\s+$/g,"");for(var r in this.project.pages)if("apn.CFlowPage"==this.project.pages[r].module&&this.project.pages[r].UI&&this.project.pages[r].UI.title&&this.project.pages[r].UI.title.replace(/^\s+|\s+$/g,"")==n){if(r!=this.$O2J.getCurrent()||t.refresh){var o={action:"LTP",to:{pageID:r},transit:t.transit||{effect:"none"}};t.refresh&&(o.to.reset=!0),this.run(o)}else this.$O2J.get(r).canvas.fireEvent("apxPageRerun");a=!0;break}a||this.$O3T&&this.$O3T.error('<span style="color:#ffffff">[Network]</span> Unknown page('+t.to+") was requested to run. This request will be ignored.")}return!0}return!1},apn.CExe.prototype.apxDispatchMessage=function(e,t){function a(a){if(a.canvas){var n=!1;a.id==i.$O2J.getCurrent()&&(n=!0);for(var r in a.canvas.$O3d)a.canvas.$O3d[r].apxOnNetEvent&&(a.canvas.$O3d[r].apxNetEventAlways||n)&&a.canvas.$O3d[r].apxOnNetEvent(e,t)}}if(this.isRunning()){var i=this;this.$O2J.iteratePage(a)}},apn.CES.prototype.wgtPageId=function(e){return this.$O3d[e]?this.$O3d[e].apnPID:void bx.Trace.log("APX","warning","Non-exist widget id="+e,"wgtPageId")},apn.CES.prototype.wgtPageTitle=function(e){return this.$O3d[e]&&this.$O3d[e].apnPID?this.project.pages[this.$O3d[e].apnPID].UI.title:void bx.Trace.log("APX","warning","Non-exist widget id="+e,"wgtPageTitle")},apn.CES.prototype.wgtDelayLinkToPage=function(e,t){return this.$O3d[e]?void(this.$O5e=t):void bx.Trace.log("APX","warning","Non-exist widget id="+e,"wgtDelayPageLink")},apn.CES.prototype.utlFindClosest=function(){function e(e,t,a){var i=Math.abs(parseInt(a.style.left)+.5*parseInt(a.style.width)-e),n=Math.abs(parseInt(a.style.top)+.5*parseInt(a.style.height)-t);return Math.sqrt(i*i+n*n)}var t,a,i;if(2==arguments.length)t=parseInt(this.wgtTag(arguments[0]).style.left)+.5*parseInt(this.wgtTag(arguments[0]).style.width),a=parseInt(this.wgtTag(arguments[0]).style.top)+.5*parseInt(this.wgtTag(arguments[0]).style.height),i=arguments[1];else{if(3!=arguments.length)return null;t=arguments[0],a=arguments[1],i=arguments[2]}if(!i||!i.length)return null;for(var n,r,o=0;o<i.length;o++){var s=e(t,a,this.wgtTag(i[o]));(void 0===r||r>s)&&(n=i[o],r=s)}return n},apn.CES.prototype.utlGetPageWith=function(e){function t(e,t){return void 0===s.project.pages[e].UI.order&&void 0===s.project.pages[t].UI.order?0:void 0===s.project.pages[e].UI.order?1:void 0===s.project.pages[t].UI.order?-1:s.project.pages[e].UI.order-s.project.pages[t].UI.order}if(arguments.length<1)return[];var a,i,n,r={};for(a=0;a<arguments.length;a++)r[arguments[a]]=!0;var o=[],s=this,p=this.viewer.$O6t();for(p.sort(t),a=0;a<p.length;a++){n=!0;for(i in r)r[i]=!1;for(i in this.project.pages[p[a]].objects)this.project.pages[p[a]].objects[i].create.data&&this.project.pages[p[a]].objects[i].create.data.wgtID&&void 0!==r[this.project.pages[p[a]].objects[i].create.data.wgtID]&&(r[this.project.pages[p[a]].objects[i].create.data.wgtID]=!0);for(i in r)if(!r[i]){n=!1;break}n&&o.push(p[a])}return o},apn.CES.prototype.wgtToScreenX=function(e,t){return this.$O3d[e]?apn.widgets.utils.$O2x(this,this.$O3d[e],t,1/this.getZoomX()):void bx.Trace.log("APX","warning","Non-exist widget id="+e,"wgtToScreenX");
},apn.CES.prototype.wgtToScreenY=function(e,t){return this.$O3d[e]?apn.widgets.utils.$O2y(this,this.$O3d[e],t,1/this.getZoomY()):void bx.Trace.log("APX","warning","Non-exist widget id="+e,"wgtToScreenY")},apn.CES.prototype.utlIntersectLine=function(e,t,a,i){var n=t.y-e.y,r=e.x-t.x,o=t.x*e.y-e.x*t.y,s=n*a.x+r*a.y+o,p=n*i.x+r*i.y+o;if(0!=s&&0!=p&&s*p>=0)return!1;var l=i.y-a.y,d=a.x-i.x,c=i.x*a.y-a.x*i.y,g=l*e.x+d*e.y+c,u=l*t.x+d*t.y+c;if(0!=g&&0!=u&&g*u>=0)return!1;var h=n*d-l*r;return 0!=h},apn.CES.prototype.utlAllocCanvas=function(e,t,a){this.viewer.$O5m=this.viewer.$O5m||{};return this.viewer.$O5m[e]||(this.viewer.$O5m[e]=$TAG("canvas",{style:"position:absolute;"}),this.viewer.$O5m[e].width=t,this.viewer.$O5m[e].height=a,this.viewer.$O5m[e].style.width=t+"px",this.viewer.$O5m[e].style.height=a+"px"),this.viewer.$O5m[e]},apn.CES.prototype.wgtActivateLayer=function(e,t){this.$O3m(e,t),this.$O4f(e,t)},apn.CES.prototype.pageRun=function(e,t){if(this.project&&this.project.pages[e]){var a={action:"LTP",to:{pageID:e},transit:t||{effect:"none"}};this.viewer.run(a)}},apn.CES.prototype.utlIterateInGroup=function(e,t,a){var i,n=apn.Project.findParentOf(this.screen,e,"bx.CEditorWnd.CGroup");if(n)for(var r=0;r<this.screen.objects[n].layout.children.length;r++)this.screen.objects[n].layout.children[r]!=e&&(i=this.screen.objects[this.screen.objects[n].layout.children[r]].create,i.data&&i.data.properties&&i.data.properties.attrs&&i.data.properties.attrs[t]&&a(this.screen.objects[n].layout.children[r]))},apn.CES.prototype.utlLocalSave=apn.saveTempFile,apn.CES.prototype.utlLocalLoad=apn.loadTempFile,apn.CES.prototype.wgtVolumeMedia=function(e,t){return this.$O3d[e]&&this.$O3d[e].mediaTag?(void 0!==t&&(this.$O3d[e].mediaTag.volume=t),this.$O3d[e].mediaTag.volume):0},window.apnx=window.apnx||{},apnx.aniEffect={},apnx.AE=apnx.aniEffect,apnx.AE.bubble=function(e,t,a,i){function n(e){t.release(e)}function r(t){var a=e.tagTransformY(t)+t.height,i=Math.floor(2*h*a*(1+.6*(Math.random()-.5)));e.tagTransform(t,{duration:i,timing:"linear",style:{toY:{from:e.tagTransformY(t),to:-t.height-1}}},n)}for(var o,s,p,l,d,c,g,u=i.count||t.max,h=2,x=0;x<u;x++)if(o=t.take()){if(apn.CExe.ACCEL(o),c=o.width*u*(1+.6*(Math.random()-.5)),g=o.height*(2+Math.random()-.5),c=Math.min(c,parseInt(o.parentNode.style.width)),a){l=i.x+c*(Math.random()-.5)-o.width/2,d=i.y-g*(.5+.5*Math.random()),s=i.x-o.width/2,p=i.y;var f=Math.floor(h*c*(1+.6*(Math.random()-.5)));e.tagTransform(o,{duration:Math.floor(f/2),timing:"ease-in",style:{opacity:{from:0,to:1}}}),e.tagTransform(o,{duration:f,timing:"ease-in",style:{toY_:{from:p,to:d}}}),e.tagTransform(o,{duration:f,timing:"linear",style:{toX:{from:s,to:l}}},r)}else{var f=Math.floor(300+400*Math.random());c=parseInt(o.parentNode.style.width),s=(c-o.width)*Math.random()-o.width/2,p=parseInt(o.parentNode.style.height)+Math.random()*o.height,e.tagTransformX(o,s),e.tagTransformY(o,p,!0),e.tagTransform(o,{duration:f,timing:"ease-in",style:{opacity:{from:0,to:1}}},r)}o.style.display="block"}},apnx.AE.fall=function(e,t,a,i){function n(e){t.release(e)}function r(t){var a=Math.floor(700+800*Math.random());e.tagTransform(t,{duration:a,timing:"ease-out",style:{opacity:{from:1,to:0}}},n)}function o(t){if(!t.parentNode)return void r(t);var a=parseInt(t.parentNode.style.height)-e.tagTransformY(t),i=Math.floor(2*x*a*(1+.8*(Math.random()-.5))),n=.3*a*(.3+Math.random()),o=parseInt(t.parentNode.style.height)-t.height;f&&e.tagTransform(t,{duration:i,timing:y,style:{toX_:{from:e.tagTransformX(t),to:e.tagTransformX(t)+(o-e.tagTransformY(t))*f*(Math.random()+.3)}}}),e.tagTransform(t,{duration:i,timing:"linear",style:{rotate_:{from:0,to:n},toY:{from:e.tagTransformY(t),to:o}}},r)}var s,p,l,d,c,g,u,h=i.count||t.max,x=3,f=0,y="inQuad";i.param&&1==Math.abs(i.param.wind)?(x=2.2,f=.35*i.param.wind,y="outQuad"):i.param&&2==Math.abs(i.param.wind)&&(x=1.5,f=.3*i.param.wind);for(var b=0;b<h;b++)if(s=t.take()){if(apn.CExe.ACCEL(s),g=s.width*h*(.7+.4*(Math.random()-.5)),u=s.height*(2+Math.random()-.5),g=Math.min(g,parseInt(s.parentNode.style.width)),a){if(d=i.x+g*(Math.random()-.5)-s.width/2,c=i.y+u*(.5+.5*Math.random()),p=i.x-s.width/2,l=i.y,l>parseInt(s.parentNode.style.height)-2*s.height){t.release(s);continue}var v=Math.floor(x*g*(1+.6*(Math.random()-.5)));e.tagTransform(s,{duration:v,timing:"ease-in",style:{opacity:{from:0,to:1},toY_:{from:l,to:c}}}),e.tagTransform(s,{duration:v,timing:"linear",style:{toX:{from:p,to:d}}},o)}else{var v=Math.floor(300+400*Math.random());g=parseInt(s.parentNode.style.width),p=(g-s.width)*Math.random()-s.width/2,l=-s.height-Math.random()*s.height,e.tagTransformX(s,p),e.tagTransformY(s,l,!0),e.tagTransform(s,{duration:v,timing:"ease-in",style:{opacity:{from:0,to:1}}},o)}s.style.display="block"}},apnx.AE.sprinkle=function(e,t,a,i){function n(e){t.release(e)}for(var r,o,s,p,l,d,c,g=i.count||t.max,u=13,h=0;h<g;h++)if(r=t.take()){if(apn.CExe.ACCEL(r),a){o=i.x-r.width/2,s=i.y,d=Math.random()*(3*Math.PI/2)-.75*Math.PI,c=(.8+.8*(Math.random()-.5))*Math.min(parseInt(r.parentNode.style.width),parseInt(r.parentNode.style.height))*(i&&i.radiusRatio?i.radiusRatio:.2),p=o+Math.sin(d)*c,l=s+-Math.cos(d)*c;var x=Math.floor(u*c*(1+.8*(Math.random()-.5)));e.tagTransform(r,{duration:x,timing:"ease-in",style:{opacity:{from:1,to:0}}}),e.tagTransform(r,{duration:x,timing:"ease-out",style:{toY_:{from:s,to:l}}}),e.tagTransform(r,{duration:x,timing:"linear",style:{toX:{from:o,to:p}}},n)}else{var x=Math.floor(300+400*Math.random());areaW=parseInt(r.parentNode.style.width),o=(areaW-r.width)*Math.random()-r.width/2,s=parseInt(r.parentNode.style.height)+Math.random()*r.height,e.tagTransformX(r,o),e.tagTransformY(r,s,!0),e.tagTransform(r,{duration:x,timing:"ease-in",style:{opacity:{from:0,to:1}}},onEndCast)}r.style.display="block"}},apnx.AE.spiral=function(e,t,a,i){function n(e){t.release(e)}function r(t){e.tagTransform(t,{duration:200,timing:"linear",style:{opacity:{from:1,to:0}}},n)}function o(e,t,a){e.$CSS("transformOrigin","-"+a+"px -"+a+"px"),e.style.left=p+a/2+"px",e.style.top=l+a/2+"px"}for(var s,p,l,d=i.count||t.max,c=25,g=0;g<d;g++)if(s=t.take()){if(apn.CExe.ACCEL(s),a){p=i.x,l=i.y;var u=560*(1+.6*(Math.random()-.5)),h=Math.min(parseInt(s.parentNode.style.width),parseInt(s.parentNode.style.height))*(i.param&&i.param.radiusRatio?i.param.radiusRatio:.1)*(1+(Math.random()-.5)),x=Math.floor(c*h*(1+.6*(Math.random()-.5)));s.style.left=p+"px",s.style.top=l+"px",e.tagTransform(s,{duration:x,timing:i.param&&i.param.fly?"ease-in":"linear",style:{sprial:{from:0,to:h,unit:o}}}),e.tagTransform(s,{duration:x,timing:"ease-out",style:{opacity:{from:0,to:1}}}),e.tagTransform(s,{duration:x,timing:"ease-out",style:{rotate:{from:0,to:u}}},r)}else{var x=Math.floor(300+400*Math.random());areaW=parseInt(s.parentNode.style.width),p=(areaW-s.width)*Math.random()-s.width/2,l=parseInt(s.parentNode.style.height)+Math.random()*s.height,e.tagTransformX(s,p),e.tagTransformY(s,l,!0),e.tagTransform(s,{duration:x,timing:"ease-in",style:{opacity:{from:0,to:1}}},onEndCast)}s.style.display="block"}},apnx.CPool=function(e,t,a,i){this.max=a,this.p=[];for(var n,r=0;r<t.length;r++)n=e.$TAG("img",{style:"position:absolute;display:none;",src:t[r]}),n.onload=function(){this.width=Math.round(this.naturalWidth*i),this.height=Math.round(this.naturalHeight*i)},this.p.push({f:!0,tag:n});this.$O7Z=t.length,this.max=a||70},apnx.CPool.prototype.take=function(){for(var e=null,t=0;t<this.p.length;t++)if(this.p[t].f){e=this.p[t].tag,this.p[t].f=!1;break}if(!e&&this.p.length<this.max){var a=Math.floor(Math.random()*this.$O7Z);e=this.p[a].tag.cloneNode(!0),this.p[a].tag.parentNode.appendChild(e),this.p.push({tag:e,f:!1})}return e&&apn.CES.transformClear(e),e},apnx.CPool.prototype.release=function(e){for(var t=0;t<this.p.length;t++)if(this.p[t].tag==e){this.p[t].f=!0,e.style.display="none";break}},apnx.btnize=function(e,t,a){function i(e,t){t==bx.CGesture.POINTER_START?e.btnOnDown&&e.btnOnDown(e):t==bx.CGesture.POINTER_END&&(e.$OcR=!1,e.btnOnState&&e.btnOnState(e))}e.apnxBtnizeOpts=t,a=a||{},e.apxOnEvent=t.apxOnEvent||function(e,a,i,n){if(!this.$OcO)return"click"==a?(t.selected&&t.selected.normal&&(this.$OcP?this.$OcP=!1:this.$OcP=!0,this.btnOnState(this),t.onSelected&&t.onSelected(this,this.$OcP)),this.$OcQ&&(this.$OcQ.style.display="none"),!0):void 0},t.selected&&t.selected.normal&&(e.$select=function(e,a){this.$OcP=e,this.btnOnState(this),a&&t.onSelected&&t.onSelected(this,this.$OcP)},e.$isSelected=function(){return this.$OcP}),t.disabled&&(e.$disable=function(e){this.$OcO=e,this.btnOnState(this)},e.$isDisabled=function(){return this.$OcO}),(t.idle&&t.idle.normal||t.selected&&t.selected.normal)&&(e.btnOnState=function(e){var t=e.apnxBtnizeOpts;e.$OcP?t.selected&&t.selected.normal&&(e.src=t.selected.normal):e.$OcO&&t.disabled?e.src=t.disabled:t.idle&&t.idle.normal&&(e.src=t.idle.normal)}),(t.idle&&t.idle.down||t.selected&&t.selected.down)&&(e.btnOnDown=function(e){if(!this.$OcO){var t=e.apnxBtnizeOpts;this.$OcP?t.selected&&t.selected.down&&(this.src=t.selected.down):t.idle&&t.idle.down&&(this.src=t.idle.down),this.$OcR=!0}}),(t.idle&&t.idle.hover||t.selected&&t.selected.hover||a.tag)&&(e.onmouseover=function(e){if(!this.$OcR&&!this.$OcO){var t=this.apnxBtnizeOpts;this.$OcP?(t.selected&&t.selected.hover&&(this.src=t.selected.hover),a.tag&&a.selected&&(a.tag.src=a.selected.url,a.tag.style.display="block",a.tag.style.left=this.offsetLeft+this.offsetWidth/2+a.selected.dx+"px",a.tag.style.top=this.offsetTop+this.offsetHeight+a.selected.dy+"px")):(t.idle&&t.idle.hover&&(this.src=t.idle.hover),a.tag&&a.idle&&(a.tag.src=a.idle.url,a.tag.style.display="block",a.tag.style.left=this.offsetLeft+this.offsetWidth/2+a.idle.dx+"px",a.tag.style.top=this.offsetTop+this.offsetHeight+a.idle.dy+"px"))}},e.onmouseout=function(e){var t=this.apnxBtnizeOpts;this.$OcP?t.selected&&t.selected.hover&&(this.$OcR&&t.selected.down?this.src=t.selected.down:t.selected.normal&&(this.src=t.selected.normal)):t.idle&&t.idle.hover&&(this.$OcR&&t.idle.down?this.src=t.idle.down:this.src=t.idle.normal),a.tag&&"block"==a.tag.style.display&&(a.tag.style.display="none")}),new bx.CGesture(e,i,{noDelayedEvent:!0}),a.tag&&(e.$OcQ=a.tag),e.btnOnState&&e.btnOnState(e)},window.AspenWebAudio=window.AspenWebAudio||function(e){this.tag=e,this.tag.wgCtx={},this.tag.wgCtx.startedAt=0,this.tag.wgCtx.pausedAt=0,this.tag.wgCtx.volume=1,this.tag.wgCtx.isPlaying=!1,this.tag.wgCtx.isMute=!1,this.tag.wgCtx.gainNode=void 0,this.tag.wgCtx.processor=void 0},AspenWebAudio.audioContext,AspenWebAudio.isUseWebAudio=function(){var e=navigator.userAgent,t=e.match(/Android/i);return e.indexOf("GITAN")===-1&&!(!t||e.indexOf("Version")==-1&&e.indexOf("Browser")==-1||!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext)||window.ContentAPI||window.apnAppBookControl||window.ply)},AspenWebAudio.prototype.setMedia=function(e){if(this.tag.wgCtx.Buffer=void 0,AspenWebAudio&&AspenWebAudio.audioContext&&AspenWebAudio.audioContext.currentTime&&this.tag.wgCtx.currentTime===AspenWebAudio.audioContext.currentTime){var t=(new Date).getTime();t-this.tag.wgCtx.lastCheckTime>100&&this.close()}AspenWebAudio.audioContext||(AspenWebAudio.audioContext=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext)),AspenWebAudio.$OcS(this,e)},AspenWebAudio.prototype.setCallback=function(e,t,a,i,n,r){this.onStart=e,this.onEnd=t,this.onResume=a,this.onPause=i,this.timeDuration=n,this.timeUpdate=r},AspenWebAudio.prototype.play=function(e){var t=e?0:this.tag.wgCtx.pausedAt,a=this;return this.tag.wgCtx.loadedUrl!==this.tag.wgCtx.requestUrl?void(this.tag.wgCtx.waitPlay=!0):this.tag.wgCtx.isPlaying?(this.stop(),this.tag.wgCtx.waitPlay=!0,void this.play()):void(this.tag.wgCtx.Buffer?(this.tag.wgCtx.source=AspenWebAudio.audioContext.createBufferSource(),this.tag.wgCtx.processor=AspenWebAudio.audioContext.createScriptProcessor(2048,1,1),this.tag.wgCtx.gainNode=AspenWebAudio.audioContext.createGain(),this.setMute(this.tag.wgCtx.isMute),this.setVolume(this.tag.wgCtx.volume),this.tag.wgCtx.source.buffer=this.tag.wgCtx.Buffer,this.tag.wgCtx.duration=this.tag.wgCtx.source.buffer.duration,this.tag.wgCtx.processor.onaudioprocess=function(e){a.tag.wgCtx.currentTime=AspenWebAudio.audioContext.currentTime,a.tag.wgCtx.lastCheckTime=(new Date).getTime(),a.tag.wgCtx.isPlaying&&a.timeUpdate&&a.timeUpdate()},this.tag.wgCtx.source.connect(this.tag.wgCtx.gainNode),this.tag.wgCtx.gainNode.connect(AspenWebAudio.audioContext.destination),this.tag.wgCtx.processor.connect(this.tag.wgCtx.gainNode),this.tag.wgCtx.source.start(0,t),this.tag.wgCtx.startedAt=AspenWebAudio.audioContext.currentTime-t,this.tag.wgCtx.pausedAt=0,this.tag.wgCtx.isPlaying=!0,this.tag.wgCtx.waitPlay=!1,this.getLoop()&&(this.tag.wgCtx.source.loop=!0),this.tag.wgCtx.source.onended=function(){a.stop(!0)},this.onStart&&e?this.onStart():this.onResume&&!e&&this.onResume()):this.tag.wgCtx.waitPlay=!0)},AspenWebAudio.prototype.doPlay=function(e){this.play(e)},AspenWebAudio.prototype.stop=function(e){if(e=e||!1,this.tag.wgCtx.source){this.tag.wgCtx.source.disconnect();try{this.tag.wgCtx.source.stop()}catch(e){console.error(e)}this.tag.wgCtx.source=null}this.tag.wgCtx.pausedAt=0,this.tag.wgCtx.startedAt=0,this.tag.wgCtx.waitPlay=!1,this.tag.wgCtx.isPlaying=!1,this.onEnd&&this.onEnd(e)},AspenWebAudio.prototype.pause=function(){var e=(AspenWebAudio.audioContext.currentTime-this.tag.wgCtx.startedAt)%this.tag.wgCtx.duration;if(this.tag.wgCtx.source){this.tag.wgCtx.source.disconnect();try{this.tag.wgCtx.source.stop()}catch(e){console.error(e)}this.tag.wgCtx.source=null}this.tag.wgCtx.waitPlay=!1,this.tag.wgCtx.isPlaying=!1,this.tag.wgCtx.pausedAt=e,this.onPause&&this.onPause()},AspenWebAudio.prototype.setLoop=function(e){this.tag.wgCtx.loop=e},AspenWebAudio.prototype.getLoop=function(){return this.tag.wgCtx.loop},AspenWebAudio.prototype.setMute=function(e){this.tag.wgCtx.gainNode&&(this.tag.wgCtx.gainNode.gain.value=e?0:this.tag.wgCtx.volume,this.tag.wgCtx.isMute=e)},AspenWebAudio.prototype.getMute=function(){if(this.tag.wgCtx.gainNode)return this.tag.wgCtx.isMute},AspenWebAudio.prototype.setVolume=function(e){!this.tag.wgCtx.isMute&&this.tag.wgCtx.gainNode&&this.tag.wgCtx.gainNode.gain&&(this.tag.wgCtx.gainNode.gain.value=e),this.tag.wgCtx.volume=e},AspenWebAudio.prototype.getVolume=function(){return this.tag.wgCtx.volume},AspenWebAudio.prototype.getPaused=function(){return!this.tag.wgCtx.isPlaying},AspenWebAudio.prototype.getInfoPlayTime=function(){return this.tag.wgCtx.duration?(AspenWebAudio.audioContext.currentTime-this.tag.wgCtx.startedAt)%this.tag.wgCtx.duration:0},AspenWebAudio.prototype.getInfoDuration=function(){return this.tag.wgCtx.duration},AspenWebAudio.prototype.close=function(){AspenWebAudio.audioContext&&AspenWebAudio.audioContext.close&&(AspenWebAudio.audioContext.close(),AspenWebAudio.audioContext=void 0)},AspenWebAudio.$OcS=function(e,t){if(e.tag.wgCtx.isPlaying){if(e.tag.wgCtx.mediaURL=t,e.tag.wgCtx.source){e.tag.wgCtx.source.disconnect();try{e.tag.wgCtx.source.stop()}catch(e){console.error(e)}e.tag.wgCtx.source=null}e.tag.wgCtx.pausedAt=0,e.tag.wgCtx.startedAt=0,e.tag.wgCtx.isPlaying=!1,e.tag.wgCtx.waitPlay=!0}var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){AspenWebAudio.audioContext&&AspenWebAudio.audioContext.decodeAudioData(a.response,function(a){e.tag.wgCtx.Buffer=a,e.tag.wgCtx.loadedUrl=t,e.tag.wgCtx.waitPlay&&e.doPlay(!e.tag.wgCtx.pausedAt)},function(e){console.error("ERROR: context.decodeAudioData: ",e)})},e.tag.wgCtx.requestUrl=t,a.send()},apn.CExe.prototype.$O5R=function(){return this.$O5S||(this.$O5S=Math.floor(1e13*Math.random())+""),this.$O5S},apn.CExe.prototype.remoteConnect=apn.CExe.prototype.remoteConnect$=function(host,onData){function join(){apn.CExe.$O4U.$O4Y.emit("fc_join_channel",{tid:0,channel_id:apn.CExe.$O4U.$O4V},function(e){console.error(">> [PRV SVR] Joined "+apn.CExe.$O4U.$O4V+" "+e.error+":"+_this.$O5R()),0==e.error&&(apn.CExe.$O4U.handlers[_this.$O5R()]={fn:onData})})}var _this=this;return apn.CExe.$O4U&&2==apn.CExe.$O4U.$O4X?(apn.CExe.$O4U.handlers[this.$O5R()]?apn.CExe.$O4U.handlers[this.$O5R()].fn=onData:join(),!0):(apn.CExe.$O4U=apn.CExe.$O4U||{handlers:{},$O4W:"",$O4X:0},apn.CExe.$O4U.$O4W=host||"http://"+(("localhost"===window.location.hostname?"":window.location.hostname)||"vsg.aspenux.com")+":9110",apn.CExe.$O4U.$O4V=bx.CCookie.get("apn_session")||this.project.property.corpID||"APX_CONTENT",apn.CExe.$O4U.$O4Y?0==apn.CExe.$O4U.$O4X&&apn.CExe.$O4U.$O4Y.connect(apn.CExe.$O4U.$O4W):(apn.CExe.$O4U.$O4X=1,apn.CExe.$O4U.$O4Y=io.connect(apn.CExe.$O4U.$O4W),apn.CExe.$O4U.$O4Y.on("connect",function(){apn.CExe.$O4U.$O4X=2,join()}),apn.CExe.$O4U.$O4Y.on("disconnect",function(){apn.CExe.$O4U.$O4X=0}),apn.CExe.$O4U.$O4Y.on("error",function(){}),apn.CExe.$O4U.$O4Y.on("fs_channel_speak",function(data){var msg;try{msg=eval("("+data.msg+")")}catch(e){}if(console.error(">> [PRV SVR]",msg,apn.CExe.$O4U.handlers),msg)for(var i in apn.CExe.$O4U.handlers)i!=data.window_id&&apn.CExe.$O4U.handlers[i].fn&&apn.CExe.$O4U.handlers[i].fn(msg)})),!0)},apn.CExe.prototype.remoteDisconnect=apn.CExe.prototype.remoteDisconnect$=function(){apn.CExe.$O4U&&apn.CExe.$O4U.$O4Y&&apn.CExe.$O4U.handlers[this.$O5R()]&&delete apn.CExe.$O4U.handlers[this.$O5R()].fn},apn.CExe.prototype.remoteBroadcast=apn.CExe.prototype.remoteBroadcast$=function(e){var t=this;return!(!apn.CExe.$O4U.$O4Y||2!=apn.CExe.$O4U.$O4X)&&(apn.CExe.$O4U.$O4Y.emit("fc_speak_channel",{tid:0,channel_id:apn.CExe.$O4U.$O4V,msg:e,window_id:t.$O5R()},function(t){console.error(">> [PRV SVR] remoteBroadcast "+t.error,e),0!=t.error}),!0)},apn.CExe.prototype.remoteSendToServer=apn.CExe.prototype.remoteSendToServer$=function(e){return this.remoteBroadcast(e)},apn.CExe.$O5T=[{id:"Std1",name:"Student1",photoURL:"http://aspenux.com/imgs/emul/ch_1.png"},{id:"Std2",name:"Student2",photoURL:"http://aspenux.com/imgs/emul/ch_2.png"}],apn.CExe.prototype.remoteGetClientProfile=apn.CExe.prototype.remoteGetClientProfile$=function(){return apn.CExe.$O5U=apn.CExe.$O5U||{alloc:{},index:0},apn.CExe.$O5U.alloc[this.tagId]||(apn.CExe.$O5U.alloc[this.tagId]=bx.$cloneObject({},apn.CExe.$O5T[apn.CExe.$O5U.index]),apn.CExe.$O5U.index=(apn.CExe.$O5U.index+1)%apn.CExe.$O5T.length),apn.CExe.$O5U.alloc[this.tagId]},apn.CExe.prototype.remoteGetLoginClientList=apn.CExe.prototype.remoteGetLoginClientList$=function(){return apn.CExe.$O5T};
"BLUEGA Inc, aspen-apx-1.0.js Release date: 09/22/2017 13:42:22"