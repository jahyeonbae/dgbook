window.apn=window.apn||{},apn.widgetMap=function(){window.eduWgtAnimSprite&&(apn.widgets["edu.wgt.animSprite"]=window.eduWgtAnimSprite,apn.widgets["edu.wgt.animSprite"].APX_PUB_PRELOAD=!0),window.eduWgtAnimScene&&(apn.widgets["edu.wgt.animScene"]=window.eduWgtAnimScene,apn.widgets["edu.wgt.animScene"].APX_PUB_PRELOAD=!0),window.eduWgtAnimHolder2&&(apn.widgets["edu.wgt.animHolder2"]=window.eduWgtAnimHolder2,apn.widgets["edu.wgt.animHolder2"].APX_PUB_PRELOAD=!0),window.eduWgtVideoPlayer&&(apn.widgets["edu.wgt.videoPlayer"]=window.eduWgtVideoPlayer,apn.widgets["edu.wgt.videoPlayer"].APX_PUB_PRELOAD=!0),window.eduWgtAudioPlayer&&(apn.widgets["edu.wgt.audioPlayer"]=window.eduWgtAudioPlayer,apn.widgets["edu.wgt.audioPlayer"].APX_PUB_PRELOAD=!0),window.eduWgtAudioPlayerMF&&(apn.widgets["edu.wgt.audioPlayerMF"]=window.eduWgtAudioPlayerMF,apn.widgets["edu.wgt.audioPlayerMF"].APX_PUB_PRELOAD=!0),window.eduWgtSubtitle&&(apn.widgets["edu.wgt.subtitle"]=window.eduWgtSubtitle,apn.widgets["edu.wgt.subtitle"].APX_PUB_PRELOAD=!0),window.uxWgtDotIndicator&&(apn.widgets["ux.wgt.dotIndicator"]=window.uxWgtDotIndicator,apn.widgets["ux.wgt.dotIndicator"].APX_PUB_PRELOAD=!0),window.uxWgtBtnImage&&(apn.widgets["ux.wgt.btnImage"]=window.uxWgtBtnImage,apn.widgets["ux.wgt.btnImage"].APX_PUB_PRELOAD=!0),window.uxWgtYT&&(apn.widgets["ux.wgt.YT"]=window.uxWgtYT,apn.widgets["ux.wgt.YT"].APX_PUB_PRELOAD=!0),window.uxWgtIFRAME&&(apn.widgets["ux.wgt.IFRAME"]=window.uxWgtIFRAME,apn.widgets["ux.wgt.IFRAME"].APX_PUB_PRELOAD=!0),window.uxWgtTimer&&(apn.widgets["ux.wgt.timer"]=window.uxWgtTimer,apn.widgets["ux.wgt.timer"].APX_PUB_PRELOAD=!0),window.uxWgtCounter&&(apn.widgets["ux.wgt.counter"]=window.uxWgtCounter,apn.widgets["ux.wgt.counter"].APX_PUB_PRELOAD=!0),window.eduWgtSceneAni&&(apn.widgets["edu.wgt.sceneAni"]=window.eduWgtSceneAni),window.eduWgtMagicTouch&&(apn.widgets["edu.wgt.magicTouch"]=window.eduWgtMagicTouch),window.eduWgtSceneFly&&(apn.widgets["edu.wgt.sceneFly"]=window.eduWgtSceneFly),window.eduWgtDragLine&&(apn.widgets["edu.wgt.dragLine"]=window.eduWgtDragLine),window.eduWgtKeyText&&(apn.widgets["edu.wgt.keyText"]=window.eduWgtKeyText),window.eduWgtKeyTextTaped&&(apn.widgets["edu.wgt.keyTextTaped"]=window.eduWgtKeyTextTaped),window.eduWgtAudioPlayer&&(apn.widgets["edu.wgt.audioPlayer"]=window.eduWgtAudioPlayer),window.eduWgtSketchPad&&(apn.widgets["edu.wgt.sketchPad"]=window.eduWgtSketchPad),window.eduWgtColoringPad&&(apn.widgets["edu.wgt.coloringPad"]=window.eduWgtColoringPad),window.eduWgtScratchPad&&(apn.widgets["edu.wgt.scratchPad"]=window.eduWgtScratchPad),window.eduWgtBtnPrint&&(apn.widgets["edu.wgt.btnPrint"]=window.eduWgtBtnPrint),window.msWgtSyncScroll&&(apn.widgets["ms.wgt.syncScroll"]=window.msWgtSyncScroll),window.ms2WgtNote&&(apn.widgets["ms2.wgt.note"]=window.ms2WgtNote),window.ms2WgtNoteImage&&(apn.widgets["ms2.wgt.noteImage"]=window.ms2WgtNoteImage),window.ms2WgtNoteText&&(apn.widgets["ms2.wgt.noteText"]=window.ms2WgtNoteText),window.ms2WgtNoteLayer&&(apn.widgets["ms2.wgt.noteLayer"]=window.ms2WgtNoteLayer),window.gmWgtWordSearch&&(apn.widgets["gm.wgt.wordSearch"]=window.gmWgtWordSearch),window.gmWgtJigsawPuzzle&&(apn.widgets["gm.wgt.jigsawPuzzle"]=window.gmWgtJigsawPuzzle),window.pdfWgtApn&&(apn.widgets["pdf.wgt.apn"]=window.pdfWgtApn),window.abrWgtBtnAPI&&(apn.widgets["abr.wgt.btnAPI"]=window.abrWgtBtnAPI),window.abrWgtBtnOpen&&(apn.widgets["abr.wgt.btnOpen"]=window.abrWgtBtnOpen),window.abrWgtBtnURL&&(apn.widgets["abr.wgt.btnURL"]=window.abrWgtBtnURL),window.abrWgtBtnExe&&(apn.widgets["abr.wgt.btnExe"]=window.abrWgtBtnExe),window.abrWgtBtnBook&&(apn.widgets["abr.wgt.btnBook"]=window.abrWgtBtnBook),window.abrWgtEnvLayer&&(apn.widgets["abr.wgt.envLayer"]=window.abrWgtEnvLayer),window.abrWgtPgThmb&&(apn.widgets["abr.wgt.pgThmb"]=window.abrWgtPgThmb),window.abrKrsWgtLink&&(apn.widgets["abr.krs.wgt.link"]=window.abrKrsWgtLink),window.abrKrsWgtQmeta&&(apn.widgets["abr.krs.wgt.qmeta"]=window.abrKrsWgtQmeta),window.abrKrsWgtQchoice&&(apn.widgets["abr.krs.wgt.qchoice"]=window.abrKrsWgtQchoice),window.uxWgtImgSprite&&(apn.widgets["ux.wgt.imgSprite"]=window.uxWgtImgSprite),window.uxWgtShtSprite&&(apn.widgets["ux.wgt.shtSprite"]=window.uxWgtShtSprite),window.uxWgtPatch3&&(apn.widgets["ux.wgt.patch3"]=window.uxWgtPatch3),window.uxWgtPatch9&&(apn.widgets["ux.wgt.patch9"]=window.uxWgtPatch9),window.uxWgtInputSelect&&(apn.widgets["ux.wgt.inputSelect"]=window.uxWgtInputSelect),window.uxWgtPlayerBtn&&(apn.widgets["ux.wgt.playerBtn"]=window.uxWgtPlayerBtn),window.uxWgtPlayerSeek&&(apn.widgets["ux.wgt.playerSeek"]=window.uxWgtPlayerSeek),window.uxWgtPlayerTime&&(apn.widgets["ux.wgt.playerTime"]=window.uxWgtPlayerTime),window.uxWgtPlayerVol&&(apn.widgets["ux.wgt.playerVol"]=window.uxWgtPlayerVol),window.uxWgtDataTbl&&(apn.widgets["ux.wgt.dataTbl"]=window.uxWgtDataTbl),window.uxWgtInputVkbd&&(apn.widgets["ux.wgt.inputVkbd"]=window.uxWgtInputVkbd),window.uxWgtInfo&&(apn.widgets["ux.wgt.info"]=window.uxWgtInfo),window.uxWgtLocal&&(apn.widgets["ux.wgt.local"]=window.uxWgtLocal),window.uxWgtGrpToggleLayerCntr&&(apn.widgets["ux.wgt.grpToggleLayerCntr"]=window.uxWgtGrpToggleLayerCntr),window.uxWgtInputText&&(apn.widgets["ux.wgt.inputText"]=window.uxWgtInputText),window.uxWgtSceneScrl&&(apn.widgets["ux.wgt.sceneScrl"]=window.uxWgtSceneScrl),window.uxWgtLngSwitchCntr&&(apn.widgets["ux.wgt.lngSwitchCntr"]=window.uxWgtLngSwitchCntr),window.uxWgtCursor&&(apn.widgets["ux.wgt.cursor"]=window.uxWgtCursor),window.uxWgtHTTP&&(apn.widgets["ux.wgt.http"]=window.uxWgtHTTP),window.uxWgtDataFile&&(apn.widgets["ux.wgt.dataFile"]=window.uxWgtDataFile),window.uxWgtMaskTxt&&(apn.widgets["ux.wgt.maskTxt"]=window.uxWgtMaskTxt),window.uxWgtInputRadio&&(apn.widgets["ux.wgt.inputRadio"]=window.uxWgtInputRadio),window.uxWgtInputChk&&(apn.widgets["ux.wgt.inputChk"]=window.uxWgtInputChk),window.uxWgtPlayerScrl&&(apn.widgets["ux.wgt.playerScrl"]=window.uxWgtPlayerScrl)};
window.apn=window.apn||{},apn.dbUI={apx:{wgtEditorStyle:{icon:"DB/studio/imgs/wgts/common/icon.png",iconThumb:"DB/studio/imgs/wgts/common/icon_thumb.png",color:"rgb(171,100,0)"}},brand:{title:"Aspen Studio",logoFull:"DB/studio/imgs/corp/logoFull.png",logoTitle:"DB/studio/imgs/corp/logoTitle.png",corpURL:"http://www.aspenux.com"},system:{exeItrURL:!0,exeEventHover:!0,exeEventStart:!0,exeTxtUnderlined:"border",exeScripting:!0,exeCompress:!0,pubVersion:"2",scrZoomRatio:4,exePatchOverlap:1,scrPageTemplateAdd:!0,scrUseLetterSpacing:!0,scrUseLineSpacing:!0,scrUseCategoryFile:!0,scrUseCategoryTemplate:!0},device:"EDU",access:{admin:{admUse:!0,scrUseTemplateFile:!0,scrUsePgTemplateFile:!0,fileStorage:"S",fileTemplateFile:!0,scrSaveNavHistory:!1,rscImageDeposit:"S",rscAudioDeposit:"S",rscVideoDeposit:"S",rscImageLimit:8e5,rscAudioLimit:15e6,rscVideoLimit:3e7,rscPdf2Limit:3e8,rscSvgLimit:8e5,flwUseRefresh:!0,exeUseConsole:!0,exeEventDrag:!0},first:{scrUseTemplateFile:!0,scrUsePgTemplateFile:!0,fileStorage:"S",fileTemplateFile:!0,scrSaveNavHistory:!1,rscImageDeposit:"S",rscAudioDeposit:"S",rscVideoDeposit:"S",rscImageLimit:8e5,rscAudioLimit:15e6,rscVideoLimit:3e7,rscPdf2Limit:3e8,rscSvgLimit:8e5,flwUseRefresh:!0,exeUseConsole:!0,exeEventDrag:!0},second:{fileStorage:"S",fileTemplateFile:!0,scrSaveNavHistory:!1,rscImageDeposit:"S",rscAudioDeposit:"S",rscVideoDeposit:"S",rscImageLimit:8e5,rscAudioLimit:15e6,rscVideoLimit:3e7,rscPdf2Limit:3e8,rscSvgLimit:8e5,flwUseRefresh:!0,exeUseConsole:!0,exeEventDrag:!0}}},apn.widgetLibraryFilter=function(e){if(apn.dbUI&&(apn.dbUI.access.admin.help=apn.dbUI.access.first.help=apn.dbUI.access.second.help=[{title:{en:"Mouse and shortcuts",ko:"마우스 사용법 및 단축키"},URL:"docs/help/mouse_shortcuts.html?SNS=Y",width:"980px",height:"96%"},{title:{en:"Examples",ko:"편집 예제"},URL:"docs/help/ux/help_ux.html?F=02_x0&T=Examples&Tko=%ED%8E%B8%EC%A7%91%20%EC%98%88%EC%A0%9C",width:"94%",height:"96%"},{title:{en:"Video tutorials",ko:"비디오 도움말"},URL:"docs/help/ux/help_ux.html?F=03&T=Video%20tutorials&Tko=%EB%B9%84%EB%94%94%EC%98%A4%20%EB%8F%84%EC%9B%80%EB%A7%90",width:"94%",height:"96%"},{},{title:{en:"Knowledge Base",ko:"편집/개발지원 문서"},URL:{ko:"docs/KB/index.html?DB=EDT%3BSPT%3BEXE%3BABR%3BPDF&LN=ko"},width:"80%",height:"90%"},{title:{en:"Update Tracker",ko:"개선작업 현황"},URL:{ko:"http://aspenux.com/tracker.html"},width:"80%",height:"90%"},{title:{en:"Announcement",ko:"공지사항"},URL:"https://www.facebook.com/aspenux",open:!0},{},{title:{en:"About Aspen Studio",ko:"Aspen Studio에 대해"},URL:"docs/help/ux/help_ux.html?F=0_01P_01_01B&T=About%20AspenUX&Tko=AspenUX%EC%97%90%20%EB%8C%80%ED%95%B4",width:"94%",height:"96%"},{title:{en:"Getting started with Aspen Studio",ko:"기본 사용 절차"},URL:"docs/help/ux/help_ux.html?F=1_1a_1b&T=Getting%20started%20with%20Aspen%20Editor&Tko=%EA%B8%B0%EB%B3%B8%20%EC%82%AC%EC%9A%A9%20%EC%A0%88%EC%B0%A8",width:"94%",height:"96%"},{title:{en:"Widgets",ko:"위젯"},URL:"docs/help/ux/help_ux.html?F=w0_w1_w2_w3_w4_w5_w6_w7_w9_w10_w11_w12_w13_w14_w15_w16_w17_w18_w8_w19&T=Widgets&Tko=%EC%9C%84%EC%A0%AF",width:"94%",height:"96%"},{title:{en:"Interactive Events",ko:"동적 이벤트"},URL:"docs/help/ux/help_ux.html?F=e0&T=Interactive%20Events&Tko=%EB%8F%99%EC%A0%81%20%EC%9D%B4%EB%B2%A4%ED%8A%B8",width:"94%",height:"96%"},{title:{en:"Interactive Actions",ko:"동적 액션"},URL:"docs/help/ux/help_ux.html?F=a0_a1_a2_a3_a4_a5_a6_a7_a8&T=Interactive%20Actions&Tko=%EB%8F%99%EC%A0%81%20%EC%95%A1%EC%85%98",width:"94%",height:"96%"},{title:{en:"Browsers and devices",ko:"지원 브라우저 및 환경 관련 사항"},URL:"docs/help/ux/help_ux.html?F=3&T=Browsers%20and%20devices&Tko=%EC%A7%80%EC%9B%90%20%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%20%EB%B0%8F%20%ED%99%98%EA%B2%BD%20%EA%B4%80%EB%A0%A8%20%EC%82%AC%ED%95%AD",width:"94%",height:"96%"},{},{title:{en:"About BLUEGA",ko:"블루가(주)"},URL:"docs/help/ux/help2_ux.html?F=c0",width:"80%",height:"70%"}],apn.widgetDevice.EDU.font&&(apn.dbUI.font=apn.widgetDevice.EDU.font)),window.asui&&asui.CFG&&asui.CFG.getLogin()&&"3"==asui.CFG.getLogin().memberGroup)for(var t,o=0;o<apn.widgetLibrary.EDU.groups.length;o++)for(t=0;t<apn.widgetLibrary.EDU.groups[o].widgets.length;t++)apn.widgetLibrary.EDU.groups[o].widgets[t].UI&&apn.widgetLibrary.EDU.groups[o].widgets[t].UI.admin&&(apn.widgetLibrary.EDU.groups[o].widgets[t].UI.hide=!0);if(apn.dbUI&&apn.dbUI.apx&&apn.dbUI.apx.wgtEditorStyle&&apn.dbUI.apx.wgtEditorStyle.icon)for(var t,o=0;o<apn.widgetLibrary.EDU.groups.length;o++)for(t=0;t<apn.widgetLibrary.EDU.groups[o].widgets.length;t++)apn.widgetLibrary.EDU.groups[o].widgets[t].UI&&apn.widgetLibrary.EDU.groups[o].widgets[t].UI.icon||(apn.widgetLibrary.EDU.groups[o].widgets[t].UI=apn.widgetLibrary.EDU.groups[o].widgets[t].UI||{},apn.widgetLibrary.EDU.groups[o].widgets[t].UI.icon=apn.dbUI.apx.wgtEditorStyle.icon);for(var o=0;o<apn.widgetLibrary.EDU.groups.length;o++)for(t=0;t<apn.widgetLibrary.EDU.groups[o].widgets.length;t++)apn.widgetLibrary.EDU.groups[o].widgets[t].shape||(apn.widgetLibrary.EDU.groups[o].widgets[t].shape={position:{x:"center",y:"middle"},size:{w:"100%",h:"100%"}});apn.widgetMap()},window.apn=window.apn||{},apn.theme={EDU:{UI:{title:"AspenEdu"},styles:{normal:{fillStyle:"#FFFFFF",strokeStyle:"#7E7E7E",lineWidth:1,lineDash:null,lineEnd:"square",borderRadiusTopLeft:0,borderRadiusTopRight:0,borderRadiusBottomLeft:0,borderRadiusBottomRight:0,font:"Open Sans",fontSize:"24px",fontStyle:"#000000",fontItalic:!1,fontBold:!1,textMultiLine:!1,fontUnderlined:!1,text:"",textAlign:"center",textValign:"middle",textPadding:8,textWordWrap:!0,fontStrokeStyle:"#FFA500",fontStrokeWidth:0,alpha:1,angle:0,keepRatio:!1,title:"",visibility:!0,dragX:!1,dragY:!1,dragInParent:!1,dragContainParent:!1,ltrSp:0,lnSp:0,csr:"apn.auto"}},properties:{trEffectForward:"none",trEffectBackward:"none",trTiming:"ease-in-out",trDuration:500}}},window.apn=window.apn||{},apn.widgetDevice={EDU:{UI:{title:"AspenEdu"},skinID:"Apple",themeID:"EDU",wgtLibID:"EDU",device:{screenSize:[]},exeModule:{standard:{title:"Standard",module:"apn.CExe",info:"For application, game and generic app type contents"},book:{title:"Book",module:"apn.CExeBook",info:"For generic book type contents"},apnCExePDF:{title:"PDF Book",module:"apn.CExePDF"},abrCExe:{title:"AspenReader Content",module:"abrCExe",info:"App and Page module for Aspen Reader"},abrCExeBook:{title:"AspenReader Book Content",module:"abrCExeBook",info:"Book-typed App and Page module for Aspen Reader"},krsCBook:{title:"Keris Book",module:"krsCBook",info:"For Keris Book"},krsCExe:{title:"Keris Contents",module:"krsCExe",info:"For Keris Popup contents"}},font:[{title:"Arial",face:"Arial",type:"system",preview:"DB/blg/imgs/fonts/5.png"},{title:"Arial Black",height:1.1,face:"Arial Black",type:"system",preview:"DB/blg/imgs/fonts/6.png"},{title:"Arial Narrow",face:"Arial Narrow",type:"system",preview:"DB/blg/imgs/fonts/7.png"},{title:"Average Sans",face:"Average Sans",noBold:!0,type:"google",path:"https://fonts.googleapis.com/css?family=Average+Sans",preview:"DB/blg/imgs/fonts/average_sans.png"},{title:"Bubblegum Sans",face:"Bubblegum Sans",noBold:!0,type:"google",path:"https://fonts.googleapis.com/css?family=Bubblegum+Sans",preview:"DB/blg/imgs/fonts/bubblegum_sans.png"},{title:"Courier New",face:"Courier New",type:"system",preview:"DB/blg/imgs/fonts/8.png"},{title:"Fredoka One",height:1.3,face:"Fredoka One",noBold:!0,type:"google",path:"https://fonts.googleapis.com/css?family=Fredoka+One",preview:"DB/blg/imgs/fonts/fredoka_one.png"},{title:"Georgia",height:1.3,face:"Georgia",type:"system",preview:"DB/blg/imgs/fonts/9.png"},{title:"Noto Sans",height:1.3,face:"Noto Sans",type:"google",path:"https://fonts.googleapis.com/css?family=Noto+Sans:400,700",preview:"DB/blg/imgs/fonts/noto_sans.png"},{title:"Open Sans",face:"Open Sans",type:"google",path:"https://fonts.googleapis.com/css?family=Open+Sans:400,700",preview:"DB/blg/imgs/fonts/10.png"},{title:"Palatino",face:"Palatino Linotype",type:"system",preview:"DB/blg/imgs/fonts/11.png"},{title:"Patrick Hand",height:1.3,face:"Patrick Hand",noBold:!0,type:"google",path:"https://fonts.googleapis.com/css?family=Patrick+Hand",preview:"DB/blg/imgs/fonts/patrick_hand.png"},{title:"Roboto",face:"Roboto",type:"google",path:"https://fonts.googleapis.com/css?family=Roboto:400,700",preview:"DB/blg/imgs/fonts/roboto.png"},{title:"Roboto Slab",face:"Roboto Slab",type:"google",path:"https://fonts.googleapis.com/css?family=Roboto+Slab:400,700",preview:"DB/blg/imgs/fonts/roboto_slab.png"},{title:"Times New Roman",face:"Times New Roman",type:"system",preview:"DB/blg/imgs/fonts/12.png"},{title:"Trebuchet MS",height:1.3,face:"Trebuchet MS",type:"system",preview:"DB/blg/imgs/fonts/13.png"},{title:"Varela Round",height:1.3,face:"Varela Round",noBold:!0,type:"google",path:"https://fonts.googleapis.com/css?family=Varela+Round",preview:"DB/blg/imgs/fonts/verela_round.png"},{title:"Verdana",height:1.3,face:"Verdana",type:"system",preview:"DB/blg/imgs/fonts/14.png"},{title:"Wellfleet",height:1.3,face:"Wellfleet",noBold:!0,type:"google",path:"https://fonts.googleapis.com/css?family=Wellfleet",preview:"DB/blg/imgs/fonts/wellfleet.png"},{title:"나눔 고딕",height:1.3,ln:"ko",face:"Nanum Gothic",type:"google",path:"http://fonts.googleapis.com/earlyaccess/nanumgothic.css",preview:"DB/blg/imgs/fonts/1.png"},{title:"나눔 명조",height:1.3,ln:"ko",face:"Nanum Myeongjo",type:"google",path:"http://fonts.googleapis.com/earlyaccess/nanummyeongjo.css",preview:"DB/blg/imgs/fonts/2.png"},{title:"나눔 Pen Script",height:1.1,noBold:!0,ln:"ko",face:"Nanum Pen Script",type:"google",path:"http://fonts.googleapis.com/earlyaccess/nanumpenscript.css",preview:"DB/blg/imgs/fonts/3.png"},{title:"나눔 Brush",height:1.1,noBold:!0,ln:"ko",face:"Nanum Brush Script",type:"google",path:"http://fonts.googleapis.com/earlyaccess/nanumbrushscript.css",preview:"DB/blg/imgs/fonts/4.png"}]}};
function __setScriptRunIf(){function t(t,e){Y.isEffect(t)?e.effect=t:e.effect="none"}function e(t,e){if(t){for(var a=null,n=null,r=!1,i=t.split(" "),o=0;o<i.length;o++)""==i[o]&&(i.splice(o,1),o-=1);for(var o=0;o<i.length;o++)Y.isTiming(i[o])&&(a=i[o]),Y.isDuration(i[o])&&(n=i[o]),Y.isRoundTrip(i[o])&&(r=!0);null!==a&&(e.timing=a),null!==n&&(e.duration=parseInt(n)),r===!0&&(e.roundUp=!0)}}function a(t,e,a){for(var n={},r="",i=t[e].params,o=z(),s=0;s<i.length;s++)r=a[s],void 0!==r&&("number"==i[s].dataType?r=parseInt(r):"float"==i[s].dataType?r=parseFloat(r):"boolean"==i[s].dataType&&(r=r===!0||"true"==r)),n[i[s].name]=r,0!=s||"wgtId"!=i[s].name||r||(n[i[s].name]=o);return n}function n(t,e){throw new Error(t+" :: "+e)}function r(){}function i(t,e,a){return t?void(U&&F.sptFileSetVar&&F.sptFileSetVar(t,e,a)):void n("key","not exist")}function o(t){return t?U?F.sptFileGetVar?F.sptFileGetVar(t):"":"1":(n("key","not exist"),null)}function s(t,e){if(!t)return void n("key","not exist");if(U&&F.sptFileBrowse)return F.sptFileBrowse(t,e)}function d(t){if(!U)return"1";if(!F.pageByLabel)return null;var e=F.pageByLabel(t);return null===e&&(n("getPage","Can not find page ["+t+"] label."),e=""),e}function g(t,e,a){if(!U)return"1";if(!t)return n("label","not exist"),null;if(!F.widgetsByLabel)return"";var r="",i=F.widgetsByLabel(t,e,a);if(1==i.length)r=i[0];else if(i.length>1)for(var o=0;o<i.length;o++)r+=(0==o?"":",")+i[o];else x("Label : ["+t+"] Widget does not exist.","err"),r="";return r}function m(t,e,a){if(!U)return 1;if(!t)return 0;if(!F.countWidgetsByLabel)return 0;var n=F.countWidgetsByLabel(t,e,a);return n}function p(t,e,a){return t?void(U&&F.sptPageSetVar&&F.sptPageSetVar(t,e,a)):void n("key","not exist")}function u(t){return t?U?F.sptPageGetVar?F.sptPageGetVar(t):"":"1":(n("key","not exist"),null)}function y(t,e){return U?t&&e?F.sptWgtGetProp?F.sptWgtGetProp(t,e):"":(n("oid, key","not exist"),null):"1"}function T(t,e,a,r){if(U)return t&&e?void(F.sptWgtSetProp&&F.sptWgtSetProp(t,e,a,r)):(n("oid, key","not exist"),null)}function l(t,e){if(U){if(!t||!e)return n("oid, key","not exist"),null;if(F.sptWgtGetData)return F.sptWgtGetData(t,e)}}function c(t,e,a,r){if(U)return t&&e?void(F.sptWgtSetData&&F.sptWgtSetData(t,e,a,r)):(n("oid, key","not exist"),null)}function f(t,e){var a=L();U&&F.runITR&&(t.event=a.ev,F.runITR(t,e,r))}function I(t,e,a,n){U&&F.sptSizeByContent&&F.sptSizeByContent(t,e,a,n)}function v(t,e,a){if(U)return!t||U&&!a?void n("event"+(U&&!a?", stack":""),"not exist"):void(F.sptEval&&(F.sptEval(t,e,a)||console.error("Can not run sptEval function. Code on "+t+", "+e+" does not exist",a)))}function w(t,e){return U?t?F.sptGetLayerID?F.sptGetLayerID(t,e):"":(n("oid","not exist"),null):"1"}function R(t,e,a){return U?t?F.sptFireCustomEvent?F.sptFireCustomEvent(t,e,a,L()):"":(n("msg","not exist"),null):"1"}function h(t,e,a,n){if(U)return F.sptSystem?F.sptSystem(t,e,a,n):void 0}function S(t,e){if(U)return F.sptExeCall?F.sptExeCall(t,e):void 0}function _(t){if(U)return F.sptExeGetURLParam?F.sptExeGetURLParam(t):void 0}function C(){if(U)return F.sptExeIsPreview?F.sptExeIsPreview():void 0}function D(){return U?F.sptPointerOrigin?F.sptPointerOrigin():void 0:"1"}function P(t,e){return!U||(t&&e?F.wgtIsChildOf?F.wgtIsChildOf(t,e):void 0:(n("child wgt id, parent wgt id","not exist"),null))}function b(t,e,a,r){return!U||(e?F.sptWgtBubbling?F.sptWgtBubbling(e,"stop"==t,a,r):void 0:(n("oId","not exist"),null))}function A(t,e,a){b("stop",t,e,a)}function E(t,e){b("resume",t,e)}function x(t,e){var a=""+t;if(!U)return void("warn"==e?console.warn(a):"err"==e?console.error(a):console.log(a));if(F.sptLog){var n=L();F.sptLog(e,a,n)}}function k(a,r,i,o,s){var d=Y.getStateChange(r);if(U&&F){if(null===d){var g=apn.Project.getExeStateByObjectID(F.project,F.getPageID(),a);if(null===g)return void n("chageState","There is no state");for(var m=0;m<g.length;m++)if(g[m].title==r){d=g[m].stateID;break}}if(null===d)return void n("chageState","Unknown state ["+r+"]")}else d=d||r;var p={};p.action="CWS",p.target={},p.target.objectID=a,p.target.stateID=d,p.transit={},t(i,p.transit),e(o,p.transit),f(p,s)}function O(t,e,a){t[e]=function(){return a(arguments)}}function B(t){var e=t||{};for(var a in J)e[a]=J[a];for(var a in e)O(j,a,e[a]);e.wgt=Q,j.wgt={};for(var a in e.wgt)O(j.wgt,a,e.wgt[a]);e.file=q,j.file={};for(var a in e.file)O(j.file,a,e.file[a]);e.exe=Z,j.exe={};for(var a in e.exe)O(j.exe,a,e.exe[a]);e.extern=K,j.extern={};for(var a in e.extern)O(j.extern,a,e.extern[a]);return e}function L(){var t=at.length;return t>0?at[t-1].stack:nt}function W(){var t=at.length;return t>0?at[t-1].param:rt}function z(){var t=at.length;return t>0?at[t-1].objectId:it}var U=!1,F=null,N=5,V={},j={},Y=SCRIPT_EDITOR_BASE,X=SCRIPT_EVAL_FUNCS.wgts,G=SCRIPT_EVAL_FUNCS.globals,$=SCRIPT_EVAL_FUNCS.files,M=SCRIPT_EVAL_FUNCS.exes,H=SCRIPT_EVAL_FUNCS.externs,K={};K.get=function(t){var e=a(H,"get",t);return h("get",e.key)},K.set=function(t){var e=a(H,"set",t);h("set",e.key,e.value,e.wait)},K.run=function(t){var e=a(H,"run",t);return h("run",e.fn,e.param)};var Z={};Z.run=function(t){var e=a(M,"run",t);return S(e.fn,e.param)},Z.getURLParam=function(t){var e=a(M,"getURLParam",t);return _(e.key)},Z.isPreview=function(t){var e=a(M,"isPreview",t);return C(e)};var q={};q.get=function(t){var e=a($,"get",t);return o(e.key)},q.set=function(t){var e=a($,"set",t);i(e.key,e.value,e.wait)},q.browse=function(t){var e=a($,"browse",t);return s(e.key,e.param)};var J={};J.getPage=function(t){var e=a(G,"getPage",t);return d(e.label)},J.getParam=function(t){var e=L(),n=W(),r=z(),i=a(G,"getParam",t);return void 0!==i.index?F.sptResolveParam(r,e.ev,n,i.index):et},J.getWidget=function(t){var e=z(),n=a(G,"getWidget",t);return void 0===n.wgtLabel?e:g(n.wgtLabel,n.parentWgtId)},J.getWidgets=function(t){var e=a(G,"getWidgets",t);return g(e.wgtLabel,e.parentWgtId,e.search)},J.getPointerOrigin=function(t){return D()},J.checkWidget=function(t){var e=a(G,"checkWidget",t);return m(e.wgtLabel,e.parentWgtId,e.search)},J.set=function(t){var e=a(G,"set",t);p(e.key,e.value,e.wait)},J.get=function(t){var e=a(G,"get",t);return u(e.key)},J.linkTo=function(n){var r=a(G,"linkTo",n),i={};i.action="LTP",i.to={},i.to.pageID=r.pageId,i.to.type=1,r.refresh&&(i.to.reset=!0),i.transit={},t(r.effect,i.transit),e(r.timing,i.transit),f(i,r.wait)},J.popupWith=function(e){var n=a(G,"popupWith",e),r={};r.action="LTP",r.to={},r.to.pageID=n.pageId,r.to.type=3,n.refresh&&(r.to.reset=!0),r.transit={},t(n.effect,r.transit),f(r,n.wait)},J.linkToBack=function(n,r){var i=a(G,"linkToBack",n),o={};o.action=r||"LTB",i.refresh&&(o.reset=!0),o.transit={},t(i.effect,o.transit),e(i.timing,o.transit),f(o,i.wait)},J.linkToHome=function(t){linkToBack(t,"LTH")},J.linkToURL=function(t){var e=a(G,"linkToURL",t),r={};r.action="URL",r.target={},r.target.objectID=Y.getTarget(e.target),r.target.objectID?(r.url=e.url,f(r,e.wait)):n("target",e.target)},J.sendDropResult=function(t){var e=a(G,"sendDropResult",t),n={};n.action="FDR",n.result=e.accepted,f(n,e.wait)},J.cloneScriptOf=function(t){var e=L(),n=a(G,"cloneScriptOf",t);n.stack=t[1]||e,U&&(n.stack?v(n.stack.ev,n.srcWgtId,n.stack):x("On cloneScriptOf must have stack","err"))},J.getPointerX=function(t){if(!U)return"1";if(F.sptPointerX)return F.sptPointerX()},J.getPointerY=function(t){if(!U)return"1";if(F.sptPointerY)return F.sptPointerY()},J.reset=function(t){var e=a(G,"reset",t);U&&F.sptResetPage&&F.sptResetPage(e.wait)},J.cancelWait=function(t){var e=a(G,"cancelWait",t);if(!U)return"1";if(F.sptCancelWait)return F.sptCancelWait(e.groupIndex)},J.consoleLog=function(t){var e=a(G,"consoleLog",t);x(e.logMessage,e.logLevel)},J.fireCustomEvent=function(t){var e=a(G,"fireCustomEvent",t);return R(e.msg,e.wait,e.immediately)};var Q={};Q.get=function(t){var e=a(X,"get",t);return y(e.wgtId,e.widgetKey)},Q.set=function(t){var e=a(X,"set",t);if(U&&(!e.wgtId||!e.widgetKey))return void n("oid, key","not exist");var r=e.widgetKey;if("state"==r)return void k(e.wgtId,e.value,"","",e.wait);if("media"==r||"x"==r||"y"==r||"w"==r||"h"==r||"angle"==r||"opacity"==r||"label"==r||"value"==r||"fillStyle"==r||"textItalic"==r||"textBold"==r||"textUnderline"==r||"strokeStyle"==r||"lineDash"==r||"lineWeight"==r||"font"==r||"fontSize"==r||"acceptDrop"==r||"acceptMouseOut"==r||"acceptMouseOver"==r)return void T(e.wgtId,r,e.value,e.wait);var i=e.value;if("visibility"==r&&(i=Y.getVisibility(i),!i))return void n(r,e.value+" is wrong.");if(U){switch(r){case"text":case"visibility":break;case"textColor":i=Y.isColor(i)?i:null;break;case"dragX":case"dragY":case"dragAll":i=Y.isDrag(i),i=i?i:null;break;case"zIndex":i=Y.isZIndex(i),i=i?i:null;break;case"origin":i=i&&void 0!==i.x&&void 0!==i.y?i:null;break;default:return void n(r,"unknown widget key")}if(null===i)return void n(r,e.value+" is wrong")}var o={};switch(o.action="CWP",o.target={},o.target.objectID=e.wgtId,o.set={},r){case"dragAll":o.set.drag={},o.set.drag.dragX=i,o.set.drag.dragY=i;break;case"dragX":case"dragY":o.set.drag={},o.set.drag[r]=i;break;case"origin":o.set.trOrg={},o.set.trOrg.orgX=i.x,o.set.trOrg.orgY=i.y;break;default:o.set[r]=i}f(o,e.wait)},Q.run=function(t){var e=a(X,"run",t);c(e.wgtId,e.key,e.value,e.wait)},Q.setData=function(t){var e=a(X,"setData",t);c(e.wgtId,e.key,e.value,e.wait)},Q.getData=function(t){var e=a(X,"getData",t);return l(e.wgtId,e.key)},Q.moveTo=function(t,n){var r=a(X,n||"moveTo",t),i={},o="moveBy"==n?"positionBy":"position";i.action="CWP",i.set={},i.set[o]={},i.set[o].x=r.x,i.set[o].y=r.y,i.target={},i.target.objectID=r.wgtId,i.timing={},e(r.timing,i.timing),i.trace={};var s=r.tracePath,d="none",g="";if(s){s=s.split(" ");for(var m=0;m<s.length;m++)""==s[m]?(s.splice(m,1),m-=1):Y.isTracePath(s[m])?d=s[m]:isNaN(s[m])||(g=parseFloat(s[m]))}i.trace.type=d,i.trace.ratio=g,f(i,r.wait)},Q.moveBy=function(t){Q.moveTo(t,"moveBy")},Q.sizeTo=function(t,n){var r=a(X,n||"sizeTo",t),i={},o="sizeBy"==n?"sizeBy":"size";i.action="CWP",i.set={},i.set[o]={},i.set[o].w=r.width,i.set[o].h=r.height,"sizeBy"==o&&r.center&&(i.set[o].originCenter=!0),i.target={},i.target.objectID=r.wgtId,i.timing={},e(r.timing,i.timing),f(i,r.wait)},Q.sizeBy=function(t){Q.sizeTo(t,"sizeBy")},Q.sizeByContent=function(t){var n=a(X,"sizeByContent",t),r={};r.action="CWP",r.set={},r.set.sizeBy={},r.set.sizeBy.w=0,r.set.sizeBy.h=0,n.bFromCenter&&(r.set.sizeBy.originCenter=!0),r.target={},r.target.objectID=n.wgtId,r.timing={},e(n.timing,r.timing),I(n.adjustW,n.adjustH,r,n.wait)},Q.zoomTo=function(t,n){var r=a(X,n||"zoomTo",t),i={},o="zoomBy"==n?"zoomBy":"zoom";i.action="CWP",i.set={},i.set[o]={},i.set[o].w=r.width/100,i.set[o].h=r.height/100,"zoomBy"==o&&r.center&&(i.set[o].originCenter=!0),i.target={},i.target.objectID=r.wgtId,i.timing={},e(r.timing,i.timing),f(i,r.wait)},Q.rotateTo=function(t){var n=a(X,"rotateTo",t),r={};r.action="CWP",r.set={},r.set.angle=n.degree*(Math.PI/180),r.target={},r.target.objectID=n.wgtId,r.timing={},e(n.timing,r.timing),f(r,n.wait)},Q.opacityTo=function(t){var n=a(X,"opacityTo",t),r={};r.action="CWP",r.set={},r.set.alpha=n.opacity/100,r.target={},r.target.objectID=n.wgtId,r.timing={},e(n.timing,r.timing),f(r,n.wait)},Q.lineTo=function(t){var n=a(X,"lineTo",t),r={};r.action="CWP",r.set={line:{}},r.set.line.x1=n.startX,r.set.line.x2=n.endX,r.set.line.y1=n.startY,r.set.line.y2=n.endY,r.target={},r.target.objectID=n.wgtId,r.timing={},e(n.timing,r.timing),f(r,n.wait)},Q.zIndexTo=function(t){var e=a(X,"zIndexTo",t),n={};n.action="CWP",n.set={},n.set.zIndex=e.zIndexTo,n.target={},n.target.objectID=e.wgtId,f(n,e.wait)},Q.changeState=function(t){var e=a(X,"changeState",t);k(e.wgtId,e.stateChange,e.effect,e.timing,e.wait)},Q.clone=function(t){var e=a(X,"clone",t);if(U){if(!e.wgtId)return void n("oid","not exist");if(F.sptWgtClone){var r=F.sptWgtClone(e.wgtId,e.parentWgtId,e.parentLayerTitle);if(r)return r;n("Wiget clone fail",e.wgtId)}}return"1"},Q.getLayer=function(t){var e=a(X,"getLayer",t);return w(e.wgtId,e.layerTitle)},Q.isChildOf=function(t){var e=a(X,"isChildOf",t);return P(e.wgtId,e.parentWgtId)},Q.stopBubbling=function(t){var e=a(X,"stopBubbling",t);return A(e.wgtId,e.evTitle,e.once)},Q.resumeBubbling=function(t){var e=a(X,"resumeBubbling",t);return E(e.wgtId,e.evTitle)},B(V);var tt={},et=null;tt.getStubs=function(){return V},tt.getEvalStubs=function(){return j},tt.setRunMode=function(t){U=t},tt.setRunApx=function(t){F=t};var at=[],nt=null,rt=null,it="";return tt.setOidAndParam=function(t,e,a){at.push({param:e,stack:a,objectId:t}),rt=e,nt=a,it=t,et=e,void 0!==e&&(et=F.sptResolveParam(t,a.ev,e))},tt.removeOidAndParam=function(){at.pop()},tt.EVAL=function(t,e,a,n,r){this.setRunMode(!0),this.setRunApx(e),tt.setOidAndParam(a,n,r),r.depth<=N?(scriptInterpreter.setStubs(V),scriptInterpreter.run(t,a,et,r)):console.error("OVER EVAL MAX DEPTH"),tt.removeOidAndParam()},tt.getLine=function(){return scriptInterpreter.getLine()},tt}window.SCRIPT_EVAL_FUNCS=window.SCRIPT_EVAL_FUNCS||{},window.SCRIPT_EDITOR_DATA=window.SCRIPT_EDITOR_DATA||{},window.SCRIPT_EDITOR_BASE=window.SCRIPT_EDITOR_BASE||{},function(){function t(t,e){e.dir?(u.push(t+"Left"),u.push(t+"Right"),u.push(t+"Bottom"),u.push(t+"Top"),e.popup&&(y.push(t+"Left"),y.push(t+"Right"),y.push(t+"Bottom"),y.push(t+"Top"))):(u.push(t),e.popup&&y.push(t))}var e={getParam:{ret:!0,params:[{name:"index",mandatory:!1,dataType:"string"}]},getPage:{ret:!0,params:[{name:"label",mandatory:!1,dataType:"string"}]},getWidget:{ret:!0,params:[{name:"wgtLabel",mandatory:!1,dataType:"string"},{name:"parentWgtId",mandatory:!1,dataType:"string"}]},getWidgets:{ret:!0,params:[{name:"wgtLabel",mandatory:!1,dataType:"string"},{name:"parentWgtId",mandatory:!1,dataType:"string"},{name:"search",mandatory:!1,dataType:"boolean"}]},getPointerOrigin:{ret:!0,params:[]},checkWidget:{ret:!0,params:[{name:"wgtLabel",mandatory:!0,dataType:"string"},{name:"parentWgtId",mandatory:!1,dataType:"string"},{name:"search",mandatory:!1,dataType:"boolean"}]},set:{ret:!1,params:[{name:"key",mandatory:!0,dataType:"string"},{name:"value",mandatory:!0,dataType:"any"},{name:"wait",mandatory:!1,dataType:"string"}]},get:{ret:!0,retType:"any",params:[{name:"key",mandatory:!0,dataType:"string"}]},linkTo:{ret:!1,params:[{name:"pageId",mandatory:!0,dataType:"string"},{name:"effect",mandatory:!1,dataType:"string"},{name:"timing",mandatory:!1,dataType:"string"},{name:"refresh",mandatory:!1,dataType:"boolean"},{name:"wait",mandatory:!1,dataType:"string"}]},popupWith:{ret:!1,params:[{name:"pageId",mandatory:!0,dataType:"string"},{name:"effect",mandatory:!1,dataType:"string"},{name:"refresh",mandatory:!1,dataType:"boolean"},{name:"wait",mandatory:!1,dataType:"string"}]},linkToBack:{ret:!1,params:[{name:"effect",mandatory:!1,dataType:"string"},{name:"timing",mandatory:!1,dataType:"string"},{name:"refresh",mandatory:!1,dataType:"boolean"},{name:"wait",mandatory:!1,dataType:"string"}]},linkToHome:{ret:!1,params:[{name:"effect",mandatory:!1,dataType:"string"},{name:"timing",mandatory:!1,dataType:"string"},{name:"refresh",mandatory:!1,dataType:"boolean"},{name:"wait",mandatory:!1,dataType:"string"}]},linkToURL:{ret:!1,params:[{name:"target",mandatory:!0,dataType:"string"},{name:"url",mandatory:!0,dataType:"url"},{name:"wait",mandatory:!1,dataType:"string"}]},sendDropResult:{ret:!1,params:[{name:"accepted",mandatory:!0,dataType:"boolean"},{name:"wait",mandatory:!1,dataType:"string"}]},cloneScriptOf:{ret:!1,params:[{name:"srcWgtId",mandatory:!1,dataType:"string"}]},getPointerX:{ret:!0,params:[]},getPointerY:{ret:!0,params:[]},reset:{ret:!1,params:[{name:"wait",mandatory:!1,dataType:"string"}]},cancelWait:{ret:!0,params:[{name:"groupIndex",mandatory:!0,dataType:"string"}]},consoleLog:{ret:!1,params:[{name:"logMessage",mandatory:!1,dataType:"string"},{name:"logLevel",mandatory:!1,dataType:"string"}]},fireCustomEvent:{ret:!1,params:[{name:"msg",mandatory:!0,dataType:"string"},{name:"wait",mandatory:!1,dataType:"string"},{name:"immediately",mandatory:!1,dataType:"boolean"}]}};SCRIPT_EVAL_FUNCS.globals=e;var a={run:{ret:!0,retType:"any",params:[{name:"fn",mandatory:!0,dataType:"string"},{name:"param",mandatory:!1,dataType:"any"}]},getURLParam:{ret:!0,retType:"string",params:[{name:"key",mandatory:!0,dataType:"string"}]},isPreview:{ret:!0,retType:"boolean",params:[]}};SCRIPT_EVAL_FUNCS.exes=a;var n={get:{ret:!0,retType:"any",params:[{name:"key",mandatory:!0,dataType:"string"}]},set:{ret:!1,params:[{name:"key",mandatory:!0,dataType:"string"},{name:"value",mandatory:!0,dataType:"any"},{name:"wait",mandatory:!1,dataType:"string"}]},browse:{ret:!0,retType:"any",params:[{name:"key",mandatory:!0,dataType:"string"},{name:"param",mandatory:!1,dataType:"any"}]}};SCRIPT_EVAL_FUNCS.files=n;var r={get:{ret:!0,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"widgetKey",mandatory:!0,dataType:"string"}]},set:{ret:!1,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"widgetKey",mandatory:!0,dataType:"string"},{name:"value",mandatory:!0,dataType:"any"},{name:"wait",mandatory:!1,dataType:"string"}]},getData:{ret:!0,retType:"any",params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"key",mandatory:!0,dataType:"string"}]},setData:{ret:!1,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"key",mandatory:!0,dataType:"string"},{name:"value",mandatory:!0,dataType:"any"},{name:"wait",mandatory:!1,dataType:"string"}]},moveTo:{ret:!1,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"x",mandatory:!0,dataType:"number"},{name:"y",mandatory:!0,dataType:"number"},{name:"wait",mandatory:!1,dataType:"string"},{name:"timing",mandatory:!1,dataType:"string"},{name:"tracePath",mandatory:!1,dataType:"string"}]},moveBy:{ret:!1,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"x",mandatory:!0,dataType:"number"},{name:"y",mandatory:!0,dataType:"number"},{name:"wait",mandatory:!1,dataType:"string"},{name:"timing",mandatory:!1,dataType:"string"},{name:"tracePath",mandatory:!1,dataType:"string"}]},sizeTo:{ret:!1,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"width",mandatory:!0,dataType:"number"},{name:"height",mandatory:!0,dataType:"number"},{name:"wait",mandatory:!1,dataType:"string"},{name:"timing",mandatory:!1,dataType:"string"}]},sizeBy:{ret:!0,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"width",mandatory:!0,dataType:"number"},{name:"height",mandatory:!0,dataType:"number"},{name:"center",mandatory:!1,dataType:"boolean"},{name:"wait",mandatory:!1,dataType:"string"},{name:"timing",mandatory:!1,dataType:"string"}]},sizeByContent:{ret:!1,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"adjustW",mandatory:!0,dataType:"boolean"},{name:"adjustH",mandatory:!0,dataType:"boolean"},{name:"bFromCenter",mandatory:!1,dataType:"boolean"},{name:"wait",mandatory:!1,dataType:"string"},{name:"timing",mandatory:!1,dataType:"string"}]},zoomTo:{ret:!1,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"width",mandatory:!0,dataType:"number"},{name:"height",mandatory:!0,dataType:"number"},{name:"wait",mandatory:!1,dataType:"string"},{name:"timing",mandatory:!1,dataType:"string"}]},rotateTo:{ret:!1,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"degree",mandatory:!0,dataType:"number"},{name:"wait",mandatory:!1,dataType:"string"},{name:"timing",mandatory:!1,dataType:"string"}]},opacityTo:{ret:!1,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"opacity",mandatory:!0,dataType:"float"},{name:"wait",mandatory:!1,dataType:"string"},{name:"timing",mandatory:!1,dataType:"string"}]},lineTo:{ret:!1,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"startX",mandatory:!0,dataType:"number"},{name:"startY",mandatory:!0,dataType:"number"},{name:"endX",mandatory:!0,dataType:"number"},{name:"endY",mandatory:!0,dataType:"number"},{name:"wait",mandatory:!1,dataType:"string"},{name:"timing",mandatory:!1,dataType:"string"}]},changeState:{ret:!1,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"stateChange",mandatory:!0,dataType:"string"},{name:"wait",mandatory:!1,dataType:"string"},{name:"effect",mandatory:!1,dataType:"string"},{name:"timing",mandatory:!1,dataType:"string"}]},zIndexTo:{ret:!1,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"zIndexTo",mandatory:!0,dataType:"string"},{name:"wait",mandatory:!1,dataType:"string"}]},clone:{ret:!0,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"parentWgtId",mandatory:!1,dataType:"string"},{name:"parentLayerTitle",mandatory:!1,dataType:"string"}]},getLayer:{ret:!0,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"layerTitle",mandatory:!1,dataType:"string"}]},run:{ret:!1,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"key",mandatory:!0,dataType:"string"},{name:"value",mandatory:!1,dataType:"any"},{name:"wait",mandatory:!1,dataType:"string"}]},isChildOf:{ret:!0,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"parentWgtId",mandatory:!0,dataType:"string"}]},stopBubbling:{ret:!0,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"evTitle",mandatory:!1,dataType:"string"},{name:"once",mandatory:!1,dataType:"boolean"}]},resumeBubbling:{ret:!0,params:[{name:"wgtId",mandatory:!0,dataType:"string"},{name:"evTitle",mandatory:!1,dataType:"string"}]}};SCRIPT_EVAL_FUNCS.wgts=r;var i={run:{ret:!0,retType:"any",params:[{name:"fn",mandatory:!0,dataType:"string"},{name:"param",mandatory:!1,dataType:"any"}]},get:{ret:!0,retType:"any",params:[{name:"key",mandatory:!0,dataType:"string"}]},set:{ret:!1,params:[{name:"key",mandatory:!0,dataType:"string"},{name:"value",mandatory:!0,dataType:"any"},{name:"wait",mandatory:!1,dataType:"string"}]}};SCRIPT_EVAL_FUNCS.externs=i;var o={cardUp:{dir:!0,title:"Card Out"},NONE:{},dissolve:{title:"Dissolve",popup:!0},zoomIn:{title:"Zoom In",popup:!0},zoomOut:{title:"Zoom Out",popup:!0},fall:{title:"Fall"},newspaper:{title:"Newspaper"},move:{dir:!0,title:"Slide"},slideUp:{dir:!0,title:"Slide In"},glue:{dir:!0,title:"Glue"},timeLag:{dir:!0,title:"Time-lag"},cube:{dir:!0,title:"Cube In"},flip:{dir:!0,title:"Flip"}};for(var s in o)o[s].displayKey=!0;var d={NONE:{},linear:{},ease:{},"ease-in":{},"ease-out":{},"ease-in-out":{},"ease-out-in":{}},g="",m="",p=[];for(g in d)m=g+("NONE"!=g?" 0ms":""),p.push(m);for(g in d)"NONE"!=g&&(m=g+" 0ms roundTrip",p.push(m));var u=[],y=[];for(g in o)o[g].displayKey&&t(g,o[g]);var T=[],l={};T.push("wgt"),l.wgt={type:"object"},T.push("file"),l.file={type:"object"},T.push("exe"),l.exe={type:"object"},T.push("extern"),l.extern={type:"object"};for(g in e)T.push(g),l[g]={type:"function"};var c=[];for(g in r)c.push(g);var f=[];for(g in n)f.push(g);var I=[];for(g in a)I.push(g);var v=[];for(g in i)v.push(g);SCRIPT_EDITOR_DATA.exe=I,SCRIPT_EDITOR_DATA.extern=v,SCRIPT_EDITOR_DATA.file=f,SCRIPT_EDITOR_DATA.timing=p,SCRIPT_EDITOR_DATA.effect=u,SCRIPT_EDITOR_DATA["popup-effect"]=y,SCRIPT_EDITOR_DATA.global=T,SCRIPT_EDITOR_DATA["global-meta"]=l,SCRIPT_EDITOR_DATA.wgt=c,SCRIPT_EDITOR_DATA.refresh=["false","true"],SCRIPT_EDITOR_DATA.center=["true","false"],SCRIPT_EDITOR_DATA.zIndex=["Top","Bottom","Restore"],SCRIPT_EDITOR_DATA.search=["true","false"],SCRIPT_EDITOR_DATA.adjustW=["true","false"],SCRIPT_EDITOR_DATA.adjustH=["true","false"],SCRIPT_EDITOR_DATA.bFromCenter=["true","false"],SCRIPT_EDITOR_DATA.truefalse=["true","false"],SCRIPT_EDITOR_DATA.widgetKey=["text","textColor","font","fontSize","textItalic","textBold","textUnderline","visibility","x","y","w","h","angle","origin","opacity","state","dragX","dragY","dragAll","label","zIndex","media","value","fillStyle","strokeStyle","lineDash","lineWeight","acceptDrop","acceptMouseOut","acceptMouseOver"],SCRIPT_EDITOR_DATA.visibilitySet=["visible","visibleEventPass","visibleEventBlock","hidden"],SCRIPT_EDITOR_DATA.visibilitySetValue={visible:"Show",visibleEventPass:"Pass",visibleEventBlock:"Block",hidden:"Hide"},SCRIPT_EDITOR_DATA.target=["currentFrame","currentTab","newTab"],SCRIPT_EDITOR_DATA.targetValue={currentFrame:"$URL_CF",currentTab:"$URL_CW",newTab:"$URL_NW"},SCRIPT_EDITOR_DATA.tracePath=["NONE","arcCW 1.0","arcCCW 1.0"],SCRIPT_EDITOR_DATA.stateChange=["","state.forward","state.backward","state.forwardRoundUp","state.backwardRoundUp"],SCRIPT_EDITOR_DATA.stateChangeValue={"state.forward":"$F","state.backward":"$B","state.forwardRoundUp":"$RF","state.backwardRoundUp":"$RB"},SCRIPT_EDITOR_DATA.logLevel=["warn","err"],SCRIPT_EDITOR_BASE.effects=u,SCRIPT_EDITOR_BASE.timings=d,SCRIPT_EDITOR_DATA.zIndexTo=["top","bottom","restore"],SCRIPT_EDITOR_BASE.getTarget=function(t){return SCRIPT_EDITOR_DATA.targetValue[t]},SCRIPT_EDITOR_BASE.getStateChange=function(t){var e=t;return"state.barkwardRoundUp"==t&&(e="state.backwardRoundUp"),SCRIPT_EDITOR_DATA.stateChangeValue[e]||null},SCRIPT_EDITOR_BASE.getVisibility=function(t){return SCRIPT_EDITOR_DATA.visibilitySetValue[t]},SCRIPT_EDITOR_BASE.isEffect=function(t){for(var e=0;e<u.length;e++)if(u[e]==t)return!0;return!1};var w=/^\d*ms$/;SCRIPT_EDITOR_BASE.isDuration=function(t){return!isNaN(t)||w.test(t)},SCRIPT_EDITOR_BASE.isTiming=function(t){return!!d[t]},SCRIPT_EDITOR_BASE.isRoundTrip=function(t){return"roundTrip"==t},SCRIPT_EDITOR_BASE.isTracePath=function(t){for(var e=0;e<SCRIPT_EDITOR_DATA.tracePath.length;e++)if(SCRIPT_EDITOR_DATA.tracePath[e].indexOf(t)!=-1)return isNaN(t);return!1},SCRIPT_EDITOR_BASE.isDrag=function(t){for(var e=0;e<SCRIPT_EDITOR_DATA.truefalse.length;e++){if(t===!0&&"true"==SCRIPT_EDITOR_DATA.truefalse[e])return"Yes";if(t===!1&&"false"==SCRIPT_EDITOR_DATA.truefalse[e])return"No";if("Yes"==t)return t;if("No"==t)return t}return!1},SCRIPT_EDITOR_BASE.isZIndex=function(t){for(var e=0;e<SCRIPT_EDITOR_DATA.zIndex.length;e++)if(t==SCRIPT_EDITOR_DATA.zIndex[e])return t.toLowerCase();return!1};var R=/^#[0-9a-f]{3,6}$/i,h=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\)$/;SCRIPT_EDITOR_BASE.isColor=function(t){return!!R.test(t)||(!!h.test(t)||"transparent"==t)};var S=[],_=/.*wgt\.set*[^\(]*\(\s*([^\)]*)\)/,C=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/g;S.push({chk:"visibility",ret:"visibilitySet",pos:1,reg:_}),S.push({chk:"zIndex",ret:"zIndex",pos:1,reg:_}),S.push({chk:"state",ret:"stateChange",pos:1,reg:_}),S.push({chk:"zIndexTo",ret:"zIndexTo",pos:1,reg:_}),S.push({chk:"acceptDrop",ret:"truefalse",pos:1,reg:_}),S.push({chk:"dragAll",ret:"truefalse",pos:1,reg:_}),S.push({chk:"dragX",ret:"truefalse",pos:1,reg:_}),S.push({chk:"dragY",ret:"truefalse",pos:1,reg:_}),S.push({chk:"textBold",ret:"truefalse",pos:1,reg:_}),S.push({chk:"textItalic",ret:"truefalse",pos:1,reg:_}),S.push({chk:"textUnderline",ret:"truefalse",pos:1,reg:_}),SCRIPT_EDITOR_BASE.changeSeletedWord=function(t){for(var e=null,a=0;a<S.length;a++){e=S[a];var n=e.reg.exec(t);if(n&&n[1]){var r=n[1].replace(C,"").split(",");if(r[e.pos]&&r[e.pos].indexOf(e.chk)!=-1)return e.ret}}return null}}();
var xa=apn.inheritWidget(apn.widgets["apn.wgt.layerContainer"]);xa.BLACKBOX_MODEL=!0,xa.editor=xa.editor||{},xa.editor.iconThumb="DB/EDU/imgs/wgts/thumbs/spriteAnimation.png",xa.editor.states={play:"Play",loop:"Loop",stop:"Stop"},xa.properties.state="stop",xa.properties.attrs={apxAnimate:!0,cfg:{idStep:""}},xa.createAsCanvasObject=function(t,e,a,i,n){return apn.IWidget.createCanvasObject(t,apn.widgets["apn.wgt.layerContainer"],"apn.CLayerContainer",bx.CCanvasWnd.SHAPE_RECT,e,a,i,n,{orderedActive:!0})},xa.exeFireStateEvent=void 0,xa.exeSetState=function(t,e,a){a&&("play"==a||"loop"==a?t.wgtAniCheck(t.wgtId(e))>1&&t.wgtAniRun(t.wgtId(e),"play"==a?1:2)&&t.fireEvent("animation","Start",e.apnOID):"stop"==a&&t.wgtAniSet(t.wgtId(e)))},xa.exeOnLoad=function(t,e){function a(a,i){if(a==n.idStep&&i){var r=apn.Project.getStateByObjectID(t.viewer.project,t.getPageID(),e);r&&(apn.UTIL.sort(r,"order",1,!0),r[i.current]&&r[i.current].stateID&&t.wgtSetProperty(e,"apxLayer",r[i.current].stateID))}}if(!apn.IWidget.isInAnimation(t,e)){var i=t.wgtTag(e);apn.CExe.ACCEL(i)}var n=t.wgtGetProperty(e,"cfg");n&&n.idStep&&t.wgtTag(n.idStep)&&t.wgtListenProperty(e,"apxStep",a)},xa.edtSetupStep=function(t,e,a,i){var n=t.getScreenData(),r=[{title:apn.CExe.GL({ko:"[없음]",en:"[None]"}),value:""}];for(var o in n.objects)n.objects[o].create&&n.objects[o].create.data&&n.objects[o].create.data.properties&&n.objects[o].create.data.properties.attrs&&n.objects[o].create.data.properties.attrs.apxStep&&r.push({value:o,title:t.itrGetObjectTitle(o)});eduLib.edtInputAdd(t,a,{type:"select",options:r,title:apn.CExe.GL({ko:"연동할 위젯",en:"Widget to interface with"})+" (m)",key:"idStep",value:i,join:!0})},xa.edtOnConfig=function(t,e){function a(){eduLib.edtInputApplyAll(t,i),t.wgtSetProperty(e,"cfg",n)}var i,n=t.wgtGetProperty(e,"cfg")||{idStep:""};(i=t.dlgDoModal(600,180,a))&&this.edtSetupStep(t,e,i,n)},xa.onEdit=function(t,e){apn.widgets.utils.editWidget(t.getObjectByID(e),t,2,!0,{layerTitleFromOrder:!0,layerDuration:apx.wgt.spriteDefaultFrameDuration,layerOrdering:!0,layerScrollbar:"always"})},eduWgtAnimSprite=xa,xa=apn.inheritWidget(apn.widgets["apn.wgt.sceneContainer"]),xa.BLACKBOX_MODEL=!0,xa.exeItrNoResize=!0,xa.editor=xa.editor||{},xa.editor.iconThumb="DB/EDU/imgs/wgts/thumbs/sceneAnimation.png",xa.editor.states={play:"Play",loop:"Loop",stop:"Stop",stopL:"StopAtLast"},xa.properties.state="stop",xa.properties.attrs={apxAnimate:!0},xa.exeSetState=function(t,e,a){function i(t,e){return void 0===t.order&&void 0===e.order?0:void 0===t.order?1:void 0===e.order?-1:t.order-e.order}if(a)if("stopL"==a){var n=apn.Project.getStateByObjectID(t.project,t.getPageID(),e.apnOID);n&&n.length>0&&(n.sort(i),t.wgtAniSet(t.wgtId(e),void 0,n[n.length-1].stateID))}else eduWgtAnimSprite.exeSetState.call(this,t,e,a)},xa.exeOnLoad=eduWgtAnimSprite.exeOnLoad,xa.onEdit=function(t,e){apn.widgets.utils.editWidget(t.getObjectByID(e),t,1,!0,{layerTitleFromOrder:!0,layerDuration:apx.wgt.spriteDefaultFrameDuration,layerOrdering:!0,layerScrollbar:"always",wgtsShow:apn.widgets["apn.wgt.sceneContainer"].WGTS_SHOW,editNoGroup:!0})},eduWgtAnimScene=xa,xa=apn.inheritWidget(apn.widgets["apn.wgt.layerContainer"]),xa.editor=xa.editor||{},xa.editor.iconThumb="DB/EDU/imgs/wgts/common/icon_thumb.png",xa.properties.attrs={apxAnimateHolder:!0},xa.exeSetState=void 0,xa.exeOnLoad=function(t,e){if(!apn.IWidget.isInAnimation(t,e)){var a=t.wgtTag(e);apn.CExe.ACCEL(a)}},xa.onEdit=function(t,e){apn.widgets.utils.editWidget(t.getObjectByID(e),t,2,!0,{layerTitlePrefix:"State",layerScrollbar:"always"})},eduWgtAnimHolder=xa,xa=apn.inheritWidget(eduWgtAnimHolder),xa.editor=xa.editor||{},xa.editor.iconThumb="DB/EDU/imgs/wgts/thumbs/sceneAnimation.png",xa.properties.attrs={apxAnimateHolder:!0},xa.exeSetState=function(t,e,a,n){var r,o,d=t.screen.objects[e.apnOID].layout.layers;for(i in d)for(r=t.getWidgetsByProperty("apxAnimate",d[i].id),o=0;o<r.length;o++)i!=a?t.wgtSetProperty(r[o],"apxState","stop"):t.wgtSetProperty(r[o],"apxState","loop");a!=n&&t.fireEvent("stateChange",a,e.apnOID)},xa.exeOnStart=function(t,e){var a=this;setTimeout(function(){a.exeSetState(t,t.wgtTag(e),t.stateGetActive(e))},0)},eduWgtAnimHolder2=xa;var xa=apn.inheritWidget(apn.widgets["apn.wgt.audio"]);void 0!==xa.properties.attrs.stp&&delete xa.properties.attrs.stp,xa.editor.states=void 0,xa.exeSetState=function(t,e,a,i){if(apn.widgets["apn.wgt.audio"].exeSetState.call(this,t,e,a,i),0==a.indexOf("T:")){var n=parseInt(a.substring(2));e.apnPlayList&&e.apnPlayList[n-1]?t.wgtControlMedia(e.apnOID,"play",n,!0):t.log(e.apnOID,"Invalid track is requested to play. TrackId="+n)}},xa.exeOnLoad=function(t,e){apn.widgets["apn.wgt.audio"].exeOnLoad.call(this,t,e);var a,i,n=t.wgtTag(e);if(i=t.wgtGetProperty(e,"URLs"))for(var r=0;r<i.length;r++)i[r].URL&&(a=a||[],a.push(i[r].URL));else if(i=t.wgtGetProperty(e,"list"))for(var r=0;r<i.length;r++)i[r].audio.mediaID&&(a=a||[],a.push(i[r].audio.mediaID));a&&a.length&&(this.exeAssetLoad(t,t.wgtTag(e),a),n._mediaLoaded=!0),t.wgtGetProperty(e,"cfg")&&"Y"==t.wgtGetProperty(e,"cfg").bg&&(n.apxBackgroundRun=!0)},xa.exeOnStart=function(t,e){apn.widgets["apn.wgt.audio"].exeOnStart.call(this,t,e),this.exeOnResume(t,e)},xa.exeOnResume=function(t,e){var a=t.wgtTag(e);if(!a._mediaLoaded){var i;i=t.ctxGet("eduAudioPlayList"),i&&i.length&&this.exeAssetLoad(t,t.wgtTag(e),i)}},xa.exeInputGet=function(t,e){var a;if(e._newList)a=e._newList;else{a=[];var i=t.wgtGetProperty(e.apnOID,"list");if(i)for(var n=0;n<i.length;n++)i[n].audio.mediaID&&a.push(i[n].audio.mediaID)}return JSON.stringify(a)},xa.edtOnInputGet=function(t,e,a){var i,n=[];if((i=t.pages[e].objects[a].create.data)&&i.properties&&i.properties.attrs&&i.properties.attrs.list)for(var r=i.properties.attrs.list,o=0;o<r.length;o++)r[o].audio.mediaID&&n.push(r[o].audio.mediaID);return JSON.stringify(n)},xa.exeInputSet=function(t,e,a){var i;try{i=JSON.parse(a)}catch(t){}if(i&&i instanceof Array&&i.length){this.exeAssetLoad(t,e,i),e._mediaLoaded=!0,e._newList=i;var n=t.wgtGetProperty(e.apnOID,"list");n.length=0;for(var r=0;r<i.length;r++)n.push({audio:{mediaID:i[r]}})}else t.log(e.apnOID,"Invalid value is set, value="+a)},xa.onEdit=void 0,xa.edtOnConfig=function(t,e){function a(){eduLib.edtInputApplyAll(t,n),t.wgtSetProperty(e,"URLs",r)}function i(){eduLib.edtInputApplyAll(t,n),d.apxApCH&&(d.apxApCH=parseInt(d.apxApCH)),o[0]&&o[0].audio.mediaID&&t.wgtSetProperty(e,"apxMediaID",o[0].audio.mediaID),t.wgtSetProperty(e,"list",o),t.wgtSetProperty(e,"cfg",d)}var n;if(t.wgtGetProperty(e,"URLs")){var r=t.wgtGetProperty(e,"URLs");t.wgtGetProperty(e,"noMultiTrack")?(n=t.dlgDoModal(500,200,a))&&eduLib.edtInputAdd(t,n,{type:"table",value:r,options:{th:["Audio URL"]},td:[{type:"text",key:"URL"}]}):(n=t.dlgDoModal(500,400,a))&&eduLib.edtInputAdd(t,n,{type:"table",value:r,options:{th:["Audio URL"],add:!0,remove:!0},td:[{type:"text",key:"URL"}]})}else{var o=t.wgtGetProperty(e,"list"),d=t.wgtGetProperty(e,"cfg")||{};if(o=o||[{audio:{mediaID:void 0}}],n=t.dlgDoModal(900,Math.floor(.8*bx.UX.height),i)){if(eduLib.edtInputAdd(t,n,{type:"table",value:o,options:{th:["Audio","Comment"],add:!0,remove:!0,order:!0},td:[{type:"audio",key:"audio",acceptFileName:!0},{type:"text",key:"cmt",width:"400px"}]}),eduLib.edtInputAdd(t,n,{type:"space"}),apn.CExe.IWidget_getAudioAutoplayCount(t.getData())){for(var p=[],s=0;s<apn.CExe.IWidget_getAudioAutoplayCount(t.getData());s++)p.push({title:s+1,value:s+1});p.push({title:"Do not use",value:""}),eduLib.edtInputAdd(t,n,{type:"title",title:"Use mobile autoplay channel"}),eduLib.edtInputAdd(t,n,{type:"select",title:"Channel ID",value:d,key:"apxApCH",options:p}),eduLib.edtInputAdd(t,n,{type:"space"})}eduLib.edtInputAdd(t,n,{type:"title",title:"More options"}),eduLib.edtInputAdd(t,n,{type:"select",title:"Background play",value:d,key:"bg",options:[{title:"Yes",value:"Y"},{title:"No",value:"N"}]})}}},xa.edtOnBuildState=function(t,e,a,i){for(var n in apn.widgets["apn.wgt.audio"].editor.states)i[n]=apn.widgets["apn.wgt.audio"].editor.states[n];var r=t.pages[a].objects[e].create.data;if(!(r&&r.properties&&r.properties.attrs&&r.properties.attrs.v>=2)){var o=1;if(r&&r.properties&&r.properties.attrs&&r.properties.attrs.URLs)for(n=0;n<r.properties.attrs.URLs.length;n++)r.properties.attrs.URLs[n].URL&&(i["T:"+o]="PlayTrack "+o,o++);else if(r&&r.properties&&r.properties.attrs&&r.properties.attrs.list)for(n=0;n<r.properties.attrs.list.length;n++)r.properties.attrs.list[n].audio.mediaID&&(i["T:"+o]="PlayTrack "+o,o++)}},xa.edtOnBuildEvent=function(t,e,a,n){var r=1,o=t.pages[a].objects[e].create.data;if(o&&o.properties&&o.properties.attrs&&o.properties.attrs.URLs)for(i=0;i<o.properties.attrs.URLs.length;i++)o.properties.attrs.URLs[i].URL&&(n.media.param["trS_"+r]="TrackStart"+r,n.media.param["trE_"+r]="TrackEnd"+r,n.media.param["trEN_"+r]="TrackEndNormal"+r,r++);else if(o&&o.properties&&o.properties.attrs&&o.properties.attrs.list)for(i=0;i<o.properties.attrs.list.length;i++)o.properties.attrs.list[i].audio.mediaID&&(n.media.param["trS_"+r]="TrackStart"+r,n.media.param["trE_"+r]="TrackEnd"+r,n.media.param["trEN_"+r]="TrackEndNormal"+r,r++)},eduWgtAudioPlayer=xa;var xa=apn.inheritWidget(apn.widgets["apn.wgt.audio"]);xa.editor.states=void 0,xa.exeInputSet=eduWgtAudioPlayer.exeInputSet,xa.exeInputGet=eduWgtAudioPlayer.exeInputGet,xa.edtOnInputGet=eduWgtAudioPlayer.edtOnInputGet,xa.properties=xa.properties||{},xa.properties.attrs=xa.properties.attrs||{},xa.properties.attrs.list=[{audio:{mediaID:void 0}}],xa.properties.attrs.noMultiTrack=!0,void 0!==xa.properties.attrs.apxStep&&delete xa.properties.attrs.apxStep,void 0!==xa.properties.attrs.stp&&delete xa.properties.attrs.stp,xa.exeSetState=function(t,e,a,i){if(apn.widgets["apn.wgt.audio"].exeSetState.call(this,t,e,a,i),0==a.indexOf("T:")){for(var n,r=parseInt(a.substring(2)),o=t.wgtGetProperty(e.apnOID,"list"),d=0,p=0;p<o.length;p++)if(o[p].audio.mediaID&&(d++,d==r)){e.apnTrackPlayIdx=r,this.exeAssetLoad(t,e,o[p].audio.mediaID),t.wgtControlMedia(e.apnOID,"play"),n=!0;break}n||t.log(e.apnOID,"Invalid track is requested to play. TrackId="+r)}},xa.onEdit=void 0,xa.exeOnLoad=function(t,e){apn.widgets["apn.wgt.audio"].exeOnLoad.call(this,t,e);var a,i=t.wgtTag(e);if(listPrp=t.wgtGetProperty(e,"list"))for(var n=0;n<listPrp.length;n++)if(listPrp[n].audio.mediaID){a=listPrp[n].audio.mediaID;break}a&&(i.apnTrackPlayIdx=1,this.exeAssetLoad(t,t.wgtTag(e),a))},xa.edtOnConfig=function(t,e){function a(){eduLib.edtInputApplyAll(t,i),r.apxApCH&&(r.apxApCH=parseInt(r.apxApCH)),n[0]&&n[0].audio.mediaID&&t.wgtSetProperty(e,"apxMediaID",n[0].audio.mediaID),t.wgtSetProperty(e,"list",n),t.wgtSetProperty(e,"cfg",r)}var i,n=t.wgtGetProperty(e,"list"),r=t.wgtGetProperty(e,"cfg")||{};if((i=t.dlgDoModal(900,Math.floor(.8*bx.UX.height),a))&&(eduLib.edtInputAdd(t,i,{type:"table",value:n,options:{th:["Audio","Comment"],add:!0,remove:!0,order:!0},td:[{type:"audio",key:"audio",acceptFileName:!0},{type:"text",key:"cmt",width:"400px"}]}),apn.CExe.IWidget_getAudioAutoplayCount(t.getData()))){for(var o=[],d=0;d<apn.CExe.IWidget_getAudioAutoplayCount(t.getData());d++)o.push({title:d+1,value:d+1});o.push({title:"Do not use",value:""}),eduLib.edtInputAdd(t,i,{type:"space"}),eduLib.edtInputAdd(t,i,{type:"title",title:"Use mobile autoplay channel"}),eduLib.edtInputAdd(t,i,{type:"select",title:"Channel ID",value:r,key:"apxApCH",options:o})}},xa.edtOnBuildState=eduWgtAudioPlayer.edtOnBuildState,xa.edtOnBuildEvent=function(t,e,a,i){eduWgtAudioPlayer.edtOnBuildEvent.call(this,t,e,a,i),delete i.media.param.trackStart,delete i.media.param.trackEnd,delete i.media.param.trackEndN},eduWgtAudioPlayerMF=xa;var xa=apn.inheritWidget(apn.widgets["apn.wgt.video"]);xa.exeAssetDelayedLoad=!0,xa.exeOnLoad=function(t,e){apn.widgets["apn.wgt.video"].exeOnLoad.call(this,t,e);var a,i,n=t.wgtTag(e);if(i=t.wgtGetProperty(e,"URLs")){for(var r,o=0;o<i.length;o++)if(i[o].subURL){r=!0;break}for(var o=0;o<i.length;o++)r?(i[o].vURL||i[o].subURL)&&(a=a||{main:[],sub:[]},a.main.push(i[o].vURL),a.sub.push(i[o].subURL)):i[o].vURL&&(a=a||[],a.push(i[o].vURL))}else if(i=t.wgtGetProperty(e,"list"))for(var o=0;o<i.length;o++)i[o].video.mediaID&&(a=a||[],a.push(i[o].video.mediaID));a&&(a.length||a.main&&a.main.length)&&(this.exeAssetLoad(t,t.wgtTag(e),a),n._mediaLoaded=!0)},xa.exeOnStart=xa.exeOnResume=function(t,e){var a=t.wgtTag(e);if(!a._mediaLoaded){var i;i=t.ctxGet("eduVideoPlayList"),i&&i.length&&this.exeAssetLoad(t,t.wgtTag(e),i)}},xa.exeInputGet=function(t,e){var a;if(e._newList)a=e._newList;else{a=[];var i=t.wgtGetProperty(e.apnOID,"list");if(i)for(var n=0;n<i.length;n++)i[n].video.mediaID&&a.push(i[n].video.mediaID);else{var r=t.wgtGetProperty(e.apnOID,"URLs");if(r)for(var n=0;n<r.length;n++)r[n].vURL&&a.push(r[n].vURL)}}return JSON.stringify(a)},xa.edtOnInputGet=function(t,e,a){var i,n=[];if((i=t.pages[e].objects[a].create.data)&&i.properties&&i.properties.attrs&&i.properties.attrs.list)for(var r=i.properties.attrs.list,o=0;o<r.length;o++)r[o].video.mediaID&&n.push(r[o].video.mediaID);else if(i&&i.properties&&i.properties.attrs&&i.properties.attrs.URLs)for(var r=i.properties.attrs.URLs,o=0;o<r.length;o++)r[o].vURL&&n.push(r[o].vURL);return JSON.stringify(n)},xa.exeInputSet=function(t,e,a){var i;try{i=JSON.parse(a)}catch(t){i=a}i&&i instanceof Array||(i=[i]),i[0]?(this.exeAssetLoad(t,e,i),e._mediaLoaded=!0):(apn.widgets["apn.wgt.video"].exeMediaClear(t,e.apnOID),e._mediaLoaded=!1),e._newList=i;var n=t.wgtGetProperty(e.apnOID,"URLs");if(n){n.length=0;for(var r=0;r<i.length;r++)n.push({vURL:i[r]})}},xa.onEdit=void 0,xa.edtOnConfig=function(t,e){function a(){s.mediaID&&t.setSubMediaToObject(e,s.mediaID,!1)}function i(){function i(e,i){i&&(e.setMedia(i),s&&a(),t.draw())}eduLib.edtInputApplyAll(t,d),t.wgtSetProperty(e,"URLs",p),r&&t.wgtSetProperty(e,"apxMediaSubFormat",!0),p[0]&&p[0].vURL?t.getObjectByID(e).resolveSnapshot(i):s&&a()}function n(){eduLib.edtInputApplyAll(t,d),l[0]&&l[0].video.mediaID&&t.wgtSetProperty(e,"apxMediaID",l[0].video.mediaID),t.wgtSetProperty(e,"list",l)}var r,o=apn.Project.getExeModule(t.getData());o.IStub_getConfiguration&&o.IStub_getConfiguration()&&o.IStub_getConfiguration().mediaMultiFormat&&(r=!0),t.wgtGetProperty(e,"apxMediaSubFormat")&&(r=!0);var d;if(t.wgtGetProperty(e,"URLs")){var p=t.wgtGetProperty(e,"URLs"),s=t.wgtGetProperty(e,"apxPoster");t.wgtGetProperty(e,"noMultiTrack")?(d=t.dlgDoModal(800,s?500:240,i))&&(r?eduLib.edtInputAdd(t,d,{type:"table",value:p,options:{th:["Video URL","Alternative URL"]},td:[{type:"text",key:"vURL"},{type:"text",key:"subURL"}]}):eduLib.edtInputAdd(t,d,{type:"table",value:p,options:{th:["Video URL"]},td:[{type:"text",key:"vURL"}]}),eduLib.edtInputAdd(t,d,{type:"space"}),s&&eduLib.edtInputAdd(t,d,{type:"image",title:"Poster File",value:t.getObjectByID(e).data.properties.attrs,key:"apxPoster"})):(d=t.dlgDoModal(500,400,i))&&eduLib.edtInputAdd(t,d,{type:"table",value:p,options:{th:["Video URL"],add:!0,remove:!0},td:[{type:"text",key:"vURL"}]})}else{var l=t.wgtGetProperty(e,"list");l=l||[{video:{mediaID:void 0}}],(d=t.dlgDoModal(600,600,n))&&eduLib.edtInputAdd(t,d,{type:"table",value:l,options:{th:["Video"],add:!0,remove:!0},td:[{type:"video",key:"video"}]})}},eduWgtVideoPlayer=xa;var xa=apn.inheritWidget(apn.widgets["apn.wgt.roundRect"]);xa.apdConfigReadOnly=!0,xa.apxTextPlainMulti=!0,xa.editor=xa.editor||{},xa.editor.iconThumb="DB/EDU/imgs/wgts/thumbs/subtitle.png",xa.styles=xa.styles||{},xa.styles.textMultiLine=!0,xa.properties=xa.properties||{},xa.properties.attrs={apxMediaSubtitle:!0,v:"2",subs:[{track:1,stime:"00:00:00",etime:"00:01:99",text:"",pOes:"N"}],cfg:{colorFocus:"#ff0000",vtt:{size:0,data:""},mode:"",modeClr:null,ptpClr:null,txt:"",idMedia:"",idTarget:""}},xa.scriptInfo={wgtRun:{play:{param:"{index:0-based|'next'|'prev'|'clear', playSection:Boolean}",help:{en:"Play the media section by subtitle information",ko:"자막 구간을 Play합니다.\n'index'에 자막의 번호, 'next' 및 'prev'로 구간을 지정할 수 있습니다.\n'playSection'이 true이면 해당 구간으로 영역이 제한됩니다.\n'index'에서 'clear'값은 지정된 Section을 해제하는 기능입니다."}}}},xa.createAsCanvasObject=function(t,e,a,i,n){return n&&n.attrs&&"2a"==n.attrs.v?(n.attrs.URL="DB/EDU/imgs/wgts/edit/mediaAnnt.png",apn.IWidget.createCanvasObject(t,this,"apn.CImage",bx.CCanvasWnd.SHAPE_RECT,e,a,i,n,void 0,apn.CEditorS.NO_RESIZE)):apn.widgets["apn.wgt.roundRect"].createAsCanvasObject.call(this,t,e,a,i,n)},xa.exeOnScreenRefresh=function(t,e){var a=t.wgtGetProperty(e,"cfg");a.ptp&&"N"!=a.ptp||apn.widgets["apn.wgt.roundRect"].exeOnScreenRefresh.call(this,t,e)},xa.exeOnLoad=function(t,e){function a(a,i,n){var r;"trackStart"==a?o.ctx.curTrack=n:"infoPlayTime"==a?(r=s._findkSub(t,e,i),r==o.ctx.curSub?r=void 0:o.ctx.curSub=r):"trackEnd"==a&&(r=-1,o.ctx.curSub=r),r==-1?t.wgtSetProperty(e,"apxText",""):r>=0&&t.wgtSetProperty(e,"apxText","[[HTML]]"+(d[r].text||"").replace(/\[\[/g,'<span style="font-family:inherit;color:'+p.colorFocus+';">').replace(/\]\]/g,"</span>"))}function i(a,i){if(a==e&&i&&void 0!==i.index&&o.ctx.times.length){if(o.ctx.curSection=void 0,"clear"==i.index)return void(o.ctx&&o.ctx.idMedia&&t.wgtSetProperty(o.ctx.idMedia,"playSection",void 0));if("next"==i.index?void 0===o.ctx.curSub?i.index=0:i.index=(o.ctx.curSub+1)%o.ctx.times.length:"prev"==i.index&&(void 0===o.ctx.curSub?i.index=0:i.index=(o.ctx.curSub-1+o.ctx.times.length)%o.ctx.times.length),o.ctx&&o.ctx.idMedia&&o.ctx.times[i.index]&&void 0!==o.ctx.times[i.index].stime){var n=apn.Project.getWidgetModule(t.screen.objects[o.ctx.idMedia].create.data);if(n&&n.exeMediaSeek){if(i.playSection){var r={from:o.ctx.times[i.index].stime,to:o.ctx.times[i.index].etime};t.wgtSetProperty(o.ctx.idMedia,"playSection",r),o.ctx.curSection=r}n.exeMediaSeek(t.wgtTag(o.ctx.idMedia),o.ctx.times[i.index].stime,!0)}}}}function n(t,a){t==e&&a&&void 0!==a.index&&d[a.index]&&(a.pauseOnStart===!0?d[a.index].pOes="Y":a.pauseOnStart===!1&&(d[a.index].pOes="N"))}function r(t,e,a){"seeked"==t&&(o.ctx._seeked=!0)}var o=t.wgtTag(e),d=t.wgtGetProperty(e,"subs"),p=t.wgtGetProperty(e,"cfg"),s=this;if("2a"==t.wgtGetProperty(e,"v")&&(o.style.display="none"),t.wgtGetProperty(e,"v")){if(!p.idMedia||!t.wgtTag(p.idMedia))return t.log(e,"Media widget is not set for this widget."),!1;o.ctx={},o.ctx.idMedia=p.idMedia}else{var l=t.getWidgetsByProperty("apxMediaControl"),g=t.getWidgetsByProperty("apxMediaControl");if(!l.length)return t.log(e,"No media widget is in this page."),!1;for(var u=apn.Project.findParentOf(t.screen,e,void 0,!0),c=0;c<g.length;c++)u&&u!=apn.Project.findParentOf(t.screen,g[c],void 0,!0)&&(g.splice(c,1),c--);o.ctx={},o.ctx.idMedia=this._closest(t,e,g)||this._closest(t,e,l)}o.ctx.curSub=-1,o.ctx.curTrack=1,o.ctx.curSection=void 0,t.wgtGetProperty(e,"v")?(o.ctx.curSub=void 0,t.wgtListenProperty(e,"play",i),t.wgtListenProperty(e,"track",n),t.wgtListenMedia(e,o.ctx.idMedia,r)):t.wgtListenMedia(e,o.ctx.idMedia,a),t.wgtGetProperty(e,"cfg").mode?this._setupSpaned(t,e,p,d):t.wgtSetProperty(e,"apxText",""),o.ctx.times=[];for(var c=0;c<d.length;c++)o.ctx.times.push({track:d[c].track,stime:this._timeToSec(d[c].stime),etime:this._timeToSec(d[c].etime),text:d[c].text})},xa._setupSpaned=function(t,e,a,i){var n=t.wgtTag(e),r=this._buildText(t,e);if(t.wgtSetProperty(e,"apxText","[[HTML]]"+r.replace(/\[\[/g,'<span style="font-family:inherit;color:'+a.colorFocus+';">').replace(/\]\]/g,"</span>")),a.ptp&&"N"!=a.ptp)for(var o,d=0;d<i.length;d++)(o=n.$$(d+"C"))&&(n.$$(d+"S")&&(n.$$(d+"S").style.cursor="apn.auto"==apn.Project.resolveStyle(t.project,"csr",t.wgtGetProperty(e,"apxCursor"))?"pointer":"inherit"),o.apxOnEventOver=function(t,e){e?(a.ptpClr&&(this.style.backgroundColor=a.ptpClr),"Y"==a.ptpBold&&(this.style.fontWeight="bold")):(a.ptpClr&&(this.style.backgroundColor="transparent"),"Y"==a.ptpBold&&(this.style.fontWeight="inherit"))},o.apxOnEvent=function(t,i){"tapStart"==i&&t.wgtSetProperty(e,"play",{index:parseInt(this.id),playSection:"R"==a.ptp})})},xa.exeOnStart=function(t,e){var a=t.wgtGetProperty(e,"cfg");if(a.idTarget&&t.wgtTag(a.idTarget)&&(t.wgtTag(a.idTarget).style.display="none"),this.apxTextPlainMulti){var i=t.wgtTag(e),n=this;i.apnOnPostSetText=function(a,i){var r=n._buildTextPlain(t,e);t.wgtSetProperty(e,"apxTextPlainMulti",{txt:r,lnToTag:!0})};var r=this._buildTextPlain(t,e);r&&i.apnOnPostSetText(i,r)}},xa.exeOnTick=function(t,e,a){function i(a){var i=t.wgtGetProperty(e,"subs");if(a==n.ctx.curSub?a=void 0:n.ctx.curSub=a,"2a"==t.wgtGetProperty(e,"v")){if(a==-1||a>=0&&!i[a].text)r.idTarget&&t.wgtTag(r.idTarget)&&(t.wgtTag(r.idTarget).style.display="none"),t.fireEvent("wgtEvent","[None]",e,!1,!0);else if(a>=0&&i[a].text){if(r.idTarget&&t.wgtTag(r.idTarget)){t.wgtTag(r.idTarget).style.display="block";var d=apn.Project.getStateByObjectID(t.project,t.getPageID(),r.idTarget);if(d)for(var p=0;p<d.length;p++)if(d[p].title==i[a].text){t.stateLayerActivate(r.idTarget,d[p].stateID),t.stateSetActive(r.idTarget,d[p].stateID);break}}t.fireEvent("wgtEvent",i[a].text,e,!1,!0),"Y"==i[a].pOes&&t.wgtControlMedia(n.ctx.idMedia,"pause")}}else{if(r.mode){var s;if(void 0!==a)for(var p=0;p<i.length;p++)(s=n.$$(p+"S"))&&(p==a?"s1"==r.mode?(r.modeClr&&(s.style.color=r.modeClr),"Y"==r.modeBold&&(s.style.fontWeight="bold")):r.modeClr&&(s.style.backgroundColor=r.modeClr):"s1"==r.mode?(s.style.color="inherit",s.style.fontWeight="inherit"):s.style.backgroundColor="transparent")}else a==-1?t.wgtSetProperty(e,"apxText",""):a>=0&&t.wgtSetProperty(e,"apxText","[[HTML]]"+o._convertLN((i[a].text||"").replace(/\[\[/g,'<span style="font-family:inherit;color:'+r.colorFocus+';">').replace(/\]\]/g,"</span>")));a==-1?t.fireEvent("wgtEvent","[None]",e,!1,!0):a>=0&&t.fireEvent("wgtEvent",a+1+"",e,!1,!0)}}var n=t.wgtTag(e),r=t.wgtGetProperty(e,"cfg"),o=this;if(n.ctx&&n.ctx.idMedia){if("2a"==t.wgtGetProperty(e,"v")&&"Y"==r.v2aRS&&n.ctx._seeked&&n.ctx.curSub!=-1&&(i(-1),n.ctx._curTime=0),(!t.wgtGetMediaInfo(n.ctx.idMedia,"pause")&&!t.wgtGetMediaInfo(n.ctx.idMedia,"seeking")||n.ctx._seeked)&&t.wgtGetMediaInfo(n.ctx.idMedia,"currentTime")){n.ctx._end=!1;var d=t.wgtGetMediaInfo(n.ctx.idMedia,"currentTime");(!n.ctx.curSection||d>=n.ctx.curSection.from&&d<n.ctx.curSection.to)&&(!bx.HCL.DV.isIOS()||d>n.ctx._curTime)&&(i(this._findkSub(t,e,d)),n.ctx._curTime=d)}else t.wgtGetMediaInfo(n.ctx.idMedia,"end")&&!n.ctx._end?(n.ctx._end=!0,i(-1),n.ctx._curTime=0):n.ctx._refresh&&(n.ctx._refresh=!1,i(-1),n.ctx._curTime=0);n.ctx._seeked=!1}},xa.exeInputGet=function(t,e){if(e.ctx&&e.ctx.times)return bx.$cloneObject([],e.ctx.times)},xa.exeInputSet=function(t,e,a){if(e.ctx&&e.ctx.times&&a){e.ctx.times.length=0;for(var i=0;i<a.length;i++)e.ctx.times.push(a[i]);this._refresh(t,e.apnOID)}},xa._refresh=function(t,e){var a=t.wgtTag(e),i=t.wgtGetProperty(e,"subs"),n=t.wgtGetProperty(e,"cfg"),r=t.wgtGetProperty(e,"v");if(a.ctx._refresh=!0,r&&"2"==r[0]){n.mode&&(n.txt="");for(var o,d=0;d<a.ctx.times.length;d++)i[d]=i[d]||{track:1,pOes:a.ctx.times[d].pOes||"N"},i[d].text=a.ctx.times[d].text,i[d].txtPos=n.txt.length,n.mode&&(o=!1,d==a.ctx.times.length-1&&(o=!0),a.ctx.times[d].text.length&&"\n"==a.ctx.times[d].text[a.ctx.times[d].text.length-1]&&(o=!0),n.txt+=a.ctx.times[d].text+(o?"":" "));n.mode&&this._setupSpaned(t,e,n,i)}},xa._convertLN=function(t){for(var e="",a=0;a<t.length;a++)e+="\n"==t[a]&&"\n"!=t[a+1]?"<br/>":"\n"==t[a]&&"\n"==t[a+1]?'<div style="cursor:inherit;line-height:1em;">&nbsp;</div>':t[a];return e},xa._findkSub=function(t,e,a){var i=t.wgtTag(e);t.wgtGetProperty(e,"subs");if(i.ctx&&i.ctx.idMedia&&t.wgtGetMediaInfo(i.ctx.idMedia,"end"))return-1;for(var n=0;n<i.ctx.times.length;n++)if(i.ctx.curTrack==(i.ctx.times[n].track||1)&&i.ctx.times[n].stime<=parseFloat(a)&&parseFloat(a)<i.ctx.times[n].etime)return n;if("2a"==t.wgtGetProperty(e,"v"))for(var n=0;n<i.ctx.times.length;n++)if(i.ctx.curTrack==(i.ctx.times[n].track||1)&&i.ctx.times[n].stime<=parseFloat(a)&&parseFloat(a)<i.ctx.times[n].etime+.1)return n;return-1},xa._buildTextPlain=function(t,e){for(var a,i="",n=t.wgtGetProperty(e,"subs"),r=0;r<n.length;r++)a=!1,r==n.length-1&&(a=!0),n[r].text.length&&"\n"==n[r].text[n[r].text.length-1]&&(a=!0),i+=n[r].text+(a?"":" ");return i},xa._buildText=function(t,e){for(var a,i="",n=t.wgtGetProperty(e,"subs"),r=0;r<n.length;r++)a=!1,r==n.length-1&&(a=!0),n[r].text.length&&"\n"==n[r].text[n[r].text.length-1]&&(a=!0),i+='<span id="'+r+'C" style="cursor:inherit;font-family:inherit;border-radius:3px;"><span id="'+r+'S" style="cursor:inherit;font-family:inherit;border-radius:3px;">'+(n[r].text||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span></span>"+(a?"":" ");return this._convertLN(i)},xa._timeToSec=function(t){var e=(t||"").split(":"),a=60*bx.$checkNaN(parseInt(e[0]))+bx.$checkNaN(parseInt(e[1]))+bx.$checkNaN(parseInt(e[2]))/100;return a=Math.round(1e3*a)/1e3},xa._closest=function(t,e,a){for(var i,n=[],r=null,o=0;o<a.length;o++)i=t.wgtIntersectWith(void 0,e,1,a[o]),i&&i.length&&n.push(i[0]);return n.length>1?a=n:1==n.length&&(r=n[0]),r||(r=t.utlFindClosest(e,a)),r},xa._hhmmss999TOmmss99=function(t){function e(t){return 2==t.length?t:t.length>2?t.substring(0,2):t+"0"}var a=t.split(/[:.]/g);return 4==a.length?60*bx.$checkNaN(parseInt(a[0]))+bx.$checkNaN(parseInt(a[1]))+":"+a[2]+":"+e(a[3]):3==a.length?a[0]+":"+a[1]+":"+e(a[2]):""},xa._vttParse=function(t,e,a){function i(t){var e=t.replace(/\s+$/g,"");return e}if(!t||!t.split)return!1;for(var n,r=t.split("\n"),o=0,d=-1,p=0;p<r.length;p++)if(r[p]=i(r[p]),r[p].indexOf(":")>0&&r[p].indexOf("-->")>0){var s=r[p].split(" ");s.length>2&&"-->"==s[1]&&this._hhmmss999TOmmss99(s[0])&&this._hhmmss999TOmmss99(s[2])?(d++,e&&(e[d]={text:""},e[d].stime=this._hhmmss999TOmmss99(s[0]),e[d].etime=this._hhmmss999TOmmss99(s[2])),o=1):(a&&a.message&&(a.message+="VTT parsing error in line "+(p+1)+".\n"),n=!0)}else 0==r[p].indexOf("NOTE")?o=2:r[p]&&1==o&&(parseInt(r[p])&&r[p+1]&&r[p+1].indexOf(":")>0&&r[p+1].indexOf("-->")>0||e&&(e[d].text+=(e[d].text?"\n":"")+r[p]));return d==-1&&(a&&a.message&&(a.message+="This file is empty.\n"),n=!0),!n},xa.edtOnConfig=function(t,e,a,i,n){function r(){if(!n||!n.readOnly)if(eduLib.edtInputApplyAll(t,y.tagSub1),eduLib.edtInputApplyAll(t,y.tagSub2),eduLib.edtInputApplyAll(t,y.tagSub3),t.wgtSetProperty(e,"cfg",v),t.wgtSetProperty(e,"subs",m),"2a"==s);else{if(v.txt="",v.mode)for(var a,i=0;i<m.length;i++)a=!1,i==m.length-1&&(a=!0),m[i].text.length&&"\n"==m[i].text[m[i].text.length-1]&&(a=!0),m[i].txtPos=v.txt.length,v.txt+=m[i].text+(a?"":" ");t.wgtSetProperty(e,"apxText",v.txt)}}function o(){for(var t in f)this.id==t?(y[t].style.display="block",y.tagTab.$$(t).style.borderStyle="solid solid none solid"):(y[t].style.display="none",y.tagTab.$$(t).style.borderStyle="none none solid none");eduWgtSubtitle._uiLastSetupTab2A=this.id}function d(e,a){if(e){var i=[];if(h._vttParse(e,i,a))return m=i,eduLib.edtInputClear(t,y.tagSub1),eduLib.edtInputAdd(t,y.tagSub1,{type:"table",value:m,options:{th:[{title:"Start Time[?]",comment:"(MM:SS.99)"},{title:"End Time[?]",comment:"(MM:SS.99)"},"Subtitle"],add:!0,remove:!0},td:[{type:"timeMMSS99",key:"stime",width:"180px"},{type:"timeMMSS99",key:"etime",width:"180px"},{type:"text",key:"text",multiline:!0}]}),!0}return!1}function p(){"s1"==this.value?eduLib.edtInputShow(t,y.tagSub2,"mode_s1",!0):eduLib.edtInputShow(t,y.tagSub2,"mode_s1",!1),this.value&&"s"==this.value[0]?eduLib.edtInputShow(t,y.tagSub2,"mode",!0):eduLib.edtInputShow(t,y.tagSub2,"mode",!1)}var s;if(!(s=t.wgtGetProperty(e,"v")))return void this._edtOnConfigV1(t,e,a,i,n);var l=t.getScreenData(),g=[];for(var u in l.objects)l.objects[u].create&&l.objects[u].create.data&&l.objects[u].create.data.properties&&l.objects[u].create.data.properties.attrs&&l.objects[u].create.data.properties.attrs.apxMediaControl&&g.push({value:u,title:t.itrGetObjectTitle(u)});if("2a"==s){var c,x=[];for(var u in l.objects)c=apn.Project.getStateByObjectID(t.getData(),t.getPageID(),u),c&&x.push({value:u,title:t.itrGetObjectTitle(u)+" with "+c.length+" state"+(c.length>1?"s":"")})}var y,v=t.wgtGetProperty(e,"cfg"),m=t.wgtGetProperty(e,"subs"),f={tagSub1:!0,tagSub2:!0,tagSub3:!0},h=this,b={en:"※ For CJK(Chinese,Japanese,Korean), VTT file needs to be encoded in UTF-8.\nThis VTT parser doesn't support CSS styling information.",ko:"※ 한국어, 중국어, 일본어(CJK)를 사용하는 경우, VTT 파일이 UTF-8으로 인코딩되어야 합니다.\n본 VTT 변환기는 VTT에 포함된 CSS 스타일을 지원하지 않습니다."},w={en:"※ To break the line, you can enter line-break from 'Subtitle' field.",ko:"※ 표시되는 문장의 줄을 바꾸기 위해서는, 'Subtile'에 항목에서 줄바꿈을 입력하면 됩니다."},I={en:"※ Also, you can sync with more widgets using 'Widget Event' from this widget.",ko:"※ 또한, 'Widget Event'를 통하여 다수의 Widget과 Sync할 수 있습니다."},S={en:"※ In case of 'Play touched section only', to start or resume the media, you need to clear the play section by Scripting.",ko:"※ '구간 Play' 방식을 사용하는 경우, 터치에 의하여 지정된 구간을 해제하고 처음부터 Play하기 위해서는 Script로 구간을 해제하고 Play해야 합니다."};if("2a"==s)var L=apn.CExe.GL({ko:"싱크 정보",en:"Sync data"}),P=apn.CExe.GL({ko:"싱크할 미디어 위젯",en:"Media widget to sync with"});else var L=apn.CExe.GL({ko:"자막",en:"Subtitle"}),P=apn.CExe.GL({ko:"연동할 미디어 위젯",en:"Media widget to subtitle"});n&&n.readOnly&&(n.title=t.itrGetObjectTitle(e)),(y=t.dlgDoModal(860,Math.floor(.9*bx.UX.height),r,void 0,n))&&(y.tagTab=y.$TAG("div",{style:"width:100%;height:26px;padding-bottom:14px;"}),y.tagTab.innerHTML='<span id="tagSub2" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">'+apn.CExe.GL({ko:"설정",en:"Setup"})+'</span><span id="tagSub1" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">'+L+'</span><span id="tagSub3" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">'+apn.CExe.GL({ko:"VTT파일에서 읽기",en:"Import from VTT"})+'</span><span id="tagBlank" style="float:left;padding:2px 0 2px 0;border-bottom:solid 1px #a8a8a8;">&nbsp;</span>',y.tagTab.$$("tagSub1").onclick=y.tagTab.$$("tagSub2").onclick=y.tagTab.$$("tagSub3").onclick=o,y.tagSub1=y.$TAG("div",{style:"width:100%;height:"+(y.contentHeight-40)+"px"}),y.tagSub2=y.$TAG("div",{style:"width:100%;height:"+(y.contentHeight-40)+"px"}),y.tagSub3=y.$TAG("div",{style:"width:100%;height:"+(y.contentHeight-40)+"px"}),n&&n.readOnly&&(eduLib.edtInputDisable(t,y.tagSub1),eduLib.edtInputDisable(t,y.tagSub2),eduLib.edtInputDisable(t,y.tagSub3),y.tagTab.$$("tagSub3").style.display="none"),"2"==s?(eduLib.edtInputAdd(t,y.tagSub1,{type:"table",value:m,options:{th:[{title:apn.CExe.GL({ko:"시작 시간",en:"Start Time"})+"[?]",comment:"(MM:SS.99)"},{title:apn.CExe.GL({ko:"종료 시간",en:"End Time"})+"[?]",comment:"(MM:SS.99)"},apn.CExe.GL({ko:"자막 문구",en:"Subtitle"})],add:!0,remove:!0},td:[{type:"timeMMSS99",key:"stime",width:"180px"},{type:"timeMMSS99",key:"etime",width:"180px"},{type:"text",key:"text",multiline:!0}]}),eduLib.edtInputAdd(t,y.tagSub1,{type:"message",value:apn.CExe.GL(w)})):eduLib.edtInputAdd(t,y.tagSub1,{type:"table",value:m,options:{th:[{title:apn.CExe.GL({ko:"시작 시간",en:"Start Time"})+"[?]",comment:"(MM:SS.99)"},{title:apn.CExe.GL({ko:"종료 시간",en:"End Time"})+"[?]",comment:"(MM:SS.99)"},{title:apn.CExe.GL({ko:"트랙 제목",en:"Title of Track"}),comment:apn.CExe.GL({ko:"(Event로 발생되거나 Layer 제목과 맵핑됨)",en:"(Use as Event title or mapped with Layer by title)"})},{title:apn.CExe.GL({ko:"이 트랙에서 멈춤",en:"Pause on track[?]"}),comment:apn.CExe.GL({ko:"(이 트랙이 시작될 때 미디어 멈춤)",en:"(Pause media on entering this track)"})}],add:!0,remove:!0},td:[{type:"timeMMSS99",key:"stime",width:"180px"},{type:"timeMMSS99",key:"etime",width:"180px"},{type:"text",key:"text",multiline:!0},{type:"select",key:"pOes",options:[{title:"Yes",value:"Y"},{title:"No",value:"N"}],width:"120px"}]}),g.length&&(eduLib.edtInputAdd(t,y.tagSub2,{type:"select",options:g,title:P,key:"idMedia",value:v,join:!0}),eduLib.edtInputAdd(t,y.tagSub2,{type:"space"})),"2"==s?(eduLib.edtInputAdd(t,y.tagSub2,{type:"title",title:apn.CExe.GL({ko:"자막 표시",en:"Display text track"})}),eduLib.edtInputAdd(t,y.tagSub2,{type:"select",title:apn.CExe.GL({ko:"표시 방식",en:"Display"}),key:"mode",value:v,options:[{title:apn.CExe.GL({
ko:"일반 자막",en:"Each text track"}),value:""},{title:apn.CExe.GL({ko:"자막을 문단으로 합치고, 활성자막 배경색 강조",en:"Merge as a sentence and highlight track background"}),value:"s0"},{title:apn.CExe.GL({ko:"자막을 문단으로 합치고, 활성자막 텍스트 강조",en:"Merge as a sentence and highlight track text"}),value:"s1"}],onchange:p}),eduLib.edtInputAdd(t,y.tagSub2,{id:"mode",type:"color",title:apn.CExe.GL({ko:"활성자막 색상",en:"Highlight color"}),key:"modeClr",value:v,askUse:!0}),eduLib.edtInputAdd(t,y.tagSub2,{id:"mode_s1",type:"select",title:apn.CExe.GL({ko:"활성자막에 볼드체 표시",en:"Bold font"}),key:"modeBold",value:v,options:[{title:apn.CExe.GL({ko:"예",en:"Yes"}),value:"Y"},{title:apn.CExe.GL({ko:"아니오",en:"No"}),value:"N"}]}),eduLib.edtInputAdd(t,y.tagSub2,{id:"mode",type:"space"}),eduLib.edtInputAdd(t,y.tagSub2,{id:"mode",type:"title",title:apn.CExe.GL({ko:"터치에 의한 구간 Play",en:"Section play by touch"})}),eduLib.edtInputAdd(t,y.tagSub2,{id:"mode",type:"select",title:apn.CExe.GL({ko:"Play 방식",en:"Play by touch"}),key:"ptp",value:v,options:[{title:apn.CExe.GL({ko:"터치된 자막에서부터 Play",en:"Play from touched text"}),value:"S"},{title:apn.CExe.GL({ko:"터치된 자막만 구간 Play",en:"Play touched section only"}),value:"R"},{title:apn.CExe.GL({ko:"기능 사용 안함",en:"No"}),value:"N"}]}),eduLib.edtInputAdd(t,y.tagSub2,{id:"mode",type:"color",title:apn.CExe.GL({ko:"마우스 호버 색상",en:"Hover color"}),key:"ptpClr",value:v,askUse:!0}),eduLib.edtInputAdd(t,y.tagSub2,{id:"mode",type:"select",title:apn.CExe.GL({ko:"마우스 호버에서 볼드체 표시",en:"Bold font on Hover"}),key:"ptpBold",value:v,options:[{title:apn.CExe.GL({ko:"예",en:"Yes"}),value:"Y"},{title:apn.CExe.GL({ko:"아니오",en:"No"}),value:"N"}]}),eduLib.edtInputAdd(t,y.tagSub2,{id:"mode",type:"message",value:apn.CExe.GL(S)}),eduLib.edtInputAdd(t,y.tagSub2,{type:"space"}),eduLib.edtInputAdd(t,y.tagSub2,{type:"title",title:apn.CExe.GL({ko:"키워드 강조",en:"Keyword highlight"})}),eduLib.edtInputAdd(t,y.tagSub2,{type:"color",title:apn.CExe.GL({ko:"강조 색상",en:"Highlight color"}),key:"colorFocus",value:v}),eduLib.edtInputAdd(t,y.tagSub2,{type:"message",value:apn.CExe.GL({ko:"※ 텍스트에서 [[  ]]로 표시한 부분이 강조됩니다.",en:"※  Embrace with [[  ]] to highlight words"})})):(eduLib.edtInputAdd(t,y.tagSub2,{type:"title",title:apn.CExe.GL({ko:"컨테이너 위젯과 자동으로 싱크",en:"Automatically sync with"}),join:!0}),eduLib.edtInputAdd(t,y.tagSub2,{type:"select",options:x,title:apn.CExe.GL({ko:"연동할 위젯",en:"Layer/scene container"}),key:"idTarget",value:v,join:!0}),eduLib.edtInputAdd(t,y.tagSub2,{type:"message",value:apn.CExe.GL(I),join:!0}),eduLib.edtInputAdd(t,y.tagSub2,{type:"space"}),eduLib.edtInputAdd(t,y.tagSub2,{type:"title",title:apn.CExe.GL({ko:"추가 설정",en:"More options"}),join:!0}),eduLib.edtInputAdd(t,y.tagSub2,{type:"select",title:apn.CExe.GL({ko:"Seek이 실행되면 현재 구간 지정 해제",en:"Clear current track on seek"}),key:"v2aRS",value:v,options:[{title:apn.CExe.GL({ko:"예",en:"Yes"}),value:"Y"},{title:apn.CExe.GL({ko:"아니오",en:"No"}),value:""}],join:!0})),eduLib.edtInputAdd(t,y.tagSub3,{type:"file",accept:".vtt",title:apn.CExe.GL({ko:"VTT 파일",en:"VTT file"}),value:v,key:"vtt",oncheck:d}),eduLib.edtInputAdd(t,y.tagSub3,{type:"message",value:apn.CExe.GL(b)}),void 0!==eduWgtSubtitle._uiLastSetupTab2A&&y.tagTab.$$(eduWgtSubtitle._uiLastSetupTab2A)?y.tagTab.$$(eduWgtSubtitle._uiLastSetupTab2A).onclick():y.tagTab.$$("tagSub2").onclick(),y.tagTab.$$("tagBlank").style.width=y.clientWidth-y.tagTab.$$("tagBlank").offsetLeft-24+"px")},xa.edtOnRemapObjectID=function(t,e,a){if(e&&e.properties&&e.properties.attrs&&e.properties.attrs.cfg){var i=e.properties.attrs.cfg;i.idMedia&&(a[i.idMedia]?i.idMedia=a[i.idMedia]:t.getScreenData().objects[i.idMedia]||(i.idMedia="")),i.idTarget&&(a[i.idTarget]?i.idTarget=a[i.idTarget]:t.getScreenData().objects[i.idTarget]||(i.idTarget=""))}},xa.edtOnBuildEvent=function(t,e,a,i,n){var r=t.pages[a].objects[e].create.data.properties.attrs.v;if(r&&"2"==r[0]){var o=t.pages[a].objects[e].create.data.properties.attrs.subs;if(o.length)for(var d=0;d<o.length;d++)"2a"==r?o[d].text&&(i.wgtEvent=i.wgtEvent||{value:"wgtEvent",title:apn.P.eventTitle.wgtEvent,param:{}},i.wgtEvent.param[o[d].text]=o[d].text):(i.wgtEvent=i.wgtEvent||{value:"wgtEvent",title:apn.P.eventTitle.wgtEvent,param:{}},i.wgtEvent.param[d+1]=d+1+"");var p=apn.Project.findITRs(t,a,e);if(p&&p.length){var s;for(d=0;d<p.length;d++)s=apn.P.resolveCompositeSysEV(p[d].event),!s||!s.param||"wgtEvent"!=s.ev||i.wgtEvent&&i.wgtEvent.param[s.param]||(i.wgtEvent=i.wgtEvent||{value:"wgtEvent",title:apn.P.eventTitle.wgtEvent,param:{}},i.wgtEvent.param[s.param]=s.param)}i.wgtEvent&&(i.wgtEvent.param["[None]"]="[None]")}},xa._edtOnConfigV1=function(t,e,a,i,n){function r(){n&&n.readOnly||(t.getObjectByID(e).data.styles.textMultiLine=!0,eduLib.edtInputApplyAll(t,o),t.wgtSetProperty(e,"cfg",d),t.wgtSetProperty(e,"subs",p))}var o,d=t.wgtGetProperty(e,"cfg"),p=t.wgtGetProperty(e,"subs");n&&n.readOnly&&(n.title=t.itrGetObjectTitle(e)),(o=t.dlgDoModal(800,600,r,void 0,n))&&(n&&n.readOnly&&eduLib.edtInputDisable(t,o),t.wgtGetProperty(e,"noMultiTrack")?eduLib.edtInputAdd(t,o,{type:"table",value:p,options:{th:[{title:"Start Time[?]",comment:"(MM:SS.99)"},{title:"End Time[?]",comment:"(MM:SS:99)"},"Subtitle"],add:!0,remove:!0},td:[{type:"timeMMSS99",key:"stime",width:"180px"},{type:"timeMMSS99",key:"etime",width:"180px"},{type:"text",key:"text",multiline:!0}]}):eduLib.edtInputAdd(t,o,{type:"table",value:p,options:{th:["Track#",{title:"Start Time[?]",comment:"(MM:SS.99)"},{title:"End Time[?]",comment:"(MM:SS:99)"},"Subtitle"],add:!0,remove:!0},td:[{type:"text",key:"track",width:"50px"},{type:"timeMMSS99",key:"stime",width:"180px"},{type:"timeMMSS99",key:"etime",width:"180px"},{type:"text",key:"text",multiline:!0}]}),eduLib.edtInputAdd(t,o,{type:"space"}),eduLib.edtInputAdd(t,o,{type:"title",title:"More options"}),eduLib.edtInputAdd(t,o,{type:"color",title:"Highlight Color",key:"colorFocus",value:d,comment:"(Embrace with [[   ]] to highlight words)"}))},eduWgtSubtitle=xa;var xa=apn.inheritWidget(apn.widgets["apn.wgt.rect"]);xa.styleMap={title:!0,visibility:!0,alpha:!0},xa.editor=xa.editor||{},xa.editor.iconThumb="DB/ux/imgs/wgts/thumbs/dotIndicator.png",xa.properties=xa.properties||{},xa.properties.attrs={type:"Slide Widget",v:2,cfg:{imageOn:{mediaID:void 0},imageOff:{mediaID:void 0},margin:8,otb:"",xpg:[{i:""}]}},xa.onEdit=void 0,xa.edtOnConfig=function(t,e){function a(){eduLib.edtInputApplyAll(t,l),t.wgtSetProperty(e,"cfg",n),t.wgtSetProperty(e,"type",g.type)}function i(){d&&eduLib.edtInputShow(t,l,"ver2","Slide Widget"==this.value),eduLib.edtInputShow(t,l,"v2page","F2"==this.value)}var n=t.wgtGetProperty(e,"cfg"),r=t.wgtGetProperty(e,"v");if(void 0!==n.idWgt){var o=t.getScreenData(),d=[{title:apn.CExe.GL({ko:"[없음]",en:"[None]"}),value:""}];for(var p in o.objects)o.objects[p].create&&o.objects[p].create.data&&o.objects[p].create.data.properties&&o.objects[p].create.data.properties.attrs&&o.objects[p].create.data.properties.attrs.apxStep&&d.push({value:p,title:t.itrGetObjectTitle(p)})}var s=t.wgtGetProperty(e,"type");s=s||n.type;var l,g={type:s},u=apn.dbUI&&apn.dbUI.system&&apn.dbUI.system.page?apn.dbUI.system.page:apn.CExe.GL({ko:"페이지",en:"Page"});if(l=t.dlgDoModal(600,Math.ceil(.8*bx.UX.height),a)){eduLib.edtSetTitleWidth(t,l,.52);var c;if(t.wgtGetProperty(e,"noPageMode")||(2==r?"apn.COverlayPage"==t.getScreenData().module?(eduLib.edtInputAdd(t,l,{type:"select",title:apn.CExe.GL({ko:"연동할 모듈",en:"Interact with"})+" (m)",options:[{title:u+" "+apn.CExe.GL({ko:"관리자",en:"manager of this file"}),value:"F2"},{title:"'Slide Area' "+apn.CExe.GL({ko:"위젯",en:"widget in this "+u}),value:"Slide Widget"}],key:"type",value:g,onchange:i,join:!0}),c=!0):n.type="Slide Widget":eduLib.edtInputAdd(t,l,{type:"select",title:apn.CExe.GL({ko:"연동할 모듈",en:"Interact with"})+" (m)",options:[{title:u+" "+apn.CExe.GL({ko:"관리자",en:"manager of this file"}),value:"File"},{title:"'Slide Area' "+apn.CExe.GL({ko:"위젯",en:"widget in this "+u}),value:"Slide Widget"}],key:"type",value:g,onchange:i,join:!0}),d.length&&eduLib.edtInputAdd(t,l,{id:"ver2",type:"select",options:d,title:apn.CExe.GL({ko:"연동할 위젯",en:"Connected Widget"})+" (m)",key:"idWgt",value:n,join:!0}),eduLib.edtInputAdd(t,l,{type:"select",title:apn.CExe.GL({ko:"점을 클릭하면 연결 대상(Page/Slide/Pane)으로 전환",en:"Switch to target(page/slide/pane) on tap of dot"}),value:n,key:"otb",options:[{title:apn.CExe.GL({ko:"예",en:"Yes"}),value:"Y"},{title:apn.CExe.GL({ko:"아니오",en:"No"}),value:""}],join:!0}),eduLib.edtInputAdd(t,l,{type:"space"})),eduLib.edtInputAdd(t,l,{type:"title",title:apn.CExe.GL({ko:"점의 상태 표시 이미지",en:"Images for Dot states"})}),eduLib.edtInputAdd(t,l,{type:"image",title:apn.CExe.GL({ko:"선택",en:"On"})+" (m)",key:"imageOn",value:n,join:!0}),eduLib.edtInputAdd(t,l,{type:"image",title:apn.CExe.GL({ko:"미선택",en:"Off"})+" (m)",key:"imageOff",value:n,join:!0}),eduLib.edtInputAdd(t,l,{type:"space"}),eduLib.edtInputAdd(t,l,{type:"title",title:apn.CExe.GL({ko:"추가 설정",en:"More options"})}),eduLib.edtInputAdd(t,l,{type:"number",title:apn.CExe.GL({ko:"점간의 여백",en:"Margin between Dots"})+"[px]",key:"margin",value:n,join:!0}),c){eduLib.edtInputAdd(t,l,{id:"v2page",type:"space"}),eduLib.edtInputAdd(t,l,{id:"v2page",type:"title",title:apn.CExe.GL({ko:"제외할",en:"Excluded"})+" "+u});var x=apn.CExeBook.IStub_pageSelectionList(t.getData());x.push({title:"",value:""}),eduLib.edtInputAdd(t,l,{id:"v2page",type:"table",value:n.xpg,options:{th:[u],add:!0,remove:!0},td:[{type:"select",key:"i",options:x}],join:!0})}}},xa.edtOnRemapObjectID=function(t,e,a){if(e&&e.properties&&e.properties.attrs&&e.properties.attrs.cfg){var i=e.properties.attrs.cfg;i.idWgt&&(a[i.idWgt]?i.idWgt=a[i.idWgt]:t.getScreenData().objects[i.idWgt]||(i.idWgt=""))}},xa._imgW=function(t){return t.width?t.width:t.naturalWidth?t.naturalWidth:parseInt(t.style.width)?parseInt(t.style.width):0},xa._imgH=function(t){return t.height?t.height:t.naturalHeight?t.naturalHeight:parseInt(t.style.height)?parseInt(t.style.height):0},xa.setupDots=function(t,e,a,i){function n(){p++,2==p&&(r(),i&&i())}function r(){if(d.ctx.tagDotOn=s,d.ctx.tagDotOffs=[],d.ctx.tagDotOffs.push(l),d.ctx.marginX=bx.$checkNaN(parseInt(o.margin)),d.ctx.count=a,d.ctx.cur=-1,1!=t.getZoomX()||1!=t.getZoomY()){var i=g._imgW(d.ctx.tagDotOffs[0]),n=g._imgH(d.ctx.tagDotOffs[0]),r=g._imgW(d.ctx.tagDotOn),p=g._imgH(d.ctx.tagDotOn);d.ctx.tagDotOffs[0].style.width=Math.round(1/t.getZoomX()*i)+"px",d.ctx.tagDotOffs[0].style.height=Math.round(1/t.getZoomY()*n)+"px",d.ctx.tagDotOn.style.width=Math.round(1/t.getZoomX()*r)+"px",d.ctx.tagDotOn.style.height=Math.round(1/t.getZoomY()*p)+"px"}var u=a-(d.ctx.tagDotOffs.length+1);if(u>0)for(var c=0;c<u;c++){var x=d.ctx.tagDotOffs[0].cloneNode(!0);d.ctx.tagDotOffs[0].parentNode.appendChild(x),d.ctx.tagDotOffs.push(x)}if("Y"==o.otb)for(var c=0;c<d.ctx.tagDotOffs.length;c++)d.ctx.tagDotOffs[c].style.cursor="pointer",d.ctx.tagDotOffs[c].apxOnEvent=function(t,a){if("click"==a){var i=t.wgtGetProperty(e,"type");return"F2"==i&&d.ctx.pages&&d.ctx.pages[this._dotIdx]?t.runITR({action:"LTP",to:{pageID:d.ctx.pages[this._dotIdx],type:1}}):"Slide Widget"==i&&o.idWgt&&t.wgtTag(o.idWgt)&&t.wgtSetProperty(o.idWgt,"apxStepRun",this._dotIdx),!0}};d.ctx.ready=!0,void 0!==d.ctx._delayed&&(uxWgtDotIndicator.showDots(t,e,a,d.ctx._delayed),d.ctx._delayed=void 0)}var o=t.wgtGetProperty(e,"cfg"),d=t.wgtTag(e);if(!d.ctx||!d.ctx.setupCalled&&!d.ctx.ready){d.ctx.setupCalled=!0;var p=0,s=d.$TAG("img",{style:"position:absolute;"});s.onload=n,s.src=t.mediaURL(o.imageOn.mediaID);var l=d.$TAG("img",{style:"position:absolute;"});l.onload=n,l.src=t.mediaURL(o.imageOff.mediaID),d.style.display="none";var g=this}},xa.showDots=function(t,e,a,n){var r=t.wgtTag(e);if(r.ctx&&(r.ctx.cur=n,r.ctx.ready)){r.style.display="block";var o=this._imgW(r.ctx.tagDotOffs[0])*(a-1)+this._imgW(r.ctx.tagDotOn)+r.ctx.marginX*(a-1),d=Math.max(this._imgH(r.ctx.tagDotOffs[0]),this._imgH(r.ctx.tagDotOn)),p=(parseInt(r.style.width)-o)/2,s=(parseInt(r.style.height)-d)/2,l=0,g=p,u=s+d/2;for(r.ctx.tagDotOn.style.display="none",i=0;i<r.ctx.tagDotOffs.length;i++)r.ctx.tagDotOffs[i].style.display="none";if(!(n<0))for(i=0;i<a;i++)i==n?(r.ctx.tagDotOn.style.display="block",r.ctx.tagDotOn.style.left=g+"px",r.ctx.tagDotOn.style.top=u-this._imgH(r.ctx.tagDotOn)/2+"px",g+=this._imgW(r.ctx.tagDotOn)+r.ctx.marginX):(r.ctx.tagDotOffs[l].style.display="block",r.ctx.tagDotOffs[l].style.left=g+"px",r.ctx.tagDotOffs[l].style.top=u-this._imgH(r.ctx.tagDotOffs[l])/2+"px",r.ctx.tagDotOffs[l]._dotIdx=i,g+=this._imgW(r.ctx.tagDotOffs[l])+r.ctx.marginX,l++)}},xa.exeOnLoad=function(t,e){function a(){uxWgtDotIndicator.showDots(t,e,s.count,s.index)}function a(){t.viewer.getCurPageID()&&uxWgtDotIndicator.exeOnPageRun(t,e,t.viewer.getCurPageID())}function i(){uxWgtDotIndicator._onTrackOn(t,e,p.ctx.count,p.ctx.cur==-1?0:p.ctx.cur)}function n(a,n,r){switch(a){case"listSet":uxWgtDotIndicator.setupDots(t,e,n,i);break;case"trackEnd":uxWgtDotIndicator._onTrackOn(t,e,n,r)}}function r(a,i){a==v&&uxWgtDotIndicator._onStep(t,e,i)}var o=t.wgtGetProperty(e,"type"),d=t.wgtGetProperty(e,"cfg"),p=t.wgtTag(e);if(d.imageOn.mediaID&&d.imageOff.mediaID)if(p.firstChild&&"DIV"==p.firstChild.tagName&&(p.firstChild.style.display="none"),p.ctx={},"File"==o){var s=t.utlGetIndexInFlow(e,{key:"type",value:"File"},!0);if(s.count<=1)return void t.log(e,"Only 1 slide includes this widget. So, this widget will be disabled.");uxWgtDotIndicator.setupDots(t,e,s.count,a),t.wgtSetProperty(e,"apxFixOverPage",!0)}else if("F2"==o){var l=apn.Project.getPages(t.viewer.project,!0);if(d.xpg&&d.xpg.length)for(var g,u=0;u<d.xpg.length;u++)for(g=0;g<l.length;g++)l[g]==d.xpg[u].i&&(l.splice(g,1),g--);if(l.length<=1)return void t.log(e,"Only 1 page is included in the flow of this file. This widget will be disabled.");p.ctx.pages=l,uxWgtDotIndicator.setupDots(t,e,l.length,a)}else if("Video/Audio"==o||"Video/Audio Widget"==o){var c=t.getWidgetsByProperty("apxMediaControl"),x=t.getWidgetsByProperty("apxMediaControl");if(!c.length)return void t.log(e,"Cannot find any kind of Media Widget in this page. So, this widget will be disabled.");for(var y=apn.Project.findParentOf(t.screen,e,void 0,!0),u=0;u<x.length;u++)y&&y!=apn.Project.findParentOf(t.screen,x[u],void 0,!0)&&(x.splice(u,1),u--);var v;(v=uxWgtDotIndicator._closest(t,e,x)||uxWgtDotIndicator._closest(t,e,c))&&t.wgtListenMedia(e,v,n)}else if("Slide"==o||"Slide Widget"==o){var v;if(d.idWgt)v=d.idWgt;else{var m=t.getWidgetsByProperty("apxStep"),f=t.getWidgetsByProperty("apxStep");if(!m.length)return void t.log(e,"Cannot find any kind of Step Widget in this page. So, this widget will be disabled.");for(var y=apn.Project.findParentOf(t.screen,e,void 0,!0),u=0;u<f.length;u++)y&&y!=apn.Project.findParentOf(t.screen,f[u],void 0,!0)&&(f.splice(u,1),u--);v=uxWgtDotIndicator._closest(t,e,f)||uxWgtDotIndicator._closest(t,e,m)}v&&t.wgtListenProperty(e,"apxStep",r)}},xa.exeOnPageRun=function(t,e,a){var i=t.wgtTag(e);if(i.ctx&&i.ctx.pages&&i.ctx.pages.length>1){for(var n=0;n<i.ctx.pages.length;n++)if(i.ctx.pages[n]==a)return void this.showDots(t,e,i.ctx.pages.length,n);"none"==i.style.display&&this.showDots(t,e,i.ctx.pages.length,0)}},xa._closest=function(t,e,a){for(var i,n=[],r=null,o=0;o<a.length;o++)i=t.wgtIntersectWith(void 0,e,1,a[o]),i&&i.length&&n.push(i[0]);return n.length>1?a=n:1==n.length&&(r=n[0]),r||(r=t.utlFindClosest(e,a)),r},xa._onTrackOn=function(t,e,a,i){var n=t.wgtTag(e);return a<=1?void uxWgtDotIndicator.showDots(t,e,1,-1):(i==a&&(i=0),i>a||a>n.ctx.tagDotOffs.length+1?(uxWgtDotIndicator.showDots(t,e,1,-1),void t.devError(e,"Invalid track information; trackCount="+a+", trackCur="+i)):void uxWgtDotIndicator.showDots(t,e,a,i))},xa._onStep=function(t,e,a){function i(){uxWgtDotIndicator.showDots(t,e,n.ctx.count,n.ctx.cur==-1?0:n.ctx.cur)}var n=t.wgtTag(e);return a.count&&!(a.count<=1)&&a.current<a.count?void(n.ctx.setupCalled?n.ctx.ready?uxWgtDotIndicator.showDots(t,e,a.count,a.current):n.ctx._delayed=a.current:uxWgtDotIndicator.setupDots(t,e,a.count,i)):(uxWgtDotIndicator.showDots(t,e,1,-1),void t.devError(e,"Invalid step information; stepCount="+a.count+", stepCur="+a.current))},uxWgtDotIndicator=xa;var xa=apn.inheritWidget(apn.widgets["apn.wgt.image2"]);xa.exeFireStateEvent=!0,xa.styleMap={title:!0,visibility:!0,strokeStyle:!0,lineWidth:!0,lineDash:!0,font:!0,fontSize:!0,fontStyle:!0,fontItalic:!0,fontBold:!0,textMultiLine:!0,fontUnderlined:!0,text:!0,textAlign:!0,textValign:!0,textPadding:!0,fontStrokeStyle:!0,fontStrokeWidth:!0,borderRadiusTopLeft:!0,borderRadiusTopRight:!0,borderRadiusBottomLeft:!0,borderRadiusBottomRight:!0,alpha:!0,angle:!0,mediaID:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0,csr:!0},xa.editor={},xa.editor.iconThumb="DB/ux/imgs/wgts/thumbs/imageButton.png",xa.properties.state="normal",xa.properties.attrs=xa.properties.attrs||{},xa.properties.attrs.selectType="",xa.properties.attrs.btnV=2,xa.properties.attrs.autoKeepSize=!1,xa.properties.attrs.cfg={images:{normal:{mediaID:void 0},down:{mediaID:void 0},hover:{mediaID:void 0},disabled:{mediaID:void 0},disabledDown:{mediaID:void 0},disabledHover:{mediaID:void 0},checked:{mediaID:void 0},checkedD:{mediaID:void 0},checkedH:{mediaID:void 0}},clr:{disabled:null,down:null,hover:null},ttip:""},xa.onEdit=apn.widgets["apn.wgt.rect"].onEdit,xa.exeAssetPreload=function(t,e,a){function i(t,e,i){a()}var n=t.wgtGetProperty(e,"cfg"),r={},o=0;for(var d in n.images)n.images[d].mediaID&&(r[d]={url:t.mediaURL(n.images[d].mediaID)},o++);o?(new apn.CRscLoader).load(t.project,r,i):a()},xa.exeOnLoad=function(t,e){function a(t,e){e==bx.CGesture.POINTER_START?t.btnOnDown&&t.btnOnDown(t):e==bx.CGesture.POINTER_END&&(t._down=!1,t.btnOnState&&t.btnOnState(t))}var i=this,n=t.wgtTag(e),r=t.wgtGetProperty(e,"cfg"),o=t.wgtGetProperty(e,"selectType"),d=!1;t.viewer.isStretch()&&apn.CExe.ACCEL(n),r.ttip&&(n.title=r.ttip),r.images.disabledDown||(r.images.disabledDown={mediaID:void 0}),r.images.disabledHover||(r.images.disabledHover={mediaID:void 0}),r.clr||(r.clr={disabled:null,down:null,hover:null}),this.I_exeOnLoad_check&&!this.I_exeOnLoad_check(t,e)||(n._images=bx.$cloneObject({},r.images),n._down=!1,"tab"==o||"toggle"==o?("tab"==o&&(n._images.down=n._images.disabled,n._images.hover.mediaID||(n._images.hover=n._images.disabled)),n.apxOnEvent=function(t,a,i,n){if("click"==a)return"toggle"==o?"normal"==t.wgtGetProperty(e,"apxState")?t.wgtSetProperty(e,"apxState","disabled"):t.wgtSetProperty(e,"apxState","normal"):"normal"==t.wgtGetProperty(e,"apxState")&&t.wgtSetProperty(e,"apxState","disabled"),!0}):"check"==o&&(n.apxOnEvent=function(t,a,i,n,r,r,o){if("click"==a)return"normal"==t.wgtGetProperty(e,"apxState")?t.wgtSetProperty(e,"apxState","checked"):t.wgtSetProperty(e,"apxState","normal"),!0}),(n._images.down.mediaID||r.clr&&r.clr.down||n._images.disabledDown.mediaID||r.clr&&r.clr.disabledDown)&&(n.btnOnDown=function(a){var r="down";if("toggle"==o)"disabled"==t.wgtGetProperty(e,"apxState")&&(r="disabledDown");else if("check"==o);else if("disabled"==t.wgtGetProperty(e,"apxState"))return;n._down=!0,n._images[r].mediaID&&i.exeAssetLoad(t,a,n._images[r].mediaID),uxWgtBtnImage.setTextColor(t,e,r),i.I_exeOnStateChange&&i.I_exeOnStateChange(t,e,r)},d=!0),(n._images.normal.mediaID||n._images.disabled.mediaID||r.clr&&r.clr.disabled||r.clr&&r.clr.checked)&&(n.btnOnState=function(a){var r=t.wgtGetProperty(e,"apxState");n._images[r]||(r="normal"),n._images[r].mediaID&&i.exeAssetLoad(t,a,n._images[r].mediaID),uxWgtBtnImage.setTextColor(t,e,r),i.I_exeOnStateChange&&i.I_exeOnStateChange(t,e,r)},d=!0),(n._images.hover.mediaID||r.clr&&r.clr.hover||n._images.disabledHover.mediaID||r.clr&&r.clr.disabledHover||r.clr&&r.clr.checkedH)&&(n.onmousemove=function(a){if(n.apnPassPointerEvent)return!1;if(!n._down){var r="hover";if("toggle"==o)"disabled"==t.wgtGetProperty(e,"apxState")&&(r="disabledHover");else if("check"==o)"checked"==t.wgtGetProperty(e,"apxState")&&(r="checkedH");else if("disabled"==t.wgtGetProperty(e,"apxState"))return;n._images[r].mediaID&&i.exeAssetLoad(t,n,n._images[r].mediaID),uxWgtBtnImage.setTextColor(t,e,r),i.I_exeOnStateChange&&i.I_exeOnStateChange(t,e,r)}},n.onmouseout=function(a){if(n.apnPassPointerEvent)return!1;if(n._down)if("check"==o)var r="checkedD";else var r="down";else var r=t.wgtGetProperty(e,"apxState");n._images[r].mediaID&&i.exeAssetLoad(t,n,n._images[r].mediaID),uxWgtBtnImage.setTextColor(t,e,r),i.I_exeOnStateChange&&i.I_exeOnStateChange(t,e,r)}),d&&new bx.CGesture(n,a,{noDelayedEvent:!0,noLongholdEvent:!0}),n.btnOnState&&n.btnOnState(n),this.I_exeOnLoad_post&&this.I_exeOnLoad_post(t,e))},xa.exeSetState=function(t,e,a,i){function n(e){"on"==t.wgtGetProperty(e,"apxState")?t.wgtSetProperty(e,"apxState","off"):"disabled"==t.wgtGetProperty(e,"apxState")||"checked"==t.wgtGetProperty(e,"apxState")?t.wgtSetProperty(e,"apxState","normal"):"2"==t.stateGetActive(e,!0)&&(t.stateLayerActivate(e,"1"),t.stateSetActive(e,"1"))}if(i!=a){var r=t.wgtGetProperty(t.wgtId(e),"selectType");"toggle"==r||"check"==r||setTimeout(function(){"normal"==a?(t.tagBlockPointerEvent(e,!1),apn.IWidget.exeSetCursor(e,e.apnCur.orgCursor)):(t.tagBlockPointerEvent(e,!0),e.style.cursor="inherit")},0),e.btnOnState&&e.btnOnState(e);var o=t.wgtId(e);t.wgtGetProperty(o,"uxToggleGroup")&&("disabled"!=a&&"checked"!=a||t.utlIterateInGroup(o,"uxToggleGroup",n))}},xa.exeOnScreenRefresh=apn.widgets["apn.wgt.rect"].exeOnScreenRefresh,xa.exeOnForceStyle=function(t,e){e.csr&&"apn.auto"!=e.csr||(e.csr="pointer")},xa.setTextColor=function(t,e,a){var i,n=t.wgtTag(e),r=t.wgtGetProperty(e,"cfg"),o=t.wgtGetProperty(e,"btnV"),d=!!t.wgtGetProperty(e,"apxText");d&&(i=n.textTag?n.textTag:n),i&&r.clr&&("normal"==a?(i.style.color="inherit",2==o&&(n.style.borderColor=apn.Project.resolveStyle(t.project,"strokeStyle",t.wgtGetProperty(e,"apxStrokeStyle")))):r.clr[a]&&(i.style.color=r.clr[a],2==o&&(n.style.borderColor=r.clr[a])))},xa.createAsCanvasObject=function(t,e,a,i,n){return apn.IWidget.createCanvasObject(t,this,"apn.CImage",bx.CCanvasWnd.SHAPE_RECT,e,a,i,n)},xa.edtOnConfig=function(t,e){function a(){eduLib.edtInputApplyAll(t,i.tagSub),eduLib.edtInputApplyAll(t,i.tagOrg),d.edtOnSetState(t,e,t.wgtGetProperty(e,"apxState")),t.wgtSetProperty(e,"cfg",n),r&&(t.wgtSetProperty(e,"local",r),d.I_edtOnConfig_save&&d.I_edtOnConfig_save(t,e,r,i,i.tagSub,i.tagOrg)),i._tmpSelectType&&t.wgtSetProperty(e,"selectType",i._tmpSelectType)}var i,n=t.wgtGetProperty(e,"cfg"),r=t.wgtGetProperty(e,"local"),o=t.wgtGetProperty(e,"selectType");n.images.disabledDown||(n.images.disabledDown={mediaID:void 0}),n.images.disabledHover||(n.images.disabledHover={mediaID:void 0}),n.clr||(n.clr={disabled:null,down:null,hover:null});var d=this;(i=t.dlgDoModal(700,Math.ceil(.8*bx.UX.height),a))&&(i.tagSub=i.$TAG("div"),i.tagOrg=i.$TAG("div"),this.I_edtOnConfig&&this.I_edtOnConfig(t,e,r,i,i.tagSub,i.tagOrg),uxWgtBtnImage.I_edtOnConfigBuild.call(this,t,e,i,i.tagOrg,o))},xa.I_edtOnConfigBuild=function(t,e,a,i,n){var r=t.wgtGetProperty(e,"cfg");a._tmpSelectType=n;var o=apn.CExe.GL({ko:"버튼 상태 표시를 위한 이미지",en:"Image for each states"}),d=apn.CExe.GL({ko:"기본 상태",en:"Normal"}),p=apn.CExe.GL({ko:"비활성 상태",en:"Disabled"});if(2==t.wgtGetProperty(e,"btnV"))var s=apn.CExe.GL({ko:"버튼 상태 표시를 위한 텍스트/테두리 색상",en:"Text/border color for each states"});else var s=apn.CExe.GL({ko:"버튼 상태 표시를 위한 텍스트 색상",en:"Text color for each states"});this.I_edtOnConfig_title&&this.I_edtOnConfig_title(t,e,a,"normal")&&(d=this.I_edtOnConfig_title(t,e,a,"normal")),this.I_edtOnConfig_title&&this.I_edtOnConfig_title(t,e,a,"disabled")&&(p=this.I_edtOnConfig_title(t,e,a,"disabled")),i.eduLib&&delete i.eduLib,i.innerHTML="";var l="text"==t.wgtGetProperty(e,"btnType"),g=!!t.wgtGetProperty(e,"apxText");if("tab"==n)p==apn.CExe.GL({ko:"비활성 상태",en:"Disabled"})&&(p="Selected"),l||(eduLib.edtInputAdd(t,i,{type:"title",title:o}),eduLib.edtInputAdd(t,i,{type:"image",title:d+"",value:r.images,key:"normal",join:!0}),eduLib.edtInputAdd(t,i,{type:"image",title:d+" Hover",value:r.images,key:"hover",join:!0}),eduLib.edtInputAdd(t,i,{type:"image",title:p+"",value:r.images,key:"disabled"})),r.clr&&(g||l)&&(r.clr.down&&(r.clr.down=null),eduLib.edtInputAdd(t,i,{type:"space"}),eduLib.edtInputAdd(t,i,{type:"title",title:s}),eduLib.edtInputAdd(t,i,{type:"color",askUse:!0,title:p,value:r.clr,key:"disabled",join:!0}),eduLib.edtInputAdd(t,i,{type:"color",askUse:!0,title:d+" Hover",value:r.clr,key:"hover"}));else if("toggle"==n)p==apn.CExe.GL({ko:"비활성 상태",en:"Disabled"})&&(p="Selected"),l||(eduLib.edtInputAdd(t,i,{type:"title",title:o}),eduLib.edtInputAdd(t,i,{type:"image",title:p+"",value:r.images,key:"disabled",join:!0}),eduLib.edtInputAdd(t,i,{type:"image",title:p+" Hover",value:r.images,key:"disabledHover",join:!0}),eduLib.edtInputAdd(t,i,{type:"image",title:p+" Pressed",value:r.images,key:"disabledDown"}),eduLib.edtInputAdd(t,i,{type:"space"}),eduLib.edtInputAdd(t,i,{type:"image",title:d+"",value:r.images,key:"normal",join:!0}),eduLib.edtInputAdd(t,i,{type:"image",title:d+" Hover",value:r.images,key:"hover",join:!0}),eduLib.edtInputAdd(t,i,{type:"image",title:d+" Pressed",value:r.images,key:"down"})),r.clr&&(g||l)&&(eduLib.edtInputAdd(t,i,{type:"space"}),eduLib.edtInputAdd(t,i,{type:"title",title:s}),eduLib.edtInputAdd(t,i,{type:"color",askUse:!0,title:p,value:r.clr,key:"disabled",join:!0}),eduLib.edtInputAdd(t,i,{type:"color",askUse:!0,title:p+" Hover",value:r.clr,key:"disabledHover",join:!0}),eduLib.edtInputAdd(t,i,{type:"color",askUse:!0,title:p+" Pressed",value:r.clr,key:"disabledDown"}),eduLib.edtInputAdd(t,i,{type:"space"}),eduLib.edtInputAdd(t,i,{type:"color",askUse:!0,title:d+" Hover",value:r.clr,key:"hover",join:!0}),eduLib.edtInputAdd(t,i,{type:"color",askUse:!0,title:d+" Pressed",value:r.clr,key:"down"}));else if("check"==n){d=apn.CExe.GL({ko:"미선택 상태",en:"Unchecked"});var u=apn.CExe.GL({ko:"선택 상태",en:"Checked"});l||(eduLib.edtInputAdd(t,i,{type:"title",title:o}),eduLib.edtInputAdd(t,i,{type:"image",title:u+"",value:r.images,key:"checked",join:!0}),eduLib.edtInputAdd(t,i,{type:"image",title:u+" Hover",value:r.images,key:"checkedH"}),eduLib.edtInputAdd(t,i,{type:"space"}),eduLib.edtInputAdd(t,i,{type:"image",title:d+"",value:r.images,key:"normal",join:!0}),eduLib.edtInputAdd(t,i,{type:"image",title:d+" Hover",value:r.images,key:"hover"})),r.clr&&(g||l)&&(eduLib.edtInputAdd(t,i,{type:"space"}),eduLib.edtInputAdd(t,i,{type:"title",title:s}),eduLib.edtInputAdd(t,i,{type:"color",askUse:!0,title:u,value:r.clr,key:"checked",join:!0}),eduLib.edtInputAdd(t,i,{type:"color",askUse:!0,title:u+" Hover",value:r.clr,key:"checkedH",join:!0}),eduLib.edtInputAdd(t,i,{type:"space"}),eduLib.edtInputAdd(t,i,{type:"color",askUse:!0,title:d+" Hover",value:r.clr,key:"hover",join:!0}))}else l||(eduLib.edtInputAdd(t,i,{type:"title",title:o}),eduLib.edtInputAdd(t,i,{type:"image",title:d+"",value:r.images,key:"normal",join:!0}),eduLib.edtInputAdd(t,i,{type:"image",title:d+" Hover",value:r.images,key:"hover",join:!0}),eduLib.edtInputAdd(t,i,{type:"image",title:d+" Pressed",value:r.images,key:"down",join:!0}),"simple"!=n&&(eduLib.edtInputAdd(t,i,{type:"space"}),eduLib.edtInputAdd(t,i,{type:"image",title:p,value:r.images,key:"disabled",join:!0}))),r.clr&&(g||l)&&(eduLib.edtInputAdd(t,i,{type:"space"}),eduLib.edtInputAdd(t,i,{type:"title",title:s}),eduLib.edtInputAdd(t,i,{type:"color",askUse:!0,title:d+" Hover",value:r.clr,key:"hover",join:!0}),eduLib.edtInputAdd(t,i,{type:"color",askUse:!0,title:d+" Pressed",value:r.clr,key:"down",join:!0}),"simple"!=n&&eduLib.edtInputAdd(t,i,{type:"color",askUse:!0,title:p,value:r.clr,key:"disabled",join:!0}));eduLib.edtInputAdd(t,i,{type:"space"}),eduLib.edtInputAdd(t,i,{type:"title",title:apn.CExe.GL({ko:"도움말(툴팁)",en:"Tooltip"})}),eduLib.edtInputAdd(t,i,{type:"text",title:apn.CExe.GL({ko:"메시지",en:"Message"}),value:r,key:"ttip",join:!0})},xa.edtOnSetState=function(t,e,a){var i=t.wgtGetProperty(e,"cfg");i.images[a].mediaID?t.wgtSetProperty(e,"apxMediaID",i.images[a].mediaID,t.wgtGetProperty(e,"autoKeepSize")):t.wgtSetProperty(e,"apxMediaID",null)},xa.edtOnBuildState=function(t,e,a,i){var n,r=t.pages[a].objects[e].create.data;r&&r.properties&&r.properties.attrs&&(n=r.properties.attrs.selectType),"tab"==n||"toggle"==n?(i.disabled="Selected",i.normal="Unselected"):"check"==n?(i.checked="Checked",i.normal="Unchecked"):(i.normal="Normal",i.disabled="Disabled")},uxWgtBtnImage=xa;var xa={};xa.APX_NO_POINTER_EV=!0,xa.styleMap={title:!0,visibility:!0,alpha:!0,angle:!0},xa.editor={iconThumb:"imgs/wgts/thumbs/video.png",properties:{Control:["Show","Hide"],"YouTube Info":["Show","Hide"]},runtimeProperties:{YouTubeURL:{title:"YouTube URL",input:""}},states:{play:"Play",stop:"Stop",resume:"Resume",pause:"Pause"}},xa.properties={state:"stop",uiOpened:!1,attrs:{apxMediaControl:!0,Control:"Hide","YouTube Info":"Hide",ids:[{id:""}]}},xa.CMedia={btnPlay:"DB/ux/imgs/wgts/youtube_play_btn.png",bgColor:"#000000",control:{Show:{btnPlay:!0,systemControl:!0},Hide:{btnPlay:!0}}},xa.exeCreateTag=apn.widgets["apn.wgt.rect"].exeCreateTag,xa.exeRenderTag=apn.widgets["apn.wgt.rect"].exeRenderTag,xa.createAsCanvasObject=apn.widgets["apn.wgt.audio"].createAsCanvasObject,xa.exeSetState=function(t,e,a,i,n){if(a){if(bx.HCL.DV.isAndroid())return null;"play"!=a||e.mediaTag||(e._delayedAutoPlay=!0),t.wgtControlMedia(t.wgtId(e),a)}},xa.exeOnLoad=function(t,e){function a(){t.wgtTag(e)&&(uxWgtYT._createPlayer(t,e),n._delayedAutoPlay&&(t.wgtControlMedia(e,"play"),delete n._delayedAutoPlay),n._tagBlock=n.$TAG("div",{style:"position:absolute;left:0px;top:0px;width:100%;height:100%;z-index:1;display:none;"}))}function i(a,i){a==e&&uxWgtYT.exeAssetLoad(t,n,[uxWgtYT._convert(i)])}var n=t.wgtTag(e);n.style.backgroundColor="#000000",bx.YT&&(bx.YT.isReady()?a():bx.YT.init(a)),t.wgtListenProperty(e,"YouTubeURL",i)},xa.exeOnScreenDrag=function(t,e,a){var i=t.wgtTag(e);a?i._tagBlock&&(i._tagBlock.style.display="block"):i._tagBlock&&(i._tagBlock.style.display="none")},xa.exeOnPause=function(t,e){t.wgtTag(e).mediaTag&&t.wgtTag(e).mediaTag.pause()},xa.exeOnDestroy=function(t,e){var a=t.wgtTag(e);a.mediaTag&&a.mediaTag.destroy()},xa.exeAssetLoad=function(t,e,a){e.mediaTag&&(e.mediaTag.apnPlayList=a,e.mediaTag.apnPlayList.apnCurrent=-1,e.mediaTag.apnPlayList.length&&(e.mediaTag.load(e.mediaTag.apnPlayList[0]),e.mediaTag.apnPlayList.apnCurrent=0,e.exeOnMediaEvent&&e.exeOnMediaEvent("listSet",e.mediaTag.apnPlayList.length)))},xa.exeMediaPlay=function(t,e,a){if(t.mediaTag){var i=0;e&&void 0!==a&&a-1<t.mediaTag.apnPlayList.length&&(i=a-1),e&&(t.mediaTag.apnPlayEnded=!1,t.mediaTag.apnPlayList.apnCurrent=i,t.mediaTag.load(t.mediaTag.apnPlayList[i]));try{t.mediaTag.play(void 0,e)}catch(t){console.error("Exception in play video",t)}}},xa.exeMediaPause=function(t){t._delayedAutoPlay=!1,t.mediaTag&&t.mediaTag.pause()},xa.exeMediaStop=function(t,e){t._delayedAutoPlay=!1,t.mediaTag&&t.mediaTag.src&&(t.mediaTag.isPaused()?(e&&!t.mediaTag.apnPlayEnded&&e.fireEvent("media","End",t.apnOID),t.mediaTag.apnPlayEnded=!0):(t.mediaTag.apnPlayEnded=!0,t.mediaTag.pause()),t.mediaTag.apnPlayList.apnCurrent=0,t.mediaTag.cue(t.mediaTag.src))},xa.mediaHandler=function(t,e,a){t.mediaTag.onloadedmetadata=function(){t.exeOnMediaEvent&&(0==this.apnPlayList.apnCurrent&&t.exeOnMediaEvent("listStart"),this.duration()&&t.exeOnMediaEvent("infoDuration",0,this.duration()),t.exeOnMediaEvent("trackStart",this.apnPlayList&&this.apnPlayList.length>1?this.apnPlayList.length:1,this.apnPlayList.apnCurrent+1)),0==this.apnPlayList.apnCurrent&&e.fireEvent("media","Start",t.apnOID)},t.mediaTag.onplay=function(){t.mediaTag.apnPlayEnded=!1,t.mediaTag.currentTime()>0&&e.fireEvent("media","Resume",t.apnOID)},t.mediaTag.onpause=function(){1==t.mediaTag.apnPlayEnded?e.fireEvent("media","End",t.apnOID):e.fireEvent("media","Pause",t.apnOID)},t.mediaTag.onended=function(){var a=!1,i=this.apnPlayList&&this.apnPlayList.length>1?this.apnPlayList.apnCurrent+1:1;this.apnPlayList&&this.apnPlayList.length>1&&(this.apnPlayList.apnCurrent<this.apnPlayList.length-1&&(this.apnPlayList.apnCurrent++,
a=!0),a&&this.play(this.apnPlayList[this.apnPlayList.apnCurrent])),a||(this.apnPlayEnded=!0,this.apnPlayList.apnCurrent=0,this.cue(this.apnPlayList[0]));var n=this.apnPlayList&&this.apnPlayList.length>1?this.apnPlayList.length:1;t.exeOnMediaEvent&&t.exeOnMediaEvent("trackEnd",n,i),n==i&&e.fireEvent("media","End",t.apnOID)},t.mediaTag.ontimeupdate=function(){},t.mediaTag.onerror=function(t){bx.Trace.log("APN","warning","Cannot play YouTube Video ID="+this.src+", YouTube Code="+t,"APN.YT")}},xa._createPlayer=function(t,e){var a=t.wgtTag(e);a.mediaTag=new bx.YT.CVideo,a.mediaTag.create(a,parseInt(a.style.width),parseInt(a.style.height),{controls:"Show"==t.wgtGetProperty(e,"Control")?1:0,info:"Show"==t.wgtGetProperty(e,"YouTube Info")?1:0}),uxWgtYT.mediaHandler(a,t);for(var i=[],n=0;n<t.wgtGetProperty(e,"ids").length;n++)t.wgtGetProperty(e,"ids")[n].id&&i.push(t.wgtGetProperty(e,"ids")[n].id);uxWgtYT.exeAssetLoad(t,a,i)},xa._convert=function(t){if((t||"").indexOf("v=")!=-1){if(bx.$getParamFromURL(t,"v"))return bx.$getParamFromURL(t,"v")}else{var e=(t||"").split("/");if(e.length>0&&e[e.length-1])return e[e.length-1]}return t},xa.edtOnConfig=function(t,e){function a(){eduLib.edtInputApplyAll(t,i);for(var a=0;a<n.length;a++)n[a].id=uxWgtYT._convert(n[a].id);t.wgtSetProperty(e,"ids",n)}var i,n=t.wgtGetProperty(e,"ids");t.wgtGetProperty(e,"noMultiTrack")?(i=t.dlgDoModal(500,200,a))&&eduLib.edtInputAdd(t,i,{type:"table",value:n,options:{th:["YouTube URL/ID"]},td:[{type:"text",key:"id"}]}):(i=t.dlgDoModal(500,400,a))&&eduLib.edtInputAdd(t,i,{type:"table",value:n,options:{th:["YouTube URL/ID"],add:!0,remove:!0},td:[{type:"text",key:"id"}]})},uxWgtYT=xa;var xa=apn.inheritWidget(apn.widgets["apn.wgt.rect"]);xa.APX_NO_POINTER_EV=!0,xa.styleMap={title:!0,visibility:!0,alpha:!0,angle:!0},xa.editor={iconThumb:"DB/ux/imgs/wgts/thumbs/webPageIframe.png"},xa.properties={attrs:{URL:"http://",Scrollbar:"Auto",cfg:{pW:"",pWn:"width",pH:"",pHn:"height"}}},xa.scriptInfo={wgtData:{message:{help:"Send or receive data with IFRAME TAG. To receive, get this value on 'ReceiveMessage' Widget event."}}},xa.onEdit=void 0,xa.exeCreateTag=function(t,e,a,i,n){var r=!1;a.create.data.properties&&a.create.data.properties.attrs&&a.create.data.properties.attrs.Scrollbar&&"Auto"==a.create.data.properties.attrs.Scrollbar&&(r=!0);var o=document.body.$TAG("div",{style:"position:absolute;overflow:hidden;"});return o.$CSS({boxSizing:"border-box"}),o.apnCur={},o._tagIFrame=o.$TAG("iframe",{scrolling:r?"auto":"no",style:"position:absolute;left:0px;top:0px;width:100%;height:100%;border:none;overflow:hidden;"}),o._tagBlock=o.$TAG("div",{style:"position:absolute;left:0px;top:0px;width:100%;height:100%;z-index:1;display:none;"}),o},xa._htmlSet=function(t,e,a){e._tagIFrame.sandbox="allow-same-origin allow-modals",e._tagIFrame.src="",e._dlydHtml=a},xa.exeOnLoad=function(t,e){function a(){d._dlydHtml&&(d._tagIFrame.contentWindow.document.documentElement.innerHTML=d._dlydHtml,delete d._dlydHtml),t.fireEvent("wgtEvent","load",e)}function i(t,a){t==e&&(d._tagIFrame.src=a)}function n(a,i){a==e&&p._htmlSet(t,d,i)}function r(t,a){if(t==e){var i=d._tagIFrame.contentWindow||d._tagIFrame;bx.HCL.DV.isIE()&&i.focus(),i.print()}}function o(t,a){if(t==e){var i=d._tagIFrame.contentWindow||d._tagIFrame;i.postMessage({apxID:e,value:a},"*")}}var d=t.wgtTag(e),p=this;setTimeout(function(){var a=t.wgtGetProperty(e,"URL"),i=t.wgtGetProperty(e,"cfg");if("http://"!=a){if(i&&(i.pW&&i.pWn||i.pH&&i.pHn)){var n=!0;a.indexOf("?")==-1&&(a+="?",n=!1),i.pW&&i.pWn&&(a+=(n?"&":"")+i.pWn+"="+parseInt(d.style.width),n=!0),i.pH&&i.pHn&&(a+=(n?"&":"")+i.pHn+"="+parseInt(d.style.height))}d._tagIFrame.src=a}},0),d._tagIFrame.addEventListener("load",a,!1),t.wgtListenProperty(e,"URL",i),t.wgtListenProperty(e,"html",n),t.wgtListenProperty(e,"print",r),t.wgtListenProperty(e,"message",o)},xa.exeOnScreenDrag=function(t,e,a){var i=t.wgtTag(e);a?i._tagBlock&&(i._tagBlock.style.display="block"):i._tagBlock&&(i._tagBlock.style.display="none")},xa.exeOnReceiveMessage=function(t,e,a){t.wgtSetProperty(e,"message",a,!0),t.fireEvent("wgtEvent","receiveMessage",e)},xa.edtOnConfig=function(t,e){function a(){eduLib.edtInputApplyAll(t,r),t.wgtSetProperty(e,"cfg",o),t.wgtSetProperty(e,"URL",d.URL),t.wgtSetProperty(e,"Scrollbar",d.Scrollbar),t.wgtRefreshUI(e)}function i(){eduLib.edtInputShow(t,r,"w","Y"==this.value)}function n(){eduLib.edtInputShow(t,r,"h","Y"==this.value)}var r,o=t.wgtGetProperty(e,"cfg")||{},d={URL:t.wgtGetProperty(e,"URL"),Scrollbar:t.wgtGetProperty(e,"Scrollbar")};(r=t.dlgDoModal(820,370,a))&&(eduLib.edtInputAdd(t,r,{type:"text",title:"URL (m)",value:d,key:"URL"}),eduLib.edtInputAdd(t,r,{type:"select",title:"Scroll bar",value:d,key:"Scrollbar",options:["Auto","None"]}),eduLib.edtInputAdd(t,r,{type:"space"}),eduLib.edtInputAdd(t,r,{type:"title",title:"Add more parameter to URL"}),eduLib.edtInputAdd(t,r,{type:"select",title:"Width",value:o,key:"pW",options:[{title:"Add",value:"Y"},{title:"No",value:""}],comment:"(Current width of IFRAME in pixel)",onchange:i}),eduLib.edtInputAdd(t,r,{id:"w",type:"text",title:"Width as",value:o,key:"pWn"}),eduLib.edtInputAdd(t,r,{type:"select",title:"Height",value:o,key:"pH",options:[{title:"Add",value:"Y"},{title:"No",value:""}],comment:"(Current height of IFRAME in pixel)",onchange:n}),eduLib.edtInputAdd(t,r,{id:"h",type:"text",title:"Height as",value:o,key:"pHn"}))},xa.edtOnBuildEvent=function(t,e,a,i){i.wgtEvent={value:"wgtEvent",title:apn.P.eventTitle.wgtEvent,param:{}},i.wgtEvent.param.load="Load",i.wgtEvent.param.receiveMessage="ReceiveMessage"},xa.edtOnBuildRuntimeProperty=function(t,e,a){return{URL:{title:"URL",input:"http://"}}},xa.edtOnBuildProperty=function(t,e,a,i){return{URL:{title:"URL",input:"http://"},Scrollbar:{title:"Scrollbar",input:["Auto","None"]}}},uxWgtIFRAME=xa;var xa={APX_NO_POINTER_EV:!0};xa.styleMap={title:!0},xa.exeItrNoResize=!0,xa.exeItrNoZoom=!0,xa.exeItrNoMove=!0,xa.editor={},xa.editor.states={on:"On",off:"Off"},xa.editor.properties={Interval:{title:"Interval(ms)",input:null,type:"number"},Offset:{title:"Offset(±ms)",input:null,type:"number"},apxBackgroundTick:{title:"Daemon",input:[{title:"On",value:"Y"},{title:"Off",value:""}]}},xa.apnCImage={url:"DB/ux/imgs/wgts/edit/timer_on.png"},xa.properties={},xa.properties.state="off",xa.properties.attrs={Interval:1e3,Offset:0,apxBackgroundTick:""},xa.MIN=25,xa.createAsCanvasObject=function(t,e,a,i,n){return apn.IWidget.createCanvasObject(t,this,"apn.CImage",bx.CCanvasWnd.SHAPE_RECT,e,a,i,n,void 0,apn.CEditorS.NO_RESIZE)},xa.exeCreateTag=function(t,e,a,i,n){var r=document.body.$TAG("div",{style:"position:absolute;overflow:hidden;diplay:none;"});return r.apnCur={},r},xa.exeRenderTag=function(t,e,a,i,n,r){return a},xa.exeOnStart=xa.exeOnResume=function(t,e){var a=t.wgtTag(e),i=bx.$checkNaN(parseInt(t.wgtGetProperty(e,"Interval")));i<uxWgtTimer.MIN&&(i=uxWgtTimer.MIN);var n=bx.$checkNaN(parseInt(t.wgtGetProperty(e,"Offset")));a.__state="on"==t.wgtGetProperty(e,"apxState"),a._interval=i,a._offset=n,a._tm=0},xa.exeOnTick=function(t,e,a){var i=t.wgtTag(e);i.__state&&(0===i._tm||i._tm<=a)&&(t.fireEvent("timer",void 0,e,"Y"==t.wgtGetProperty(e,"apxBackgroundTick")),i._tm=a+Math.max(uxWgtTimer.MIN,i._interval+Math.floor(i._offset*(Math.random()-.5)*2)))},xa.exeSetState=function(t,e,a){e.__state="on"==a,e._tm=0},xa.edtOnSetState=function(t,e,a){var i=t.wgtGetProperty(e,"Interval");i=bx.$checkNaN(parseInt(i)),i<uxWgtTimer.MIN&&(i=uxWgtTimer.MIN,t.wgtSetProperty(e,"Interval",i)),t.wgtSetProperty(e,"URL","DB/ux/imgs/wgts/edit/timer_"+a+".png"),t.setMediaToObject(e,"DB/ux/imgs/wgts/edit/timer_"+a+".png")},xa.edtOnBuildEvent=function(t,e,a,i){i.timer={value:"timer",title:apn.P.eventTitle.timer}},uxWgtTimer=xa;var xa;xa=apn.inheritWidget(apn.widgets["apn.wgt.singleText"]),xa.styleMap={title:!0,visibility:!0,strokeStyle:!0,lineWidth:!0,lineDash:!0,fillStyle:!0,font:!0,fontSize:!0,fontStyle:!0,fontItalic:!0,fontBold:!0,fontUnderlined:!0,text:!0,textPadding:!0,fontStrokeStyle:!0,fontStrokeWidth:!0,alpha:!0,angle:!0,dragX:!0,dragY:!0,dragInParent:!0,dragContainParent:!0},xa.editor=xa.editor||{},xa.editor.states={ready:"Ready",increase:"Increase",decrease:"Decrease"},xa.editor.statesFire={True:"True",False:"False"},xa.editor.properties={InitialValue:{title:apn.CExe.GL({ko:"시작값",en:"Initial Value"}),input:"",type:"number"},TargetValue:{title:apn.CExe.GL({ko:"목표값",en:"Trigger Value"}),input:"",type:"number"}},xa.properties=xa.properties||{},xa.properties.state="ready",xa.properties.attrs={InitialValue:0,TargetValue:1},xa.exeOnLoad=function(t,e){var a=t.wgtTag(e);a.ctx={},a.ctx.value=bx.$checkNaN(parseInt(t.wgtGetProperty(e,"InitialValue"))),a.ctx.target=bx.$checkNaN(parseInt(t.wgtGetProperty(e,"TargetValue")))},xa.exeInputGet=function(t,e){return e.ctx.value},xa.exeInputSet=function(t,e,a){var i=e.ctx.value;return e.ctx.value=bx.$checkNaN(parseInt(a)),uxWgtCounter.check(t,e.apnOID),i!=e.ctx.value&&t.fireEvent("inputSet",void 0,e.apnOID),e.ctx.value},xa.edtOnInputGet=function(t,e,a){var i;return(i=t.pages[e].objects[a].create.data)&&i.properties&&i.properties.attrs?i.properties.attrs.InitialValue||0:0},xa.exeSetState=function(t,e,a,i,n){"increase"==a?(e.ctx.value++,uxWgtCounter.check(t,t.wgtId(e))):"decrease"==a&&(e.ctx.value--,uxWgtCounter.check(t,t.wgtId(e))),n&&uxWgtCounter.check(t,t.wgtId(e))},xa.check=function(t,e){var a=t.wgtTag(e);a.ctx.value==a.ctx.target?t.fireEvent("stateChange","$APXTrue",e):t.fireEvent("stateChange","$APXFalse",e),t.wgtSetProperty(e,"apxText",a.ctx.value+""),t.wgtSetProperty(e,"apxState","ready")},xa.edtOnSetProperty=function(t,e,a,i){"InitialValue"==a&&t.wgtSetProperty(e,"apxText",i)},xa.onEdit=void 0,xa.edtOnBuildProperty=void 0,uxWgtCounter=xa;
window.apn=window.apn||{},apn.CExeBookCore=function(e,t,o,a){bx.inClassing||(a=a||{},a.CExeBookCore&&a.CExeBookCore.pageNoReset||(a.clearItrOnPause=!0),apn.CExe.call(this,e,t,o,a),this.clsPageManager=apn.CBookPM)},bx.$Inherit(apn.CExeBookCore,apn.CExe),apn.CExeBookCore.prototype.init=function(e){function t(e){if(e.data&&e.data.CExeBookCore){var t=e.data.CExeBookCore;"pageShow"==t.type&&t.data&&void 0!==t.data.index&&o.runByIndex(t.data.index+1)}}apn.CExe.prototype.init.call(this,e),bx.HCL.DV.isIE()||"edge"==bx.HCL.DV.getBrowserType()?this.getPM().setCacheLimit(50):bx.HCL.DV.isIOSonly()&&this.getPM().setCacheLimit(10);var o=this;bx.Event.add(window,"message",t,!1)},apn.CExeBookCore.prototype.getProjectSize=function(){var e=apn.Project.getScreenSize(this.project);return this.o.CExeBookCore&&2==this.o.CExeBookCore.pageCount&&(e.w*=2),this.o.CExeBookCore&&this.o.CExeBookCore.pageTrimBottom&&(e.h-=this.o.CExeBookCore.pageTrimBottom),e},apn.CExeBookCore.prototype.getPaneCount=function(){return{x:this.o.CExeBookCore&&this.o.CExeBookCore.pageCount?this.o.CExeBookCore.pageCount:1,y:1}},apn.CExeBookCore.prototype.stretch=function(e,t,o){if(o&&o.fromCenter)var a=this.getPM().tag,i=this.getContainerTAG(),n=parseFloat(i.style.width),r=parseFloat(i.style.height),s=-parseFloat(a.style.left),p=-parseFloat(a.style.top),g=s+n/2,d=p+r/2,C=this.getStretchX(),h=this.getStretchY();if(apn.CExe.prototype.stretch.call(this,e,t,o),o&&o.fromCenter){var l=g*(this.getStretchX()/C),u=d*(this.getStretchY()/h),x=l-n/2,c=u-r/2;x=-x,c=-c;var v=parseFloat(a.style.width)*this.getStretchX(),B=parseFloat(a.style.height)*this.getStretchY();x<-(v-n)&&(x=-(v-n)),c<-(B-r)&&(c=-(B-r)),x=Math.min(0,x),c=Math.min(0,c),a.style.left=x+"px",a.style.top=c+"px"}if(this.IDriver_onScrollChange){var a=this.getPM().tag,v=parseFloat(a.style.width)*this.getStretchX(),B=parseFloat(a.style.height)*this.getStretchY(),s=bx.$checkNaN(parseInt(a.style.left)),p=bx.$checkNaN(parseInt(a.style.top));this.getBaseZoom&&(this.getStretchX()/this.getBaseZoom().x==1&&(s=0),this.getStretchY()/this.getBaseZoom().y==1&&(p=0)),this.IDriver_onScrollChange(-s/v,-p/B)}},apn.CExeBookCore.prototype.load=function(e,t,o){function a(e,t,o){function a(e){s.initAutoplay(),this.$isDisabled()||(s.o.CExeBookCore.noEffect?void 0!==s.$O2J.tag.$O6r&&s.$O2J.tag.$O6r!=-1&&(s.run(s.$O2J.tag.$O6r),s.onRunButton("left")):s.$O2J.tag.bxPageDrag$drag&&s.$O2J.tag.bxPageDrag$drag(2)&&s.onRunButton("left"))}function i(e){s.initAutoplay(),this.$isDisabled()||(s.o.CExeBookCore.noEffect?void 0!==s.$O2J.tag.$O6s&&s.$O2J.tag.$O6s!=-1&&(s.run(s.$O2J.tag.$O6s),s.onRunButton("right")):s.$O2J.tag.bxPageDrag$drag&&s.$O2J.tag.bxPageDrag$drag(1)&&s.onRunButton("right"))}if(e==t){if(n.pN&&n.pN.image){s.$O2J.tag.style.zIndex=1,s.tagNaviPrv=s.tagNaviPrv||s.tag.$TAG("img",{style:"cursor:pointer;z-index:1;position:absolute;",src:n.pN.image.getAttribute("src")}),s.tagNaviPrv.style.display="block",s.tagNaviPrv.style.zIndex=bx.$checkNaN(parseInt(s.getContainerTAG().$css("z-index"))||parseInt(s.getContainerTAG().zIndex))+1;var r={idle:{normal:n.pN.image.getAttribute("src")},disabled:n.pN.image.getAttribute("src")};n.pH&&n.pH.image&&(r.idle.hover=n.pH.image.getAttribute("src")),n.pD&&n.pD.image&&(r.idle.down=n.pD.image.getAttribute("src")),apnx.btnize(s.tagNaviPrv,r),bx.HCL.DV.hasTouchEvent()?s.tagNaviPrv.ontouchstart=a:s.tagNaviPrv.onmousedown=a,s.procDelayedButton("left")}if(n.nN&&n.nN.image){s.$O2J.tag.style.zIndex=1,s.tagNaviNxt=s.tagNaviNxt||s.tag.$TAG("img",{style:"cursor:pointer;z-index:1;position:absolute;",src:n.nN.image.getAttribute("src")}),s.tagNaviNxt.style.display="block",s.tagNaviNxt.style.zIndex=bx.$checkNaN(parseInt(s.getContainerTAG().$css("z-index"))||parseInt(s.getContainerTAG().zIndex))+1;var r={idle:{normal:n.nN.image.getAttribute("src")},disabled:n.nN.image.getAttribute("src")};n.nH&&n.nH.image&&(r.idle.hover=n.nH.image.getAttribute("src")),n.nD&&n.nD.image&&(r.idle.down=n.nD.image.getAttribute("src")),apnx.btnize(s.tagNaviNxt,r),bx.HCL.DV.hasTouchEvent()?s.tagNaviNxt.ontouchstart=i:s.tagNaviNxt.onmousedown=i,s.procDelayedButton("right")}s.arrangeNaviBtns(),s.$O8C(!(s.$O2J.tag.$O6r==-1),!(s.$O2J.tag.$O6s==-1))}else console.error("[CExeBook] Failed to load "+o+" images.")}this.o.CExeBookCore=this.o.CExeBookCore||{};var i=apn.Project.getLayout(e||this.$O5c).property;if(i.CExeBook&&apn.CExeBook&&this.constructor==apn.CExeBook&&(i.CExeBookCore={},i.CExeBookCore.effect=i.CExeBook.effect,i.CExeBookCore.dir=i.CExeBook.dir,i.CExeBookCore.naviBtns=i.CExeBook.naviBtns,i.CExeBookCore.bgColor=i.CExeBook.bgColor,i.CExeBookCore.noDrag=i.CExeBook.noDrag),i.CExeBookCore&&(this.o.CExeBookCore.effect=i.CExeBookCore.effect,this.o.CExeBookCore.dir=i.CExeBookCore.dir,this.o.CExeBookCore.audio=i.CExeBookCore.audio,this.o.CExeBookCore.naviBtns=i.CExeBookCore.naviBtns,this.o.CExeBookCore.naviBtnsPos=i.CExeBookCore.naviBtnsPos,this.o.CExeBookCore.noDrag=i.CExeBookCore.noDrag,this.o.CExeBookCore.pageCount=i.CExeBookCore.pageCount,i.CExeBookCore.bgColor&&(this.getContainerTAG().style.backgroundColor=i.CExeBookCore.bgColor)),apn.CExe.prototype.load.call(this,e,t,o),this.tagNaviPrv&&(this.tagNaviPrv.parentNode&&this.tagNaviPrv.parentNode.removeChild(this.tagNaviPrv),delete this.tagNaviPrv),this.tagNaviNxt&&(this.tagNaviNxt.parentNode&&this.tagNaviNxt.parentNode.removeChild(this.tagNaviNxt),delete this.tagNaviNxt),this.controlButtonDelayed&&delete this.controlButtonDelayed,e&&(this.apnCExeBookCore_directPageNum=void 0),this.project.orgPages=bx.$cloneObject({},this.project.pages),this.loadDeviceOptions(this.project),this.o.CExeBookCore.naviBtns&&(this.o.CExeBookCore.naviBtns.prv&&this.o.CExeBookCore.naviBtns.prv.normal.mediaID||this.o.CExeBookCore.naviBtns.nxt&&this.o.CExeBookCore.naviBtns.nxt.normal.mediaID)){var n={},r=this.o.CExeBookCore.naviBtns;r.prv.normal.mediaID&&(n.pN={url:apn.Project.mediaResolve(this.project,r.prv.normal.mediaID,!1,this.o.standAlone)}),r.prv.hover.mediaID&&(n.pH={url:apn.Project.mediaResolve(this.project,r.prv.hover.mediaID,!1,this.o.standAlone)}),r.prv.down.mediaID&&(n.pD={url:apn.Project.mediaResolve(this.project,r.prv.down.mediaID,!1,this.o.standAlone)}),r.nxt.normal.mediaID&&(n.nN={url:apn.Project.mediaResolve(this.project,r.nxt.normal.mediaID,!1,this.o.standAlone)}),r.nxt.hover.mediaID&&(n.nH={url:apn.Project.mediaResolve(this.project,r.nxt.hover.mediaID,!1,this.o.standAlone)}),r.nxt.down.mediaID&&(n.nD={url:apn.Project.mediaResolve(this.project,r.nxt.down.mediaID,!1,this.o.standAlone)});var s=this;(new apn.CRscLoader).load(this.project,n,a)}return!0},apn.CExeBookCore.prototype.ISub_onPostSetProject=function(){for(var e,t=apn.Project.getPages(this.project,!1,"apn.CFlowPage"),e=0;e<t.length;e++)this.project.flow.pages[t[e]]||(this.project.flow.pages[t[e]]={init:{}},this.project.flow.pages[t[e]].init.position={x:0,y:0});this.$O2J.setBook(t,this.o.CExeBookCore.pageCount||1,this.o.CExeBookCore.noEffect)},apn.CExeBookCore.prototype.onRunByResize=function(){this.o.screenStretch&&this.o.standAlone?this.resize():(this.pause(),this.load(),this.run(void 0,this._lastPageIDex)),this.arrangeNaviBtns()},apn.CExeBookCore.prototype.run=function(e,t,o,a){1==this.$O2J.perPage?this._run1(e,t,o,a):console.error("Not implemented yet")},apn.CExeBookCore.prototype._run1=function(e,t,o,a){function i(e){e.viewer=h,a=!1}function n(e,t,o){if("Y"==h.o.CExeBookCore.noDrag)return!1;if(h.$ObH&&h.$ObH.L&&h.$ObH.R)return!1;if(h.$ObH&&h.$ObH.L){if(e==-1)return!1}else if(h.$ObH&&h.$ObH.R&&1==e)return!1;if(void 0!==h.$O2J.getCurrentPage()&&h.$O2J.pages[h.$O2J.getCurrentPage()]&&h.$O2J.pages[h.$O2J.getCurrentPage()].canvas){if(h.$O2J.pages[h.$O2J.getCurrentPage()].canvas.startDrag)return!1;if(h.$O2J.pages[h.$O2J.getCurrentPage()].canvas.$O7P)return!1}return!0}function r(e,t){return h.onPageDragCoordTransformX(e,t)}function s(e,t){return h.onPageDragCoordTransformY(e,t)}if(this.project){void 0===e&&void 0===o&&void 0!==t&&(this._lastPageIDex=t),e&&e.action&&e.to&&(e.to.pageID&&(t=e.to.pageID),e.to.reset&&(a=!0),e=void 0);var p=!1;this.o.standAlone&&(void 0===e?e=this.apnCExeBookCore_directPageNum:this.apnCExeBookCore_directPageNum=e,void 0!==e&&(p=!0)),void 0===e&&(e=o),this.o.CExeBookCore&&this.o.CExeBookCore.noTransition&&(p=!0);var g;if((0===t||t)&&(t+=""),t&&(this.isRunnerablePage(this.project.pages[t])||(e=0)),void 0===e){if(t){for(g=0;g<this.$O2J.book.length;g++)if(this.$O2J.book[g]==t){e=g;break}}else this.$O2J.book[0]&&(e=0);if(void 0===e)return void bx.Trace.log("APN","warning","Parameter error page Number="+e+", pageID="+t,"CExeBookCore.run")}var d=this.$O2J.getCurrentPage();t&&(this.$O2J.pages[d]&&(this.$O2J.pages[d].id!=t&&this.$O2J.pages[d].execShut(),this.o.CExeBookCore.pageNoReset||(this.$O2J.pages[d].canvas.$O37(),this.onPostBookPageRun(this.$O2J.pages[d],!0))),this.$O2J.pages[d-1]&&(this.$O2J.pages[d-1].execShut(),this.o.CExeBookCore.pageNoReset||(this.$O2J.pages[d-1].canvas.$O37(),this.onPostBookPageRun(this.$O2J.pages[d-1],!0))),this.$O2J.pages[d+1]&&(this.$O2J.pages[d+1].execShut(),this.o.CExeBookCore.pageNoReset||(this.$O2J.pages[d+1].canvas.$O37(),this.onPostBookPageRun(this.$O2J.pages[d+1],!0)))),this.$O3W=1;var C=!!this.$O2J.pages[e],h=this;if(this.$O2J.preparePage(this,e,i,p),!p){var l,u,x,c=this.$O2J.tag;l=this.$O2J.pages[e].tag,this.$O2J.pages[e-1]?(u=this.$O2J.pages[e-1].tag,c.$O6r=e-1):c.$O6r=-1,this.$O2J.pages[e+1]?(x=this.$O2J.pages[e+1].tag,c.$O6s=e+1):c.$O6s=-1,c.onBxPageDragEnd||(c.onBxPageDragEnd=function(e){if(void 0!==h.$O2J.getCurrentPage()){var t,o;if(t=h.$O2J.pages[h.$O2J.getCurrentPage()])for(var a in t.canvas.screen.objects)o=apn.Project.getWidgetModule(t.canvas.screen.objects[a].create.data),o&&o.exeOnScreenDrag&&o.exeOnScreenDrag(t.canvas,a,!1)}setTimeout(function(){1==e&&c.$O6s!==-1?(h.$O2J.pages[c.$O6s-1].execShut(),h.o.CExeBookCore.pageNoReset||(h.$O2J.pages[c.$O6s-1].canvas.$O37(),h.onPostBookPageRun(h.$O2J.pages[c.$O6s-1],!0)),h.run(void 0,void 0,c.$O6s)):2==e&&c.$O6r!==-1?(h.$O2J.pages[c.$O6r+1].execShut(),h.o.CExeBookCore.pageNoReset||(h.$O2J.pages[c.$O6r+1].canvas.$O37(),h.onPostBookPageRun(h.$O2J.pages[c.$O6r+1],!0)),h.run(void 0,void 0,c.$O6r)):h.$O8C(!(c.$O6r==-1),!(c.$O6s==-1))},0)}),c.onBxPageDragStart||(c.onBxPageDragStart=function(){if(void 0!==h.$O2J.getCurrentPage()){var e,t;if(e=h.$O2J.pages[h.$O2J.getCurrentPage()])for(var o in e.canvas.screen.objects)t=apn.Project.getWidgetModule(e.canvas.screen.objects[o].create.data),t&&t.exeOnScreenDrag&&t.exeOnScreenDrag(e.canvas,o,!0)}}),c.$O6r==-1&&c.$O6s==-1||(bx.PageDrag(c,l,u,x,this.o.CExeBookCore.effect||"bookFlip1","x",{book:!0,fnCanDrag:n,fnTransformX:r,fnTransformY:s}),this.$O8C(!(c.$O6r==-1),!(c.$O6s==-1)))}if(this.o.CExeBookCore.pageNoReset&&t&&a)return this._reloadPage(t),void this.onPostBookPageRun(this.$O2J.get(this.getCurrentPageID()),!0,!0);var v=this.$O2J.pages[e];this.o.runPerPage&&this.o.standAlone&&(console.error("load page fonts",this.o.noDynamicFontLoad2,v.id),this.$O4Z(void 0,void 0,this.o.noDynamicFontLoad2,v.id)),v.canvas.$O5n(),this.IDriver_onRunScreen&&this.IDriver_onRunScreen(v.id),C&&this.IDriver_onRefreshScreen&&this.IDriver_onRefreshScreen(v.id),v.canvas.$O5t(),v.canvas.$O5r(),v.apxInRun=!0,this.onPostBookPageRun(v,void 0,!0)}},apn.CExeBookCore.prototype.loadDeviceOptions=function(e){this.o.CExeBookCore=this.o.CExeBookCore||{};var t=this.getExeOption(e);t&&(t.CExeBookCore?(this.o.CExeBookCore.effect=this.o.CExeBookCore.effect||t.CExeBookCore.effect,this.o.CExeBookCore.dir=this.o.CExeBookCore.dir||t.CExeBookCore.dir,this.o.CExeBookCore.naviBtns=this.o.CExeBookCore.naviBtns||t.CExeBookCore.useNaviBtns):t.CExeBook&&(this.o.CExeBookCore.effect=this.o.CExeBookCore.effect||t.CExeBook.effect,this.o.CExeBookCore.dir=this.o.CExeBookCore.dir||t.CExeBook.dir,this.o.CExeBookCore.naviBtns=this.o.CExeBookCore.naviBtns||t.CExeBook.useNaviBtns))},apn.CExeBookCore.prototype.arrangeNaviBtns=function(){var e,t,o,a=parseInt(this.getContainerTAG().style.left),i=parseInt(this.getContainerTAG().style.top),n=parseInt(this.getContainerTAG().style.width),r=parseInt(this.getContainerTAG().style.height);this.tagNaviPrv&&(e=Math.round((this.tagNaviPrv.naturalWidth||this.tagNaviPrv.width)*(1/this.getZoomX())*this.getStretchX()),t=Math.round((this.tagNaviPrv.naturalHeight||this.tagNaviPrv.height)*(1/this.getZoomY())*this.getStretchY()),o="Top"==this.o.CExeBookCore.naviBtnsPos?i:"Bottom"==this.o.CExeBookCore.naviBtnsPos?i+r-t:i+r/2-t/2,this.tagNaviPrv.style.left=a+"px",this.tagNaviPrv.style.top=o+"px",this.tagNaviPrv.style.width=e+"px",this.tagNaviPrv.style.height=t+"px"),this.tagNaviNxt&&(e=Math.round((this.tagNaviNxt.naturalWidth||this.tagNaviNxt.width)*(1/this.getZoomX())*this.getStretchX()),t=Math.round((this.tagNaviNxt.naturalHeight||this.tagNaviNxt.height)*(1/this.getZoomY())*this.getStretchY()),o="Top"==this.o.CExeBookCore.naviBtnsPos?i:"Bottom"==this.o.CExeBookCore.naviBtnsPos?i+r-t:i+r/2-t/2,this.tagNaviNxt.style.left=a+n-e+"px",this.tagNaviNxt.style.top=o+"px",this.tagNaviNxt.style.width=e+"px",this.tagNaviNxt.style.height=t+"px")},apn.CExeBookCore.prototype.$O8C=function(e,t){this.tagNaviPrv&&(this.tagNaviPrv.style.display=e?"block":"none"),this.tagNaviNxt&&(this.tagNaviNxt.style.display=t?"block":"none")},apn.CExeBookCore.prototype.CExeBookCore_naviBtnsDisplay=apn.CExeBookCore.prototype.$O8C,apn.CExeBookCore.prototype.onPostBookPageRun=function(e,t,o){var a;if((window.opener||window.parent&&parent!=window)&&(a=window.opener||window.parent),"Y"==bx.$getParamFromURL(location.href,"APXRPTPG")&&a&&o&&e)for(var i=this.getPM(),n=0;n<i.book.length;n++)if(i.book[n]==e.id){console.error("onPageShow",n),a.postMessage({CExeBookCore:{type:"onPageShow",data:{cur:n,count:i.book.length,title:this.project.pages[e.id].UI.title}}},"*");break}},apn.CExeBookCore.prototype.onPageDragCoordTransformX=function(e,t){return e},apn.CExeBookCore.prototype.onPageDragCoordTransformY=function(e,t){return t},apn.CExeBookCore.prototype.disableDrag=function(e){this.$ObH=this.$ObH||{},"both"==e?(this.$ObH.L=!0,this.$ObH.R=!0):"left"==e?(this.$ObH.L=!0,this.$ObH.R=!1):"right"==e?(this.$ObH.L=!1,this.$ObH.R=!0):(this.$ObH.L=!1,this.$ObH.R=!1)},apn.CExeBookCore.prototype.controlButton=function(e,t){var o;"left"==e&&this.tagNaviPrv?o=this.tagNaviPrv:"right"==e&&this.tagNaviNxt&&(o=this.tagNaviNxt),o?"show"==t?o.style.visibility="visible":"hide"==t?o.style.visibility="hidden":"enable"==t&&o.$disable?o.$disable(!1):"disable"==t&&o.$disable&&o.$disable(!0):(this.controlButtonDelayed=this.controlButtonDelayed||[],this.controlButtonDelayed.push({btn:e,state:t}))},apn.CExeBookCore.prototype.onRunButton=function(e){},apn.CExeBookCore.prototype.procDelayedButton=function(e){if(this.controlButtonDelayed)for(var t=0;t<this.controlButtonDelayed.length;t++)this.controlButtonDelayed[t].btn==e&&(this.controlButton(e,this.controlButtonDelayed[t].state),this.controlButtonDelayed.splice(t,1),t--)},apn.CExeBookCore.prototype.getPageIdByOrder=function(e){var t=apn.Project.getPages(this.project);return t[e]?t[e]:t[0]},apn.CExeBookCore.prototype.getPageCount=function(){var e=apn.Project.getPages(this.project);return e.length},apn.CExeBookCore.IStub_pageSelectionList=function(e,t){for(var o=apn.Project.getPages(e,!1,"apn.CFlowPage"),a=apn.Project.getPageTitles(e,!1,"apn.CFlowPage"),i=[],n=0;n<o.length;n++)t&&t==o[n]||i.push({value:o[n],title:a[n]});return i},apn.CExeBookCore.prototype.IStub_setup=function(e){function t(){eduLib.edtInputApplyAll(e,a.tagSub1),a.tagSub2&&eduLib.edtInputApplyAll(e,a.tagSub2),o.CExeBookCore.pageCount&&(o.CExeBookCore.pageCount=parseInt(o.CExeBookCore.pageCount)),i.o.CExeBookCore.effect=o.CExeBookCore.effect,i.o.CExeBookCore.dir=o.CExeBookCore.dir,i.o.CExeBookCore.audio=o.CExeBookCore.audio,i.o.CExeBookCore.pageCount=o.CExeBookCore.pageCount,e.save(),e.onExeDataChanged(),i.project&&i.isRunning()&&(i.pause(),i.load(),i.run())}if(e&&e.getData()){var o=apn.Project.getLayout(e.getData()).property;this.project||this.loadDeviceOptions(e.getData()),o.CExeBookCore=o.CExeBookCore||{},o.CExeBookCore.effect=o.CExeBookCore.effect||this.o.CExeBookCore.effect||"move",o.CExeBookCore.dir=o.CExeBookCore.dir||this.o.CExeBookCore.dir||"x",o.CExeBookCore.noDrag=o.CExeBookCore.noDrag||"N",o.CExeBookCore.naviBtnsPos=o.CExeBookCore.naviBtnsPos||this.o.CExeBookCore.naviBtnsPos||"Middle",this.o.CExeBookCore.naviBtns&&(o.CExeBookCore.naviBtns=o.CExeBookCore.naviBtns||{prv:{normal:{mediaID:void 0},hover:{mediaID:void 0},down:{mediaID:void 0}},nxt:{normal:{mediaID:void 0},hover:{mediaID:void 0},down:{mediaID:void 0}}}),this.o.screenBackgroundColor||(o.CExeBookCore.bgColor=o.CExeBookCore.bgColor||this.o.backgroundColor),void 0!==this.o.CExeBookCore.pageCount&&(o.CExeBookCore.pageCount=o.CExeBookCore.pageCount||this.o.CExeBookCore.pageCount);var a,i=this,n=700,r="Setup properties";if(window.asui&&asui.MENU&&asui.MENU.EXE_CFG&&(r=asui.MENU.EXE_CFG),a=e.dlgDoModal(n,700,t,void 0,{title:r})){if(a.tagTab=a.$TAG("div",{style:"position:relative;width:100%;height:26px;padding-bottom:14px;"}),a.tagTab.innerHTML='<span id="tagSub1" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">Reader</span><span id="tagSub2" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">Audiobook</span><span id="tagBlank" style="float:left;padding:2px 0 2px 0;border-bottom:solid 1px #a8a8a8;width:400px;">&nbsp;</span>',a.tagSub1=a.$TAG("div",{style:"width:100%;height:"+(a.contentHeight-40)+"px"}),!this.o.CExeBookCore.noEffect){var s=[{title:apn.P.effectTitle.bookFlip1,value:"bookFlip1"},{title:apn.P.effectTitle.cardUp,value:"cardUp"},{title:apn.P.effectTitle.move,value:"move"},{title:apn.P.effectTitle.cube0,value:"cube0"}];eduLib.edtInputAdd(e,a.tagSub1,{type:"title",title:"Page transition"}),eduLib.edtInputAdd(e,a.tagSub1,{type:"select",title:"Effect",value:o.CExeBookCore,options:s,key:"effect"}),this.o.CExeBookCore.naviBtns&&(eduLib.edtInputAdd(e,a.tagSub1,{type:"select",title:"Disable drag",value:o.CExeBookCore,options:[{title:"Yes",value:"Y"},{title:"No",value:"N"}],key:"noDrag"}),eduLib.edtInputAdd(e,a.tagSub1,{type:"space"}))}void 0!==this.o.CExeBookCore.pageCount&&(eduLib.edtInputAdd(e,a.tagSub1,{type:"select",title:"Page count per screen",value:o.CExeBookCore,options:[1,2],key:"pageCount"}),eduLib.edtInputAdd(e,a.tagSub1,{type:"space"})),this.o.CExeBookCore.naviBtns&&(eduLib.edtInputAdd(e,a.tagSub1,{type:"title",title:"Navigation buttons"}),eduLib.edtInputAdd(e,a.tagSub1,{type:"select",title:"Vertical position",value:o.CExeBookCore,options:["Top","Middle","Bottom"],key:"naviBtnsPos"}),eduLib.edtInputAdd(e,a.tagSub1,{type:"image",title:"Previous",value:o.CExeBookCore.naviBtns.prv,key:"normal"}),eduLib.edtInputAdd(e,a.tagSub1,{type:"image",title:"Previous - Hover",value:o.CExeBookCore.naviBtns.prv,key:"hover"}),eduLib.edtInputAdd(e,a.tagSub1,{type:"image",title:"Previous - Down",value:o.CExeBookCore.naviBtns.prv,key:"down"}),eduLib.edtInputAdd(e,a.tagSub1,{type:"image",title:"Next",value:o.CExeBookCore.naviBtns.nxt,key:"normal"}),eduLib.edtInputAdd(e,a.tagSub1,{type:"image",title:"Next - Hover",value:o.CExeBookCore.naviBtns.nxt,key:"hover"}),eduLib.edtInputAdd(e,a.tagSub1,{type:"image",title:"Next - Down",value:o.CExeBookCore.naviBtns.nxt,key:"down"})),this.o.screenBackgroundColor||(eduLib.edtInputAdd(e,a.tagSub1,{type:"space"}),eduLib.edtInputAdd(e,a.tagSub1,{type:"title",title:"More options"}),eduLib.edtInputAdd(e,a.tagSub1,{type:"color",title:"Screen background color",value:o.CExeBookCore,key:"bgColor"})),a.tagTab.$$("tagSub2").style.display="none",a.tagTab.$$("tagSub1").style.borderStyle="solid solid none solid",a.tagTab.$$("tagBlank").style.width=a.clientWidth-a.tagTab.$$("tagBlank").offsetLeft-24+"px"}}},apn.CExeBookCore.prototype.IStub_getCurrentPageIndex=function(e){for(var t=0;t<this.$O2J.pages.length;t++)if(this.$O2J.pages[t]&&this.$O2J.pages[t].id==e.getPageID())return t;return 0},apn.CExeBookCore.prototype.IStub_getScreenList=function(){return apn.Project.getPages(this.project,!1,"apn.CFlowPage")},apn.CExeBookCore.prototype.IStub_sptRunCheck=function(e,t,o){return"zoom"==e||!!apn.CExe.prototype.IStub_sptRunCheck&&apn.CExe.prototype.IStub_sptRunCheck.call(this,e,t,o)},apn.CExeBookCore.prototype.IStub_sptRun=function(e,t,o){return"zoom"==e?void(t&&t.x>=1&&t.y>=1&&this.stretch(t.x,t.y,{fromCenter:!0})):"markKeyword"==e?(apn.CExe.prototype.IStub_sptRun.call(this,e,t,o),void(this.getPM().getPairPage(o)&&apn.CExe.prototype.IStub_sptRun.call(this,e,t,this.getPM().getPairPage(o).id))):apn.CExe.prototype.IStub_sptRun?apn.CExe.prototype.IStub_sptRun.call(this,e,t,o):void 0},apn.CExeBookCore.IStub_getConfiguration=function(e){return{flowModeHide:!0,itrLtpSimple:!0}},apn.CBookPM=function(e,t,o){bx.inClassing||(this.pages=[],this.book=[],this._cacheLimit=0,bx.CPageManager.call(this,e,t,o))},bx.$Inherit(apn.CBookPM,bx.CPageManager),apn.CBookPM.prototype.setBook=function(e,t,o){this.book=e,this.perPage=t||1,this.noEffect=o},apn.CBookPM.prototype.setCacheLimit=function(e){e&&(e=Math.max(8,e),this._cacheLimit=e,this._uPageCache=[])},apn.CBookPM.prototype.preparePage=function(e,t,o,a){function i(e,t){s.noEffect&&(e.tag.style.display="block",e.tag.style.visibility="visible",t||e.execShut())}function n(t,a,n){if(s._uPageCache&&s._uPageCache.length>=s._cacheLimit){var r=s._uPageCache.shift();s.remove(r.id);for(var p=0;p<s.pages.length;p++)s.pages[p]==r&&(s.pages[p]=void 0);r.destroy()}var g;2==s.perPage&&(g=n%2==0?new bx.CPosition({type:"overlap",coord:{top:"0px",left:"0px"},width:e.getProjectSize().w/2+"px",height:e.getProjectSize().h+"px",noclip:!0}):new bx.CPosition({type:"overlap",coord:{top:"0px",left:e.getProjectSize().w/2+"px"},width:e.getProjectSize().w/2+"px",height:e.getProjectSize().h+"px",noclip:!0}));var d=new apn.CExePage(s,t,{},g).create();return o&&o(d),d.init(),s.add(d),d.execRun({data:{noStart:!0}}),e.onPostBookPageRun(d,!0),i(d,a),s._uPageCache&&s._uPageCache.push(d),d}function r(e,t){s.book[e]&&(s.pages[e]?i(s.pages[e],t):s.pages[e]=n(s.book[e],t,e))}var s=this,p=t;2==this.perPage&&t%2&&(t=2*Math.floor(t/2)),r(t,!0),2==this.perPage&&r(t+1,!0),a||(1==this.perPage?(r(t-1,!1),r(t+1,!1)):(r(t-1,!1),r(t-2,!1),r(t+2,!1),r(t+3,!1))),this.$O8F=p},apn.CBookPM.prototype.changePerPage=function(e,t){if(this.perPage!=t){this.perPage=t,e.onRunByResize();for(var o=0;o<this.book.length;o++)this.pages[o]&&(1==t?this.pages[o].setPosition(new bx.CPosition({type:"overlap",coord:{top:"0px",left:"0px"},width:"100%",height:"100%",noclip:!0})):o%2==0?this.pages[o].setPosition(new bx.CPosition({type:"overlap",coord:{top:"0px",left:"0px"},width:e.getProjectSize().w/2+"px",height:e.getProjectSize().h+"px",noclip:!0})):this.pages[o].setPosition(new bx.CPosition({type:"overlap",coord:{top:"0px",left:e.getProjectSize().w/2+"px"},width:e.getProjectSize().w/2+"px",height:e.getProjectSize().h+"px",noclip:!0})))}},apn.CBookPM.prototype.getCurrentPage=function(){return this.$O8F},apn.CBookPM.prototype.reset=function(){this.pages.length=0,this.book.length=0,void 0!==this.$O8F&&delete this.$O8F,bx.CPageManager.prototype.reset.call(this)},apn.CBookPM.prototype.getCurrent=function(){if(this.book&&void 0!==this.$O8F)return this.book[this.$O8F]},apn.CBookPM.prototype.getPairPage=function(e){if(2==this.perPage)for(var t=0;t<this.book.length;t++)if(this.book[t]==e)if(t%2==0){if(t+1<this.book.length&&this.pages[t+1])return this.pages[t+1]}else if(t-1>=0&&this.pages[t-1])return this.pages[t-1]},apn.CBookPM.prototype.getPageSide=function(e){if(2==this.perPage)for(var t=0;t<this.book.length;t++)if(this.book[t]==e)return t%2==0?1:2;return 0},window.apn=window.apn||{},apn.CExeBook=function(e,t,o,a){bx.inClassing||apn.CExeBookCore.call(this,e,t,o,a)},bx.$Inherit(apn.CExeBook,apn.CExeBookCore),apn.CExeBook.IStub_pageSelectionList=apn.CExeBookCore.IStub_pageSelectionList,apn.CExeBook.IStub_getConfiguration=apn.CExeBookCore.IStub_getConfiguration,apn.CExeBook.prototype.loadDeviceOptions=function(e){this.o.CExeBook=this.o.CExeBook||{};var t=this.getExeOption(e);t&&t.CExeBook&&(this.o.CExeBook.effect=this.o.CExeBook.effect||t.CExeBook.effect,this.o.CExeBook.dir=this.o.CExeBook.dir||t.CExeBook.dir,this.o.CExeBook.useNaviBtns=this.o.CExeBook.useNaviBtns||t.CExeBook.useNaviBtns),apn.CExeBookCore.prototype.loadDeviceOptions.call(this,e)},apn.CExeBook.prototype.IStub_setup=function(e){function t(){eduLib.edtInputApplyAll(e,i.tagSub1),eduLib.edtInputApplyAll(e,i.tagSub3),n.o.CExeBook.effect=a.CExeBook.effect,n.o.CExeBook.dir=a.CExeBook.dir,e.save(),e.onExeDataChanged(),n.project&&n.isRunning()&&(n.pause(),n.load(),n.run())}function o(){for(var e in r)r[e]&&(this.id==e?(i[e].style.display="block",i.tagTab.$$(e).style.borderStyle="solid solid none solid"):(i[e].style.display="none",i.tagTab.$$(e).style.borderStyle="none none solid none"))}if(e&&e.getData()){var a=apn.Project.getLayout(e.getData()).property;this.project||this.loadDeviceOptions(e.getData()),a.CExeBook=a.CExeBook||{},a.CExeBook.effect=a.CExeBook.effect||this.o.CExeBook.effect||"move",a.CExeBook.dir=a.CExeBook.dir||this.o.CExeBook.dir||"x",a.CExeBook.noDrag=a.CExeBook.noDrag||"N",this.o.CExeBook.useNaviBtns&&(a.CExeBook.naviBtns=a.CExeBook.naviBtns||{prv:{normal:{mediaID:void 0},hover:{mediaID:void 0},down:{mediaID:void 0}},nxt:{normal:{mediaID:void 0},hover:{mediaID:void 0},down:{mediaID:void 0}}}),this.o.screenBackgroundColor||(a.CExeBook.bgColor=a.CExeBook.bgColor||this.o.backgroundColor);var i,n=this,r={tagSub1:!0,tagSub3:!0},s=600,p="Setup properties";if(window.asui&&asui.MENU&&asui.MENU.EXE_CFG&&(p=asui.MENU.EXE_CFG),i=e.dlgDoModal(s,700,t,void 0,{title:p})){i.tagTab=i.$TAG("div",{style:"position:relative;width:100%;height:26px;padding-bottom:14px;"}),i.tagTab.innerHTML='<span id="tagSub1" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">Basic</span><span id="tagSub3" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">'+apn.CExe.GL({ko:"모바일 기기",en:"Mobile Device"})+'</span><span id="tagBlank" style="float:left;padding:2px 0 2px 0;border-bottom:solid 1px #a8a8a8;width:100px;">&nbsp;</span>',i.tagSub1=i.$TAG("div",{style:"width:100%;height:"+(i.contentHeight-40)+"px"}),i.tagSub3=i.$TAG("div",{style:"width:100%;height:"+(i.contentHeight-40)+"px"});var g=[{title:apn.P.effectTitle.bookFlip1,value:"bookFlip1"},{title:apn.P.effectTitle.cardUp,value:"cardUp"},{title:apn.P.effectTitle.move,value:"move"},{title:apn.P.effectTitle.cube0,value:"cube0"}];eduLib.edtInputAdd(e,i.tagSub1,{type:"title",title:"Page transition"}),eduLib.edtInputAdd(e,i.tagSub1,{type:"select",title:"Effect",value:a.CExeBook,options:g,key:"effect"}),this.o.CExeBook.useNaviBtns&&(eduLib.edtInputAdd(e,i.tagSub1,{type:"select",title:"Disable drag",value:a.CExeBook,options:[{title:"Yes",value:"Y"},{title:"No",value:"N"}],key:"noDrag"}),eduLib.edtInputAdd(e,i.tagSub1,{type:"space"}),eduLib.edtInputAdd(e,i.tagSub1,{type:"title",title:"Images for navigation buttons"}),eduLib.edtInputAdd(e,i.tagSub1,{type:"image",title:"Previous",value:a.CExeBook.naviBtns.prv,key:"normal"}),eduLib.edtInputAdd(e,i.tagSub1,{type:"image",title:"Previous - Hover",value:a.CExeBook.naviBtns.prv,key:"hover"}),eduLib.edtInputAdd(e,i.tagSub1,{type:"image",title:"Previous - Down",value:a.CExeBook.naviBtns.prv,key:"down"}),eduLib.edtInputAdd(e,i.tagSub1,{type:"image",title:"Next",value:a.CExeBook.naviBtns.nxt,key:"normal"}),eduLib.edtInputAdd(e,i.tagSub1,{type:"image",title:"Next - Hover",value:a.CExeBook.naviBtns.nxt,key:"hover"}),eduLib.edtInputAdd(e,i.tagSub1,{type:"image",title:"Next - Down",value:a.CExeBook.naviBtns.nxt,key:"down"})),this.o.screenBackgroundColor||(eduLib.edtInputAdd(e,i.tagSub1,{type:"space"}),eduLib.edtInputAdd(e,i.tagSub1,{type:"title",title:"More options"}),eduLib.edtInputAdd(e,i.tagSub1,{type:"color",title:"Screen background color",value:a.CExeBook,key:"bgColor"})),i.tagTab.$$("tagSub1").onclick=i.tagTab.$$("tagSub3").onclick=o,this.edtSetupAutoplay(e,i.tagSub3,a),i.tagTab.$$("tagSub1").onclick(),i.tagTab.$$("tagBlank").style.width=i.clientWidth-i.tagTab.$$("tagBlank").offsetLeft-24+"px"}}};
"BLUEGA Inc, aspen-exebook-1.0.js Release date: 09/22/2017 13:42:22"
krsCExe=function(o,t,f,n){bx.inClassing||(n=n||{},n.preloadAsset={},n.fullAccel=!0,n.standAlone&&bx.HCL.DV.isMobile()&&(n.noScreenFix=!0,n.noResize=!0,n.noLayout=!0),apn.CExe.call(this,o,t,f,n))},bx.$Inherit(krsCExe,apn.CExe),krsCExe.prototype.onGestureEventTransform=function(o){if(bx.HCL.DV.isIOS())switch(o){case bx.CGesture.POINTER_TAP:return;case bx.CGesture.SYSTEM_CLICK:return"click"}return null},krsCExe.IStub_getConfiguration=function(o,t){return{exeFullscreenNoController:t||"edge"==bx.HCL.DV.getBrowserType(),property:{CExe:{layout:{style:{bgImgPtn:"tile",bgImg:{mediaID:void 0},bgClr:null},layout:"H"}}}}},krsCExe.IStub_pubGetHEAD=function(o){function t(o){var t;return!!(o&&o.properties&&o.properties.attrs&&o.properties.attrs.krsAI&&(t=o.properties.attrs.krsAT)&&"<"!=t[0])&&1}for(var f=apn.Project.getPages(o),n=[],a=apn.Project.getLayout(o).property.CExe,e='<html dir="ltr" lang="'+(a&&a.lng&&a.lng.ln?a.lng.ln:"ko")+'" xmlns="http://www.w3.org/1999/xhtml" xmlns:xml="http://www.w3.org/XML/1998/namespace" xmlns:epub="http://www.idpf.org/2007/ops">\n<head>',r=0;r<f.length;r++)n[r]=e+'\n<meta name="viewport" content="width='+apn.Project.getScreenSize(o).w+", height="+apn.Project.getScreenSize(o).h+'"/>';var i;for(r=0;r<f.length;r++)(i=apx.searchWidgets(o.pages[f[r]],7,t))&&i.length&&(n[r]+='\n<script type="text/javascript" src="js/DTCaliperSensor.js"></script>');return n},krsCExe.fontPubInfo={Amiri:{path:"fonts/Amiri",file:{"Amiri-Regular.woff":"application/font-woff","Amiri-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Amiri';font-style: normal;font-weight: 400;src: url(fonts/Amiri/Amiri-Regular.woff) format('woff');}@font-face {font-family: 'Amiri';font-style: normal;font-weight: 700;src: url(fonts/Amiri/Amiri-Bold.woff) format('woff');}"},"Archivo Black":{path:"fonts/ArchivoBlack",file:{"ArchivoBlack-Regular.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Archivo Black';font-style: normal;font-weight: 400;src: url(fonts/ArchivoBlack/ArchivoBlack-Regular.woff) format('woff');}"},"Average Sans":{path:"fonts/AverageSans",file:{"AverageSans-Regular.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Average Sans';font-style: normal;font-weight: 400;src: url(fonts/AverageSans/AverageSans-Regular.woff) format('woff');}"},Bevan:{path:"fonts/Bevan",file:{"Bevan-Regular.woff":"application/font-woff","SIL_OFL.txt":"text/plain"},css:"@font-face {font-family: 'Bevan';font-style: normal;font-weight: 400;src: url(fonts/Bevan/Bevan-Regular.woff) format('woff');}"},"Bubblegum Sans":{path:"fonts/BubblegumSans",file:{"BubblegumSans-Regular.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Bubblegum Sans';font-style: normal;font-weight: 400;src: url(fonts/BubblegumSans/BubblegumSans-Regular.woff) format('woff');}"},"Crimson Text":{path:"fonts/CrimsonText",file:{"CrimsonText-Regular.woff":"application/font-woff","CrimsonText-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Crimson Text';font-style: normal;font-weight: 400;src: url(fonts/CrimsonText/CrimsonText-Regular.woff) format('woff');}@font-face {font-family: 'Crimson Text';font-style: normal;font-weight: 700;src: url(fonts/CrimsonText/CrimsonText-Bold.woff) format('woff');}"},"Droid Serif":{path:"fonts/DroidSerif",file:{"DroidSerif-Regular.woff":"application/font-woff","DroidSerif-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Droid Serif';font-style: normal;font-weight: 400;src: url(fonts/DroidSerif/DroidSerif-Regular.woff) format('woff');}@font-face {font-family: 'Droid Serif';font-style: normal;font-weight: 700;src: url(fonts/DroidSerif/DroidSerif-Bold.woff) format('woff');}"},Faustina:{path:"fonts/Faustina",file:{"Faustina-Regular.woff":"application/font-woff","Faustina-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Faustina';font-style: normal;font-weight: 400;src: url(fonts/Faustina/Faustina-Regular.woff) format('woff');}\n@font-face {font-family: 'Faustina';font-style: normal;font-weight: 700;src: url(fonts/Faustina/Faustina-Bold.woff) format('woff');}"},"Fredoka One":{path:"fonts/FredokaOne",file:{"FredokaOne-Regular.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Fredoka One';font-style: normal;font-weight: 400;src: url(fonts/FredokaOne/FredokaOne-Regular.woff) format('woff');}"},Lato:{path:"fonts/Lato",file:{"Lato-Regular.woff":"application/font-woff","Lato-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Lato';font-style: normal;font-weight: 400;src: url(fonts/Lato/Lato-Regular.woff) format('woff');}\n@font-face {font-family: 'Lato';font-style: normal;font-weight: 700;src: url(fonts/Lato/Lato-Bold.woff) format('woff');}"},Lora:{path:"fonts/Lora",file:{"Lora-Regular.woff":"application/font-woff","Lora-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Lora';font-style: normal;font-weight: 400;src: url(fonts/Lora/Lora-Regular.woff) format('woff');}@font-face {font-family: 'Lora';font-style: normal;font-weight: 700;src: url(fonts/Lora/Lora-Bold.woff) format('woff');}"},Martel:{path:"fonts/Martel",file:{"Martel-Regular.woff":"application/font-woff","Martel-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Martel';font-style: normal;font-weight: 400;src: url(fonts/Martel/Martel-Regular.woff) format('woff');}\n@font-face {font-family: 'Martel';font-style: normal;font-weight: 700;src: url(fonts/Martel/Martel-Bold.woff) format('woff');}"},Montserrat:{path:"fonts/Montserrat",file:{"Montserrat-Regular.woff":"application/font-woff","Montserrat-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Montserrat';font-style: normal;font-weight: 400;src: url(fonts/Montserrat/Montserrat-Regular.woff) format('woff');}\n@font-face {font-family: 'Montserrat';font-style: normal;font-weight: 700;src: url(fonts/Montserrat/Montserrat-Bold.woff) format('woff');}"},Muli:{path:"fonts/Muli",file:{"Muli-Regular.woff":"application/font-woff","Muli-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Muli';font-style: normal;font-weight: 400;src: url(fonts/Muli/Muli-Regular.woff) format('woff');}\n@font-face {font-family: 'Muli';font-style: normal;font-weight: 700;src: url(fonts/Muli/Muli-Bold.woff) format('woff');}"},"Muli EB":{path:"fonts/MuliEB",file:{"Muli-ExtraBold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Muli EB';font-style: normal;font-weight: 900;src: url(fonts/MuliEB/Muli-ExtraBold.woff) format('woff');}"},"Noto Sans":{path:"fonts/NotoSans",file:{"NotoSans-Regular.woff":"application/font-woff","NotoSans-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Noto Sans';font-style: normal;font-weight: 400;src: url(fonts/NotoSans/NotoSans-Regular.woff) format('woff');}\n@font-face {font-family: 'Noto Sans';font-style: normal;font-weight: 700;src: url(fonts/NotoSans/NotoSans-Bold.woff) format('woff');}"},Nunito:{path:"fonts/Nunito",file:{"Nunito-Regular.woff":"application/font-woff","Nunito-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Nunito';font-style: normal;font-weight: 400;src: url(fonts/Nunito/Nunito-Regular.woff) format('woff');}\n@font-face {font-family: 'Nunito';font-style: normal;font-weight: 700;src: url(fonts/Nunito/Nunito-Bold.woff) format('woff');}"},"Open Sans":{path:"fonts/OpenSans",file:{"OpenSans-Regular.woff":"application/font-woff","OpenSans-Bold.woff":"application/font-woff","LICENSE.txt":"text/plain"},css:"@font-face {font-family: 'Open Sans';font-style: normal;font-weight: 400;src: url('fonts/OpenSans/OpenSans-Regular.woff') format('woff');}\n@font-face {font-family: 'Open Sans';font-style: normal;font-weight: 700;src: url('fonts/OpenSans/OpenSans-Bold.woff') format('woff');}"},"Patrick Hand":{path:"fonts/PatrickHand",file:{"PatrickHand-Regular.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Patrick Hand';font-style: normal;font-weight: 400;src: url(fonts/PatrickHand/PatrickHand-Regular.woff) format('woff');}"},"PT Serif":{path:"fonts/PTSerif",file:{"PT_Serif-Web-Regular.woff":"application/font-woff","PT_Serif-Web-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'PT Serif';font-style: normal;font-weight: 400;src: url(fonts/PTSerif/PT_Serif-Web-Regular.woff) format('woff');}@font-face {font-family: 'PT Serif';font-style: normal;font-weight: 700;src: url(fonts/PTSerif/PT_Serif-Web-Bold.woff) format('woff');}"},Roboto:{path:"fonts/Roboto",file:{"Roboto-Regular.woff":"application/font-woff","Roboto-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Roboto';font-style: normal;font-weight: 400;src: url(fonts/Roboto/Roboto-Regular.woff) format('woff');}\n@font-face {font-family: 'Roboto';font-style: normal;font-weight: 700;src: url(fonts/Roboto/Roboto-Bold.woff) format('woff');}"},"Roboto Slab":{path:"fonts/RobotoSlab",file:{"RobotoSlab-Regular.woff":"application/font-woff","RobotoSlab-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Roboto Slab';font-style: normal;font-weight: 400;src: url(fonts/RobotoSlab/RobotoSlab-Regular.woff) format('woff');}\n@font-face {font-family: 'Roboto Slab';font-style: normal;font-weight: 700;src: url(fonts/RobotoSlab/RobotoSlab-Bold.woff) format('woff');}"},Taviraj:{path:"fonts/Taviraj",file:{"Taviraj-Regular.woff":"application/font-woff","Taviraj-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Taviraj';font-style: normal;font-weight: 400;src: url(fonts/Taviraj/Taviraj-Regular.woff) format('woff');}\n@font-face {font-family: 'Taviraj';font-style: normal;font-weight: 700;src: url(fonts/Taviraj/Taviraj-Bold.woff) format('woff');}"},Trirong:{path:"fonts/Trirong",file:{"Trirong-Regular.woff":"application/font-woff","Trirong-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Trirong';font-style: normal;font-weight: 400;src: url(fonts/Trirong/Trirong-Regular.woff) format('woff');}\n@font-face {font-family: 'Trirong';font-style: normal;font-weight: 700;src: url(fonts/Trirong/Trirong-Bold.woff) format('woff');}"},"Varela Round":{path:"fonts/VarelaRound",file:{"VarelaRound-Regular.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Varela Round';font-style: normal;font-weight: 400;src: url(fonts/VarelaRound/VarelaRound-Regular.woff) format('woff');}"},Wellfleet:{path:"fonts/Wellfleet",file:{"Wellfleet-Regular.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Wellfleet';font-style: normal;font-weight: 400;src: url(fonts/Wellfleet/Wellfleet-Regular.woff) format('woff');}"},"Nanum Gothic":{path:"fonts/NanumGothic",file:{"NanumGothic-Regular.woff":"application/font-woff","NanumGothic-Bold.woff":"application/font-woff"},css:"@font-face {font-family: 'Nanum Gothic';font-style: normal;font-weight: 400;src: url(fonts/NanumGothic/NanumGothic-Regular.woff) format('woff');}\n@font-face {font-family: 'Nanum Gothic';font-style: normal;font-weight: 700;src: url(fonts/NanumGothic/NanumGothic-Bold.woff) format('woff');}"},"Nanum Gothic EB":{path:"fonts/NanumGothicEB",file:{"NanumGothic-ExtraBold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Nanum Gothic EB';font-style: normal;font-weight: 800;src: url(fonts/NanumGothicEB/NanumGothic-ExtraBold.woff) format('woff');}"},"Nanum Myeongjo":{path:"fonts/NanumMyeongjo",file:{"NanumMyeongjo-Regular.woff":"application/font-woff","NanumMyeongjo-Bold.woff":"application/font-woff"},css:"@font-face {font-family: 'Nanum Myeongjo';font-style: normal;font-weight: 400;src: url(fonts/NanumMyeongjo/NanumMyeongjo-Regular.woff) format('woff');}\n@font-face {font-family: 'Nanum Myeongjo';font-style: normal;font-weight: 700;src: url(fonts/NanumMyeongjo/NanumMyeongjo-ExtraBold.woff) format('woff');}"},"Nanum Pen Script":{path:"fonts/NanumPen",file:{"NanumPen-Regular.woff":"application/font-woff"},css:"@font-face {font-family: 'Nanum Pen Script';font-style: normal;font-weight: 400;src: url(fonts/NanumPen/NanumPen-Regular.woff) format('woff');}"},"Nanum Square":{path:"fonts/NanumSquare",file:{"NanumSquare-Regular.woff":"application/font-woff","NanumSquare-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Nanum Square';font-style: normal;font-weight: 400;src: url(fonts/NanumSquare/NanumSquare-Regular.woff) format('woff');}\n@font-face {font-family: 'Nanum Square';font-style: normal;font-weight: 700;src: url(fonts/NanumSquare/NanumSquare-Bold.woff) format('woff');}"},"Nanum Square EB":{path:"fonts/NanumSquareEB",file:{"NanumSquare-ExtraBold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Nanum Square EB';font-style: normal;font-weight: 800;src: url(fonts/NanumSquareEB/NanumSquare-ExtraBold.woff) format('woff');}"},"Noto Sans KR":{path:"fonts/NotoSansKR",file:{"NotoSansKR-Regular.woff":"application/font-woff","NotoSansKR-Bold.woff":"application/font-woff","OFL.txt":"text/plain"},css:"@font-face {font-family: 'Noto Sans KR';font-style: normal;font-weight: 400;src: url(fonts/NotoSansKR/NotoSansKR-Regular.woff) format('woff');}\n@font-face {font-family: 'Noto Sans KR';font-style: normal;font-weight: 700;src: url(fonts/NotoSansKR/NotoSansKR-Bold.woff) format('woff');}"},"KoPub Dotum":{path:"fonts/KoPubDotum",file:{"KoPubDotum-Regular.woff":"application/font-woff","KoPubDotum-Bold.woff":"application/font-woff"},css:"@font-face {font-family: 'KoPub Dotum';font-style: normal;font-weight: 400;src: url(fonts/KoPubDotum/KoPubDotum-Regular.woff) format('woff');}\n@font-face {font-family: 'KoPub Dotum';font-style: normal;font-weight: 700;src: url(fonts/KoPubDotum/KoPubDotum-Bold.woff) format('woff');}"},"KoPub Batang":{path:"fonts/KoPubBatang",file:{"KoPubBatang-Regular.woff":"application/font-woff","KoPubBatang-Bold.woff":"application/font-woff"},css:"@font-face {font-family: 'KoPub Batang';font-style: normal;font-weight: 400;src: url(fonts/KoPubBatang/KoPubBatang-Regular.woff) format('woff');}\n@font-face {font-family: 'KoPub Batang';font-style: normal;font-weight: 700;src: url(fonts/KoPubBatang/KoPubBatang-Bold.woff) format('woff');}"},"SangSang Ant":{path:"fonts/SangSangAnt",file:{"SangSangAnt.woff":"application/font-woff","LICENSE.txt":"text/plain"},css:"@font-face {font-family: 'SangSang Ant';font-style: normal;font-weight: 400;src: url(fonts/SangSangAnt/SangSangAnt.woff) format('woff');}"},"SangSang FlowerRoad":{path:"fonts/SangSangFlowerRoad",file:{"SangSangFlowerRoad.woff":"application/font-woff","LICENSE.txt":"text/plain"},css:"@font-face {font-family: 'SangSang FlowerRoad';font-style: normal;font-weight: 400;src: url(fonts/SangSangFlowerRoad/SangSangFlowerRoad.woff) format('woff');}"},"SangSang Shinb7":{path:"fonts/SangSangShinb7",file:{"SangSangShinb7.woff":"application/font-woff","LICENSE.txt":"text/plain"},css:"@font-face {font-family: 'SangSang Shinb7';font-style: normal;font-weight: 400;src: url(fonts/SangSangShinb7/SangSangShinb7.woff) format('woff');}"}},krsCExe.IStub_getFonts=function(o,t){var f={action:"replace"};f.fonts=[{title:"Amiri",face:"Amiri",type:"dir",path:"DB/abr/fonts/Amiri/font.css",preview:"DB/abr/imgs/fonts/amiri.png"},{title:"Archivo Black",face:"Archivo Black",noBold:!0,type:"dir",path:"DB/abr/fonts/ArchivoBlack/font.css",preview:"DB/abr/imgs/fonts/archivo_black.png"},{title:"Arial",face:"Arial",type:"system",preview:"DB/abr/imgs/fonts/5.png"},{title:"Average Sans",face:"Average Sans",noBold:!0,type:"dir",path:"DB/abr/fonts/AverageSans/font.css",preview:"DB/abr/imgs/fonts/average_sans.png"},{title:"Bevan",face:"Bevan",noBold:!0,type:"dir",path:"DB/abr/fonts/Bevan/font.css",preview:"DB/abr/imgs/fonts/bevan.png"},{title:"Bubblegum Sans",face:"Bubblegum Sans",noBold:!0,type:"dir",path:"DB/abr/fonts/BubblegumSans/font.css",preview:"DB/abr/imgs/fonts/bubblegum_sans.png"},{title:"Courier New",face:"Courier New",type:"system",preview:"DB/abr/imgs/fonts/8.png"},{title:"Crimson Text",face:"Crimson Text",type:"dir",path:"DB/abr/fonts/CrimsonText/font.css",preview:"DB/abr/imgs/fonts/crimson_text.png"},{title:"Droid Serif",face:"Droid Serif",type:"dir",path:"DB/abr/fonts/DroidSerif/font.css",preview:"DB/abr/imgs/fonts/droid_serif.png"},{title:"Faustina",face:"Faustina",type:"dir",path:"DB/abr/fonts/Faustina/font.css",preview:"DB/abr/imgs/fonts/faustina.png"},{title:"Fredoka One",height:1.3,face:"Fredoka One",noBold:!0,type:"dir",path:"DB/abr/fonts/FredokaOne/font.css",preview:"DB/abr/imgs/fonts/fredoka_one.png"},{title:"Lato",face:"Lato",type:"dir",path:"DB/abr/fonts/Lato/font.css",preview:"DB/abr/imgs/fonts/lato.png"},{title:"Lora",face:"Lora",type:"dir",path:"DB/abr/fonts/Lora/font.css",preview:"DB/abr/imgs/fonts/lora.png"},{title:"Martel",face:"Martel",type:"dir",path:"DB/abr/fonts/Martel/font.css",preview:"DB/abr/imgs/fonts/martel.png"},{title:"Montserrat",face:"Montserrat",type:"dir",path:"DB/abr/fonts/Montserrat/font.css",preview:"DB/abr/imgs/fonts/montserrat.png"},{title:"Muli",face:"Muli",type:"dir",path:"DB/abr/fonts/Muli/font.css",preview:"DB/abr/imgs/fonts/muli.png"},{title:"Muli ExtraBold",face:"Muli EB",noBold:!0,type:"dir",path:"DB/abr/fonts/MuliEB/font.css",preview:"DB/abr/imgs/fonts/muli_eb.png"},{title:"Noto Sans",height:1.3,face:"Noto Sans",type:"dir",path:"DB/abr/fonts/NotoSans/font.css",preview:"DB/abr/imgs/fonts/noto_sans.png"},{title:"Nunito",face:"Nunito",type:"dir",path:"DB/abr/fonts/Nunito/font.css",preview:"DB/abr/imgs/fonts/nunito.png"},{title:"Open Sans",face:"Open Sans",type:"dir",path:"DB/abr/fonts/OpenSans/font.css",preview:"DB/abr/imgs/fonts/10.png"},{title:"Patrick Hand",height:1.3,face:"Patrick Hand",noBold:!0,type:"dir",path:"DB/abr/fonts/PatrickHand/font.css",preview:"DB/abr/imgs/fonts/patrick_hand.png"},{title:"PT Serif",face:"PT Serif",type:"dir",path:"DB/abr/fonts/PTSerif/font.css",preview:"DB/abr/imgs/fonts/pt_serif.png"},{title:"Roboto",face:"Roboto",type:"dir",path:"DB/abr/fonts/Roboto/font.css",preview:"DB/abr/imgs/fonts/roboto.png"},{title:"Roboto Slab",face:"Roboto Slab",type:"dir",path:"DB/abr/fonts/RobotoSlab/font.css",preview:"DB/abr/imgs/fonts/roboto_slab.png"},{title:"Taviraj",face:"Taviraj",type:"dir",path:"DB/abr/fonts/Taviraj/font.css",preview:"DB/abr/imgs/fonts/taviraj.png"},{title:"Trirong",face:"Trirong",type:"dir",path:"DB/abr/fonts/Trirong/font.css",preview:"DB/abr/imgs/fonts/trirong.png"},{title:"Varela Round",height:1.3,face:"Varela Round",noBold:!0,type:"dir",path:"DB/abr/fonts/VarelaRound/font.css",preview:"DB/abr/imgs/fonts/verela_round.png"},{title:"Wellfleet",height:1.3,face:"Wellfleet",noBold:!0,type:"dir",path:"DB/abr/fonts/Wellfleet/font.css",preview:"DB/abr/imgs/fonts/wellfleet.png"},{title:"나눔 고딕",height:1.3,ln:"ko",face:"Nanum Gothic",type:"dir",path:"DB/abr/fonts/NanumGothic/font.css",preview:"DB/abr/imgs/fonts/1.png"},{title:"나눔 고딕 ExtraBold",height:1.3,ln:"ko",face:"Nanum Gothic EB",noBold:!0,type:"dir",path:"DB/abr/fonts/NanumGothicEB/font.css",preview:"DB/abr/imgs/fonts/nanumgothic_eb.png"},{title:"나눔 명조",height:1.3,ln:"ko",face:"Nanum Myeongjo",type:"dir",path:"DB/abr/fonts/NanumMyeongjo/font.css",preview:"DB/abr/imgs/fonts/2.png"},{title:"나눔 스퀘어",height:1.3,ln:"ko",face:"Nanum Square",type:"dir",path:"DB/abr/fonts/NanumSquare/font.css",preview:"DB/abr/imgs/fonts/NanumSquare.png"},{title:"나눔 스퀘어 ExtraBold",height:1.3,ln:"ko",face:"Nanum Square EB",noBold:!0,type:"dir",path:"DB/abr/fonts/NanumSquareEB/font.css",preview:"DB/abr/imgs/fonts/NanumSquareEB.png"},{title:"나눔 펜글씨",height:1.1,noBold:!0,ln:"ko",face:"Nanum Pen Script",type:"dir",path:"DB/abr/fonts/NanumPen/font.css",preview:"DB/abr/imgs/fonts/3.png"},{title:"본 고딕",height:1.3,ln:"ko",face:"Noto Sans KR",type:"dir",path:"DB/abr/fonts/NotoSansKR/font.css",preview:"DB/abr/imgs/fonts/notosanskr.png"},{title:"개미똥꾸멍",noBold:!0,ln:"ko",face:"SangSang Ant",type:"dir",path:"DB/abr/fonts/SangSangAnt/font.css",preview:"DB/abr/imgs/fonts/SangSangAnt.png"},{title:"꽃길",noBold:!0,ln:"ko",face:"SangSang FlowerRoad",type:"dir",path:"DB/abr/fonts/SangSangFlowerRoad/font.css",preview:"DB/abr/imgs/fonts/SangSangFlowerRoad.png"},{title:"신비는일곱살",noBold:!0,ln:"ko",face:"SangSang Shinb7",type:"dir",path:"DB/abr/fonts/SangSangShinb7/font.css",preview:"DB/abr/imgs/fonts/SangSangShinb7.png"},{title:"KoPub 돋움체",height:1.3,ln:"ko",face:"KoPub Dotum",type:"dir",path:"DB/abr/fonts/KoPubDotum/font.css",preview:"DB/abr/imgs/fonts/kopubdotum.png"},{title:"KoPub 바탕체",height:1.3,ln:"ko",face:"KoPub Batang",type:"dir",path:"DB/abr/fonts/KoPubBatang/font.css",preview:"DB/abr/imgs/fonts/kopubbatang.png"}];var n=apn.CExe.IStub_getFonts.call(this,o,t);if(n&&n.fonts&&n.fonts.length)for(var a=0;a<n.fonts.length;a++)f.fonts.push(n.fonts[a]);return f};
krsCBook=function(e,t,r,a){bx.inClassing||(a=a||{},a.preloadAsset={},a.noScreenFix=!0,a.noResize=!0,a.noLayout=!0,a.noDynamicFontLoad2=!0,a.runPerPage=!0,a.CExeBookCore={pageNoReset:!0,noEffect:!0,noTransition:!0},apn.CExeBookCore.call(this,e,t,r,a))},bx.$Inherit(krsCBook,apn.CExeBookCore),krsCBook.log=function(e,t){var r=document.getElementById("krsCBook$log");r||(r=document.createElement("div"),r.id="krsCBook$log",r.style.cssText="position:absolute;left:1px;top:1px;z-index:99999999999;background-color:#ffff00;",document.body.appendChild(r)),t?r.innerHTML+="<br/>"+e:r.innerHTML=e+" | "+document.body.offsetWidth},krsCBook.prototype.onGestureCoordTransformX=function(e,t){return!this.isInFullScreenByWidget()&&window.parent&&void 0!==parent.ZOOMVALUE&&parent.ZOOMVALUE!=1/0?e*(1/parent.ZOOMVALUE):this.stretchSX(e)},krsCBook.prototype.onGestureCoordTransformY=function(e,t){return!this.isInFullScreenByWidget()&&window.parent&&void 0!==parent.ZOOMVALUE&&parent.ZOOMVALUE!=1/0?t*(1/parent.ZOOMVALUE):this.stretchSY(t)},krsCBook.prototype.onGestureEventTransform=krsCExe.prototype.onGestureEventTransform,krsCBook.IStub_pageSelectionList=apn.CExeBookCore.IStub_pageSelectionList,krsCBook.prototype.ISub_sptGetInfo=function(){function e(e){var t;return!!(e&&e.properties&&e.properties.attrs&&e.properties.attrs.krsAI&&(t=e.properties.attrs.krsAT)&&"<"!=t[0])&&1}function t(e){return!!(e&&e.properties&&e.properties.attrs&&bx.$checkNaN(parseInt(e.properties.attrs.krsAItN)))&&1}function r(e,r,a,o){var s,n,i,p={id:r,value:"",type:a,result:"F",item:[]},d=apx.searchWidgets(l.project.pages[l.getCurPageID()],1,"abr.krs.wgt.qmeta",o),u=[];if(d[0])for(n=e.wgtGetProperty(d[0],"cfg").as,i=0;i<n.length;i++)(n[i].t||g[a].noAnswer)&&u.push(n[i].t.trim());if(!g[a].noAnswer&&!u.length)return e.log(o,"정답이 지정되지 않아 평가 결과를 처리할 수 없습니다. 평가문제ID="+r),p;if(1==u.length)p.value=u[0];else for(i=0;i<u.length;i++)p.value+="<answer>"+u[i]+"</answer>";if(g[a].choice){var c=apx.searchWidgets(l.project.pages[l.getCurPageID()],1,"abr.krs.wgt.qchoice",o);if(g[a].single)for(var k=0;k<c.length;k++)"tab"==e.wgtGetProperty(c[k],"selectType")?(s={wgtId:c[k],type:"choice"},s.value=e.wgtGetProperty(c[k],"local").v.trim(),"disabled"==e.wgtGetProperty(c[k],"apxState")?s.value==u[0]?(s.result="T",p.result="T"):s.result="F":s.value==u[0]&&(s.result="A"),p.item.push(s)):e.log(c[k],"'단일선택형'이 아닌 항목이 '단일선택형' 평가 문항에 포함되어 있습니다. 문제ID="+r);else{for(var b=0,k=0;k<c.length;k++)"check"==e.wgtGetProperty(c[k],"selectType")?(s={wgtId:c[k],type:"choice"},s.value=e.wgtGetProperty(c[k],"local").v.trim(),"checked"==e.wgtGetProperty(c[k],"apxState")?u.indexOf(s.value)!=-1?(s.result="T",b++):s.result="F":u.indexOf(s.value)!=-1&&(s.result="A"),p.item.push(s)):e.log(c[k],"'다중선택형'이 아닌 항목이 '다중선택형' 평가 문항에 포함되어 있습니다. 평가문제ID="+r);b==c.length&&(p.result="T")}}else{var f,c=apx.searchWidgets(l.project.pages[l.getCurPageID()],7,t,o),b=0;if(!g[a].noAnswer&&u.length!=c.length)return e.log(d[0],"입력 항목의 개수와 답안의 개수가 일치하지 않습니다. 평가문제ID="+r),p;c.sort(function(t,r){return bx.$checkNaN(parseInt(e.wgtGetProperty(t,"krsAItN")))-bx.$checkNaN(parseInt(e.wgtGetProperty(r,"krsAItN")))});for(var k=0;k<c.length;k++)s={wgtId:c[k],type:"fillIn"},f=(e.sptWgtGetProp(s.wgtId,"value")||"").trim(),u[k]&&f==u[k]?(s.result="T",b++):g[a].noAnswer&&f&&!u[k]?b++:s.result="F",s.value=u[k],p.item.push(s);b==c.length&&(p.result="T")}return p}function a(e,r,a){function o(t,r){var a=e.wgtTag(t);e.tagPassPointerEvent(a,r)}for(var s=apx.searchWidgets(l.project.pages[l.getCurPageID()],1,"abr.krs.wgt.qchoice",r),n=apx.searchWidgets(l.project.pages[l.getCurPageID()],7,t,r),i=0;i<s.length;i++)o(s[i],a);for(i=0;i<n.length;i++)o(n[i],a)}function o(e,r){for(var a=apx.searchWidgets(l.project.pages[l.getCurPageID()],1,"abr.krs.wgt.qchoice",r),o=apx.searchWidgets(l.project.pages[l.getCurPageID()],7,t,r),s=0;s<a.length;s++)e.wgtSetProperty(a[s],"apxState","normal");for(s=0;s<o.length;s++)e.sptWgtSetProp(o[s],"value","")}function s(t,r){for(var a,o=apx.searchWidgets(t.screen,7,e),s={},n=0;n<o.length;n++)a=t.screen.objects[o[n]].create.data,s[a.properties.attrs.krsAI]={oId:o[n],qType:a.properties.attrs.krsAT};var i={};if(void 0===r)for(var n in s)i[n]=s[n];else if(r instanceof Array)for(var n=0;n<r.length;n++)s[r[n]]&&(i[r[n]]=s[r[n]]);else s[r]&&(i[r]=s[r]);return i}function n(e,t){var a=s(e,t),o=[];for(var n in a)o.push(r(e,n,a[n].qType,a[n].oId));return o}function i(e,t){if(t){var r,n,i=s(e,t.qId);"end"==t.action?r=!0:"resume"==t.action?r=!1:"restart"==t.action&&(n=!0,r=!1);for(var p in i)n===!0&&o(e,i[p].oId),r!==!0&&r!==!1||a(e,i[p].oId,r)}}function p(e,t){if(t&&t.result&&t.result.length)for(var r=0;r<t.result.length;r++)window.DTCaliperSensor&&DTCaliperSensor.fire&&DTCaliperSensor.fire({correct:"F"!=t.result[r].result,itemObject:apn.CExe.getElementByAttr("assessmentItem","data-qid",t.result[r].id),value:t.result[r].value})}var l=this,g={singleChoice:{single:!0,choice:!0},multipleChoice:{choice:!0},trueFalse:{single:!0,choice:!0},fillInTheBlank:{},essay:{noAnswer:!0}},d=apn.CExe.prototype.ISub_sptGetInfo.call(this);return d.tstGetResult={api:n,help:{param:"undefined|AssessID|[AssessID,...]",help:"평가 문제의 결과를 Return합니다. AssessID가 지정되지 않으면 전체를 Retrun합니다.\nReturn Array"}},d.tstControl={api:i,help:{param:"{action:'end'|'resume'|'restart',qId:undefined|AssessID|[AssessID,...]}",help:"평가를 종료, 재개 및 재시작합니다. 'qId'를 지정하면 대상 문제를 선택할 수 있습니다."}},d.tstReport={api:p,help:{param:"Array",help:"exe.run('tstGetResult')의 결과를 그대로 입력으로하여 호출하면 서버로 결과를 전송합니다."}},d},krsCBook.prototype.IStub_setup=function(e){function t(){eduLib.edtInputApplyAll(e,i.tagTab2),eduLib.edtInputApplyAll(e,i.tagTab3);for(var t=0;t<a.krsCBook.link.list.length;t++)a.krsCBook.link.list[t].apxIndex||(a.krsCBook.link.list[t].apxIndex=a.krsCBook.link.apxIndex++);e.save(),e.onExeDataChanged(),p.clearOnSetup()}function r(){for(var e in l)l[e]&&(this.id==e?(i[e].style.display="block",i.tagTab.$$(e).style.borderStyle="solid solid none solid"):(i[e].style.display="none",i.tagTab.$$(e).style.borderStyle="none none solid none"));krsCBook._uiLastSetupTab=this.id}if(e&&e.getData()){var a=apn.Project.getLayout(e.getData()).property;a.krsCBook=a.krsCBook||{},a.krsCBook.link=a.krsCBook.link||{list:[{T:"제목",L:""}],apxIndex:1},a.krsCBook.txtSelOnlyBook=a.krsCBook.txtSelOnlyBook||"";for(var o=apn.Project.publishHTML(e.getData(),{preview:!0}),s=[],n=0;n<o.length;n++)s.push({txt:o[n]});var i,p=this,l={tagTab1:!0,tagTab2:!0,tagTab3:!0},g=apn.CExe.GL({ko:"추가 설정",en:"Setup properties"});window.asui&&asui.MENU&&asui.MENU.EXE_CFG&&(g=asui.MENU.EXE_CFG),(i=e.dlgDoModal(Math.floor(.75*bx.UX.width),Math.floor(.9*bx.UX.height),t,void 0,{title:g}))&&(i.tagTab=i.$TAG("div",{style:"position:relative;width:100%;height:26px;padding-bottom:14px;"}),i.tagTab.innerHTML='<span id="tagTab2" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">교과서 설정</span><span id="tagTab1" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">페이지 텍스트 미리보기</span><span id="tagTab3" style="float:left;padding:2px 12px 2px 12px;border:solid 1px #a8a8a8;color:#6f6f6f;">'+apn.CExe.GL({ko:"추가모듈",en:"Additional Module"})+'</span><span id="tagBlank" style="float:left;padding:2px 0 2px 0;border-bottom:solid 1px #a8a8a8;width:100px;">&nbsp;</span>',i.tagTab.$$("tagTab1").onclick=i.tagTab.$$("tagTab2").onclick=i.tagTab.$$("tagTab3").onclick=r,i.tagTab1=i.$TAG("div",{style:"width:100%;height:"+(i.contentHeight-40)+"px"}),i.tagTab2=i.$TAG("div",{style:"width:100%;height:"+(i.contentHeight-40)+"px"}),i.tagTab3=i.$TAG("div",{style:"width:100%;height:"+(i.contentHeight-40)+"px"}),eduLib.edtInputAdd(e,i.tagTab1,{type:"table",value:s,options:{},td:[{type:"text",key:"txt",multiline:!0,readonly:!0}],join:!0}),eduLib.edtInputAdd(e,i.tagTab2,{type:"title",title:"텍스트 선택/하이라이트"}),eduLib.edtInputAdd(e,i.tagTab2,{type:"select",title:"본문(HTML Container)에 대해서만 텍스트 선택 허용",key:"txtSelOnlyBook",value:a.krsCBook,options:[{title:apn.CExe.GL({ko:"예",en:"Yes"}),value:"Y"},{title:apn.CExe.GL({ko:"아니오",en:"No"}),value:""}],join:!0}),eduLib.edtInputAdd(e,i.tagTab2,{type:"space"}),eduLib.edtInputAdd(e,i.tagTab2,{type:"title",title:"로딩 절차 제어"}),eduLib.edtInputAdd(e,i.tagTab2,{type:"select",title:"본문(HTML Container)만 로딩하여 사용함",key:"loadOnlyBook",value:a.krsCBook,options:[{title:apn.CExe.GL({ko:"예",en:"Yes"}),value:"Y"},{title:apn.CExe.GL({ko:"아니오",en:"No"}),value:""}],join:!0}),eduLib.edtInputAdd(e,i.tagTab2,{type:"space"}),this.edtSetupLNG(e,i.tagTab2,a,{ln:!0}),eduLib.edtInputAdd(e,i.tagTab2,{type:"space"}),eduLib.edtInputAdd(e,i.tagTab2,{type:"title",title:"팝업컨텐츠/웹사이트 연결정보"}),eduLib.edtInputAdd(e,i.tagTab2,{type:"table",value:a.krsCBook.link.list,options:{th:["관리제목",{title:"컨텐츠 상대경로 또는 웹사이트 주소 [?]",comment:"예를들면, 'content1/index.html' 또는 'http://google.com'"}],add:!0,remove:!0,order:!0},td:[{type:"text",key:"T",width:"300px"},{type:"text",key:"L"}],join:!0}),this.edtSetupJs(e,i.tagTab3,a),void 0!==krsCBook._uiLastSetupTab&&i.tagTab.$$(krsCBook._uiLastSetupTab)?i.tagTab.$$(krsCBook._uiLastSetupTab).onclick():i.tagTab.$$("tagTab2").onclick(),i.tagTab.$$("tagBlank").style.width=i.clientWidth-i.tagTab.$$("tagBlank").offsetLeft-24+"px")}},krsCBook.krsTAwgts={"apn.wgt.singleText":!0,"apn.wgt.simplertxt":!0,"apn.wgt.rect":!0},krsCBook.IStub_apdAddWgtAttr=function(e,t,r){var a,o,s,n,i,p=null,l=e.pages[t].objects[r].create.data;if(l&&l.wgtID&&krsCBook.krsTAwgts[l.wgtID]||"bx.CEditorWnd.CGroup"==e.pages[t].objects[r].module){var g=apn.Project.findParentOf(e.pages[t],r,void 0,!0);g&&(g=apn.Project.findParentOf(e.pages[t],g,void 0,!0),g&&e.pages[t].objects[g].create.data&&"apn.wgt.htmlCntr"==e.pages[t].objects[g].create.data.wgtID&&(a=!0))}if("bx.CEditorWnd.CGroup"==e.pages[t].objects[r].module){var g=apn.Project.findParentOf(e.pages[t],r,void 0,!0);s=!0,n=!0}return!l||"ux.wgt.inputText"!=l.wgtID&&"ux.wgt.inputSelect"!=l.wgtID&&"ux.wgt.inputRadio"!=l.wgtID&&"ux.wgt.inputChk"!=l.wgtID||(o=!0),l&&"ux.wgt.inputText"==l.wgtID&&(i=!0),a&&(p=p||{},p.krsTA={title:apn.CExe.GL({ko:"문장순서",en:"TextOrder"}),input:[{title:apn.CExe.GL({ko:"자동",en:"Auto"}),value:""},{title:apn.CExe.GL({ko:"뒤로",en:"Behind"}),value:"B"}],add:"",color:"#2cb100"}),o&&(p=p||{},p.krsII={title:apn.CExe.GL({ko:"입력필드ID",en:"InputFieldID"}),input:"",add:"",color:"#2cb100"}),s&&(p=p||{},p.krsAT={title:apn.CExe.GL({ko:"평가태그종류",en:"AssessType"}),input:["",{title:apn.CExe.GL({ko:"단일선택형",en:"SingleChoice"}),value:"singleChoice"},{title:apn.CExe.GL({ko:"다중선택형",en:"MultipleChoice"}),value:"multipleChoice"},{title:apn.CExe.GL({ko:"진위형",en:"TrueFalse"}),value:"trueFalse"},{title:apn.CExe.GL({ko:"단답형",en:"FillIn"}),value:"fillInTheBlank"},{title:apn.CExe.GL({ko:"서술형",en:"Essay"}),value:"essay"},{title:apn.CExe.GL({ko:"[선택항목영역]",en:"[ItemBody]"}),value:"<itemBody>"}],add:"",color:"#2cb100"}),n&&(p=p||{},p.krsAI={title:apn.CExe.GL({ko:"평가문제ID",en:"AssessID"}),input:"",add:"",color:"#2cb100"}),i&&(p=p||{},p.krsAItN={title:apn.CExe.GL({ko:"평가항목",en:"AssessItem"}),input:"",type:"number",add:"",color:"#2cb100"}),l&&"apn.wgt.video"==l.wgtID&&(p=p||{},p.Control={title:"Control",input:["System","None"]}),p},krsCBook.IStub_pubProcWgtAttr=function(e,t,r){var a=null,o=e.pages[t].objects[r].create.data;return o&&o.properties&&o.properties.attrs&&o.properties.attrs.krsII&&(a={attr0:{id:o.properties.attrs.krsII}}),a},krsCBook.IStub_getConfiguration=function(e,t){return{flowModeHide:!0,itrLtpNo:!0,exeFullscreenNoController:t||"edge"==bx.HCL.DV.getBrowserType()}},krsCBook.IStub_pubOnPrePublish=function(e,t,r){function a(e){e=JSON.parse(e);for(var t,r=apn.Project.getPages(e),a=[],o=0;o<r.length;o++){t=bx.$cloneObject({},e);for(var s in t.pages)s!=r[o]&&"apn.CFlowPage"==t.pages[s].module&&(t.pages[s].objects={},t.pages[s].IJS&&delete t.pages[s].IJS,t.pages[s].SPT&&delete t.pages[s].SPT,t.pages[s].ITRs&&delete t.pages[s].ITRs);a.push(t)}return a}function o(){var o;for(var s in e.pages)for(var n in e.pages[s].objects)if((o=apn.Project.getWidgetModule(e.pages[s].objects[n].create.data))&&o.pubOnPrePublish)try{o.pubOnPrePublish(e,s,n)}catch(t){window.console&&console.error("[AspenCHK] Program error in pubOnPrePublish() of "+e.pages[s].objects[n].create.data.wgtID+"\n\n"+t)}t(r&&"apn.publish.EPUB3"==r.module?{onGetFile:a}:void 0)}function s(e,t){i++,i==n.length&&o()}var n=apn.Project.publishListFontFile(e);n.length||o();for(var i=0,p=0;p<n.length;p++)try{bx.CCanvasWnd.loadCustomFont(n[p].face,n[p].path,s,!0)}catch(e){bx.Trace.log("APN","error","Cannot load font file="+n[p].face,"CExe.LF"),s(!1,n[p].face)}},krsCBook.IStub_pubGetHEAD=krsCExe.IStub_pubGetHEAD,krsCBook.IStub_pubGetSTYLE=function(e){for(var t,r,a,o=apn.Project.getPages(e),s=[],n=0;n<o.length;n++)for(s[n]="",r=apn.Project.publishListFontFile(e,void 0,void 0,void 0,o[n]),a=0;a<r.length;a++)(t=krsCBook.fontPubInfo[r[a].face])&&(s[n]+=(s[n]?"\n":"")+t.css);return s},krsCBook.IStub_pubGetHTML=function(e,t){function r(t,r){var a;for(var o in e.pages[r].objects)if((a=e.pages[r].objects[o].create.data)&&"abr.krs.wgt.link"==a.wgtID&&"L"==a.properties.attrs.local.ty&&a.properties.attrs.local.L1==t)return!0;return!1}function a(e){var t;return!!(e&&e.properties&&e.properties.attrs&&e.properties.attrs.krsAI&&(t=e.properties.attrs.krsAT)&&"<"!=t[0])&&1}function o(e){if(e&&e.wgtID)return 1;var t;return!!(e&&e.properties&&e.properties.attrs&&(t=e.properties.attrs.krsAT)&&"<"==t[0])&&2}var s=apn.CExe.IStub_pubGetHTML.call(this,e,t);if(!t||!t.preview){var n,i,p,l=apn.Project.getPages(e),g=apn.Project.getLayout(e).property;if(g&&g.krsCBook&&g.krsCBook.link&&g.krsCBook.link.list.length){var d;for(n=0;n<l.length;n++){for(d="",i=0;i<g.krsCBook.link.list.length;i++)g.krsCBook.link.list[i].L&&r(g.krsCBook.link.list[i].apxIndex,l[n])&&(d+='<a id="krs$LN'+g.krsCBook.link.list[i].apxIndex+'" href="'+g.krsCBook.link.list[i].L+'" target="_blank"></a>');d&&(d='<div style="display:none;">'+d+"</div>",s[n]+=(s[n]?"\n\n":"")+d)}}var u,c,k,b,f,h,C,x,y,I;for(i=0;i<l.length;i++){for(k=apx.searchWidgets(e.pages[l[i]],7,a),this.IStub_pubArrangeHTML&&this.IStub_pubArrangeHTML(e,l[i],k),C="",p=0;p<k.length;p++){for(b=apx.searchWidgets(e.pages[l[i]],7,o,k[p]),this.IStub_pubArrangeHTML&&this.IStub_pubArrangeHTML(e,l[i],b),x="",u=0;u<b.length;u++)if(h=e.pages[l[i]].objects[b[u]],f=apn.Project.getWidgetModule(h.create.data))f.pubOnGetHTML&&(x+=(x?"\n":"")+(f.pubOnGetHTML(e,l[i],b[u],{noId:!0})||""));else{for(I=apx.searchWidgets(e.pages[l[i]],1,void 0,b[u]),this.IStub_pubArrangeHTML&&this.IStub_pubArrangeHTML(e,l[i],I),y="",c=0;c<I.length;c++)h=e.pages[l[i]].objects[I[c]],(f=apn.Project.getWidgetModule(h.create.data))&&f.pubOnGetHTML&&(y+=(y?"\n":"")+(f.pubOnGetHTML(e,l[i],I[c],{noId:!0})||""));y&&(x+=(x?"\n":"")+"<itemBody>"+y+"</itemBody>")}x&&(C+=(C?"\n":"")+'<assessmentItem data-qid="'+e.pages[l[i]].objects[k[p]].create.data.properties.attrs.krsAI+'" data-response-type="'+e.pages[l[i]].objects[k[p]].create.data.properties.attrs.krsAT+'">'+x+"</assessmentItem>")}C&&(s[i]+=(s[i]?"\n\n":"")+'<div style="display:none;">'+C+"</div>")}}return s},krsCBook.IStub_pubArrangeHTML=function(e,t,r){function a(r){var a,o=r;do o=apn.Project.findParentOf(e.pages[t],o,"bx.CEditorWnd.CGroup"),o&&(a=o);while(o);return a}function o(e,t){return Math.abs(e.y-t.y)<i?e.x-t.x:e.y-t.y}function s(r,a){var s=e.pages[t].objects[r].init.position,n=e.pages[t].objects[a].init.position,i=e.pages[t].objects[r].create.data&&e.pages[t].objects[r].create.data.properties?e.pages[t].objects[r].create.data.properties.attrs:void 0,p=e.pages[t].objects[a].create.data&&e.pages[t].objects[a].create.data.properties?e.pages[t].objects[a].create.data.properties.attrs:void 0;return i&&"B"==i.krsTA&&p&&"B"==p.krsTA?o(s,n):i&&"B"==i.krsTA?1:p&&"B"==p.krsTA?-1:o(s,n)}for(var n,i=6,p=[],l={},g=0;g<r.length;g++)(n=a(r[g]))?(l[n]||(p.push(n),l[n]=[]),l[n].push(r[g])):p.push(r[g]);p.sort(s);for(g in l)l[g].sort(s);for(r.length=0,g=0;g<p.length;g++)if(l[p[g]])for(var d=0;d<l[p[g]].length;d++)r.push(l[p[g]][d]);else r.push(p[g])},krsCBook.IStub_pubGetEpub3MANIFEST=function(e){function t(e,t){var r="0000000000",a=Math.floor(Math.log10(t))+1;return e+="",e.length<a&&(e=r.substring(0,a-e.length)+e),e}for(var r=apn.Project.getPages(e),a="",o={js1:"js/blux-apx-1.0.js",js2:"js/aspen-apx-1.0.js",js3:"js/lib.js",js4:"wgts/wgts.js",js5:"js/krs.boot.js"},s=0;s<r.length;s++)o["jsD"+s]="data_"+s+".js";for(s in o)a+=(a?"\n":"")+'<item id="'+s+'" href="'+o[s]+'" media-type="text/javascript"/>';var n={css1:"css/bxPageTransition.css"};for(s in n)a+=(a?"\n":"")+'<item id="'+s+'" href="'+n[s]+'" media-type="text/css"/>';for(s=0;s<r.length;s++)a+=(a?"\n":"")+'<item id="page'+(s+1)+'" href="index_'+t(s+1,r.length)+'.xhtml" media-type="application/xhtml+xml" properties="scripted"/>';var i=apn.Project.publishListAsset(e);for(s=0;s<i.length;s++)a+=(a?"\n":"")+'<item id="a'+(s+1)+'" href="'+apn.Project.mediaResolve(e,i[s],!1,!0)+'" media-type="'+apn.Project.getMediaMimeType(e,i[s])+'"/>';var p,l,g,d=apn.Project.publishListFontFile(e);for(s=0;s<d.length;s++)if(g=krsCBook.fontPubInfo[d[s].face]){a+=(a?"\n":"")+'<item id="f'+(s+1)+'" href="'+(g.path+"/font.css")+'" media-type="text/css"/>',l=1;for(p in g.file)a+=(a?"\n":"")+'<item id="f'+(s+1)+"_"+l+'" href="'+(g.path+"/"+p)+'" media-type="'+g.file[p]+'"/>',l++}var u,c,k,b;for(var f in e.pages)for(u in e.pages[f].objects)if(c=e.pages[f].objects[u],(k=apn.Project.getWidgetModule(c.create.data))&&k.pubOnGetPrerequisite)try{if((b=k.pubOnGetPrerequisite(e,f,u))&&b&&b.length)for(s=0;s<b.length;s++)a+=(a?"\n":"")+'<item id="wgtX'+(s+1)+"_"+u+f+'" href="'+b[s].url+'" media-type="'+b[s].type+'"/>'}catch(e){window.console&&console.error("Program error in pubOnGetPrerequisite() of "+c.create.data.wgtID,e)}return a},krsCBook.fontPubInfo=krsCExe.fontPubInfo,krsCBook.IStub_getFonts=krsCExe.IStub_getFonts,krsCBook.IStub_dbGetDevice=function(){return{screenSize:[{w:768,h:1024,preset:!0,icon:{w:60,h:60},grid:{w:10,h:10}},{w:800,h:1200,icon:{w:60,h:60},grid:{w:10,h:10}}]}},krsCBook.IStub_dbGetPublishModule=function(){return[{title:apn.CExe.GL({en:"To EPUB3 File...",ko:"EPUB3 File로..."}),module:"apn.publish.EPUB3"},{title:apn.CExe.GL({en:"To Backup ZIP File",ko:"Backup ZIP File로"}),op:"file_06_01"}]},krsCBook.IStub_dbIncludeWidget=function(e,t){var r={"apn.wgt.htmlCntr":!0,"apn.wgt.simplertxt":!0,"apn.wgt.image0":!0,"abr.krs.wgt.link":!0,"abr.krs.wgt.qmeta":!0,"abr.krs.wgt.qchoice":!0,"apn.wgt.image":!1,"apn.wgt.image2":!1,"apn.wgt.imageText":!1,"edu.wgt.videoPlayer":!1,"ux.wgt.YT":!1};return r[e]},krsCBook.IStub_srcFileCheck=function(e){var t=apn.Project.getLayout(e).property;if(!t.krsCBook||!t.krsCBook.ver){for(var r,a,o,s,n,i,p,l=apn.Project.getPages(e),g=0;g<l.length;g++)for(a=apx.searchWidgets(e.pages[l[g]],1,"apn.wgt.htmlCntr"),r=0;r<a.length;r++)i=e.pages[l[g]].objects[a[r]].layout.children[0],e.pages[l[g]].objects[i].layout&&e.pages[l[g]].objects[i].layout.children&&(p=e.pages[l[g]].objects[i].layout.children[0],p&&(o=e.pages[l[g]].objects[p].create,n=e.pages[l[g]].objects[p].init,1e8==o.zIndex&&16777736==o.type&&o.data&&"apn.wgt.image0"==o.data.wgtID&&(o.data.styles.visibility=!1,s=e.pages[l[g]].objects[a[r]].create,s.data=s.data||{},s.data.properties=s.data.properties||{},s.data.properties.attrs=s.data.properties.attrs||{},s.data.properties.attrs.cfg=s.data.properties.attrs.cfg||{},s.data.properties.attrs.cfg.bg=s.data.properties.attrs.cfg.bg||{},s.data.properties.attrs.cfg.bg.mediaID=o.data.styles.mediaID,s.data.properties.attrs.cfg.bg.x=n.position.x,s.data.properties.attrs.cfg.bg.y=n.position.y,s.data.properties.attrs.cfg.bg.w=n.shape.w,s.data.properties.attrs.cfg.bg.h=n.shape.h))),e.pages[l[g]].objects[a[r]].module="apn.CNoneClipLayerContainer";t.krsCBook=t.krsCBook||{},t.krsCBook.ver=2}if(!t.krsCBook||!t.krsCBook.verFont){var r,d;for(var g in e.pages)for(r in e.pages[g].objects)e.pages[g].objects[r].create.data&&e.pages[g].objects[r].create.data.styles&&(d=apn.Project.resolveStyle(e,"font",e.pages[g].objects[r].create.data.styles.font),"Georgia"==d&&(e.pages[g].objects[r].create.data.styles.font="Amiri"),"Times New Roman"==d&&(e.pages[g].objects[r].create.data.styles.font="Amiri"),"Verdana"==d&&(e.pages[g].objects[r].create.data.styles.font="Roboto"));t.krsCBook=t.krsCBook||{},t.krsCBook.verFont=2}},krsCBook.prototype.ISub_edtOnPostDrawObject=function(e,t,r,a,o,s,n){var i;if(t.data&&t.data.properties&&t.data.properties.attrs&&"B"==t.data.properties.attrs.krsTA)i="rgba(255,0,0,0.4)";else if(t.getParent())for(var p=t.getParent();p&&"bx.CEditorWnd.CGroup"==p.module;){if(p.data&&p.data.properties&&p.data.properties.attrs&&"B"==p.data.properties.attrs.krsTA){i="rgba(255,0,0,0.4)";break}p=p.getParent()}if(i){if(!t.style.lineWidth||!t.style.strokeStyle){t.noClipText=!0;var l=r.strokeStyle,g=r.lineWidth;r.strokeStyle=i,r.lineWidth=1,r.strokeRect(a,o,s,n),r.strokeStyle=l,r.lineWidth=g}}else apn.CExeBookCore.prototype.ISub_edtOnPostDrawObject.call(this,e,t,r,a,o,s,n)},krsCBookT1=krsCBook,krsCBookT2=krsCBook,krsCBookT3=krsCBook;
function onBxRun(){if(window.apnExeFile){apn.widgetMap&&apn.widgetMap();var e=apn.Project.getExeModule(apnExeFile),o=new e(null,(void 0),(void 0),{standAlone:!0,eventSystem:2}).create();if(window.apnExe=o,o.init(!0),o.load(apnExeFile),bx.$getParamFromURL(location.href,"APXPGTTL")){var t=decodeURIComponent(bx.$getParamFromURL(location.href,"APXPGTTL"));o.runByTitle(t)}else if(bx.$getParamFromURL(location.href,"APXPGIDX")){var t=decodeURIComponent(bx.$getParamFromURL(location.href,"APXPGIDX"));o.runByIndex(bx.$checkNaN(parseInt(t)))}else o.run(apnExeEpubStartPgIdx||0)}else alert("[Aspen] Cannot find data file!")}function apxLoad(e){function o(){var o={resize:"resize"};e&&"plain"==e.mode&&(o={type:bx.UX.SYS_CONTEXT_MENU|bx.UX.SYS_SELECTABLE|bx.UX.SYS_NO_VIEWPORT},e.noSelectable&&(document.body.style.userSelect="none",document.body.style.msUserSelect="none",document.body.style.mozUserSelect="none",document.body.style.webkitUserSelect="none"),bx.HCL.hideScrollBar=function(){}),bx.Loader.load({UXoptions:o})}e&&void 0!==e.pgIdx&&!isNaN(parseInt(e.pgIdx))&&(apnExeEpubStartPgIdx=parseInt(e.pgIdx)),window.apnExeFile&&apnExeFile.layouts[1].property&&apnExeFile.layouts[1].property.CExe&&apnExeFile.layouts[1].property.CExe.splash&&(apnExeFile.layouts[1].property.CExe.splash.bgClr||apnExeFile.layouts[1].property.CExe.splash.img.mediaID)?(apnExeFile.layouts[1].property.CExe.splash.bgClr&&(document.body.style.backgroundColor=apnExeFile.layouts[1].property.CExe.splash.bgClr),apnExeFile.layouts[1].property.CExe.splash.img.mediaID&&(document.body.style.backgroundImage="url("+apnExeFile.layouts[1].property.CExe.splash.img.mediaID+")",document.body.style.backgroundPosition="center center",document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundSize=(apnExeFile.layouts[1].property.CExe.splash.w||40)+"% auto",document.body.style.backgroundAttachment="fixed"),!window.navigator||navigator.userAgent.toLowerCase().indexOf("msie")==-1&&navigator.userAgent.toLowerCase().indexOf("trident")==-1?setTimeout(o,0):setTimeout(o,150)):o()}var apnExeEpubStartPgIdx;